"use strict";(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[7732],{87115:(e,t,n)=>{n.d(t,{A:()=>N});var a=n(23029),r=n(92901),l=n(56822),o=n(53954),i=n(85501),s=n(38102),c=n(92516),u=n.n(c),m=n(5556),d=n.n(m),p=n(96540),h=n(81057),A=n(53196),f=n(23848),v=n(1489),E=n(27041),g=n(3487),C=n(16767),b=n.n(C);function w(e,t,n){return t=(0,o.A)(t),(0,l.A)(e,y()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var I=function(e){function t(){return(0,a.A)(this,t),w(this,t,arguments)}return(0,i.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.community,n=e.defaultLogo,a=e.className,r=e.showUploadBtn,l=t.links.self_html.replace("communities","collections"),o=b().generate(t.slug);return p.createElement(A.default,{id:"InvenioCommunities.CarouselItem.layout",community:t,defaultLogo:n,className:a},p.createElement(f.A,{className:"carousel flex align-items-center ".concat(a),key:t.id},p.createElement(h.Image,{size:"small",src:t.links.logo,fallbackSrc:o.toDataUri()}),p.createElement(f.A.Content,null,p.createElement(f.A.Header,{as:v.A,stackable:!0,className:"rel-pb-1"},p.createElement(v.A.Column,{computer:"10",tablet:"16",className:"pl-0 pb-0"},p.createElement(E.A,{as:"a",size:"medium",href:l},t.metadata.title)),p.createElement(v.A.Column,{computer:"6",tablet:"16",className:"buttons pl-0 pb-0"},p.createElement(g.A,{size:"mini",href:l,content:s.M.t("Browse"),className:"browse-btn"}),r&&p.createElement(g.A,{size:"mini",positive:!0,href:"/uploads/new?community=".concat(t.slug),content:s.M.t("Contribute"),className:"contribute-btn"}))),p.createElement(f.A.Description,{content:u()(t.metadata.description,{length:300})}))))}}])}(p.Component);I.propTypes={community:d().object.isRequired,defaultLogo:d().string.isRequired,className:d().string,showUploadBtn:d().bool},I.defaultProps={className:"",showUploadBtn:!0};const N=A.default.component("InvenioCommunities.CarouselItem",I)},92287:(e,t,n)=>{n.d(t,{A:()=>B});var a=n(10467),r=n(23029),l=n(92901),o=n(56822),i=n(53954),s=n(85501),c=n(64467),u=n(54756),m=n.n(u),d=n(38102),p=n(62193),h=n.n(p),A=n(5556),f=n.n(A),v=n(96540),E=n(81057),g=n(53196),C=n(27089),b=n(1489),w=n(27041),y=n(23848),I=n(24941),N=n(76217),x=n(80124),k=n(87115);function P(e,t,n){return t=(0,i.A)(t),(0,o.A)(e,D()?Reflect.construct(t,n||[],(0,i.A)(e).constructor):t.apply(e,n))}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}var S=function(e){function t(e){var n;return(0,r.A)(this,t),n=P(this,t,[e]),(0,c.A)(n,"getDataIndex",(function(e){var t=n.props.itemsPerPage,a=n.state.data.hits,r=e*parseInt(t);return r>a.length-1?0:r<0?a.length-1:r})),(0,c.A)(n,"runCarousel",function(){var e=(0,a.A)(m().mark((function e(t){var a,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.activeIndex,r=t<a?"right":"left",e.next=4,n.setState({animationDirection:r});case 4:n.setState({activeIndex:n.getDataIndex(t)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.A)(n,"setCarouselTimer",(function(){var e=n.state,t=e.data.hits,a=e.activeIndex,r=n.props.intervalDelay;n.setState({carouselTimer:setInterval((function(){t&&n.runCarousel(a+1)}),r)})})),(0,c.A)(n,"stopCarousel",(function(){var e=n.state.carouselTimer;clearInterval(e)})),(0,c.A)(n,"startCarousel",(function(){n.setCarouselTimer()})),(0,c.A)(n,"fetchData",(0,a.A)(m().mark((function e(){var t,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.fetchUrl,n.cancellableFetch=(0,E.withCancel)(E.http.get(t)),e.prev=2,e.next=5,n.cancellableFetch.promise;case 5:a=e.sent,n.setState({data:a.data.hits}),n.setCarouselTimer(),n.setState({isLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),n.setState({isLoading:!1});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))),(0,c.A)(n,"renderPlaceholder",(function(){var e=n.props.title;return v.createElement(C.A,{fluid:!0,className:"rel-pt-2 rel-pb-2 ml-0-mobile mr-0-mobile"},v.createElement(b.A,{container:!0,className:"carousel-header-container"},v.createElement(b.A.Column,{width:"2"}),v.createElement(b.A.Column,{width:"12"},v.createElement(w.A,{as:"h2",className:"rel-mb-1"},e)),v.createElement(b.A.Column,{width:"2"})),v.createElement(b.A,{container:!0,className:"carousel-items-container"},v.createElement(b.A.Column,{width:"2"}),v.createElement(b.A.Column,{width:"12"},v.createElement(y.A.Group,null,v.createElement(y.A,null,v.createElement(y.A.Image,null,v.createElement(I.A,null,v.createElement(I.A.Image,{square:!0}))),v.createElement(y.A.Content,null,v.createElement(y.A.Header,{className:"mt-5 rel-mb-2"},v.createElement(I.A,null,v.createElement(I.A.Header,null,v.createElement(I.A.Line,null)))),v.createElement(y.A.Description,null,v.createElement(I.A,null,v.createElement(I.A.Paragraph,null,v.createElement(I.A.Line,null),v.createElement(I.A.Line,null),v.createElement(I.A.Line,null)))))))),v.createElement(b.A.Column,{width:"2"})))})),(0,c.A)(n,"carouselSlides",(function(){var e,t=n.state,a=t.data,r=t.activeIndex,l=n.props,o=l.defaultLogo,i=l.itemsPerPage,s=l.showUploadBtn,c=parseInt(r)+parseInt(i);return null===(e=a.hits)||void 0===e?void 0:e.slice(r,c).map((function(e){return v.createElement(k.A,{community:e,defaultLogo:o,key:e.id,showUploadBtn:s})}))})),n.state={data:{hits:[]},activeIndex:0,animationDirection:"left",carouselTimer:null,isLoading:!0},n}return(0,s.A)(t,e),(0,l.A)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){this.cancellableFetch&&this.cancellableFetch.cancel(),this.stopCarousel()}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.animationDirection,r=t.activeIndex,l=t.isLoading,o=this.props,i=o.title,s=o.animationSpeed,c=o.itemsPerPage;return v.createElement(g.default,{id:"InvenioCommunities.CommunitiesCarousel.layout",data:n,animationDirection:a,activeIndex:r,title:i,animationSpeed:s,carouselSlides:this.carouselSlides(),stopCarousel:this.stopCarousel,startCarousel:this.startCarousel,runCarousel:this.runCarousel,itemsPerPage:c},v.createElement(v.Fragment,null,l&&this.renderPlaceholder(),!l&&!h()(n.hits)&&v.createElement(C.A,{fluid:!0,className:"carousel rel-pt-2 rel-pb-2 ml-0-mobile mr-0-mobile"},v.createElement(b.A,{container:!0,className:"rel-mb-0"},v.createElement(b.A.Column,{width:"2"}),v.createElement(b.A.Column,{width:"12"},v.createElement(w.A,{as:"h2"},i)),v.createElement(b.A.Column,{width:"2"})),v.createElement(b.A,{container:!0,onFocus:this.stopCarousel,onBlur:this.startCarousel},v.createElement(b.A.Column,{width:"2",className:"pr-0",verticalAlign:"middle",textAlign:"left"},v.createElement(N.A,{className:"carousel-arrow",inverted:!0,role:"button",name:"angle left",size:"huge","aria-label":d.M.t("Previous slide"),onClick:function(){return e.runCarousel(r-1)},onKeyDown:function(t){return"Enter"===t.key&&e.runCarousel(r-1)},tabIndex:"0"})),v.createElement(b.A.Column,{width:"12"},v.createElement(x.A.Group,{as:y.A.Group,className:"flex align-items-center justify-center",duration:s,animation:"carousel-slide ".concat(a),directional:!0},this.carouselSlides())),v.createElement(b.A.Column,{width:"2",className:"pl-0",verticalAlign:"middle",textAlign:"right"},v.createElement(N.A,{className:"carousel-arrow",inverted:!0,role:"button",name:"angle right",size:"huge","aria-label":d.M.t("Next slide"),onClick:function(){return e.runCarousel(r+1)},onKeyDown:function(t){return"Enter"===t.key&&e.runCarousel(r+1)},tabIndex:"0"}))))))}}])}(v.Component);S.propTypes={title:f().string.isRequired,fetchUrl:f().string.isRequired,intervalDelay:f().number.isRequired,animationSpeed:f().number.isRequired,defaultLogo:f().string.isRequired,itemsPerPage:f().string.isRequired,showUploadBtn:f().bool},S.defaultProps={showUploadBtn:!0};const B=g.default.component("InvenioCommunities.CommunitiesCarousel",S)},27160:(e,t,n)=>{var a=n(96540),r=n(40961),l=n(53196),o=n(92287),i=document.getElementById("communities-carousel"),s=i.dataset.title,c=i.dataset.fetchUrl,u=parseInt(i.dataset.intervalDelay),m=parseInt(i.dataset.animationSpeed),d=i.dataset.defaultLogo,p=i.dataset.itemsPerPage,h=JSON.parse(i.dataset.showUploadBtn),A=l.overrideStore.getAll();r.render(a.createElement(l.OverridableContext.Provider,{value:A},a.createElement(o.A,{title:s,fetchUrl:c,intervalDelay:u,animationSpeed:m,defaultLogo:d,itemsPerPage:p,showUploadBtn:h})),i)}},e=>{e.O(0,[402,1057,7655,73,6767,6862,8102],(()=>{return t=27160,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=invenio-communities-carousel-custom.2e3ad6331e5c6922a1d4.js.map