"use strict";(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[5737],{75785:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(58168),a=r(23029),i=r(92901),o=r(56822),s=r(53954),c=r(85501),l=r(96540),u=r(53196),d=r(6549),p=r(5556),m=r.n(p);function h(e,t,r){return t=(0,s.A)(t),(0,o.A)(e,f()?Reflect.construct(t,r||[],(0,s.A)(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}var A=function(e){function t(){return(0,a.A)(this,t),h(this,t,arguments)}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,r=e.children;return l.createElement(u.default,(0,n.A)({id:"Admin.Loader.layout"},this.props),t?l.createElement(d.A,{active:!0,size:"huge",inline:"centered"}):l.createElement(l.Fragment,null,r))}}])}(l.Component);A.propTypes={isLoading:m().bool,children:m().node},A.defaultProps={isLoading:!1,children:null};const v=u.default.component("Loader",A)},11813:(e,t,r)=>{r.d(t,{Dp:()=>a.A,pw:()=>n.A,M:()=>b,aH:()=>i.A});var n=r(90462),a=r(51826),i=(r(56954),r(75785)),o=r(58168),s=r(23029),c=r(92901),l=r(56822),u=r(53954),d=r(85501),p=r(96540),m=r(27089),h=r(27041),f=r(76217),A=r(53196),v=r(5556),E=r.n(v),y=r(87229);function g(e,t,r){return t=(0,u.A)(t),(0,l.A)(e,S()?Reflect.construct(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}var R=function(e){function t(){return(0,s.A)(this,t),g(this,t,arguments)}return(0,d.A)(t,e),(0,c.A)(t,[{key:"render",value:function(){var e=this.props,t=e.errorCode,r=e.errorMessage,n=e.error,a=e.children;return p.createElement(A.default,(0,o.A)({id:"Admin.ErrorPage.layout"},this.props),n?p.createElement(m.A,{textAlign:"center",className:"error-handler"},p.createElement(h.A,{as:"h1",icon:!0},p.createElement(f.A,{name:"warning",circular:!0}),t,p.createElement(h.A.Subheader,null,r))):p.createElement(p.Fragment,null,a))}}])}(p.Component);R.propTypes={errorCode:E().string,errorMessage:E().string,error:E().bool,children:E().element},R.defaultProps={errorCode:y.M.t("Error"),errorMessage:y.M.t("Server was not able to process your request."),error:!1,children:void 0};const b=A.default.component("ErrorPage",R)},18258:(e,t,r)=>{r.d(t,{A:()=>w});var n=r(10467),a=r(23029),i=r(92901),o=r(56822),s=r(53954),c=r(85501),l=r(64467),u=r(54756),d=r.n(u),p=r(28021),m=r(5556),h=r.n(m),f=r(96540),A=r(1489),v=r(27041),E=r(3487),y=r(36713),g=r(27089),S=r(90196),R=r(20009),b=r(90972),q=r(62193),C=r.n(q),N=r(85965),O=r(11813);function k(e,t,r){return t=(0,s.A)(t),(0,o.A)(e,D()?Reflect.construct(t,r||[],(0,s.A)(e).constructor):t.apply(e,r))}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}var w=function(e){function t(e){var r;return(0,a.A)(this,t),r=k(this,t,[e]),(0,l.A)(r,"fetchData",(0,n.A)(d().mark((function e(){var t,n,a,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({loading:!0}),t=r.props,n=t.apiEndpoint,a=t.pid,i=t.requestHeaders,e.prev=2,e.next=5,S.Y.getResource(n,a,i);case 5:o=e.sent,r.setState({loading:!1,data:o.data,error:void 0}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),r.setState({error:e.t0,loading:!1});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))),(0,l.A)(r,"childrenWithData",(function(e,t){var n=r.props.children;return f.Children.map(n,(function(r){return f.isValidElement(r)?f.cloneElement(r,{data:e,columns:t}):r}))})),(0,l.A)(r,"handleDelete",(function(){var e=r.props.listUIEndpoint;window.location.href=e})),r.state={loading:!0,data:void 0,error:void 0},r}return(0,c.A)(t,e),(0,i.A)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props,t=e.title,r=e.columns,n=e.actions,a=e.apiEndpoint,i=e.idKeyPath,o=e.listUIEndpoint,s=e.resourceSchema,c=e.resourceName,l=e.displayDelete,u=e.displayEdit,d=e.uiSchema,m=this.state,h=m.loading,S=m.data,q=m.error,k=(0,N.C)(d);return f.createElement(O.aH,{isLoading:h},f.createElement(O.M,{error:!C()(q),errorCode:null===q||void 0===q?void 0:q.response.status,errorMessage:null===q||void 0===q?void 0:q.response.data},f.createElement(A.A,{stackable:!0},f.createElement(A.A.Row,{columns:"2"},f.createElement(A.A.Column,{verticalAlign:"middle"},f.createElement(v.A,{as:"h1"},t)),f.createElement(A.A.Column,{verticalAlign:"middle",floated:"right",textAlign:"right"},f.createElement(E.A.Group,{size:"tiny",className:"relaxed"},f.createElement(b.E,{title:t,resourceName:c,apiEndpoint:a,editUrl:p.Q.editView(o,S,i),actions:n,displayEdit:u,displayDelete:l,resource:S,idKeyPath:i,successCallback:this.handleDelete,listUIEndpoint:o}))))),f.createElement(y.A,null),f.createElement(g.A,{fluid:!0},f.createElement(R.A,{data:S,schema:s,uiSchema:k}),this.childrenWithData(S,r))))}}])}(f.Component);w.propTypes={actions:h().object,apiEndpoint:h().string.isRequired,columns:h().object.isRequired,displayEdit:h().bool.isRequired,displayDelete:h().bool.isRequired,pid:h().string.isRequired,title:h().string.isRequired,children:h().object,resourceName:h().string.isRequired,idKeyPath:h().string.isRequired,listUIEndpoint:h().string.isRequired,resourceSchema:h().object.isRequired,requestHeaders:h().object.isRequired,uiSchema:h().object.isRequired},w.defaultProps={actions:void 0,children:void 0}},20009:(e,t,r)=>{r.d(t,{A:()=>E});var n=r(80296),a=r(23029),i=r(92901),o=r(56822),s=r(53954),c=r(85501),l=r(5556),u=r.n(l),d=r(96540),p=r(53196),m=r(53959),h=r(56954);function f(e,t,r){return t=(0,s.A)(t),(0,o.A)(e,A()?Reflect.construct(t,r||[],(0,s.A)(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var v=function(e){function t(){return(0,a.A)(this,t),f(this,t,arguments)}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this.props,t=e.schema,r=e.data,a=e.uiSchema,i=a||t,o=Object.entries(i).map((function(e){var a=(0,n.A)(e,2),i=a[0],o=a[1],s=o.text||i;return d.createElement(m.A.Row,{key:s},d.createElement(m.A.Cell,{width:3,className:"vertical-align-top"},d.createElement("b",null,s)),d.createElement(m.A.Cell,null,d.createElement(h.A,{result:r,resourceSchema:t,property:i,fieldSchema:o})))}));return d.createElement(p.default,{id:"DetailsComponent.table"},d.createElement(m.A,{unstackable:!0},d.createElement(m.A.Body,null,o)))}}])}(d.Component);v.propTypes={data:u().object.isRequired,schema:u().object.isRequired,uiSchema:u().object.isRequired};const E=p.default.component("DetailsTable",v)},58440:(e,t,r)=>{var n,a,i,o=r(96540),s=r(40961),c=r(58156),l=r.n(c),u=r(18258),d=document.getElementById("invenio-details-config"),p=d.dataset.title,m=JSON.parse(d.dataset.fields),h=JSON.parse(d.dataset.pid),f=JSON.parse(d.dataset.resourceName),A=JSON.parse(d.dataset.displayEdit),v=JSON.parse(d.dataset.displayDelete),E=JSON.parse(d.dataset.actions),y=l()(d.dataset,"apiEndpoint"),g=JSON.parse(l()(d.dataset,"pidPath","pid")),S=d.dataset.listEndpoint,R=JSON.parse(null===(n=d.dataset)||void 0===n?void 0:n.resourceSchema),b=JSON.parse(null===(a=d.dataset)||void 0===a?void 0:a.requestHeaders),q=JSON.parse(null===(i=d.dataset)||void 0===i?void 0:i.uiConfig);d&&s.render(o.createElement(u.A,{title:p,actions:E,apiEndpoint:y,columns:m,pid:h,displayEdit:A,displayDelete:v,idKeyPath:g,resourceName:f,listUIEndpoint:S,resourceSchema:R,requestHeaders:b,uiSchema:q}),d)}},e=>{e.O(0,[402,1057,7655,6204,4903,2913],(()=>{return t=58440,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=invenio-administration-details.e365f204feb467842dfb.js.map