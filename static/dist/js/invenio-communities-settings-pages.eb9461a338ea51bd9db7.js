(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[1730],{73774:(e,t,n)=>{"use strict";var r=n(10467),a=n(23029),u=n(92901),i=n(56822),o=n(53954),c=n(85501),s=n(64467),f=n(54756),l=n.n(f),d=n(38102),m=n(17684),p=n(74354),v=n.n(p),h=n(96540),g=n(81057),b=n(80501),y=n(87395),A=n(3487),x=n(76217),E=n(4252),k=n(64483),S=n(5556),w=n.n(S),C=n(15941);function I(e,t,n){return t=(0,o.A)(t),(0,i.A)(e,M()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}var O=C.Ik({metadata:C.Ik({curation_policy:C.Yj().max(5e4,"Maximum number of characters is 50000"),page:C.Yj().max(5e4,"Maximum number of characters is 50000")})}),R=function(e){function t(){var e;(0,a.A)(this,t);for(var n=arguments.length,u=new Array(n),i=0;i<n;i++)u[i]=arguments[i];return e=I(this,t,[].concat(u)),(0,s.A)(e,"state",{error:void 0}),(0,s.A)(e,"getInitialValues",(function(){var t=e.props.community;return v()(t,{metadata:{curation_policy:"",page:""}})})),(0,s.A)(e,"setGlobalError",(function(t){e.setState({error:t})})),(0,s.A)(e,"onSubmit",function(){var t=(0,r.A)(l().mark((function t(n,r){var a,u,i,o,c,s,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.setSubmitting,u=r.setFieldError,i=e.props.community,a(!0),t.prev=3,o=new E.AM,t.next=7,o.update(i.id,n);case 7:window.location.reload(),t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(3),"UNMOUNTED"!==t.t0){t.next=14;break}return t.abrupt("return");case 14:c=(0,k.U9)(t.t0),s=c.message,f=c.errors,s&&e.setGlobalError(s),f&&f.forEach((function(e){var t=e.field,n=e.messages;return u(t,n[0])}));case 17:a(!1);case 18:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,n){return t.apply(this,arguments)}}()),e}return(0,c.A)(t,e),(0,u.A)(t,[{key:"render",value:function(){var e=this.state.error,t=this.props.community,n=void 0!==e;return h.createElement(m.Formik,{initialValues:this.getInitialValues(t),validationSchema:O,onSubmit:this.onSubmit},(function(t){var r=t.isSubmitting,a=t.isValid,u=t.handleSubmit;t.values;return h.createElement(b.A,{onSubmit:u},h.createElement(y.A,{hidden:!n,negative:!0},h.createElement(y.A.Content,null,e)),h.createElement(g.AccordionField,{includesPaths:["metadata.curation_policy"],label:d.M.t("Curation policy"),active:!0},h.createElement(g.RichInputField,{fieldPath:"metadata.curation_policy",className:"ck-height-10",fluid:!0})),h.createElement(g.AccordionField,{includesPaths:["metadata.page"],label:d.M.t("About page"),active:!0},h.createElement(g.RichInputField,{fieldPath:"metadata.page",className:"ck-height-25",fluid:!0})),h.createElement(A.A,{primary:!0,icon:!0,labelPosition:"left",loading:r,disabled:!a||r,toggle:!0,type:"submit"},h.createElement(x.A,{name:"save"}),d.M.t("Save")))}))}}])}(h.Component);R.propTypes={community:w().object.isRequired};var j=n(40961),F=document.getElementById("community-settings-pages"),N=JSON.parse(F.dataset.formConfig),_=JSON.parse(F.dataset.community);j.render(h.createElement(R,{formConfig:N,community:_}),F)},61074:e=>{e.exports=function(e){return e.split("")}},69302:(e,t,n)=>{var r=n(83488),a=n(56757),u=n(32865);e.exports=function(e,t){return u(a(e,t,r),e+"")}},28754:(e,t,n)=>{var r=n(25160);e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},20999:(e,t,n)=>{var r=n(69302),a=n(36800);e.exports=function(e){return r((function(t,n){var r=-1,u=n.length,i=u>1?n[u-1]:void 0,o=u>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(u--,i):void 0,o&&a(n[0],n[1],o)&&(i=u<3?void 0:i,u=1),t=Object(t);++r<u;){var c=n[r];c&&e(t,c,r,i)}return t}))}},49698:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},36800:(e,t,n)=>{var r=n(75288),a=n(64894),u=n(30361),i=n(23805);e.exports=function(e,t,n){if(!i(n))return!1;var o=typeof t;return!!("number"==o?a(n)&&u(t,n.length):"string"==o&&t in n)&&r(n[t],e)}},63912:(e,t,n)=>{var r=n(61074),a=n(49698),u=n(42054);e.exports=function(e){return a(e)?u(e):r(e)}},42054:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",u="[^"+t+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+r+"|"+a+")"+"?",s="[\\ufe0e\\ufe0f]?",f=s+c+("(?:\\u200d(?:"+[u,i,o].join("|")+")"+s+c+")*"),l="(?:"+[u+r+"?",r,i,o,n].join("|")+")",d=RegExp(a+"(?="+a+")|"+l+f,"g");e.exports=function(e){return e.match(d)||[]}},83693:(e,t,n)=>{var r=n(64894),a=n(40346);e.exports=function(e){return a(e)&&r(e)}}},e=>{e.O(0,[402,1057,7655,5941,6932,8102,4252],(()=>{return t=73774,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=invenio-communities-settings-pages.eb9461a338ea51bd9db7.js.map