{"version":3,"file":"js/8962.d5276241a887b5d4ba96.js","mappings":"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","sources":["webpack://invenio-assets/./js/invenio_requests/components/Loader.js","webpack://invenio-assets/./js/invenio_requests/components/RequestsFeed.js","webpack://invenio-assets/./js/invenio_requests/components/TimelineEventBody.js","webpack://invenio-assets/./js/invenio_requests/timeline/index.js","webpack://invenio-assets/./js/invenio_requests/request/RequestDetails.js","webpack://invenio-assets/./js/invenio_requests/request/RequestMetadata.js","webpack://invenio-assets/./js/invenio_requests/request/RequestStatus.js","webpack://invenio-assets/./js/invenio_requests/request/actions/index.js","webpack://invenio-assets/./js/invenio_requests/request/Request.js","webpack://invenio-assets/./js/invenio_requests/request/Status.js","webpack://invenio-assets/./js/invenio_requests/request/index.js","webpack://invenio-assets/./js/invenio_requests/request/state/actions.js","webpack://invenio-assets/./js/invenio_requests/components/modals/BaseModal.js","webpack://invenio-assets/./js/invenio_requests/components/modals/DeleteConfirmationModal.js","webpack://invenio-assets/./js/invenio_requests/components/Pagination.js","webpack://invenio-assets/./js/invenio_requests/timelineCommentEditor/TimelineCommentEditor.js","webpack://invenio-assets/./js/invenio_requests/timelineCommentEditor/index.js","webpack://invenio-assets/./js/invenio_requests/timelineCommentEventControlled/TimelineCommentEventControlled.js","webpack://invenio-assets/./js/invenio_requests/timelineCommentEventControlled/state/actions.js","webpack://invenio-assets/./js/invenio_requests/timelineCommentEventControlled/index.js","webpack://invenio-assets/./js/invenio_requests/timeline/TimelineFeed.js","webpack://invenio-assets/./js/invenio_requests/timeline/state/actions.js","webpack://invenio-assets/./js/invenio_requests/timelineCommentEditor/state/actions.js","webpack://invenio-assets/./js/invenio_requests/timelineEvents/TimelineCommentEvent.js","webpack://invenio-assets/./js/invenio_requests/components/TimelineActionEvent.js","webpack://invenio-assets/./js/invenio_requests/timelineEvents/timelineActionEvents.js"],"sourcesContent":["// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\nimport React, { Component } from \"react\";\nimport Overridable from \"react-overridable\";\nimport { Loader as UILoader, Dimmer, Segment } from \"semantic-ui-react\";\nimport PropTypes from \"prop-types\";\n\nclass Loader extends Component {\n  render() {\n    const { isLoading, children } = this.props;\n    return (\n      <Overridable id=\"Loader.layout\" {...this.props}>\n        {isLoading ? (\n          <Segment className=\"loader-container\">\n            <Dimmer active inverted>\n              <UILoader active size=\"large\" inline=\"centered\" />\n            </Dimmer>\n          </Segment>\n        ) : (\n          // eslint-disable-next-line react/jsx-no-useless-fragment\n          <>{children}</>\n        )}\n      </Overridable>\n    );\n  }\n}\n\nLoader.propTypes = {\n  isLoading: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nLoader.defaultProps = {\n  isLoading: false,\n  children: null,\n};\n\nexport default Overridable.component(\"Loader\", Loader);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { Image } from \"react-invenio-forms\";\nimport { Container, Feed, Icon } from \"semantic-ui-react\";\n\n// Wrapper component for the custom styles being used inside the request events timeline\n// Enables centralizing the styles and abstracts it away from the template\nexport const RequestsFeed = ({ children }) => (\n  <Container className=\"requests-feed-container rich-input-content ml-0-mobile mr-0-mobile\">\n    <Feed>{children}</Feed>\n  </Container>\n);\n\nexport const RequestEventItem = ({ children }) => (\n  <div className=\"requests-event-item\">\n    <div className=\"requests-event-container\">{children}</div>\n  </div>\n);\n\nexport const RequestEventInnerContainer = ({ children, isEvent }) => (\n  <div className={`requests-event-inner-container${isEvent ? \" thread\" : \"\"}`}>\n    {children}\n  </div>\n);\n\nexport const RequestEventAvatarContainer = ({ src, ...uiProps }) => (\n  <div className=\"requests-avatar-container\">\n    {src && <Image src={src} rounded avatar {...uiProps} />}\n    {!src && <Icon size=\"large\" name=\"user circle outline\" />}\n  </div>\n);\n\nexport const RequestEventItemIconContainer = ({ name, size, color }) => (\n  <div className=\"requests-action-event-icon\">\n    <Icon name={name} size={size} className={color} />\n  </div>\n);\n\nexport const RequestEventItemBody = ({ isActionEvent, ...props }) => (\n  <Feed.Event {...props} className={isActionEvent ? \"requests-action-event\" : \"\"} />\n);\n\nRequestEventItemBody.propTypes = {\n  isActionEvent: PropTypes.bool,\n};\nRequestEventItemBody.defaultProps = {\n  isActionEvent: false,\n};\n\nRequestsFeed.Content = RequestEventInnerContainer;\nRequestsFeed.Avatar = RequestEventAvatarContainer;\nRequestsFeed.Icon = RequestEventItemIconContainer;\nRequestsFeed.Item = RequestEventItem;\nRequestsFeed.Event = RequestEventItemBody;\n\nexport default RequestsFeed;\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const TimelineEventBody = ({ content, format }) => {\n  return format === \"html\" ? (\n    <span dangerouslySetInnerHTML={{ __html: content }} />\n  ) : (\n    content\n  );\n};\n\nTimelineEventBody.propTypes = {\n  content: PropTypes.string,\n  format: PropTypes.string,\n};\n\nTimelineEventBody.defaultProps = {\n  content: \"\",\n  format: \"\",\n};\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { connect } from \"react-redux\";\nimport {\n  getTimelineWithRefresh,\n  setPage,\n  clearTimelineInterval,\n} from \"./state/actions\";\nimport TimelineFeedComponent from \"./TimelineFeed\";\n\nconst mapDispatchToProps = (dispatch) => ({\n  getTimelineWithRefresh: () => dispatch(getTimelineWithRefresh()),\n  timelineStopRefresh: () => dispatch(clearTimelineInterval()),\n  setPage: (page) => dispatch(setPage(page)),\n});\n\nconst mapStateToProps = (state) => ({\n  loading: state.timeline.loading,\n  refreshing: state.timeline.refreshing,\n  timeline: state.timeline.data,\n  error: state.timeline.error,\n  isSubmitting: state.timelineCommentEditor.isLoading,\n  size: state.timeline.size,\n  page: state.timeline.page,\n});\n\nexport const Timeline = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TimelineFeedComponent);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport RequestMetadata from \"./RequestMetadata\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Overridable from \"react-overridable\";\nimport { Grid } from \"semantic-ui-react\";\nimport { Timeline } from \"../timeline\";\n\nclass RequestDetails extends Component {\n  render() {\n    const { request, userAvatar, permissions } = this.props;\n    return (\n      <Overridable id=\"InvenioRequests.RequestDetails.layout\" {...this.props}>\n        <>\n          <Grid stackable reversed=\"mobile\">\n            <Grid.Column mobile={16} tablet={12} computer={13}>\n              <Timeline\n                userAvatar={userAvatar}\n                request={request}\n                permissions={permissions}\n              />\n            </Grid.Column>\n            <Grid.Column mobile={16} tablet={4} computer={3}>\n              <RequestMetadata request={request} />\n            </Grid.Column>\n          </Grid>\n        </>\n      </Overridable>\n    );\n  }\n}\n\nRequestDetails.propTypes = {\n  request: PropTypes.object.isRequired,\n  userAvatar: PropTypes.string,\n  permissions: PropTypes.object.isRequired,\n};\n\nRequestDetails.defaultProps = {\n  userAvatar: \"\",\n};\n\nexport default Overridable.component(\"InvenioRequests.RequestDetails\", RequestDetails);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { i18next } from \"@translations/invenio_requests/i18next\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { Image } from \"react-invenio-forms\";\nimport Overridable from \"react-overridable\";\nimport { Divider, Header, Icon, Message } from \"semantic-ui-react\";\nimport { toRelativeTime } from \"react-invenio-forms\";\nimport RequestStatus from \"./RequestStatus\";\nimport RequestTypeLabel from \"./RequestTypeLabel\";\n\nconst User = ({ user }) => (\n  <div className=\"flex\">\n    <Image\n      src={user.links.avatar}\n      avatar\n      size=\"tiny\"\n      className=\"mr-5\"\n      ui={false}\n      rounded\n    />\n    <span>\n      {user.profile?.full_name ||\n        user?.username ||\n        user?.email ||\n        i18next.t(\"Anonymous user\")}\n    </span>\n  </div>\n);\nconst Community = ({ community }) => (\n  <div className=\"flex\">\n    <Image src={community.links.logo} avatar size=\"tiny\" className=\"mr-5\" ui={false} />\n    <a href={`/communities/${community.slug}`}>{community.metadata.title}</a>\n  </div>\n);\nconst ExternalEmail = ({ email }) => (\n  <div className=\"flex\">\n    <Icon name=\"mail\" className=\"mr-5\" />\n    <span>\n      {i18next.t(\"Email\")}: {email.id}\n    </span>\n  </div>\n);\n\nconst EntityDetails = ({ userData, details }) => {\n  const isUser = \"user\" in userData;\n  const isCommunity = \"community\" in userData;\n  const isExternalEmail = \"email\" in userData;\n\n  if (isUser) {\n    return <User user={details} />;\n  } else if (isCommunity) {\n    return <Community community={details} />;\n  } else if (isExternalEmail) {\n    return <ExternalEmail email={details} />;\n  }\n};\n\nconst DeletedResource = ({ details }) => (\n  <Message negative>{details.metadata.title}</Message>\n);\n\nclass RequestMetadata extends Component {\n  isResourceDeleted = (details) => details.is_ghost === true;\n\n  render() {\n    const { request } = this.props;\n    const expandedCreatedBy = request.expanded?.created_by;\n    const expandedReceiver = request.expanded?.receiver;\n    return (\n      <Overridable id=\"InvenioRequest.RequestMetadata.Layout\" request={request}>\n        <>\n          {expandedCreatedBy !== undefined && (\n            <>\n              <Header as=\"h3\" size=\"tiny\">\n                {i18next.t(\"Creator\")}\n              </Header>\n              {this.isResourceDeleted(expandedCreatedBy) ? (\n                <DeletedResource details={expandedCreatedBy} />\n              ) : (\n                <EntityDetails\n                  userData={request.created_by}\n                  details={request.expanded?.created_by}\n                />\n              )}\n              <Divider />\n            </>\n          )}\n\n          <Header as=\"h3\" size=\"tiny\">\n            {i18next.t(\"Receiver\")}\n          </Header>\n          {this.isResourceDeleted(expandedReceiver) ? (\n            <DeletedResource details={expandedReceiver} />\n          ) : (\n            <EntityDetails\n              userData={request.receiver}\n              details={request.expanded?.receiver}\n            />\n          )}\n          <Divider />\n\n          <Header as=\"h3\" size=\"tiny\">\n            {i18next.t(\"Request type\")}\n          </Header>\n          <RequestTypeLabel type={request.type} />\n          <Divider />\n\n          <Header as=\"h3\" size=\"tiny\">\n            {i18next.t(\"Status\")}\n          </Header>\n          <RequestStatus status={request.status} />\n          <Divider />\n\n          <Header as=\"h3\" size=\"tiny\">\n            {i18next.t(\"Created\")}\n          </Header>\n          {toRelativeTime(request.created, i18next.language)}\n\n          {request.expires_at && (\n            <>\n              <Divider />\n              <Header as=\"h3\" size=\"tiny\">\n                {i18next.t(\"Expires\")}\n              </Header>\n              {toRelativeTime(request.expires_at, i18next.language)}\n            </>\n          )}\n\n          {request.status === \"accepted\" && request.topic?.record && (\n            <>\n              <Divider />\n              <Header as=\"h3\" size=\"tiny\">\n                {i18next.t(\"Record\")}\n              </Header>\n              <a href={`/records/${request.topic.record}`}>{request.title}</a>\n            </>\n          )}\n        </>\n      </Overridable>\n    );\n  }\n}\n\nRequestMetadata.propTypes = {\n  request: PropTypes.object.isRequired,\n};\n\nexport default Overridable.component(\n  \"InvenioRequests.RequestMetadata\",\n  RequestMetadata\n);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Overridable from \"react-overridable\";\nimport { Icon } from \"semantic-ui-react\";\n\nclass RequestStatus extends Component {\n  render() {\n    const { status } = this.props;\n    return (\n      <Overridable id={`RequestStatus.layout.${status}`} status={status}>\n        <div>\n          <Icon name=\"bars\" />\n          <span>{status}</span>\n        </div>\n      </Overridable>\n    );\n  }\n}\n\nRequestStatus.propTypes = {\n  status: PropTypes.string.isRequired,\n};\n\nexport default Overridable.component(\"InvenioRequests.RequestStatus\", RequestStatus);\n","// This file is part of InvenioRequests\n\nimport { RequestActionController } from \"@js/invenio_requests/request/actions/RequestActionController\";\nimport PropTypes from \"prop-types\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport Overridable from \"react-overridable\";\n\nconst element = document.getElementById(\"request-actions\");\n\nconst RequestActionsPortalCmp = ({ request, actionSuccessCallback }) => {\n  return ReactDOM.createPortal(\n    <RequestActionController\n      request={request}\n      actionSuccessCallback={actionSuccessCallback}\n      size=\"medium\"\n    />,\n    element\n  );\n};\n\nRequestActionsPortalCmp.propTypes = {\n  request: PropTypes.object.isRequired,\n  actionSuccessCallback: PropTypes.func.isRequired,\n};\n\nexport default Overridable.component(\n  \"InvenioRequests.RequestActionsPortal\",\n  RequestActionsPortalCmp\n);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport Overridable from \"react-overridable\";\nimport Loader from \"../components/Loader\";\nimport RequestActionsPortal from \"./actions\";\nimport RequestDetails from \"./RequestDetails\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport isEmpty from \"lodash/isEmpty\";\n\nexport class Request extends Component {\n  componentDidMount() {\n    const { initRequest } = this.props;\n    initRequest();\n  }\n\n  render() {\n    const { request, updateRequestAfterAction, userAvatar, permissions } = this.props;\n\n    return (\n      <Overridable id=\"InvenioRequest.Request.layout\">\n        <Loader isLoading={isEmpty(request)}>\n          <RequestActionsPortal\n            request={request}\n            actionSuccessCallback={updateRequestAfterAction}\n          />\n          <RequestDetails\n            request={request}\n            userAvatar={userAvatar}\n            permissions={permissions}\n          />\n        </Loader>\n      </Overridable>\n    );\n  }\n}\n\nRequest.propTypes = {\n  request: PropTypes.object.isRequired,\n  initRequest: PropTypes.func.isRequired,\n  updateRequestAfterAction: PropTypes.func.isRequired,\n  userAvatar: PropTypes.string,\n  permissions: PropTypes.object.isRequired,\n};\n\nRequest.defaultProps = {\n  userAvatar: \"\",\n};\n\nexport default Overridable.component(\"InvenioRequests.Request\", Request);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React from \"react\";\nimport { Icon } from \"semantic-ui-react\";\nimport { i18next } from \"@translations/invenio_requests/i18next\";\n\nexport const SubmitStatus = () => (\n  <div>\n    <Icon name=\"clock outline\" />\n    <span>{i18next.t(\"Submitted\")}</span>\n  </div>\n);\n\nexport const DeleteStatus = () => (\n  <div>\n    <Icon name=\"trash\" />\n    <span>{i18next.t(\"Deleted\")}</span>\n  </div>\n);\n\nexport const AcceptStatus = () => (\n  <div>\n    <Icon name=\"check circle\" />\n    <span>{i18next.t(\"Accepted\")}</span>\n  </div>\n);\n\nexport const DeclineStatus = () => (\n  <div>\n    <Icon name=\"times\" />\n    <span>{i18next.t(\"Declined\")}</span>\n  </div>\n);\n\nexport const CancelStatus = () => (\n  <div>\n    <Icon name=\"stop\" />\n    <span>{i18next.t(\"Cancelled\")}</span>\n  </div>\n);\n\nexport const ExpireStatus = () => (\n  <div>\n    <Icon name=\"calendar times outline\" />\n    <span>{i18next.t(\"Expired\")}</span>\n  </div>\n);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { connect } from \"react-redux\";\nimport RequestComponent from \"./Request\";\nimport { initRequest, updateRequestAfterAction } from \"./state/actions\";\n\nconst mapDispatchToProps = (dispatch) => ({\n  initRequest: () => dispatch(initRequest()),\n  updateRequestAfterAction: (request) => dispatch(updateRequestAfterAction(request)),\n});\n\nconst mapStateToProps = (state) => ({\n  request: state.request.data,\n});\n\nexport const Request = connect(mapStateToProps, mapDispatchToProps)(RequestComponent);\n\nexport * from \"./Status\";\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nexport const REQUEST_INIT = \"request/INIT\";\n\nexport const initRequest = () => {\n  return async (dispatch, getState, config) => {\n    dispatch({\n      type: REQUEST_INIT,\n      payload: config.request,\n    });\n  };\n};\n\nexport const updateRequest = (request) => {\n  return async (dispatch, getState, config) => {\n    dispatch({\n      type: REQUEST_INIT,\n      payload: request,\n    });\n  };\n};\n\nexport const updateRequestAfterAction = (request) => {\n  return async (dispatch, getState, config) => {\n    dispatch(updateRequest(request));\n    window.location.reload();\n  };\n};\n\nexport const setRefreshInterval = () => {\n  return (dispatch, getState, config) => {\n    return config.refreshIntervalMs;\n  };\n};\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\nimport React, { Component } from \"react\";\nimport { Modal, Button, Message } from \"semantic-ui-react\";\nimport PropTypes from \"prop-types\";\n\nexport const BaseModal = ({\n  contentText,\n  action,\n  isLoading,\n  error,\n  headerText,\n  cancelButtonText,\n  actionButtonText,\n  open,\n  onOpen,\n  onClose,\n}) => {\n  return (\n    <Modal onClose={onOpen} onOpen={onClose} open={open}>\n      <Modal.Header>{headerText}</Modal.Header>\n      <Modal.Content>{contentText}</Modal.Content>\n      <Modal.Actions>\n        {error && (\n          <Message negative compact>\n            {error}\n          </Message>\n        )}\n\n        <Button content={cancelButtonText} onClick={() => onClose()} />\n        <Button\n          content={actionButtonText}\n          negative\n          onClick={() => action()}\n          loading={isLoading}\n        />\n      </Modal.Actions>\n    </Modal>\n  );\n};\n\nBaseModal.propTypes = {\n  contentText: PropTypes.string.isRequired,\n  action: PropTypes.func.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  error: PropTypes.string.isRequired,\n  headerText: PropTypes.string.isRequired,\n  cancelButtonText: PropTypes.string.isRequired,\n  actionButtonText: PropTypes.string.isRequired,\n};\n\nexport default BaseModal;\n","import React, { Component } from \"react\";\nimport BaseModal from \"./BaseModal\";\nimport { i18next } from \"@translations/invenio_requests/i18next\";\nimport PropTypes from \"prop-types\";\nimport { errorSerializer } from \"../../api/serializers\";\n\nexport class DeleteConfirmationModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: false,\n      error: \"\",\n    };\n  }\n\n  onDelete = async () => {\n    const { action, onClose } = this.props;\n\n    this.setState({\n      isLoading: true,\n    });\n\n    try {\n      await action();\n      this.setState({\n        isLoading: false,\n        error: \"\",\n      });\n      onClose();\n    } catch (error) {\n      this.setState({\n        isLoading: false,\n        error: errorSerializer(error),\n      });\n    }\n  };\n\n  render() {\n    const { onOpen, onClose, open } = this.props;\n    const { isLoading, error } = this.state;\n\n    return (\n      <BaseModal\n        contentText={i18next.t(\"Are you sure you want to delete this comment?\")}\n        action={this.onDelete}\n        open={open}\n        onOpen={onOpen}\n        onClose={onClose}\n        isLoading={isLoading}\n        error={error}\n        headerText={i18next.t(\"Confirm\")}\n        cancelButtonText={i18next.t(\"Cancel\")}\n        actionButtonText={i18next.t(\"Delete\")}\n      />\n    );\n  }\n}\n\nDeleteConfirmationModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onOpen: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Pagination as PaginationComponent } from \"semantic-ui-react\";\n\nexport const Pagination = ({ size, page, totalLength, setPage }) => {\n  const totalPages = Math.ceil(totalLength / size);\n\n  const shouldShow = totalLength > size;\n\n  return shouldShow ? (\n    <PaginationComponent\n      totalPages={totalPages}\n      activePage={page}\n      onPageChange={(event, { activePage }) => setPage(activePage)}\n    />\n  ) : null;\n};\n\nPagination.propTypes = {\n  size: PropTypes.number,\n  page: PropTypes.number,\n  totalLength: PropTypes.number,\n  setPage: PropTypes.func.isRequired,\n};\n\nPagination.defaultProps = {\n  size: 1,\n  page: 1,\n  totalLength: 1,\n};\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { RichEditor } from \"react-invenio-forms\";\nimport React from \"react\";\nimport { SaveButton } from \"../components/Buttons\";\nimport { Container, Message } from \"semantic-ui-react\";\nimport PropTypes from \"prop-types\";\nimport { i18next } from \"@translations/invenio_requests/i18next\";\nimport { RequestEventAvatarContainer } from \"../components/RequestsFeed\";\n\nconst TimelineCommentEditor = ({\n  isLoading,\n  commentContent,\n  setCommentContent,\n  error,\n  submitComment,\n  userAvatar,\n}) => {\n  return (\n    <div className=\"timeline-comment-editor-container\">\n      {error && <Message negative>{error}</Message>}\n      <div className=\"flex\">\n        <RequestEventAvatarContainer\n          src={userAvatar}\n          className=\"tablet computer only rel-mr-1\"\n        />\n        <Container fluid className=\"ml-0-mobile mr-0-mobile fluid-mobile\">\n          <RichEditor\n            value={commentContent}\n            onChange={(event, editor) => {\n              setCommentContent(editor.getContent());\n            }}\n            minHeight={150}\n          />\n        </Container>\n      </div>\n      <div className=\"text-align-right rel-mt-1\">\n        <SaveButton\n          icon=\"send\"\n          size=\"medium\"\n          content={i18next.t(\"Comment\")}\n          loading={isLoading}\n          onClick={() => submitComment(commentContent, \"html\")}\n        />\n      </div>\n    </div>\n  );\n};\n\nTimelineCommentEditor.propTypes = {\n  commentContent: PropTypes.string,\n  isLoading: PropTypes.bool,\n  setCommentContent: PropTypes.func.isRequired,\n  error: PropTypes.string,\n  submitComment: PropTypes.func.isRequired,\n  userAvatar: PropTypes.string,\n};\n\nTimelineCommentEditor.defaultProps = {\n  commentContent: \"\",\n  isLoading: false,\n  error: \"\",\n  userAvatar: \"\",\n};\n\nexport default TimelineCommentEditor;\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { connect } from \"react-redux\";\nimport { submitComment, setEventContent } from \"./state/actions\";\nimport TimelineCommentEditorComponent from \"./TimelineCommentEditor\";\n\nconst mapDispatchToProps = (dispatch) => ({\n  submitComment: (content, format) => dispatch(submitComment(content, format)),\n  setCommentContent: (content) => dispatch(setEventContent(content)),\n});\n\nconst mapStateToProps = (state) => ({\n  isLoading: state.timelineCommentEditor.isLoading,\n  error: state.timelineCommentEditor.error,\n  commentContent: state.timelineCommentEditor.commentContent,\n});\n\nexport const TimelineCommentEditor = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TimelineCommentEditorComponent);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TimelineEvent } from \"../timelineEvents\";\nimport { errorSerializer } from \"../api/serializers\";\nimport Overridable from \"react-overridable\";\n\nclass TimelineCommentEventControlled extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: false,\n      isEditing: false,\n      error: null,\n    };\n  }\n\n  toggleEditMode = () => {\n    const { isEditing } = this.state;\n\n    this.setState({ isEditing: !isEditing, error: null });\n  };\n\n  updateComment = async (content, format) => {\n    const { updateComment, event } = this.props;\n\n    if (!content) return;\n\n    this.setState({\n      isLoading: true,\n    });\n\n    try {\n      await updateComment({ content, format, event });\n\n      this.setState({\n        isLoading: false,\n        isEditing: false,\n        error: null,\n      });\n    } catch (error) {\n      this.setState({\n        isLoading: false,\n        isEditing: true,\n        error: errorSerializer(error),\n      });\n    }\n  };\n\n  deleteComment = async () => {\n    const { deleteComment, event, openConfirmModal } = this.props;\n\n    openConfirmModal(() => deleteComment({ event }));\n  };\n\n  render() {\n    const { event } = this.props;\n    const { isLoading, isEditing, error } = this.state;\n\n    return (\n      <Overridable id=\"TimelineCommentEventControlled.layout\">\n        <TimelineEvent\n          updateComment={this.updateComment}\n          deleteComment={this.deleteComment}\n          toggleEditMode={this.toggleEditMode}\n          isLoading={isLoading}\n          isEditing={isEditing}\n          error={error}\n          event={event}\n        />\n      </Overridable>\n    );\n  }\n}\n\nTimelineCommentEventControlled.propTypes = {\n  event: PropTypes.object.isRequired,\n  updateComment: PropTypes.func.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  openConfirmModal: PropTypes.func.isRequired,\n};\n\nexport default Overridable.component(\n  \"TimelineCommentEventControlled\",\n  TimelineCommentEventControlled\n);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport {\n  clearTimelineInterval,\n  IS_REFRESHING,\n  setTimelineInterval,\n  SUCCESS,\n} from \"../../timeline/state/actions\";\nimport { payloadSerializer } from \"../../api/serializers\";\nimport _cloneDeep from \"lodash/cloneDeep\";\nimport { i18next } from \"../../../../translations/invenio_requests/i18next\";\n\nexport const updateComment = ({ content, format, event }) => {\n  return async (dispatch, getState, config) => {\n    dispatch(clearTimelineInterval());\n    const commentsApi = config.requestEventsApi(event.links);\n\n    const payload = payloadSerializer(content, format);\n\n    dispatch({ type: IS_REFRESHING });\n\n    const response = await commentsApi.updateComment(payload);\n\n    dispatch({\n      type: SUCCESS,\n      payload: _newStateWithUpdate(response.data, getState().timeline.data),\n    });\n\n    dispatch(setTimelineInterval());\n\n    return response.data;\n  };\n};\n\nexport const deleteComment = ({ event }) => {\n  return async (dispatch, getState, config) => {\n    dispatch(clearTimelineInterval());\n    const commentsApi = config.requestEventsApi(event.links);\n\n    dispatch({ type: IS_REFRESHING });\n\n    const response = await commentsApi.deleteComment();\n\n    dispatch({\n      type: SUCCESS,\n      payload: _newStateWithDelete(event.id, getState),\n    });\n\n    dispatch(setTimelineInterval());\n\n    return response.data;\n  };\n};\n\nconst _newStateWithUpdate = (updatedComment, currentState) => {\n  // return timeline with the updated comment\n  const timelineState = _cloneDeep(currentState);\n  const currentHits = timelineState.hits.hits;\n  const currentCommentKey = currentHits.findIndex(\n    (comment) => comment.id === updatedComment.id\n  );\n\n  currentHits[currentCommentKey] = updatedComment;\n\n  return timelineState;\n};\n\nconst _newStateWithDelete = (eventId, currentState) => {\n  // return timeline with the deleted comment replaced by the deletion event\n  const timelineState = _cloneDeep(currentState().timeline.data);\n  const currentHits = timelineState.hits.hits;\n\n  const indexCommentToDelete = currentHits.findIndex(\n    (comment) => comment.id === eventId\n  );\n\n  const currentComment = currentHits[indexCommentToDelete];\n\n  const deletionPayload = {\n    content: i18next.t(\"deleted a comment\"),\n    event: \"comment_deleted\",\n    format: \"html\",\n  };\n\n  currentHits[indexCommentToDelete] = {\n    ...currentComment,\n    type: \"L\",\n    payload: deletionPayload,\n  };\n\n  return timelineState;\n};\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport EventWithStateComponent from \"./TimelineCommentEventControlled\";\nimport { connect } from \"react-redux\";\nimport { updateComment, deleteComment } from \"./state/actions\";\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateComment: async (payload) => dispatch(updateComment(payload)),\n  deleteComment: async (payload) => dispatch(deleteComment(payload)),\n});\n\nexport const TimelineCommentEventControlled = connect(\n  null,\n  mapDispatchToProps\n)(EventWithStateComponent);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport Overridable from \"react-overridable\";\nimport { Container, Divider } from \"semantic-ui-react\";\nimport Error from \"../components/Error\";\nimport Loader from \"../components/Loader\";\nimport { DeleteConfirmationModal } from \"../components/modals/DeleteConfirmationModal\";\nimport { Pagination } from \"../components/Pagination\";\nimport RequestsFeed from \"../components/RequestsFeed\";\nimport { TimelineCommentEditor } from \"../timelineCommentEditor\";\nimport { TimelineCommentEventControlled } from \"../timelineCommentEventControlled\";\n\nclass TimelineFeed extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modalOpen: false,\n      modalAction: null,\n    };\n  }\n\n  componentDidMount() {\n    const { getTimelineWithRefresh } = this.props;\n    getTimelineWithRefresh();\n  }\n\n  componentWillUnmount() {\n    const { timelineStopRefresh } = this.props;\n    timelineStopRefresh();\n  }\n\n  onOpenModal = (action) => {\n    this.setState({ modalOpen: true, modalAction: action });\n  };\n\n  render() {\n    const {\n      timeline,\n      loading,\n      error,\n      setPage,\n      size,\n      page,\n      userAvatar,\n      request,\n      permissions,\n    } = this.props;\n    const { modalOpen, modalAction } = this.state;\n\n    return (\n      <Loader isLoading={loading}>\n        <Error error={error}>\n          <Overridable id=\"TimelineFeed.layout\" {...this.props}>\n            <Container id=\"requests-timeline\" className=\"ml-0-mobile mr-0-mobile\">\n              <Overridable\n                id=\"TimelineFeed.header\"\n                request={request}\n                permissions={permissions}\n              />\n              <RequestsFeed>\n                {timeline.hits?.hits.map((event) => (\n                  <TimelineCommentEventControlled\n                    key={event.id}\n                    event={event}\n                    openConfirmModal={this.onOpenModal}\n                  />\n                ))}\n              </RequestsFeed>\n              <Divider fitted />\n              <Container textAlign=\"center\" className=\"mb-15 mt-15\">\n                <Pagination\n                  page={page}\n                  size={size}\n                  setPage={setPage}\n                  totalLength={timeline.hits?.total}\n                />\n              </Container>\n              <TimelineCommentEditor userAvatar={userAvatar} />\n              <DeleteConfirmationModal\n                open={modalOpen}\n                action={modalAction}\n                onOpen={() => this.setState({ modalOpen: true })}\n                onClose={() => this.setState({ modalOpen: false })}\n              />\n            </Container>\n          </Overridable>\n        </Error>\n      </Loader>\n    );\n  }\n}\n\nTimelineFeed.propTypes = {\n  getTimelineWithRefresh: PropTypes.func.isRequired,\n  timelineStopRefresh: PropTypes.func.isRequired,\n  timeline: PropTypes.object,\n  error: PropTypes.object,\n  isSubmitting: PropTypes.bool,\n  setPage: PropTypes.func.isRequired,\n  page: PropTypes.number,\n  size: PropTypes.number,\n  userAvatar: PropTypes.string,\n  request: PropTypes.object.isRequired,\n  permissions: PropTypes.object.isRequired,\n};\n\nTimelineFeed.defaultProps = {\n  userAvatar: \"\",\n};\n\nexport default Overridable.component(\"TimelineFeed\", TimelineFeed);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { updateRequest } from \"../../request/state/actions\";\n\nexport const IS_LOADING = \"timeline/IS_LOADING\";\nexport const SUCCESS = \"timeline/SUCCESS\";\nexport const HAS_ERROR = \"timeline/HAS_ERROR\";\nexport const IS_REFRESHING = \"timeline/REFRESHING\";\nexport const CHANGE_PAGE = \"timeline/CHANGE_PAGE\";\n\nclass intervalManager {\n  static IntervalId = undefined;\n\n  static setIntervalId(intervalId) {\n    this.intervalId = intervalId;\n  }\n\n  static resetInterval() {\n    clearInterval(this.intervalId);\n    delete this.intervalId;\n  }\n}\n\nexport const fetchTimeline = (loadingState = true) => {\n  return async (dispatch, getState, config) => {\n    const state = getState();\n    const { size, page, data: timelineData } = state.timeline;\n\n    if (loadingState) {\n      dispatch({\n        type: IS_LOADING,\n      });\n    }\n    dispatch({\n      type: IS_REFRESHING,\n    });\n\n    try {\n      const response = await config.requestsApi.getTimeline({\n        size: size,\n        page: page,\n        sort: \"oldest\",\n      });\n\n      // Check if timeline has more events than the current state\n      const hasMoreEvents = response.data?.hits?.total > timelineData?.hits?.total;\n      if (hasMoreEvents) {\n        // Check if a LogEvent was added and fetch request\n        const actionEventFound = response.data.hits.hits.some(\n          (event) =>\n            event.type === \"L\" &&\n            config.requestsApi.availableRequestStatuses.includes(event?.payload?.event)\n        );\n\n        if (actionEventFound) {\n          const response = await config.requestsApi.getRequest();\n          dispatch(updateRequest(response.data));\n        }\n      }\n\n      dispatch({\n        type: SUCCESS,\n        payload: response.data,\n      });\n    } catch (error) {\n      dispatch({\n        type: HAS_ERROR,\n        payload: error,\n      });\n    }\n  };\n};\n\nexport const setPage = (page) => {\n  return async (dispatch, getState, config) => {\n    dispatch({\n      type: CHANGE_PAGE,\n      payload: page,\n    });\n\n    await dispatch(fetchTimeline());\n  };\n};\n\nconst timelineReload = (dispatch, getState, config) => {\n  const state = getState();\n  const { loading, refreshing, error } = state.timeline;\n  const { isLoading: isSubmitting } = state.timelineCommentEditor;\n\n  if (error) {\n    dispatch(clearTimelineInterval());\n  }\n\n  const concurrentRequests = loading && refreshing && isSubmitting;\n\n  if (concurrentRequests) return;\n\n  dispatch(fetchTimeline(false));\n};\n\nexport const getTimelineWithRefresh = () => {\n  return async (dispatch, getState, config) => {\n    dispatch(fetchTimeline(true));\n    dispatch(setTimelineInterval());\n  };\n};\n\nexport const setTimelineInterval = () => {\n  return async (dispatch, getState, config) => {\n    const intervalAlreadySet = intervalManager.intervalId;\n\n    if (!intervalAlreadySet) {\n      const intervalId = setInterval(\n        () => timelineReload(dispatch, getState, config),\n        config.refreshIntervalMs\n      );\n      intervalManager.setIntervalId(intervalId);\n    }\n  };\n};\n\nexport const clearTimelineInterval = () => {\n  return (dispatch, getState, config) => {\n    intervalManager.resetInterval();\n  };\n};\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { errorSerializer, payloadSerializer } from \"../../api/serializers\";\nimport {\n  CHANGE_PAGE,\n  clearTimelineInterval,\n  setTimelineInterval,\n  SUCCESS as TIMELINE_SUCCESS,\n} from \"../../timeline/state/actions\";\nimport _cloneDeep from \"lodash/cloneDeep\";\n\nexport const IS_LOADING = \"eventEditor/IS_LOADING\";\nexport const HAS_ERROR = \"eventEditor/HAS_ERROR\";\nexport const SUCCESS = \"eventEditor/SUCCESS\";\nexport const SETTING_CONTENT = \"eventEditor/SETTING_CONTENT\";\n\nexport const setEventContent = (content) => {\n  return async (dispatch, getState, config) => {\n    dispatch({\n      type: SETTING_CONTENT,\n      payload: content,\n    });\n  };\n};\n\nexport const submitComment = (content, format) => {\n  return async (dispatch, getState, config) => {\n    const { timeline: timelineState } = getState();\n\n    dispatch(clearTimelineInterval());\n\n    dispatch({\n      type: IS_LOADING,\n    });\n\n    const payload = payloadSerializer(content, format || \"html\");\n\n    try {\n      /* Because of the delay in ES indexing we need to handle the updated state on the client-side until it is ready to be retrieved from the server.\n      That includes the pagination logic e.g. changing pages if the current page size is exceeded by a new comment. */\n\n      const response = await config.requestsApi.submitComment(payload);\n\n      const currentPage = timelineState.page;\n      const currentSize = timelineState.size;\n      const currentCommentsLength = timelineState.data.hits.hits.length;\n      const shouldGoToNextPage = currentCommentsLength + 1 > currentSize;\n\n      if (shouldGoToNextPage) {\n        dispatch({ type: CHANGE_PAGE, payload: currentPage + 1 });\n      }\n\n      dispatch({ type: SUCCESS });\n\n      await dispatch({\n        type: TIMELINE_SUCCESS,\n        payload: _updatedState(response.data, timelineState, shouldGoToNextPage),\n      });\n      dispatch(setTimelineInterval());\n    } catch (error) {\n      dispatch({\n        type: HAS_ERROR,\n        payload: errorSerializer(error),\n      });\n\n      dispatch(setTimelineInterval());\n\n      // throw it again, so it can be caught in the local state\n      throw error;\n    }\n  };\n};\n\nconst _updatedState = (newComment, timelineState, shouldGoToNextPage) => {\n  // return timeline with new comment and pagination logic\n  const timelineData = _cloneDeep(timelineState.data);\n  const currentHits = timelineData.hits.hits;\n\n  timelineData.hits.hits = shouldGoToNextPage\n    ? [newComment]\n    : [...currentHits, newComment];\n\n  timelineData.hits.total++;\n\n  return timelineData;\n};\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { i18next } from \"@translations/invenio_requests/i18next\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { Image } from \"react-invenio-forms\";\nimport Overridable from \"react-overridable\";\nimport { Container, Dropdown, Feed, Icon } from \"semantic-ui-react\";\nimport { CancelButton, SaveButton } from \"../components/Buttons\";\nimport Error from \"../components/Error\";\nimport { RichEditor } from \"react-invenio-forms\";\nimport RequestsFeed from \"../components/RequestsFeed\";\nimport { TimelineEventBody } from \"../components/TimelineEventBody\";\nimport { toRelativeTime } from \"react-invenio-forms\";\n\nclass TimelineCommentEvent extends Component {\n  constructor(props) {\n    super(props);\n\n    const { event } = props;\n\n    this.state = {\n      commentContent: event?.payload?.content,\n    };\n  }\n\n  eventToType = ({ type, payload }) => {\n    switch (type) {\n      case \"L\":\n        return payload?.event || \"unknown\";\n      case \"C\":\n        return \"comment\";\n      default:\n        return \"unknown\";\n    }\n  };\n\n  render() {\n    const {\n      isLoading,\n      isEditing,\n      error,\n      event,\n      updateComment,\n      deleteComment,\n      toggleEditMode,\n    } = this.props;\n    const { commentContent } = this.state;\n\n    const commentHasBeenEdited = event?.revision_id > 1 && event?.payload;\n\n    const canDelete = event?.permissions?.can_delete_comment;\n    const canUpdate = event?.permissions?.can_update_comment;\n\n    const createdBy = event.created_by;\n    const isUser = \"user\" in createdBy;\n    const isEmail = \"email\" in createdBy;\n    const expandedCreatedBy = event.expanded?.created_by;\n    let userAvatar,\n      userName = null;\n    if (isUser) {\n      userAvatar = (\n        <RequestsFeed.Avatar src={expandedCreatedBy.links.avatar} as={Image} circular />\n      );\n      userName = expandedCreatedBy.profile?.full_name || expandedCreatedBy.username;\n    } else if (isEmail) {\n      userAvatar = <Icon size=\"large\" name=\"user circle outline\" />;\n      userName = createdBy.email;\n    }\n    return (\n      <Overridable id={`TimelineEvent.layout.${this.eventToType(event)}`} event={event}>\n        <RequestsFeed.Item>\n          <RequestsFeed.Content>\n            {userAvatar}\n            <RequestsFeed.Event>\n              <Feed.Content>\n                {(canDelete || canUpdate) && (\n                  <Dropdown\n                    icon=\"ellipsis horizontal\"\n                    className=\"right-floated\"\n                    direction=\"left\"\n                    aria-label={i18next.t(\"Actions\")}\n                  >\n                    <Dropdown.Menu>\n                      {canUpdate && (\n                        <Dropdown.Item onClick={() => toggleEditMode()}>\n                          {i18next.t(\"Edit\")}\n                        </Dropdown.Item>\n                      )}\n                      {canDelete && (\n                        <Dropdown.Item onClick={() => deleteComment()}>\n                          {i18next.t(\"Delete\")}\n                        </Dropdown.Item>\n                      )}\n                    </Dropdown.Menu>\n                  </Dropdown>\n                )}\n                <Feed.Summary>\n                  <b>{userName}</b>\n                  <Feed.Date>\n                    {i18next.t(\"commented {{commentTime}}\", {\n                      commentTime: toRelativeTime(event.created, i18next.language),\n                    })}\n                  </Feed.Date>\n                </Feed.Summary>\n\n                <Feed.Extra text={!isEditing}>\n                  {error && <Error error={error} />}\n\n                  {isEditing ? (\n                    <RichEditor\n                      value={event?.payload?.content}\n                      onChange={(event, editor) => {\n                        this.setState({ commentContent: editor.getContent() });\n                      }}\n                      minHeight={150}\n                    />\n                  ) : (\n                    <TimelineEventBody\n                      content={event?.payload?.content}\n                      format={event?.payload?.format}\n                    />\n                  )}\n\n                  {isEditing && (\n                    <Container fluid className=\"mt-15\" textAlign=\"right\">\n                      <CancelButton onClick={() => toggleEditMode()} />\n                      <SaveButton\n                        onClick={() => updateComment(commentContent, \"html\")}\n                        loading={isLoading}\n                      />\n                    </Container>\n                  )}\n                </Feed.Extra>\n                {commentHasBeenEdited && <Feed.Meta>{i18next.t(\"Edited\")}</Feed.Meta>}\n              </Feed.Content>\n            </RequestsFeed.Event>\n          </RequestsFeed.Content>\n        </RequestsFeed.Item>\n      </Overridable>\n    );\n  }\n}\n\nTimelineCommentEvent.propTypes = {\n  event: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  updateComment: PropTypes.func.isRequired,\n  toggleEditMode: PropTypes.func.isRequired,\n  isLoading: PropTypes.bool,\n  isEditing: PropTypes.bool,\n  error: PropTypes.string,\n};\n\nTimelineCommentEvent.defaultProps = {\n  isLoading: false,\n  isEditing: false,\n  error: undefined,\n};\n\nexport default Overridable.component(\"TimelineEvent\", TimelineCommentEvent);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { i18next } from \"@translations/invenio_requests/i18next\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { Image } from \"react-invenio-forms\";\nimport Overridable from \"react-overridable\";\nimport { Feed } from \"semantic-ui-react\";\nimport { toRelativeTime } from \"react-invenio-forms\";\nimport RequestsFeed from \"./RequestsFeed\";\nimport { TimelineEventBody } from \"./TimelineEventBody\";\n\nclass TimelineActionEvent extends Component {\n  render() {\n    const { event, iconName, iconColor, eventContent } = this.props;\n\n    const createdBy = event.created_by;\n    const isUser = \"user\" in createdBy;\n    const expandedCreatedBy = event.expanded?.created_by;\n\n    let userAvatar,\n      user = null;\n    if (isUser) {\n      userAvatar = (\n        <Image\n          src={expandedCreatedBy.links.avatar}\n          avatar\n          size=\"tiny\"\n          className=\"mr-5\"\n          ui={false}\n        />\n      );\n      user = expandedCreatedBy.profile?.full_name || expandedCreatedBy.username;\n    }\n\n    return (\n      <Overridable\n        id=\"TimelineActionEvent.layout\"\n        event={event}\n        iconName={iconName}\n        iconColor={iconColor}\n      >\n        <RequestsFeed.Item>\n          <RequestsFeed.Content isEvent>\n            <RequestsFeed.Icon name={iconName} size=\"large\" color={iconColor} />\n            <RequestsFeed.Event isActionEvent>\n              <Feed.Content>\n                <Feed.Summary className=\"flex\">\n                  {userAvatar}\n                  <b>{user}</b>\n                  <Feed.Date>\n                    <TimelineEventBody\n                      content={eventContent}\n                      format={event?.payload?.format}\n                    />{\" \"}\n                    {toRelativeTime(event.created, i18next.language)}\n                  </Feed.Date>\n                </Feed.Summary>\n              </Feed.Content>\n            </RequestsFeed.Event>\n          </RequestsFeed.Content>\n        </RequestsFeed.Item>\n      </Overridable>\n    );\n  }\n}\n\nTimelineActionEvent.propTypes = {\n  event: PropTypes.object.isRequired,\n  iconName: PropTypes.string.isRequired,\n  eventContent: PropTypes.string.isRequired,\n  iconColor: PropTypes.string,\n};\n\nTimelineActionEvent.defaultProps = {\n  iconColor: \"grey\",\n};\n\nexport default Overridable.component(\"TimelineActionEvent\", TimelineActionEvent);\n","// This file is part of InvenioRequests\n// Copyright (C) 2022 CERN.\n//\n// Invenio RDM Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { i18next } from \"@translations/invenio_requests/i18next\";\nimport React from \"react\";\nimport TimelineActionEvent from \"../components/TimelineActionEvent\";\n\nexport const TimelineAcceptEvent = ({ event }) => (\n  <TimelineActionEvent\n    iconName=\"check circle\"\n    iconColor=\"positive\"\n    event={event}\n    eventContent={i18next.t(\"accepted this request\")}\n  />\n);\n\nexport const TimelineDeclineEvent = ({ event }) => (\n  <TimelineActionEvent\n    iconName=\"close\"\n    event={event}\n    eventContent={i18next.t(\"declined this request\")}\n    iconColor=\"negative\"\n  />\n);\n\nexport const TimelineExpireEvent = ({ event }) => (\n  <TimelineActionEvent\n    iconName=\"calendar times\"\n    event={event}\n    eventContent={i18next.t(\"this request expired\")}\n    iconColor=\"negative\"\n  />\n);\n\nexport const TimelineCancelEvent = ({ event }) => (\n  <TimelineActionEvent\n    iconName=\"close\"\n    event={event}\n    eventContent={i18next.t(\"cancelled this request\")}\n    iconColor=\"negative\"\n  />\n);\n\nexport const TimelineUnknownEvent = ({ event }) => (\n  <TimelineActionEvent\n    iconName=\"close\"\n    iconColor=\"negative\"\n    event={event}\n    eventContent={i18next.t(\"unknown event\")}\n  />\n);\n\nexport const TimelineCommentDeletionEvent = ({ event }) => (\n  <TimelineActionEvent\n    iconName=\"erase\"\n    iconColor=\"grey\"\n    event={event}\n    eventContent={i18next.t(\"deleted a comment\")}\n  />\n);\n"],"names":["Loader","_Component","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","value","_this$props","this","props","isLoading","children","React","Overridable","_extends","id","Segment","className","Dimmer","active","inverted","UILoader","size","inline","Component","propTypes","PropTypes","defaultProps","component","RequestsFeed","_ref","Container","Feed","RequestEventAvatarContainer","_ref4","src","uiProps","_objectWithoutProperties","_excluded","Image","rounded","avatar","Icon","name","RequestEventItemBody","_ref6","isActionEvent","_excluded2","Event","Content","_ref3","isEvent","concat","Avatar","_ref5","color","Item","_ref2","TimelineEventBody","content","format","dangerouslySetInnerHTML","__html","Timeline","connect","state","loading","timeline","refreshing","data","error","isSubmitting","timelineCommentEditor","page","dispatch","getTimelineWithRefresh","timelineStopRefresh","clearTimelineInterval","setPage","TimelineFeedComponent","RequestDetails","request","userAvatar","permissions","Grid","stackable","reversed","Column","mobile","tablet","computer","RequestMetadata","isRequired","User","_user$profile","user","links","ui","profile","full_name","username","email","i18next","t","Community","community","logo","href","slug","metadata","title","ExternalEmail","EntityDetails","userData","details","isCommunity","isExternalEmail","DeletedResource","Message","negative","_this","_len","length","args","Array","_key","_defineProperty","is_ghost","_request$expanded","_request$expanded2","_request$expanded3","_request$expanded4","_request$topic","expandedCreatedBy","expanded","created_by","expandedReceiver","receiver","undefined","Header","as","isResourceDeleted","Divider","RequestTypeLabel","type","RequestStatus","status","toRelativeTime","created","language","expires_at","topic","record","element","document","getElementById","RequestActionsPortalCmp","actionSuccessCallback","ReactDOM","RequestActionController","Request","initRequest","updateRequestAfterAction","isEmpty","RequestActionsPortal","SubmitStatus","DeleteStatus","AcceptStatus","DeclineStatus","CancelStatus","ExpireStatus","RequestComponent","REQUEST_INIT","_asyncToGenerator","_regeneratorRuntime","_callee","getState","config","_context","prev","next","payload","stop","_x","_x2","_x3","apply","updateRequest","_callee2","_context2","_x4","_x5","_x6","_callee3","_context3","window","location","reload","_x7","_x8","_x9","BaseModal","contentText","action","headerText","cancelButtonText","actionButtonText","open","onOpen","onClose","Modal","Actions","compact","Button","onClick","DeleteConfirmationModal","setState","t0","errorSerializer","_this$props2","_this$state","onDelete","Pagination","totalLength","totalPages","Math","ceil","PaginationComponent","activePage","onPageChange","event","TimelineCommentEditor","commentContent","setCommentContent","submitComment","fluid","RichEditor","onChange","editor","getContent","minHeight","SaveButton","icon","setEventContent","TimelineCommentEditorComponent","TimelineCommentEventControlled","isEditing","updateComment","abrupt","deleteComment","openConfirmModal","TimelineEvent","toggleEditMode","commentsApi","response","requestEventsApi","payloadSerializer","IS_REFRESHING","sent","SUCCESS","_newStateWithUpdate","setTimelineInterval","_newStateWithDelete","updatedComment","currentState","timelineState","_cloneDeep","currentHits","hits","currentCommentKey","findIndex","comment","eventId","indexCommentToDelete","currentComment","deletionPayload","_objectSpread","_updateComment2","_deleteComment2","EventWithStateComponent","TimelineFeed","modalOpen","modalAction","_timeline$hits","_timeline$hits2","_this2","Error","map","onOpenModal","fitted","textAlign","total","IS_LOADING","HAS_ERROR","CHANGE_PAGE","intervalManager","intervalId","clearInterval","fetchTimeline","loadingState","_state$timeline","timelineData","_response$data","_timelineData$hits","_response","requestsApi","getTimeline","sort","some","_event$payload","availableRequestStatuses","includes","getRequest","timelineReload","_state$timeline2","_callee4","_context4","setInterval","refreshIntervalMs","setIntervalId","_x10","_x11","_x12","resetInterval","SETTING_CONTENT","_getState","currentPage","currentSize","currentCommentsLength","shouldGoToNextPage","TIMELINE_SUCCESS","_updatedState","newComment","_toConsumableArray","TimelineCommentEvent","_event$permissions","_event$permissions2","_event$expanded","_event$payload2","_event$payload3","_event$payload4","_expandedCreatedBy$pr","commentHasBeenEdited","revision_id","canDelete","can_delete_comment","canUpdate","can_update_comment","createdBy","isUser","isEmail","userName","circular","eventToType","Dropdown","direction","Menu","Summary","Date","commentTime","Extra","text","CancelButton","Meta","TimelineActionEvent","iconName","iconColor","eventContent","TimelineAcceptEvent","TimelineDeclineEvent","TimelineExpireEvent","TimelineCancelEvent","TimelineUnknownEvent","TimelineCommentDeletionEvent"],"sourceRoot":""}