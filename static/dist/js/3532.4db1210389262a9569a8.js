"use strict";(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[3532],{23914:(e,t,n)=>{n.d(t,{A:()=>C});var r=n(23029),i=n(92901),a=n(56822),o=n(53954),l=n(85501),c=n(38102),s=n(92516),u=n.n(s),d=n(5556),p=n.n(d),m=n(96540),f=n(81057),h=n(53196),v=n(23848),b=n(1489),y=n(27041),g=n(3487);function A(e,t,n){return t=(0,o.A)(t),(0,a.A)(e,E()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}var w=function(e){function t(){return(0,r.A)(this,t),A(this,t,arguments)}return(0,l.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this.props,t=e.community,n=e.defaultLogo,r=e.className,i=e.showUploadBtn;return m.createElement(h.default,{id:"InvenioCommunities.CarouselItem.layout",community:t,defaultLogo:n,className:r},m.createElement(v.A,{className:"carousel flex align-items-center ".concat(r),key:t.id},m.createElement(f.Image,{size:"small",src:t.links.logo,fallbackSrc:n}),m.createElement(v.A.Content,null,m.createElement(v.A.Header,{as:b.A,stackable:!0,className:"rel-pb-1"},m.createElement(b.A.Column,{computer:"10",tablet:"16",className:"pl-0 pb-0"},m.createElement(y.A,{as:"a",size:"medium",href:t.links.self_html},t.metadata.title)),m.createElement(b.A.Column,{computer:"6",tablet:"16",className:"buttons pl-0 pb-0"},m.createElement(g.A,{size:"mini",href:t.links.self_html,content:c.M.t("Browse")}),i&&m.createElement(g.A,{size:"mini",icon:"upload",labelPosition:"left",positive:!0,href:"/uploads/new?community=".concat(t.slug),content:c.M.t("New upload")}))),m.createElement(v.A.Description,{content:u()(t.metadata.description,{length:300})}))))}}])}(m.Component);w.propTypes={community:p().object.isRequired,defaultLogo:p().string.isRequired,className:p().string,showUploadBtn:p().bool},w.defaultProps={className:"",showUploadBtn:!0};const C=h.default.component("InvenioCommunities.CarouselItem",w)},24508:(e,t,n)=>{n.d(t,{A:()=>x});var r=n(10467),i=n(23029),a=n(92901),o=n(56822),l=n(53954),c=n(85501),s=n(64467),u=n(54756),d=n.n(u),p=n(38102),m=n(62193),f=n.n(m),h=n(5556),v=n.n(h),b=n(96540),y=n(81057),g=n(53196),A=n(27089),E=n(27041),w=n(1489),C=n(23848),R=n(24941),P=n(76217),S=n(80124),k=n(23914);function O(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,D()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}var I=function(e){function t(e){var n;return(0,i.A)(this,t),n=O(this,t,[e]),(0,s.A)(n,"getDataIndex",(function(e){var t=n.props.itemsPerPage,r=n.state.data.hits,i=e*parseInt(t);return i>r.length-1?0:i<0?r.length-1:i})),(0,s.A)(n,"runCarousel",function(){var e=(0,r.A)(d().mark((function e(t){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state.activeIndex,i=t<r?"right":"left",e.next=4,n.setState({animationDirection:i});case 4:n.setState({activeIndex:n.getDataIndex(t)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,s.A)(n,"setCarouselTimer",(function(){var e=n.state,t=e.data.hits,r=e.activeIndex,i=n.props.intervalDelay;n.setState({carouselTimer:setInterval((function(){t&&n.runCarousel(r+1)}),i)})})),(0,s.A)(n,"stopCarousel",(function(){var e=n.state.carouselTimer;clearInterval(e)})),(0,s.A)(n,"startCarousel",(function(){n.setCarouselTimer()})),(0,s.A)(n,"fetchData",(0,r.A)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.fetchUrl,n.cancellableFetch=(0,y.withCancel)(y.http.get(t)),e.prev=2,e.next=5,n.cancellableFetch.promise;case 5:r=e.sent,n.setState({data:r.data.hits}),n.setCarouselTimer(),n.setState({isLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),n.setState({isLoading:!1});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))),(0,s.A)(n,"renderPlaceholder",(function(){var e=n.props.title;return b.createElement(A.A,{fluid:!0,className:"rel-pt-2 rel-pb-2 ml-0-mobile mr-0-mobile"},b.createElement(A.A,null,b.createElement(E.A,{as:"h2",className:"rel-mb-1"},e)),b.createElement(w.A,{container:!0},b.createElement(w.A.Column,{width:"2"}),b.createElement(w.A.Column,{width:"12"},b.createElement(C.A.Group,null,b.createElement(C.A,null,b.createElement(C.A.Image,null,b.createElement(R.A,null,b.createElement(R.A.Image,{square:!0}))),b.createElement(C.A.Content,null,b.createElement(C.A.Header,{className:"mt-5 rel-mb-2"},b.createElement(R.A,null,b.createElement(R.A.Header,null,b.createElement(R.A.Line,null)))),b.createElement(C.A.Description,null,b.createElement(R.A,null,b.createElement(R.A.Paragraph,null,b.createElement(R.A.Line,null),b.createElement(R.A.Line,null),b.createElement(R.A.Line,null)))))))),b.createElement(w.A.Column,{width:"2"})))})),(0,s.A)(n,"carouselSlides",(function(){var e,t=n.state,r=t.data,i=t.activeIndex,a=n.props,o=a.defaultLogo,l=a.itemsPerPage,c=a.showUploadBtn,s=parseInt(i)+parseInt(l);return null===(e=r.hits)||void 0===e?void 0:e.slice(i,s).map((function(e){return b.createElement(k.A,{community:e,defaultLogo:o,key:e.id,showUploadBtn:c})}))})),n.state={data:{hits:[]},activeIndex:0,animationDirection:"left",carouselTimer:null,isLoading:!0},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){this.cancellableFetch&&this.cancellableFetch.cancel(),this.stopCarousel()}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,r=t.animationDirection,i=t.activeIndex,a=t.isLoading,o=this.props,l=o.title,c=o.animationSpeed,s=o.itemsPerPage;return b.createElement(g.default,{id:"InvenioCommunities.CommunitiesCarousel.layout",data:n,animationDirection:r,activeIndex:i,title:l,animationSpeed:c,carouselSlides:this.carouselSlides(),stopCarousel:this.stopCarousel,startCarousel:this.startCarousel,runCarousel:this.runCarousel,itemsPerPage:s},b.createElement(b.Fragment,null,a&&this.renderPlaceholder(),!a&&!f()(n.hits)&&b.createElement(A.A,{fluid:!0,className:"carousel rel-pt-2 rel-pb-2 ml-0-mobile mr-0-mobile"},b.createElement(A.A,{className:"rel-mb-1"},b.createElement(E.A,{as:"h2"},l)),b.createElement(w.A,{container:!0,onFocus:this.stopCarousel,onBlur:this.startCarousel},b.createElement(w.A.Column,{width:"2",className:"pr-0",verticalAlign:"middle",textAlign:"left"},b.createElement(P.A,{className:"carousel-arrow",inverted:!0,role:"button",name:"angle left",size:"huge","aria-label":p.M.t("Previous slide"),onClick:function(){return e.runCarousel(i-1)},onKeyDown:function(t){return"Enter"===t.key&&e.runCarousel(i-1)},tabIndex:"0"})),b.createElement(w.A.Column,{width:"12"},b.createElement(S.A.Group,{as:C.A.Group,className:"flex align-items-center justify-center",duration:c,animation:"carousel-slide ".concat(r),directional:!0},this.carouselSlides())),b.createElement(w.A.Column,{width:"2",className:"pl-0",verticalAlign:"middle",textAlign:"right"},b.createElement(P.A,{className:"carousel-arrow",inverted:!0,role:"button",name:"angle right",size:"huge","aria-label":p.M.t("Next slide"),onClick:function(){return e.runCarousel(i+1)},onKeyDown:function(t){return"Enter"===t.key&&e.runCarousel(i+1)},tabIndex:"0"}))))))}}])}(b.Component);I.propTypes={title:v().string.isRequired,fetchUrl:v().string.isRequired,intervalDelay:v().number.isRequired,animationSpeed:v().number.isRequired,defaultLogo:v().string.isRequired,itemsPerPage:v().string.isRequired,showUploadBtn:v().bool},I.defaultProps={showUploadBtn:!0};const x=g.default.component("InvenioCommunities.CommunitiesCarousel",I)},60164:(e,t,n)=>{n.d(t,{A:()=>R});var r=n(10467),i=n(23029),a=n(92901),o=n(56822),l=n(53954),c=n(85501),s=n(64467),u=n(54756),d=n.n(u),p=n(96540),m=n(81057),f=n(6549),h=n(27089),v=n(87395),b=n(1489),y=n(67396),g=n(5556),A=n.n(g),E=n(38102);function w(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,C()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}var R=function(e){function t(e){var n;return(0,i.A)(this,t),n=w(this,t,[e]),(0,s.A)(n,"fetchData",(0,r.A)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),n.cancellableFetch=(0,m.withCancel)(m.http.get("/api/communities/featured")),e.prev=2,e.next=5,n.cancellableFetch.promise;case 5:t=e.sent,n.setState({data:t.data.hits,isLoading:!1}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),r=e.t0.message,e.t0.response&&(r=e.t0.response.data.message),n.setState({error:r,isLoading:!1});case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))),n.state={data:void 0,error:void 0,isLoading:!1},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){this.cancellableFetch&&this.cancellableFetch.cancel()}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.error,r=e.isLoading,i=this.props,a=i.columnNumber,o=i.widescreenColumnWidth,l=i.mobileColumnWidth,c=i.tabletColumnWidth,s=i.computerColumnWidth;return r?p.createElement(f.A,{active:!0,inline:"centered"}):n?p.createElement(h.A,null,p.createElement(v.A,{negative:!0},p.createElement(v.A.Header,null,E.M.t("An error occurred.")),p.createElement("p",null,n))):null!==t&&void 0!==t&&t.hits?p.createElement(b.A,{className:"featured-communities",columns:a,centered:!0},t.hits.map((function(e){return p.createElement(y.A,{key:e.id,community:e,mobileColumnWidth:l,tabletColumnWidth:c,computerColumnWidth:s,widescreenColumnWidth:o})}))):""}}])}(p.Component);R.propTypes={columnNumber:A().string.isRequired,mobileColumnWidth:A().string.isRequired,tabletColumnWidth:A().string.isRequired,computerColumnWidth:A().string.isRequired,widescreenColumnWidth:A().string.isRequired}},67396:(e,t,n)=>{n.d(t,{A:()=>b});var r=n(23029),i=n(92901),a=n(56822),o=n(53954),l=n(85501),c=n(96540),s=n(1489),u=n(2685),d=n(27041),p=n(5556),m=n.n(p),f=n(81057);function h(e,t,n){return t=(0,o.A)(t),(0,a.A)(e,v()?Reflect.construct(t,n||[],(0,o.A)(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var b=function(e){function t(){return(0,r.A)(this,t),h(this,t,arguments)}return(0,l.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this.props,t=e.computerColumnWidth,n=e.mobileColumnWidth,r=e.tabletColumnWidth,i=e.widescreenColumnWidth,a=e.community;return c.createElement(s.A.Column,{mobile:n,tablet:r,widescreen:i,computer:t,textAlign:"center"},c.createElement(u.A,{compact:!0,className:"m-auto"},c.createElement("a",{href:a.links.self_html},c.createElement("div",{className:"featured-community"},c.createElement(f.Image,{className:"m-auto",src:a.links.logo}),c.createElement(d.A,{as:"h3"},a.metadata.title)))))}}])}(c.Component);b.propTypes={computerColumnWidth:m().number.isRequired,mobileColumnWidth:m().number.isRequired,tabletColumnWidth:m().number.isRequired,widescreenColumnWidth:m().number.isRequired,community:m().object.isRequired}},78585:(e,t,n)=>{n.d(t,{R5:()=>z,iU:()=>P,z3:()=>q,_I:()=>D,mG:()=>w,zv:()=>v,AV:()=>x});n(23914),n(24508),n(60164),n(67396);var r=n(96540),i=n(5556),a=n.n(i),o=n(70742),l=n(76217),c=n(28085),s=function(e){var t=e.type,n=e.transparent;return void 0===t?null:n&&r.createElement("div",{className:"rel-mr-1"},r.createElement(l.A,{name:"tag"}),t)||r.createElement(c.A,{size:"small",horizontal:!0,className:"primary"},r.createElement(l.A,{name:"tag"}),t)};s.propTypes={type:a().string,transparent:a().bool},s.defaultProps={type:void 0,transparent:!1};var u=function(e){return"restricted"===e.access&&r.createElement(c.A,{size:"small",horizontal:!0,className:"negative"},r.createElement(l.A,{name:"ban"}),o.M.t("Restricted"))};u.propTypes={access:a().string.isRequired};var d=n(81057),p=n(1489),m=n(3487),f=function(e){var t,n,i=e.result,a=null===(t=i.ui)||void 0===t||null===(t=t.type)||void 0===t?void 0:t.title_l10n,c=null===(n=i.ui)||void 0===n||null===(n=n.permissions)||void 0===n?void 0:n.can_update;return r.createElement(p.A,{className:"computer tablet only item community-item"},r.createElement(p.A.Column,{tablet:c?13:16,computer:13,verticalAlign:"middle",className:"pl-0"},r.createElement("div",{className:"flex align-items-center"},r.createElement(d.Image,{wrapped:!0,src:i.links.logo,size:"tiny",className:"community-image rel-mr-2",alt:""}),r.createElement("div",null,"restricted"===i.access.visibility&&r.createElement("div",{className:"rel-mb-1"},r.createElement(u,{access:i.access.visibility})),r.createElement("a",{className:"ui medium header mb-0",href:i.links.self_html},i.metadata.title),i.metadata.description&&r.createElement("p",{className:"truncate-lines-1 text size small text-muted mt-5"},i.metadata.description),(a||i.metadata.website||i.metadata.organizations)&&r.createElement("div",{className:"flex align-items-center wrap mt-5 text size small text-muted"},a&&r.createElement(s,{transparent:!0,type:a}),i.metadata.website&&r.createElement("div",{className:"rel-mr-1"},r.createElement(l.A,{name:"linkify"}),r.createElement("a",{href:i.metadata.website,target:"_blank",rel:"noopener noreferrer",className:"text-muted"},i.metadata.website)),i.metadata.organizations&&r.createElement("div",null,r.createElement(l.A,{name:"building outline"}),i.metadata.organizations.map((function(e,t){var n=t>0?", ":"";return r.createElement("span",{className:"text-muted",key:e.name},n,e.name,e.id&&r.createElement("a",{href:"https://ror.org/".concat(e.id),"aria-label":"".concat(e.name,"'s ROR ").concat(o.M.t("profile")),title:"".concat(e.name,"'s ROR ").concat(o.M.t("profile")),target:"_blank",rel:"noreferrer"},r.createElement("img",{className:"inline-id-icon ml-5",src:"/static/images/ror-icon.svg",alt:""})))}))))))),c&&r.createElement(p.A.Column,{width:3,textAlign:"right",className:"pr-0"},r.createElement("div",null,r.createElement(m.A,{compact:!0,size:"small",href:i.links.settings_html,className:"mt-0 mr-0",labelPosition:"left",icon:"edit",content:o.M.t("Edit")}))))};f.propTypes={result:a().object.isRequired};var h=function(e){var t,n=e.result,i=(e.index,null===(t=n.ui)||void 0===t||null===(t=t.type)||void 0===t?void 0:t.title_l10n),a=n.ui.permissions.can_update;return r.createElement(p.A,{className:"mobile only item community-item"},"restricted"===n.access.visibility&&r.createElement(p.A.Row,null,r.createElement(p.A.Column,{width:16,verticalAlign:"middle",className:"pl-0 pr-0"},r.createElement(u,{access:n.access.visibility}))),r.createElement(p.A.Row,null,r.createElement(p.A.Column,{width:a?11:16,verticalAlign:"middle",className:"pl-0 pr-0"},r.createElement("div",{className:"flex align-items-center"},r.createElement(d.Image,{wrapped:!0,src:n.links.logo,size:"mini",className:"community-image rel-mr-1",alt:""}),r.createElement("div",null,r.createElement("a",{className:"truncate-lines-2 ui medium header m-0",href:n.links.self_html},n.metadata.title)))),a&&r.createElement(p.A.Column,{width:5,verticalAlign:"middle",textAlign:"right",className:"pr-0"},r.createElement(m.A,{compact:!0,size:"tiny",href:n.links.settings_html,className:"mt-0 mr-0",labelPosition:"left",icon:"edit",content:o.M.t("Edit")}))),n.metadata.description&&r.createElement(p.A.Row,{className:"pt-0"},r.createElement(p.A.Column,{width:16,className:"pl-0 pr-0"},r.createElement("p",{className:"truncate-lines-1 text size small text-muted mt-5"},n.metadata.description))),(i||n.metadata.website||n.metadata.organizations)&&r.createElement(p.A.Row,{className:"pt-0"},r.createElement(p.A.Column,{width:16,verticalAlign:"bottom",className:"pl-0 pr-0"},r.createElement("div",{className:"text size small text-muted"},i&&r.createElement("div",{className:"mb-5"},r.createElement(s,{transparent:!0,type:i})),n.metadata.website&&r.createElement("div",{className:"rel-mr-1 mb-5"},r.createElement(l.A,{name:"linkify"}),r.createElement("a",{href:n.metadata.website,target:"_blank",rel:"noopener noreferrer",className:"text-muted"},n.metadata.website)),n.metadata.organizations&&r.createElement("div",{className:"mb-5"},r.createElement(l.A,{name:"building outline"}),n.metadata.organizations.map((function(e,t){var n=t>0?", ":"";return r.createElement("span",{className:"text-muted",key:e.name},n,e.name,e.id&&r.createElement("a",{href:"https://ror.org/".concat(e.id),"aria-label":"".concat(e.name,"'s ROR ").concat(o.M.t("profile")),title:"".concat(e.name,"'s ROR ").concat(o.M.t("profile")),target:"_blank",rel:"noreferrer"},r.createElement("img",{className:"inline-id-icon ml-5",src:"/static/images/ror-icon.svg",alt:""})))})))))))};function v(e){var t=e.result;return r.createElement(r.Fragment,null,r.createElement(f,{result:t}),r.createElement(h,{result:t}))}h.propTypes={result:a().object.isRequired,index:a().string},h.defaultProps={index:null},v.propTypes={result:a().object.isRequired};var b=n(92516),y=n.n(b),g=n(23848),A=function(e){var t,n,i=e.result,a=e.actions,p=e.extraLabels,m=e.itemClassName,f=e.showPermissionLabel,h=e.detailUrl,v=e.isCommunityDefault,b=i.metadata,A=i.ui,E=i.links,w=i.access,C=i.id,R=null===A||void 0===A||null===(t=A.type)||void 0===t?void 0:t.title_l10n;return r.createElement(g.A,{key:C,className:"community-item tablet computer only display-grid auto-column-grid no-wrap ".concat(m)},r.createElement("div",{className:"flex align-items-center"},r.createElement(d.Image,{wrapped:!0,size:"tiny",src:E.logo,alt:"",className:"community-image rel-mr-2"}),r.createElement("div",null,r.createElement("div",{className:"flex align-items-center rel-mb-1"},r.createElement("a",{href:h||E.self_html,className:"ui small header truncate-lines-2 m-0 mr-5",target:"_blank",rel:"noreferrer","aria-label":"".concat(b.title," (").concat(o.M.t("opens in new tab"),")")},b.title),r.createElement("i",{className:"small icon external primary","aria-hidden":"true"})),b.description&&r.createElement("p",{className:"truncate-lines-1 text size small text-muted mt-5 rel-mb-1"},y()(b.description,{length:50})),r.createElement("div",{className:"rel-mt-1"},("restricted"===i.access.visibility||R||p)&&r.createElement(r.Fragment,null,r.createElement(u,{access:w.visibility}),r.createElement(s,{type:R}),p),v&&r.createElement(c.A,{color:"purple",size:"tiny"},r.createElement(l.A,{name:"paint brush"}),o.M.t("Branding"))))),r.createElement("div",{className:"flex align-items-center justify-end"},f&&r.createElement("span",{className:"rel-mr-1"},(null===A||void 0===A||null===(n=A.permissions)||void 0===n?void 0:n.can_include_directly)&&r.createElement(d.InvenioPopup,{popupId:"direct-publish-info-popup",size:"small",trigger:r.createElement(l.A,{name:"paper plane outline neutral",size:"large"}),ariaLabel:o.M.t("Submission information"),content:o.M.t("Submission to this community does not require review, and will be published immediately.")})),a))};A.propTypes={result:a().object.isRequired,actions:a().node,extraLabels:a().node,itemClassName:a().string,showPermissionLabel:a().bool,detailUrl:a().string,isCommunityDefault:a().bool.isRequired},A.defaultProps={actions:void 0,extraLabels:void 0,itemClassName:"",showPermissionLabel:!1,detailUrl:void 0};var E=function(e){var t,n,i=e.result,a=e.actions,p=e.extraLabels,m=e.itemClassName,f=e.showPermissionLabel,h=e.detailUrl,v=e.isCommunityDefault,b=null===(t=i.ui)||void 0===t||null===(t=t.type)||void 0===t?void 0:t.title_l10n,g=i.metadata,A=i.ui,E=i.links,w=i.access,C=i.id;return r.createElement("div",{key:C,className:"community-item mobile only ".concat(m)},r.createElement("div",{className:"display-grid auto-column-grid no-wrap"},r.createElement("div",{className:"flex align-items-center"},r.createElement(d.Image,{wrapped:!0,size:"mini",src:E.logo,alt:"",className:"community-image rel-mr-1"}),r.createElement("div",{className:"flex align-items-center rel-mb-1"},r.createElement("a",{href:h||E.self_html,className:"ui small header truncate-lines-2 m-0 mr-5",target:"_blank",rel:"noreferrer","aria-label":"".concat(g.title," (").concat(o.M.t("opens in new tab"),")")},g.title),r.createElement("i",{className:"small icon external primary","aria-hidden":"true"}))),r.createElement("div",{className:"flex align-items-center justify-end"},f&&r.createElement("span",{className:"rel-mr-1"},(null===A||void 0===A||null===(n=A.permissions)||void 0===n?void 0:n.can_include_directly)&&r.createElement(d.InvenioPopup,{popupId:"direct-publish-info-popup",size:"small",trigger:r.createElement(l.A,{name:"paper plane outline neutral",size:"large"}),ariaLabel:o.M.t("Submission information"),content:o.M.t("Submission to this community does not require review, and will be published immediately.")})),a)),r.createElement("div",{className:"full-width"},g.description&&r.createElement("p",{className:"truncate-lines-1 text size small text-muted mt-5 rel-mb-1"},y()(g.description,{length:50})),r.createElement("div",{className:"rel-mt-1"},("restricted"===i.access.visibility||b||p)&&r.createElement(r.Fragment,null,r.createElement(u,{access:w.visibility}),r.createElement(s,{type:b}),p),v&&r.createElement(c.A,{color:"purple",size:"tiny"},r.createElement(l.A,{name:"paint brush"}),o.M.t("Branding")))))};function w(e){var t=e.result,n=e.actions,i=e.extraLabels,a=e.itemClassName,o=e.showPermissionLabel,l=e.detailUrl,c=e.isCommunityDefault;return r.createElement(r.Fragment,null,r.createElement(A,{result:t,actions:n,extraLabels:i,itemClassName:a,showPermissionLabel:o,detailUrl:l,isCommunityDefault:c}),r.createElement(E,{result:t,actions:n,extraLabels:i,itemClassName:a,showPermissionLabel:o,detailUrl:l,isCommunityDefault:c}))}E.propTypes={result:a().object.isRequired,extraLabels:a().node,itemClassName:a().string,showPermissionLabel:a().bool,actions:a().node,detailUrl:a().string,isCommunityDefault:a().bool.isRequired},E.defaultProps={actions:void 0,extraLabels:void 0,itemClassName:"",showPermissionLabel:!1,detailUrl:void 0},w.propTypes={result:a().object.isRequired,actions:a().node,extraLabels:a().node,itemClassName:a().string,showPermissionLabel:a().bool,detailUrl:a().string,isCommunityDefault:a().bool.isRequired},w.defaultProps={actions:void 0,extraLabels:void 0,itemClassName:"",showPermissionLabel:!1,detailUrl:void 0};var C=n(5905),R=n(98871),P=function(e){var t=e.paginationOptions,n=e.currentResultsState.data.total;return n&&r.createElement(p.A,null,r.createElement(p.A.Row,null,r.createElement(p.A.Column,null,r.createElement(R.dy,null))),r.createElement(C.xD,{total:n,paginationOptions:t}))};P.propTypes={paginationOptions:a().object.isRequired,currentResultsState:a().object.isRequired};var S=n(80296),k=n(38102),O=n(27089),D=function(e){var t=e.config,n=e.appName,i=r.useState(!1),a=(0,S.A)(i,2),o=a[0],l=a[1];return r.createElement(O.A,null,r.createElement(p.A,null,r.createElement(p.A.Row,{className:"mobile tablet only"},r.createElement(p.A.Column,{mobile:2,tablet:1,verticalAlign:"middle",className:"mt-10"},r.createElement(m.A,{basic:!0,icon:"sliders",onClick:function(){return l(!0)},"aria-label":k.M.t("Filter results")})),r.createElement(p.A.Column,{mobile:14,tablet:15,floated:"right",className:"mt-10"},r.createElement(R.IW,{placeholder:k.M.t("Search communities...")}))),r.createElement(p.A.Row,{className:"mobile tablet only"},r.createElement(p.A.Column,{width:16,textAlign:"right"},t.sortOptions&&r.createElement(R.FU,{values:t.sortOptions,label:function(e){return r.createElement(r.Fragment,null,r.createElement("label",{className:"mr-10"},k.M.t("Sort by")),e)}}))),r.createElement(p.A.Row,{className:"computer only"},r.createElement(p.A.Column,{width:8,floated:"right"},r.createElement(R.IW,{placeholder:k.M.t("Search communities...")})),r.createElement(p.A.Column,{width:4,textAlign:"right"},t.sortOptions&&r.createElement(R.FU,{values:t.sortOptions,label:function(e){return r.createElement(r.Fragment,null,r.createElement("label",{className:"mr-10"},k.M.t("Sort by")),e)}}))),r.createElement(p.A.Row,null,r.createElement(d.GridResponsiveSidebarColumn,{width:4,open:o,onHideClick:function(){return l(!1)},children:r.createElement(C.gf,{aggs:t.aggs,appName:n})}),r.createElement(p.A.Column,{mobile:16,tablet:16,computer:12},r.createElement(C.s9,{layoutOptions:t.layoutOptions,appName:n})))))};D.propTypes={config:a().object.isRequired,appName:a().string},D.defaultProps={appName:""};var I=n(83794),x=function(e){var t=e.result;return r.createElement(I.A,{fluid:!0,href:"/communities/".concat(t.slug)},r.createElement(I.A.Content,null,r.createElement(I.A.Header,null,t.metadata.title),r.createElement(I.A.Description,null,r.createElement("div",{className:"truncate-lines-2"},t.metadata.description))))};x.propTypes={result:a().object.isRequired};var M=n(64467),F=n(92257);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,M.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=(0,R.Q2)((function(e){var t=e.placeholder,n=e.queryString,i=e.onInputChange,a=e.updateQueryState,o=e.currentQueryState,l=t||k.M.t("Search"),c=function(){a(_(_({},o),{},{queryString:n}))};return r.createElement(F.A,{action:{icon:"search",onClick:function(){c()},className:"search","aria-label":k.M.t("Search")},fluid:!0,placeholder:l,"aria-label":l,onChange:function(e,t){var n=t.value;i(n)},value:n,onKeyPress:function(e){"Enter"===e.key&&c()}})})),N=n(2685),L=n(27041),z=function(e){var t=e.queryString,n=e.resetQuery;return r.createElement(N.A,{placeholder:!0,textAlign:"center"},r.createElement(L.A,{icon:!0},r.createElement(l.A,{name:"search"}),k.M.t("No communities found!")),t&&r.createElement(m.A,{primary:!0,onClick:function(){return n()}},k.M.t("Reset search")))};z.propTypes={queryString:a().string.isRequired,resetQuery:a().func.isRequired}},93532:(e,t,n)=>{n.d(t,{Re:()=>G,D:()=>il,qE:()=>Bi,Y4:()=>Xe,Kp:()=>ut,et:()=>ki,k6:()=>Xo,W5:()=>zn,Gd:()=>jn,KI:()=>Zo,q1:()=>de,l0:()=>xn,yY:()=>Da,l4:()=>_n,Km:()=>te,g7:()=>kr,z4:()=>hn,EM:()=>$n,PI:()=>Mi,Hq:()=>Ir,IZ:()=>ma,nH:()=>Fr,bT:()=>Nr,CP:()=>Qr,n:()=>Hr,fB:()=>ga,GC:()=>$r,Kd:()=>ra,y5:()=>ai,Je:()=>ci,n2:()=>al,vP:()=>ie});var r=n(58168),i=n(23029),a=n(92901),o=n(56822),l=n(53954),c=n(85501),s=n(96540),u=n(61225),d=n(5556),p=n.n(d),m=n(17684),f=n(81057),h=n(83794),v=n(80501),b=n(36713),y=n(27041),g=n(11990),A=n(64467),E=n(3487);function w(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,C()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}var R=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=w(this,t,[].concat(r)),(0,A.A)(e,"handlePublicButtonClick",(function(){var t=e.props,n=t.formik,r=t.fieldPath;n.form.setFieldValue(r,"public"),n.form.setFieldValue("access.embargo",{active:!1})})),(0,A.A)(e,"handleRestrictionButtonClick",(function(){var t=e.props,n=t.formik,r=t.fieldPath;n.form.setFieldValue(r,"restricted")})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.formik,n=e.disabled,r=e.fieldPath;n&&t.form.setFieldValue(r,"restricted")}},{key:"render",value:function(){var e=this.props,t=e.active,n=e.disabled,r=t?"positive":"",i=t?"":"negative";return s.createElement(E.A.Group,{widths:"2"},s.createElement(E.A,{className:r,"data-testid":"protection-buttons-component-public",disabled:n,onClick:this.handlePublicButtonClick,active:t},g.M.t("Public")),s.createElement(E.A,{className:i,"data-testid":"protection-buttons-component-restricted",active:!t,onClick:this.handleRestrictionButtonClick},g.M.t("Restricted")))}}])}(s.Component);R.propTypes={fieldPath:p().string.isRequired,formik:p().object.isRequired,active:p().bool,disabled:p().bool},R.defaultProps={active:!0,disabled:!1};var P=function(e){function t(){return(0,i.A)(this,t),w(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props.fieldPath;return s.createElement(m.FastField,{name:t,component:function(t){return s.createElement(R,(0,r.A)({formik:t},e.props))}})}}])}(s.Component);P.propTypes={fieldPath:p().string.isRequired};var S=n(53196),k=function(e){var t="public"===e.recordAccess,n="public"===e.communityAccess;return s.createElement(S.default,(0,r.A)({id:"ReactInvenioDeposit.MetadataAccess.layout"},e),s.createElement(s.Fragment,null,g.M.t("Full record"),s.createElement(P,{active:t&&n,disabled:!n,fieldPath:"access.record"})))};k.propTypes={recordAccess:p().string.isRequired,communityAccess:p().string.isRequired};var O=function(e){var t=e.access,n=e.accessCommunity,r=e.metadataOnly,i="public"===t.files,a="public"===t.record,o="public"===n,l=!o||!a,c=o&&!i&&a,u=!r&&o&&a;return r?s.createElement(h.A.Meta,{"data-testid":"access-files"},s.createElement("em",null,g.M.t("The record has no files."))):s.createElement("div",{"data-testid":"access-files"},u&&s.createElement(s.Fragment,null,g.M.t("Files only"),s.createElement(P,{active:i,disable:!o,fieldPath:"access.files"})),l&&s.createElement(h.A.Description,null,s.createElement("em",null,g.M.t("The full record is restricted."))),c&&s.createElement(h.A.Description,null,s.createElement("em",null,g.M.t("The files of this record are restricted."))))};O.propTypes={access:p().object.isRequired,metadataOnly:p().bool,accessCommunity:p().string.isRequired},O.defaultProps={metadataOnly:!1};var D=n(62193),I=n.n(D),x=n(91272),M=n(27859),F=n(76217),T=n(50363);function _(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,q()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}var N=function(e){function t(){return(0,i.A)(this,t),_(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.formik,r=e.checked,i=e.disabled;return s.createElement(T.A,{id:t,"data-testid":"embargo-checkbox-component",disabled:i,checked:r,onChange:function(){n.field.value?n.form.setFieldValue("access.embargo",{active:!1}):n.form.setFieldValue(t,!0)}})}}])}(s.Component);N.propTypes={fieldPath:p().string.isRequired,formik:p().object.isRequired,checked:p().bool,disabled:p().bool},N.defaultProps={checked:!1,disabled:!0};var L=function(e){function t(){return(0,i.A)(this,t),_(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,i=t.fieldPath,a=n?{change:!0}:{};return s.createElement(m.FastField,(0,r.A)({name:i,component:function(t){return s.createElement(N,(0,r.A)({formik:t},e.props))}},a))}}])}(s.Component);function z(e){var t=e.fieldPath,n=e.label,r=e.labelIcon,i=e.placeholder,a=e.required,o=e.helpText;return s.createElement(f.TextField,{fieldPath:t,label:s.createElement(f.FieldLabel,{htmlFor:t,icon:r,label:n}),placeholder:i,required:a,helpText:o})}L.propTypes={disabled:p().bool,fieldPath:p().string.isRequired},L.defaultProps={disabled:!1},z.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,placeholder:p().string,required:p().bool,helpText:p().string},z.defaultProps={required:!1,labelIcon:"calendar",placeholder:g.M.t("YYYY-MM-DD"),label:g.M.t("Embargo until"),helpText:"".concat(g.M.t("Format"),": ").concat(g.M.t("YYYY-MM-DD"))};var j=n(52822),B=function(e){var t,n,r,i=e.access,a=e.accessCommunity,o=e.metadataOnly,l="public"===i.record,c="public"===i.files,u="public"===a,d=!o&&!c,p=(null===(t=i.embargo)||void 0===t?void 0:t.active)||!1,m=null===(n=i.embargo)||void 0===n?void 0:n.until,h=null===(r=i.embargo)||void 0===r?void 0:r.reason,v=!p&&!I()(m),y=u&&(!l||d),A=m?x.DateTime.fromISO(m).toLocaleString(x.DateTime.DATE_FULL):"???";return s.createElement(M.A,null,s.createElement(M.A.Item,{disabled:!y,"data-testid":"option-list-embargo"},s.createElement(M.A.Icon,{"aria-hidden":"false"},s.createElement(L,{fieldPath:"access.embargo.active",checked:p,disabled:!y})),s.createElement(M.A.Content,null,s.createElement(M.A.Header,{as:"label",htmlFor:"access.embargo.active"},g.M.t("Apply an embargo")," ",s.createElement(F.A,{name:"clock outline"})),s.createElement(M.A.Description,null,s.createElement(j.x,null,"Record or files protection must be ",s.createElement("b",null,"restricted")," to apply an embargo.")),p&&s.createElement(s.Fragment,null,s.createElement(b.A,{hidden:!0,className:"rel-mb-1"}),s.createElement(z,{fieldPath:"access.embargo.until",required:!0}),s.createElement(f.TextAreaField,{label:g.M.t("Embargo reason"),fieldPath:"access.embargo.reason",placeholder:g.M.t("Optionally, describe the reason for the embargo."),optimized:"true"})),v&&s.createElement(s.Fragment,null,s.createElement(b.A,{hidden:!0}),s.createElement("p",null,g.M.t("Embargo was lifted on {{fmtDate}}.",{fmtDate:A})),h&&s.createElement("p",null,s.createElement("b",null,g.M.t("Reason")),": ",h,".")))))};B.propTypes={access:p().object.isRequired,metadataOnly:p().bool,accessCommunity:p().string.isRequired},B.defaultProps={metadataOnly:!1};var U=n(87395),V=function(e){var t,n,r=e.access,i=e.metadataOnly,a=e.accessCommunity,o="public"===r.record,l="public"===r.files,c="public"===a,u=(null===(t=r.embargo)||void 0===t?void 0:t.active)||!1,d=!c||!o&&!u,p=c&&o&&(i||l),m=u&&!l&&o,f=!u&&!l&&o,h=!o&&u,v=null!==(n=r.embargo)&&void 0!==n&&n.until?x.DateTime.fromISO(r.embargo.until).toLocaleString(x.DateTime.DATE_FULL):"???";return p?s.createElement(U.A,{icon:!0,positive:!0,visible:!0,"data-testid":"access-message"},s.createElement(F.A,{name:"lock open"}),s.createElement(U.A.Content,null,s.createElement(U.A.Header,null,g.M.t("Public")),i?g.M.t("The record is publicly accessible."):g.M.t("The record and files are publicly accessible."))):h?s.createElement(U.A,{icon:!0,warning:!0,visible:!0,"data-testid":"access-message"},s.createElement(F.A,{name:"lock"}),s.createElement(U.A.Content,null,s.createElement(U.A.Header,null,g.M.t("Embargoed (full record)")),s.createElement(j.x,{i18nKey:"access-message"},"On ",s.createElement("b",null,v)," the record will automatically be made publicly accessible. Until then, the record can ",s.createElement("b",null,"only")," be accessed by"," ",s.createElement("b",null,"users specified"),' in the permissions."'))):d?s.createElement(U.A,{icon:!0,negative:!0,visible:!0,"data-testid":"access-message"},s.createElement(F.A,{name:"lock"}),s.createElement(U.A.Content,null,s.createElement(U.A.Header,null,g.M.t("Restricted")),s.createElement(j.x,null,"The record can ",s.createElement("b",null,"only")," be accessed by ",s.createElement("b",null,"users specified")," in the permissions."))):f?s.createElement(U.A,{icon:!0,warning:!0,visible:!0,"data-testid":"access-message"},s.createElement(F.A,{name:"lock"}),s.createElement(U.A.Content,null,s.createElement(U.A.Header,null,g.M.t("Public with restricted files")),s.createElement(j.x,null,"The record is publicly accessible. The files can ",s.createElement("b",null,"only")," be accessed by"," ",s.createElement("b",null,"users specified")," in the permissions."))):m?s.createElement(U.A,{icon:!0,warning:!0,visible:!0,"data-testid":"access-message"},s.createElement(F.A,{name:"lock"}),s.createElement(U.A.Content,null,s.createElement(U.A.Header,null,g.M.t("Embargoed (files-only)")),s.createElement(j.x,{defaults:"The record is publicly accessible. On <bold>{{ date }}</bold> the files will automatically be made publicly accessible. Until then, the files can <bold>only</bold> be accessed by <bold>users specified</bold> in the permissions.",values:{date:v},components:{bold:s.createElement("b",null)}}))):void 0};function H(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,W()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}V.propTypes={access:p().object.isRequired,metadataOnly:p().bool,accessCommunity:p().string.isRequired},V.defaultProps={metadataOnly:!1};var Y=function(e){function t(){return(0,i.A)(this,t),H(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.formik,r=e.label,i=e.labelIcon,a=e.showMetadataAccess,o=e.community,l=!0===(null===o||void 0===o?void 0:o.is_ghost),c=o&&!l&&o.access.visibility||"public",u=!n.form.values.files.enabled;return s.createElement(h.A,{className:"access-right"},s.createElement(v.A.Field,{required:!0},s.createElement(h.A.Content,null,s.createElement(h.A.Header,null,s.createElement(f.FieldLabel,{htmlFor:t,icon:i,label:r}))),s.createElement(h.A.Content,null,a&&s.createElement(s.Fragment,null,s.createElement(k,{recordAccess:n.field.value.record,communityAccess:c}),s.createElement(b.A,{hidden:!0})),s.createElement(O,{access:n.field.value,accessCommunity:c,metadataOnly:u}),s.createElement(b.A,{hidden:!0}),s.createElement(V,{access:n.field.value,accessCommunity:c,metadataOnly:u}),s.createElement(b.A,{hidden:!0})),s.createElement(h.A.Content,null,s.createElement(h.A.Header,{as:y.A,size:"tiny"},g.M.t("Options"))),s.createElement(h.A.Content,{extra:!0},s.createElement(B,{access:n.field.value,accessCommunity:c,metadataOnly:u}))))}}])}(s.Component);Y.propTypes={fieldPath:p().string.isRequired,formik:p().object.isRequired,label:p().string.isRequired,labelIcon:p().string.isRequired,showMetadataAccess:p().bool,community:p().object},Y.defaultProps={showMetadataAccess:!0,community:void 0};var Q=(0,u.connect)((function(e){return{community:e.deposit.editorState.selectedCommunity}}),null)(Y),G=function(e){function t(){return(0,i.A)(this,t),H(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props.fieldPath;return s.createElement(m.Field,{name:t},(function(t){return s.createElement(Q,(0,r.A)({formik:t},e.props))}))}}])}(s.Component);G.propTypes={fieldPath:p().string.isRequired,label:p().string.isRequired,labelIcon:p().string,isMetadataOnly:p().bool},G.defaultProps={labelIcon:void 0,isMetadataOnly:void 0};var K=n(1489),X={lang:"",description:"",type:""},J=n(80045),$=["fieldPath","label","labelIcon","required","multiple","placeholder","clearable","initialOptions","serializeSuggestions"];function Z(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,ee()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ee=function(){return!!e})()}var te=function(e){function t(){return(0,i.A)(this,t),Z(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.label,i=e.labelIcon,a=e.required,o=e.multiple,l=e.placeholder,c=e.clearable,u=e.initialOptions,d=e.serializeSuggestions,p=(0,J.A)(e,$),m=d||null;return s.createElement(f.RemoteSelectField,(0,r.A)({fieldPath:t,suggestionAPIUrl:"/api/vocabularies/languages",suggestionAPIHeaders:{Accept:"application/vnd.inveniordm.v1+json"},placeholder:l,required:a,clearable:c,multiple:o,initialSuggestions:u,label:s.createElement(f.FieldLabel,{htmlFor:t,icon:i,label:n}),noQueryMessage:g.M.t("Search for languages...")},m&&{serializeSuggestions:m},p))}}])}(s.Component);te.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,required:p().bool,multiple:p().bool,clearable:p().bool,placeholder:p().string,initialOptions:p().arrayOf(p().shape({key:p().string,value:p().string,text:p().string})),serializeSuggestions:p().func},te.defaultProps={label:g.M.t("Languages"),labelIcon:"globe",multiple:!0,clearable:!0,placeholder:g.M.t('Search for a language by name (e.g "eng", "fr" or "Polish")'),required:!1,initialOptions:void 0,serializeSuggestions:void 0};var ne=n(82284);function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};if("object"===(0,ne.A)(e))for(var n in e)re(e[n],t);else t(e)}function ie(e){return e.sort((function(e,t){return e.text.localeCompare(t.text)}))}function ae(){window.scrollTo({top:0,left:0,behavior:"smooth"})}function oe(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,le()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(le=function(){return!!e})()}var ce=function(e){function t(){return(0,i.A)(this,t),oe(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.options,r=e.recordUI,i=e.editorConfig;return s.createElement(f.ArrayField,{addButtonLabel:g.M.t("Add description"),defaultNewValue:X,fieldPath:t,className:"additional-descriptions"},(function(e){var a,o=e.arrayHelpers,l=e.indexPath,c="".concat(t,".").concat(l);return s.createElement(K.A,{className:"description"},s.createElement(K.A.Row,null,s.createElement(K.A.Column,{mobile:16,tablet:10,computer:12},s.createElement(f.RichInputField,{fieldPath:"".concat(c,".description"),label:g.M.t("Additional Description"),editorConfig:i,optimized:!0,required:!0})),s.createElement(K.A.Column,{mobile:16,tablet:6,computer:4},s.createElement(v.A.Field,null,s.createElement(E.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",floated:"right",icon:!0,onClick:function(){return o.remove(l)}},s.createElement(F.A,{name:"close"}))),s.createElement(f.SelectField,{fieldPath:"".concat(c,".type"),label:g.M.t("Type"),options:ie(n.type),required:!0,optimized:!0}),s.createElement(te,{serializeSuggestions:function(e){return e.map((function(e){return{text:e.title_l10n,value:e.id,fieldPathPrefix:e.id}}))},initialOptions:null!==r&&void 0!==r&&r.additional_descriptions&&null!==(a=r.additional_descriptions[l])&&void 0!==a&&a.lang?[r.additional_descriptions[l].lang]:[],fieldPath:"".concat(c,".lang"),label:g.M.t("Language"),multiple:!1,placeholder:g.M.t("Select language"),labelIcon:"",clearable:!0,selectOnBlur:!1}))))}))}}])}(s.Component);function se(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,ue()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}ce.propTypes={fieldPath:p().string.isRequired,options:p().shape({type:p().arrayOf(p().shape({icon:p().string,text:p().string,value:p().string})),lang:p().arrayOf(p().shape({text:p().string,value:p().string}))}).isRequired,recordUI:p().object,editorConfig:p().object},ce.defaultProps={recordUI:{},editorConfig:void 0};var de=function(e){function t(){return(0,i.A)(this,t),se(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.label,r=e.labelIcon,i=e.options,a=e.editorConfig,o=e.recordUI;return s.createElement(s.Fragment,null,s.createElement(f.RichInputField,{className:"description-field rel-mb-1 rel-mt-2",fieldPath:t,editorConfig:a,label:s.createElement(f.FieldLabel,{htmlFor:t,icon:r,label:n}),optimized:!0}),s.createElement(ce,{recordUI:o,options:i,editorConfig:a,fieldPath:"metadata.additional_descriptions"}))}}])}(s.Component);de.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,editorConfig:p().object,recordUI:p().object,options:p().object.isRequired},de.defaultProps={label:g.M.t("Description"),labelIcon:"pencil",editorConfig:void 0,recordUI:void 0};var pe=n(28085),me=n(58156),fe=n.n(me),he=n(8909),ve=n(79551),be=n(80296),ye=n(7309),ge=n.n(ye),Ae=n(55378),Ee=n.n(Ae),we=n(48423),Ce=n(15941);function Re(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Pe()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pe=function(){return!!e})()}var Se=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Re(this,t,[].concat(r)),(0,A.A)(e,"serializeAffiliations",(function(e){return e.map((function(e){return{text:e.acronym?"".concat(e.name," (").concat(e.acronym,")"):e.name,value:e.id||e.name,key:e.id,id:e.id,name:e.name}}))})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.fieldPath,r=t.selectRef;return s.createElement(m.Field,{name:n},(function(t){var i=t.form.values;return s.createElement(f.RemoteSelectField,{fieldPath:n,suggestionAPIUrl:"/api/affiliations",suggestionAPIHeaders:{Accept:"application/json"},initialSuggestions:(0,m.getIn)(i,n,[]),serializeSuggestions:e.serializeAffiliations,placeholder:g.M.t("Search or create affiliation"),label:s.createElement(f.FieldLabel,{htmlFor:"".concat(n,".name"),label:g.M.t("Affiliations")}),noQueryMessage:g.M.t("Search for affiliations.."),allowAdditions:!0,clearable:!0,multiple:!0,onValueChange:function(e,t){e.formikProps.form.setFieldValue(n,t)},value:(0,m.getIn)(i,n,[]).map((function(e){return e.id||e.text||e.name})),ref:r,search:function(e){return e}})}))}}])}(s.Component);Se.propTypes={fieldPath:p().string.isRequired,selectRef:p().object},Se.defaultProps={selectRef:void 0};var ke=n(45458),Oe=n(99786),De=n.n(Oe);function Ie(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,xe()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xe=function(){return!!e})()}var Me=function(e){function t(e){var n;return(0,i.A)(this,t),n=Ie(this,t,[e]),(0,A.A)(n,"handleIdentifierAddition",(function(e,t){var r=t.value;n.setState((function(e){return{selectedOptions:De()([{text:r,value:r,key:r}].concat((0,ke.A)(e.selectedOptions)),"value")}}))})),(0,A.A)(n,"valuesToOptions",(function(e){return e.map((function(e){return{text:e,value:e,key:e}}))})),(0,A.A)(n,"handleChange",(function(e){var t=e.data,r=e.formikProps,i=n.props.fieldPath;n.setState({selectedOptions:n.valuesToOptions(t.value)}),r.form.setFieldValue(i,t.value)})),n.state={selectedOptions:e.initialOptions},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.label,r=e.placeholder,i=this.state.selectedOptions;return s.createElement(f.SelectField,{fieldPath:t,label:n,options:i,placeholder:r,noResultsMessage:g.M.t("Type the value of an identifier..."),search:!0,multiple:!0,selection:!0,allowAdditions:!0,onChange:this.handleChange,icon:null,onAddItem:this.handleIdentifierAddition,optimized:!0})}}])}(s.Component);Me.propTypes={initialOptions:p().arrayOf(p().shape({key:p().string.isRequired,text:p().string.isRequired,value:p().string.isRequired})).isRequired,fieldPath:p().string.isRequired,label:p().string,placeholder:p().string},Me.defaultProps={label:g.M.t("Identifiers"),placeholder:g.M.t("e.g. ORCID, ISNI or GND.")};var Fe="personal",Te="organizational";function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Le()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Le=function(){return!!e})()}var ze="add",je="search_only",Be="off",Ue=function(e){function t(e){var n;return(0,i.A)(this,t),n=Ne(this,t,[e]),(0,A.A)(n,"CreatorSchema",Ce.Ik({person_or_org:Ce.Ik({type:Ce.Yj(),family_name:Ce.Yj().when("type",(function(e,t){if(e===Fe&&n.isCreator())return t.required(g.M.t("Family name is a required field."))})),name:Ce.Yj().when("type",(function(e,t){if(e===Te&&n.isCreator())return t.required(g.M.t("Name is a required field."))}))}),role:Ce.Yj().when("_",(function(e,t){if(!n.isCreator())return t.required(g.M.t("Role is a required field."))}))})),(0,A.A)(n,"openModal",(function(){n.setState({open:!0,action:null},(function(){var e=n.props.initialCreatibutor;I()(e)||(n.state.isOrganization?(e.person_or_org.family_name="",e.person_or_org.given_name=""):e.person_or_org.name="",n.initStatesFromInitialCreatibutor(e))}))})),(0,A.A)(n,"closeModal",(function(){n.setState({personAffiliations:[],personIdentifiers:[],organizationAffiliations:[],organizationIdentifiers:[],open:!1,action:null})})),(0,A.A)(n,"changeContent",(function(){n.setState({saveAndContinueLabel:g.M.t("Added")}),setTimeout((function(){n.setState({saveAndContinueLabel:g.M.t("Save and add another")})}),2e3)})),(0,A.A)(n,"displayActionLabel",(function(){var e=n.props,t=e.action,r=e.addLabel,i=e.editLabel;return t===ze?r:i})),(0,A.A)(n,"serializeCreatibutor",(function(e){var t=n.props.initialCreatibutor,r="person_or_org.identifiers",i=fe()(t,r,[]),a=fe()(e,r,[]).map((function(e){return t=i,n="identifier",r=e,ge()(t,(0,A.A)({},n,r))||(0,A.A)({},n,r);var t,n,r})),o=fe()(e,"affiliations",[]);return qe(qe({},e),{},{person_or_org:qe(qe({},e.person_or_org),{},{identifiers:a}),affiliations:o})})),(0,A.A)(n,"deserializeCreatibutor",(function(e){return{person_or_org:qe(qe({type:Fe},e.person_or_org),{},{identifiers:Ee()(fe()(e,"person_or_org.identifiers",[]),"identifier")}),affiliations:fe()(e,"affiliations",[]),role:fe()(e,"role","")}})),(0,A.A)(n,"isCreator",(function(){return"creators"===n.props.schema})),(0,A.A)(n,"onSubmit",(function(e,t){var r=n.props.onCreatibutorChange,i=n.state.action;switch(r(n.serializeCreatibutor(e)),t.setSubmitting(!1),t.resetForm(),i){case"saveAndContinue":n.closeModal(),n.openModal(),n.changeContent();break;case"saveAndClose":n.closeModal()}})),(0,A.A)(n,"makeIdEntry",(function(e){var t=null,n=null;if("orcid"===e.scheme)t="/static/images/orcid.svg",n="https://orcid.org/"+e.identifier;else if("gnd"===e.scheme)t="/static/images/gnd-icon.svg",n="https://d-nb.info/gnd/"+e.identifier;else{if("ror"!==e.scheme)return"isni"===e.scheme||"grid"===e.scheme?null:s.createElement(s.Fragment,null,e.scheme,": ",e.identifier);t="/static/images/ror-icon.svg",n="https://ror.org/"+e.identifier}return s.createElement("span",{key:e.identifier},s.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},s.createElement(f.Image,{src:t,className:"inline-id-icon ml-5 mr-5",verticalAlign:"middle"}),"orcid"===e.scheme?e.identifier:null))})),(0,A.A)(n,"serializeSuggestions",(function(e){var t=e.map((function(e){var t;e.affiliations=e.affiliations||[],e.identifiers=e.identifiers||[];var r="";"affiliations"in e&&e.affiliations.forEach((function(t,n){r+=t.name,n<e.affiliations.length-1&&(r+=", ")}));var i=[];null===(t=e.identifiers)||void 0===t||t.forEach((function(e){i.push(n.makeIdEntry(e))}));var a=n.state.isOrganization;return{text:e.name,value:e.id,extra:e,key:e.id,content:s.createElement(y.A,null,e.name," ",i.length?s.createElement(s.Fragment,null,"(",i,")"):null,s.createElement(y.A.Subheader,null,a?e.acronym:r))}})),r=n.state.showPersonForm;return n.props.autocompleteNames===je&&!r&&t.push({text:"Manual entry",value:"Manual entry",extra:"Manual entry",key:"manual-entry",content:s.createElement(y.A,{textAlign:"center"},s.createElement(y.A.Content,null,s.createElement("p",null,s.createElement(j.x,null,"Couldn't find your person? You can ",s.createElement("a",null,"create a new entry"),"."))))}),t})),(0,A.A)(n,"onOrganizationSearchChange",(function(e,t){var r=e.formikProps,i=t[0].extra;n.setState({organizationIdentifiers:i.identifiers.map((function(e){return e.identifier})),organizationAffiliations:[]},(function(){var e=n.state,t=e.organizationIdentifiers,a=e.organizationAffiliations;r.form.setFieldValue("person_or_org.name",i.name),n.updateIdentifiersAndAffiliations(r,t,a,n.identifiersRef,n.affiliationsRef)}))})),(0,A.A)(n,"onPersonSearchChange",(function(e,t){var r=e.formikProps;if("manual-entry"===t[0].key)return n.namesAutocompleteRef.current.setState({suggestions:[],selectedSuggestions:[]}),void n.setState({showPersonForm:!0});var i=t[0].extra;n.setState({showPersonForm:!0,personIdentifiers:i.identifiers.map((function(e){return e.identifier})),personAffiliations:i.affiliations.map((function(e){return e}))},(function(){var e=n.state,t=e.personIdentifiers,a=e.personAffiliations,o="person_or_org",l="".concat(o,".family_name"),c="".concat(o,".given_name"),s=(0,A.A)((0,A.A)({},c,i.given_name),l,i.family_name);Object.entries(s).forEach((function(e){var t=(0,be.A)(e,2),n=t[0],i=t[1];r.form.setFieldValue(n,i)})),n.updateIdentifiersAndAffiliations(r,t,a,n.identifiersRef,n.affiliationsRef)}))})),n.state={open:!1,saveAndContinueLabel:g.M.t("Save and add another"),action:null,showPersonForm:e.autocompleteNames!==je||!I()(e.initialCreatibutor),isOrganization:!I()(e.initialCreatibutor)&&e.initialCreatibutor.person_or_org.type===Te,personIdentifiers:[],personAffiliations:[],organizationIdentifiers:[],organizationAffiliations:[]},n.inputRef=(0,s.createRef)(),n.identifiersRef=(0,s.createRef)(),n.affiliationsRef=(0,s.createRef)(),n.namesAutocompleteRef=(0,s.createRef)(),n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"initStatesFromInitialCreatibutor",value:function(e){var t,n=e.affiliations,r=void 0===n?[]:n,i=this.state.isOrganization,a=null===(t=e.person_or_org.identifiers)||void 0===t?void 0:t.map((function(e){return e.identifier}));this.setState({personIdentifiers:i?[]:a,personAffiliations:i?[]:r,organizationIdentifiers:i?a:[],organizationAffiliations:i?r:[]})}},{key:"updateIdentifiersAndAffiliations",value:function(e,t,n,r,i){var a="".concat("person_or_org",".identifiers"),o=(0,A.A)((0,A.A)({},a,t),"affiliations",n);Object.entries(o).forEach((function(t){var n=(0,be.A)(t,2),r=n[0],i=n[1];e.form.setFieldValue(r,i)})),r.current.setState({selectedOptions:r.current.valuesToOptions(t)});var l=n.map((function(e){var t=e.name;return{text:t,value:t,key:t,name:t}}));i.current.setState({suggestions:l,selectedSuggestions:l,searchQuery:null,error:!1,open:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.initialCreatibutor,i=t.autocompleteNames,a=t.roleOptions,o=t.trigger,l=t.action,c=this.state,u=c.open,d=c.showPersonForm,p=c.personIdentifiers,h=c.personAffiliations,b=c.organizationIdentifiers,y=c.organizationAffiliations,A=c.saveAndContinueLabel,w=this.displayActionLabel();return s.createElement(m.Formik,{initialValues:this.deserializeCreatibutor(n),onSubmit:this.onSubmit,enableReinitialize:!0,validationSchema:this.CreatorSchema,validateOnChange:!1,validateOnBlur:!1},(function(t){var c=t.values,m=t.resetForm,C=t.handleSubmit,R="person_or_org",P="".concat(R,".type"),S="".concat(R,".family_name"),k="".concat(R,".given_name"),O="".concat(R,".name"),D="".concat(R,".identifiers"),x="affiliations";return s.createElement(we.A,{centered:!1,onOpen:function(){return e.openModal()},open:u,trigger:o,onClose:function(){e.closeModal(),m()},closeIcon:!0,closeOnDimmerClick:!1},s.createElement(we.A.Header,{as:"h2",className:"pt-10 pb-10"},w),s.createElement(we.A.Content,null,s.createElement(v.A,null,s.createElement(v.A.Group,null,s.createElement(f.RadioField,{fieldPath:P,label:g.M.t("Person"),checked:fe()(c,P)===Fe,value:Fe,onChange:function(t){var n=t.formikProps;e.setState({isOrganization:!1}),n.form.setFieldValue(P,Fe),n.form.setFieldValue(D,p),n.form.setFieldValue(x,h)},autoFocus:!0,optimized:!0}),s.createElement(f.RadioField,{fieldPath:P,label:g.M.t("Organization"),checked:fe()(c,P)===Te,value:Te,onChange:function(t){var n=t.formikProps;e.setState({isOrganization:!0}),n.form.setFieldValue(P,Te),n.form.setFieldValue(x,y),n.form.setFieldValue(D,b)},optimized:!0})),fe()(c,P,"")===Fe?s.createElement("div",null,i!==Be&&s.createElement(f.RemoteSelectField,{selectOnBlur:!1,selectOnNavigation:!1,searchInput:{autoFocus:I()(n)},fieldPath:"creators",clearable:!0,multiple:!1,allowAdditions:!1,placeholder:g.M.t("Search for persons by name, identifier, or affiliation..."),noQueryMessage:g.M.t("Search for persons by name, identifier, or affiliation..."),required:!1,search:function(e){return e},suggestionAPIUrl:"/api/names",serializeSuggestions:e.serializeSuggestions,onValueChange:e.onPersonSearchChange,ref:e.namesAutocompleteRef}),d&&s.createElement("div",null,s.createElement(v.A.Group,{widths:"equal"},s.createElement(f.TextField,{label:g.M.t("Family name"),placeholder:g.M.t("Family name"),fieldPath:S,required:e.isCreator()}),s.createElement(f.TextField,{label:g.M.t("Given names"),placeholder:g.M.t("Given names"),fieldPath:k})),s.createElement(Me,{initialOptions:Ee()(fe()(c,D,[]),(function(e){return{text:e,value:e,key:e}})),fieldPath:D,ref:e.identifiersRef}),s.createElement(Se,{fieldPath:x,selectRef:e.affiliationsRef}))):s.createElement(s.Fragment,null,i!==Be&&s.createElement(f.RemoteSelectField,{selectOnBlur:!1,selectOnNavigation:!1,searchInput:{autoFocus:I()(n)},fieldPath:"creators",clearable:!0,multiple:!1,allowAdditions:!1,placeholder:g.M.t("Search for an organization by name, identifier, or affiliation..."),noQueryMessage:g.M.t("Search for organization by name, identifier, or affiliation..."),required:!1,search:function(e){return e},suggestionAPIUrl:"/api/affiliations",serializeSuggestions:e.serializeSuggestions,onValueChange:e.onOrganizationSearchChange}),s.createElement(f.TextField,{label:g.M.t("Name"),placeholder:g.M.t("Organization name"),fieldPath:O,required:e.isCreator(),input:{ref:e.inputRef}}),s.createElement(Me,{initialOptions:Ee()(fe()(c,D,[]),(function(e){return{text:e,value:e,key:e}})),fieldPath:D,ref:e.identifiersRef,placeholder:g.M.t("e.g. ROR, ISNI or GND.")}),s.createElement(Se,{fieldPath:x,selectRef:e.affiliationsRef})),(fe()(c,P)===Te||d&&fe()(c,P)===Fe)&&s.createElement("div",null,s.createElement(f.SelectField,(0,r.A)({fieldPath:"role",label:g.M.t("Role"),options:a,placeholder:g.M.t("Select role")},e.isCreator()&&{clearable:!0},{required:!e.isCreator(),optimized:!0,scrolling:!0}))))),s.createElement(we.A.Actions,null,s.createElement(E.A,{name:"cancel",onClick:function(){m(),e.closeModal()},icon:"remove",content:g.M.t("Cancel"),floated:"left"}),l===ze&&s.createElement(E.A,{name:"submit",onClick:function(){e.setState({action:"saveAndContinue",showPersonForm:i!==je},(function(){C()}))},primary:!0,icon:"checkmark",content:A}),s.createElement(E.A,{name:"submit",onClick:function(){e.setState({action:"saveAndClose",showPersonForm:i!==je},(function(){return C()}))},primary:!0,icon:"checkmark",content:g.M.t("Save")})))}))}}])}(s.Component);Ue.propTypes={schema:p().oneOf(["creators","contributors"]).isRequired,action:p().oneOf(["add","edit"]).isRequired,addLabel:p().string.isRequired,autocompleteNames:p().oneOf(["search","search_only","off"]),editLabel:p().string.isRequired,initialCreatibutor:p().shape({id:p().string,person_or_org:p().shape({family_name:p().string,given_name:p().string,name:p().string,type:p().string,identifiers:p().arrayOf(p().shape({scheme:p().string,identifier:p().string}))}),affiliations:p().array,role:p().string}),trigger:p().object.isRequired,onCreatibutorChange:p().func.isRequired,roleOptions:p().array},Ue.defaultProps={roleOptions:[],initialCreatibutor:{},autocompleteNames:"search"};var Ve=n(97177),He=n(65522),We=n(16147),Ye=function(e){var t=e.compKey,n=e.identifiersError,r=e.index,i=e.replaceCreatibutor,a=e.removeCreatibutor,o=e.moveCreatibutor,l=e.addLabel,c=e.editLabel,u=e.initialCreatibutor,d=e.displayName,p=e.roleOptions,m=e.schema,f=e.autocompleteNames,h=s.useRef(null),v=(0,Ve.i)({item:{index:r,type:"creatibutor"}}),b=(0,be.A)(v,3),y=(b[0],b[1]),A=b[2],w=(0,He.H)({accept:"creatibutor",hover:function(e,t){if(h.current){var n=e.index,i=r;n!==i&&t.isOver({shallow:!0})&&(o(n,i),e.index=i)}},collect:function(e){return{hidden:e.isOver({shallow:!0})}}}),C=(0,be.A)(w,2),R=C[0].hidden,P=C[1],S=n&&n.find((function(e){return![void 0,null].includes(e)}));return P(h),s.createElement(We.o,{innerRef:h,key:t},s.createElement(M.A.Item,{key:t,className:R?"deposit-drag-listitem hidden":"deposit-drag-listitem"},s.createElement(M.A.Content,{floated:"right"},s.createElement(Ue,{addLabel:l,editLabel:c,onCreatibutorChange:function(e){i(r,e)},initialCreatibutor:u,roleOptions:p,schema:m,autocompleteNames:f,action:"edit",trigger:s.createElement(E.A,{size:"mini",primary:!0,type:"button"},g.M.t("Edit"))}),s.createElement(E.A,{size:"mini",type:"button",onClick:function(){return a(r)}},g.M.t("Remove"))),s.createElement(We.o,{innerRef:y},s.createElement(M.A.Icon,{name:"bars",className:"drag-anchor"})),s.createElement(We.o,{innerRef:A},s.createElement(M.A.Content,null,s.createElement(M.A.Description,null,s.createElement("span",{className:"creatibutor"},fe()(u,"person_or_org.identifiers",[]).some((function(e){return"orcid"===e.scheme}))&&s.createElement("img",{alt:"ORCID logo",className:"inline-id-icon mr-5",src:"/static/images/orcid.svg",width:"16",height:"16"}),fe()(u,"person_or_org.identifiers",[]).some((function(e){return"ror"===e.scheme}))&&s.createElement("img",{alt:"ROR logo",className:"inline-id-icon mr-5",src:"/static/images/ror-icon.svg",width:"16",height:"16"}),fe()(u,"person_or_org.identifiers",[]).some((function(e){return"gnd"===e.scheme}))&&s.createElement("img",{alt:"GND logo",className:"inline-id-icon mr-5",src:"/static/images/gnd-icon.svg",width:"16",height:"16"}),d," ",function(e,t){if(e){var n,r,i=null!==(n=null===(r=t.find((function(t){return t.value===e})))||void 0===r?void 0:r.text)&&void 0!==n?n:e;return s.createElement(pe.A,{size:"tiny"},i)}}(null===u||void 0===u?void 0:u.role,p))),S&&s.createElement(pe.A,{pointing:"left",prompt:!0},S.scheme?S.scheme:"Invalid identifiers")))))};function Qe(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Ge()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ge=function(){return!!e})()}Ye.propTypes={compKey:p().string.isRequired,identifiersError:p().array,index:p().number.isRequired,replaceCreatibutor:p().func.isRequired,removeCreatibutor:p().func.isRequired,moveCreatibutor:p().func.isRequired,addLabel:p().node,editLabel:p().node,initialCreatibutor:p().object.isRequired,displayName:p().string,roleOptions:p().array.isRequired,schema:p().string.isRequired,autocompleteNames:p().oneOfType([p().bool,p().string])},Ye.defaultProps={identifiersError:void 0,addLabel:void 0,editLabel:void 0,displayName:void 0,autocompleteNames:void 0};var Ke=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Qe(this,t,[].concat(r)),(0,A.A)(e,"handleOnContributorChange",(function(t){(0,e.props.push)(t)})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.form,n=t.values,r=t.errors,i=t.initialErrors,a=t.initialValues,o=e.remove,l=e.replace,c=e.move,u=e.name,d=e.label,p=e.labelIcon,h=e.roleOptions,b=e.schema,y=e.modal,g=e.autocompleteNames,A=e.addButtonLabel,w=(0,m.getIn)(n,u,[]),C=(0,m.getIn)(a,u,[]),R=(0,m.getIn)(r,u,null),P=(0,m.getIn)(i,u,null),S=R||w===C&&P;return s.createElement(ve.Q,{backend:he.t2},s.createElement(v.A.Field,{required:"creators"===b,className:S?"error":""},s.createElement(f.FieldLabel,{htmlFor:u,icon:p,label:d}),s.createElement(M.A,null,w.map((function(e,t){var n,r="".concat(u,".").concat(t),i=S&&(null===(n=S[t])||void 0===n||null===(n=n.person_or_org)||void 0===n?void 0:n.identifiers),a=function(e){var t=fe()(e,"person_or_org.type",Fe)===Fe,n=fe()(e,"person_or_org.family_name",""),r=fe()(e,"person_or_org.given_name",""),i=fe()(e,"affiliations[0].name",""),a=fe()(e,"person_or_org.name"),o=i?" (".concat(i,")"):"";if(t){var l=r?", ".concat(r):"";return"".concat(n).concat(l).concat(o)}return"".concat(a).concat(o)}(e);return s.createElement(Ye,{key:r,identifiersError:i,displayName:a,index:t,roleOptions:h,schema:b,compKey:r,initialCreatibutor:e,removeCreatibutor:o,replaceCreatibutor:l,moveCreatibutor:c,addLabel:y.addLabel,editLabel:y.editLabel,autocompleteNames:g})}))),s.createElement(Ue,{onCreatibutorChange:this.handleOnContributorChange,action:"add",addLabel:y.addLabel,editLabel:y.editLabel,roleOptions:ie(h),schema:b,autocompleteNames:g,trigger:s.createElement(E.A,{type:"button",icon:!0,labelPosition:"left"},s.createElement(F.A,{name:"add"}),A)}),S&&"string"==typeof S&&s.createElement(pe.A,{pointing:"left",prompt:!0},S)))}}])}(s.Component),Xe=function(e){function t(){return(0,i.A)(this,t),Qe(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props.fieldPath;return s.createElement(m.FieldArray,{name:t,component:function(t){return s.createElement(Ke,(0,r.A)({},t,e.props))}})}}])}(s.Component);Ke.propTypes={fieldPath:p().string.isRequired,addButtonLabel:p().string,modal:p().shape({addLabel:p().string.isRequired,editLabel:p().string.isRequired}),schema:p().oneOf(["creators","contributors"]).isRequired,autocompleteNames:p().oneOf(["search","search_only","off"]),label:p().string,labelIcon:p().string,roleOptions:p().array.isRequired,form:p().object.isRequired,remove:p().func.isRequired,replace:p().func.isRequired,move:p().func.isRequired,push:p().func.isRequired,name:p().string.isRequired},Ke.defaultProps={autocompleteNames:"search",label:g.M.t("Creators"),labelIcon:"user",modal:{addLabel:g.M.t("Add creator"),editLabel:g.M.t("Edit creator")},addButtonLabel:g.M.t("Add creator")},Xe.propTypes={fieldPath:p().string.isRequired,addButtonLabel:p().string,modal:p().shape({addLabel:p().string.isRequired,editLabel:p().string.isRequired}),schema:p().oneOf(["creators","contributors"]).isRequired,autocompleteNames:p().oneOf(["search","search_only","off"]),label:p().string,labelIcon:p().string,roleOptions:p().array},Xe.defaultProps={autocompleteNames:"search",label:void 0,labelIcon:void 0,roleOptions:void 0,modal:{addLabel:g.M.t("Add creator"),editLabel:g.M.t("Edit creator")},addButtonLabel:g.M.t("Add creator")};var Je=n(61505),$e=n.n(Je),Ze=n(87612),et=n.n(Ze),tt=n(2404),nt=n.n(tt),rt=n(61448),it=n.n(rt),at={date:"",description:"",type:""};function ot(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ct(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,st()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function st(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(st=function(){return!!e})()}var ut=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=ct(this,t,[].concat(r)),(0,A.A)(e,"getRequiredOption",(function(t,n){var r,i=ot(e.props.requiredOptions);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=et()(n,$e()(a))[0];if(nt()(o,t))return a}}catch(l){i.e(l)}finally{i.f()}return null})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.fieldPath,r=t.options,i=t.label,a=t.labelIcon,o=t.placeholderDate,l=t.required,c=t.requiredOptions,u=t.showEmptyValue;return s.createElement(f.ArrayField,{addButtonLabel:g.M.t("Add date"),defaultNewValue:at,fieldPath:n,helpText:g.M.t("Format: DATE or DATE/DATE where DATE is YYYY or YYYY-MM or YYYY-MM-DD."),label:i,labelIcon:a,required:l,requiredOptions:c,showEmptyValue:u},(function(t){var i=t.array,a=t.arrayHelpers,l=t.indexPath,c=t.value,u="".concat(n,".").concat(l),d=e.getRequiredOption(c,i),p=it()(d,"date"),m=it()(d,"type"),h=it()(d,"description");return s.createElement(f.GroupField,{fieldPath:n,optimized:!0},s.createElement(f.TextField,{fieldPath:"".concat(u,".date"),label:g.M.t("Date"),placeholder:o,disabled:p,required:!0,width:5}),s.createElement(f.SelectField,{fieldPath:"".concat(u,".type"),label:g.M.t("Type"),"aria-label":g.M.t("Type"),options:ie(r.type),disabled:m,required:!0,width:5,optimized:!0}),s.createElement(f.TextField,{fieldPath:"".concat(u,".description"),label:g.M.t("Description"),disabled:h,width:5}),s.createElement(v.A.Field,null,s.createElement(E.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",disabled:!I()(d),icon:!0,onClick:function(){return a.remove(l)},type:"button"},s.createElement(F.A,{name:"close"}))))}))}}])}(s.Component);ut.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,options:p().shape({type:p().arrayOf(p().shape({text:p().string,value:p().string}))}).isRequired,required:p().bool,placeholderDate:p().string,requiredOptions:p().array,showEmptyValue:p().bool},ut.defaultProps={label:g.M.t("Dates"),labelIcon:"calendar",placeholderDate:g.M.t("YYYY-MM-DD or YYYY-MM-DD/YYYY-MM-DD"),required:!1,requiredOptions:[],showEmptyValue:!1};var dt=n(10467),pt=n(54756),mt=n.n(pt),ft=n(2543),ht=n.n(ft),vt="DRAFT_FETCHED",bt="DRAFT_HAS_VALIDATION_ERRORS",yt="DRAFT_SAVE_STARTED",gt="DRAFT_SAVE_SUCCEEDED",At="DRAFT_SAVE_FAILED",Et="DRAFT_PUBLISH_STARTED",wt="DRAFT_PUBLISH_FAILED",Ct="DRAFT_PUBLISH_FAILED_WITH_VALIDATION_ERRORS",Rt="DRAFT_PREVIEW_STARTED",Pt="DRAFT_PREVIEW_FAILED",St="DRAFT_DELETE_STARTED",kt="DRAFT_DELETE_FAILED",Ot="DRAFT_SUBMIT_REVIEW_STARTED",Dt="DRAFT_SUBMIT_REVIEW_FAILED",It="DRAFT_SUBMIT_REVIEW_FAILED_WITH_VALIDATION_ERRORS",xt="RESERVE_PID_STARTED",Mt="RESERVE_PID_SUCCEEDED",Ft="RESERVE_PID_FAILED",Tt="DISCARD_PID_STARTED",_t="DISCARD_PID_SUCCEEDED",qt="DISCARD_PID_FAILED",Nt="FILE_UPLOAD_ADDED",Lt="FILE_UPLOAD_IN_PROGRESS",zt="FILE_UPLOAD_FINISHED",jt="FILE_UPLOAD_FAILED",Bt="FILE_UPLOAD_SAVE_DRAFT_FAILED",Ut="FILE_IMPORT_STARTED",Vt="FILE_IMPORT_SUCCESS",Ht="FILE_IMPORT_FAILED",Wt="FILE_DELETED_SUCCESS",Yt="FILE_DELETE_FAILED",Qt="FILE_UPLOAD_SET_CANCEL_FUNCTION",Gt="FILE_UPLOAD_CANCELLED",Kt="SET_COMMUNITY";function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $t(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.history.replaceState(void 0,"",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var en=function(){var e=(0,dt.A)(mt().mark((function e(t,n){var r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!!t.id,e.next=3,n.save(t);case 3:return i=e.sent,!I()(i.errors)&&(a={metadata:t.metadata,custom_fields:t.custom_fields},i.data=ht().merge(i.data,a)),r||$t(i.data.links.self_html),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function tn(e,t,n){return nn.apply(this,arguments)}function nn(){return(nn=(0,dt.A)(mt().mark((function e(t,n,r){var i,a,o,l,c,s,u,d,p,m,f,h,v,b;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.depositState,a=r.dispatchFn,o=r.failType,l=r.partialValidationActionType,e.prev=1,e.next=4,en(t,n,o);case 4:c=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),a({type:o,payload:{errors:e.t0.errors}}),e.t0;case 11:if(s=!I()(c.errors),u=s?c:{},d=i.editorState,p=d.actions,m=p.communityStateMustBeChecked,f=p.shouldDeleteReview,h=p.shouldUpdateReview,v=d.selectedCommunity,!m){e.next=27;break}if(b=c.data,!f){e.next=19;break}return e.next=19,n.deleteReview(b.links);case 19:if(!h){e.next=22;break}return e.next=22,n.createOrUpdateReview(b.links,v.id);case 22:return e.next=24,n.read(b.links);case 24:c=e.sent,a({type:vt,payload:{data:c.data}}),u.data=Jt(Jt({},u.data),c.data);case 27:if(!s){e.next=30;break}throw a({type:l,payload:{data:u.data,errors:u.errors}}),u;case 30:return e.abrupt("return",c);case 31:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var rn=function(e){return function(){var t=(0,dt.A)(mt().mark((function t(n){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:Kt,payload:{community:e}});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function an(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return on(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ln(e){var t=function(e,t){if("object"!=(0,ne.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=(0,ne.A)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,ne.A)(t)?t:t+""}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var un={uploading:"uploading",error:"error",finished:"finished",pending:"pending"},dn={};const pn=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,i=arguments.length>1?arguments[1]:void 0,a=null!==(e=null===(t=i.payload)||void 0===t||null===(t=t.filename)||void 0===t?void 0:t.normalize())&&void 0!==e?e:"";switch(i.type){case Nt:return sn(sn({},r),{},{entries:sn(sn({},r.entries),{},(0,A.A)({},a,{progressPercentage:0,name:a,size:0,status:un.pending,checksum:null,links:null,cancelUploadFn:null})),actionState:i.type});case Lt:return sn(sn({},r),{},{entries:sn(sn({},r.entries),{},(0,A.A)({},a,sn(sn({},r.entries[a]),{},{progressPercentage:i.payload.percent,status:un.uploading}))),isFileUploadInProgress:!0,actionState:i.type});case zt:return n=sn(sn({},r),{},{entries:sn(sn({},r.entries),{},(0,A.A)({},a,sn(sn({},r.entries[a]),{},{status:un.finished,size:i.payload.size,progressPercentage:100,checksum:i.payload.checksum,links:i.payload.links,cancelUploadFn:null})))}),sn(sn({},n),{},{isFileUploadInProgress:Object.values(n.entries).some((function(e){return e.status===un.uploading})),actionState:i.type});case Bt:return sn(sn({},r),{},{errors:sn({},i.payload.errors),actionState:i.type});case jt:return n=sn(sn({},r),{},{entries:sn(sn({},r.entries),{},(0,A.A)({},a,sn(sn({},r.entries[a]),{},{status:un.error,cancelUploadFn:null})))}),sn(sn({},n),{},{isFileUploadInProgress:Object.values(n.entries).some((function(e){return e.status===un.uploading})),actionState:i.type});case Qt:return sn(sn({},r),{},{entries:sn(sn({},r.entries),{},(0,A.A)({},a,sn(sn({},r.entries[a]),{},{cancelUploadFn:i.payload.cancelUploadFn}))),actionState:i.type});case Gt:var o=r.entries,l=(o[a],(0,J.A)(o,[a].map(ln)));return sn(sn({},r),{},{entries:sn({},l),isFileUploadInProgress:Object.values(l).some((function(e){return e.status===un.uploading})),actionState:i.type});case Wt:var c=r.entries,s=(c[a],(0,J.A)(c,[a].map(ln)));return sn(sn({},r),{},{entries:sn({},s),isFileUploadInProgress:Object.values(s).some((function(e){return e.status===un.uploading})),actionState:i.type});case Yt:return sn(sn({},r),{},{actionState:i.type});case Ut:return sn(sn({},r),{},{isFileImportInProgress:!0,actionState:i.type});case Vt:return sn(sn({},r),{},{entries:sn({},i.payload.files),isFileImportInProgress:!1,actionState:i.type});case Ht:return sn(sn({},r),{},{isFileImportInProgress:!1,actionState:i.type});default:return r}};var mn=n(93682),fn=["onError","record","disabled"],hn=function(e){var t=e.onError,n=e.record,i=e.disabled,a=(0,J.A)(e,fn),o=(0,s.useState)(!1),l=(0,be.A)(o,2),c=l[0],u=l[1],d=function(){var e=(0,dt.A)(mt().mark((function e(){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,f.http.post(n.links.versions);case 4:r=e.sent,window.location=r.data.links.self_html,e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),u(!1),t(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return s.createElement(mn.A,{content:g.M.t("You don't have permissions to create a new version."),position:"top center",disabled:!i,trigger:s.createElement("span",null,s.createElement(E.A,(0,r.A)({type:"button",positive:!0,size:"mini",onClick:d,loading:c,icon:!0,labelPosition:"left",disabled:i},a),s.createElement(F.A,{name:"tag"}),g.M.t("New version")))})};hn.propTypes={onError:p().func.isRequired,record:p().object.isRequired,disabled:p().bool},hn.defaultProps={disabled:!1};var vn=n(75497),bn=n(53959),yn=n(42755),gn=n(2685);function An(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,En()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function En(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(En=function(){return!!e})()}var wn=function(e){var t=e.filesLocked;return s.createElement(bn.A.Header,null,s.createElement(bn.A.Row,null,s.createElement(bn.A.HeaderCell,null,g.M.t("Preview")," ",s.createElement(mn.A,{content:"Set the default preview",trigger:s.createElement(F.A,{fitted:!0,name:"help circle",size:"small"})})),s.createElement(bn.A.HeaderCell,null,g.M.t("Filename")),s.createElement(bn.A.HeaderCell,null,g.M.t("Size")),!t&&s.createElement(bn.A.HeaderCell,{textAlign:"center"},g.M.t("Progress")),!t&&s.createElement(bn.A.HeaderCell,null)))};wn.propTypes={filesLocked:p().bool},wn.defaultProps={filesLocked:!1};var Cn=function(e){var t,n,r,i,a,o,l=e.filesLocked,c=e.file,u=e.deleteFile,d=e.defaultPreview,p=e.setDefaultPreview,m=e.decimalSizeDisplay,h=(0,s.useState)(!1),v=(0,be.A)(h,2),b=v[0],y=v[1],A=(0,s.useState)(!1),w=(0,be.A)(A,2),C=w[0],R=w[1],P=d===c.name,S=function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,u(t);case 4:P&&p(""),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),R(!1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return s.createElement(bn.A.Row,{key:c.name},s.createElement(bn.A.Cell,{"data-label":g.M.t("Default preview"),width:2},s.createElement(T.A,{checked:P,onChange:function(){return p(P?"":c.name)}})),s.createElement(bn.A.Cell,{"data-label":g.M.t("Filename"),width:10},s.createElement("div",null,c.uploadState.isPending?s.createElement("div",null,c.name):s.createElement("a",{href:fe()(c,"links.content",""),target:"_blank",rel:"noopener noreferrer",className:"mr-5"},c.name),s.createElement("br",null),c.checksum&&s.createElement("div",{className:"ui text-muted"},s.createElement("span",{style:{fontSize:"10px"}},c.checksum)," ",s.createElement(mn.A,{content:g.M.t("This is the file fingerprint (MD5 checksum), which can be used to verify the file integrity."),trigger:s.createElement(F.A,{fitted:!0,name:"help circle",size:"small"}),position:"top center"})))),s.createElement(bn.A.Cell,{"data-label":g.M.t("Size"),width:2},c.size?(0,f.humanReadableBytes)(c.size,m):""),!l&&s.createElement(bn.A.Cell,{className:"file-upload-pending","data-label":g.M.t("Progress"),width:2},!(null!==(t=c.uploadState)&&void 0!==t&&t.isPending)&&s.createElement(yn.A,{className:"file-upload-progress primary",percent:c.progressPercentage,error:c.uploadState.isFailed,size:"medium",progress:!0,autoSuccess:!0,active:!0}),(null===(n=c.uploadState)||void 0===n?void 0:n.isPending)&&s.createElement("span",null,g.M.t("Pending"))),!l&&s.createElement(bn.A.Cell,{textAlign:"right",width:2},((null===(r=c.uploadState)||void 0===r?void 0:r.isFinished)||(null===(i=c.uploadState)||void 0===i?void 0:i.isFailed)||(null===(a=c.uploadState)||void 0===a?void 0:a.isPending))&&(C?s.createElement(F.A,{loading:!0,name:"spinner"}):s.createElement(F.A,{link:!0,className:"action primary",name:"trash alternate outline",disabled:C,onClick:function(){return S(c)},"aria-label":g.M.t("Delete file"),title:g.M.t("Delete file")})),(null===(o=c.uploadState)||void 0===o?void 0:o.isUploading)&&s.createElement(E.A,{compact:!0,type:"button",negative:!0,size:"tiny",disabled:b,onClick:function(){return function(e){y(!0),e.cancelUploadFn()}(c)}},b?s.createElement(F.A,{loading:!0,name:"spinner"}):g.M.t("Cancel"))))};Cn.propTypes={filesLocked:p().bool,file:p().object,deleteFile:p().func.isRequired,defaultPreview:p().string,setDefaultPreview:p().func.isRequired,decimalSizeDisplay:p().bool},Cn.defaultProps={filesLocked:!1,file:void 0,defaultPreview:void 0,decimalSizeDisplay:!1};var Rn=function(e){var t=e.filesLocked,n=e.filesList,r=e.dragText,i=e.uploadButtonIcon,a=e.uploadButtonText,o=e.openFileDialog;return!t&&s.createElement(gn.A,{basic:!0,padded:"very",className:n.length?"file-upload-area":"file-upload-area no-files"},s.createElement(K.A,{columns:3,textAlign:"center"},s.createElement(K.A.Row,{verticalAlign:"middle"},s.createElement(K.A.Column,{mobile:16,tablet:7,computer:7},s.createElement(y.A,{size:"small"},r)),s.createElement(K.A.Column,{className:"mt-10 mb-10",mobile:16,tablet:2,computer:2},"- ",g.M.t("or")," -"),s.createElement(K.A.Column,{mobile:16,tablet:7,computer:7},s.createElement(E.A,{type:"button",primary:!0,labelPosition:"left",icon:i,content:a,onClick:function(){return o()},disabled:null===o})))))};Rn.propTypes={filesLocked:p().bool.isRequired,filesList:p().array,dragText:p().string,uploadButtonIcon:p().node,uploadButtonText:p().string,openFileDialog:p().func},Rn.defaultProps={filesList:void 0,dragText:void 0,uploadButtonIcon:void 0,uploadButtonText:void 0,openFileDialog:null};var Pn=function(e){var t=e.filesLocked,n=e.filesList,r=e.deleteFile,i=e.decimalSizeDisplay,a=(0,m.useFormikContext)(),o=a.setFieldValue,l=a.values,c=fe()(l,"files.default_preview","");return s.createElement(bn.A,null,s.createElement(wn,{filesLocked:t}),s.createElement(bn.A.Body,null,n.map((function(e){return s.createElement(Cn,{key:e.name,filesLocked:t,file:e,deleteFile:r,defaultPreview:c,setDefaultPreview:function(e){return o("files.default_preview",e)},decimalSizeDisplay:i})}))))};Pn.propTypes={filesLocked:p().bool,filesList:p().array,deleteFile:p().func,decimalSizeDisplay:p().bool},Pn.defaultProps={filesLocked:void 0,filesList:void 0,deleteFile:void 0,decimalSizeDisplay:void 0};var Sn=function(e){function t(){return(0,i.A)(this,t),An(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.filesEnabled,i=t.dropzoneParams,a=t.filesList;return n?s.createElement(vn.Ay,i,(function(t){var n=t.getRootProps,i=t.getInputProps,o=t.open;return s.createElement(K.A.Column,{width:16},s.createElement("span",n(),s.createElement("input",i()),0!==a.length&&s.createElement(K.A.Column,{verticalAlign:"middle"},s.createElement(Pn,e.props)),s.createElement(Rn,(0,r.A)({},e.props,{openFileDialog:o}))))})):s.createElement(K.A.Column,{width:16},s.createElement(gn.A,{basic:!0,padded:"very",className:"file-upload-area no-files"},s.createElement(K.A,{textAlign:"center"},s.createElement(K.A.Row,{verticalAlign:"middle"},s.createElement(K.A.Column,null,s.createElement(y.A,{size:"medium"},g.M.t("This is a Metadata-only record.")))))))}}])}(s.Component);Sn.propTypes={deleteFile:p().func,dragText:p().string,dropzoneParams:p().object,filesEnabled:p().bool.isRequired,filesList:p().array,filesLocked:p().bool,links:p().object,setDefaultPreviewFile:p().func,uploadButtonIcon:p().string,uploadButtonText:p().string,decimalSizeDisplay:p().bool},Sn.defaultProps={deleteFile:void 0,dragText:void 0,dropzoneParams:void 0,filesList:void 0,filesLocked:!1,links:void 0,setDefaultPreviewFile:void 0,uploadButtonIcon:void 0,uploadButtonText:void 0,decimalSizeDisplay:void 0};var kn=function(e){var t=e.filesList,n=e.filesSize,r=e.filesEnabled,i=e.showMetadataOnlyToggle,a=e.quota,o=e.decimalSizeDisplay,l=(0,m.useFormikContext)().setFieldValue,c=function(){l("files.enabled",!r),l("access.files","public")};return s.createElement(S.default,{id:"ReactInvenioDeposit.FileUploaderToolbar.layout",filesList:t,filesSize:n,filesEnabled:r,showMetadataOnlyToggle:i,quota:a,decimalSizeDisplay:o,handleOnChangeMetadataOnly:c},s.createElement(s.Fragment,null,s.createElement(K.A.Column,{verticalAlign:"middle",floated:"left",mobile:16,tablet:6,computer:6},s.createElement(S.default,{id:"ReactInvenioDeposit.FileUploaderToolbar.MetadataOnlyToggle.container",filesList:t,filesEnabled:r,showMetadataOnlyToggle:i,handleOnChangeMetadataOnly:c},i&&s.createElement(M.A,{horizontal:!0},s.createElement(M.A.Item,null,s.createElement(T.A,{label:g.M.t("Metadata-only record"),onChange:c,disabled:t.length>0,checked:!r})),s.createElement(M.A.Item,null,s.createElement(mn.A,{trigger:s.createElement(F.A,{name:"question circle outline",className:"neutral"}),content:g.M.t("Disable files for this record"),position:"top center"}))))),s.createElement(S.default,{id:"ReactInvenioDeposit.FileUploaderToolbar.FileList.container",filesList:t,filesSize:n,filesEnabled:r,quota:a,decimalSizeDisplay:o},r&&s.createElement(K.A.Column,{mobile:16,tablet:10,computer:10,className:"storage-col"},s.createElement(y.A,{size:"tiny",className:"mr-10"},g.M.t("Storage available")),s.createElement(M.A,{horizontal:!0,floated:"right"},s.createElement(M.A.Item,null,s.createElement(pe.A,t.length===a.maxFiles?{color:"blue"}:{},g.M.t("{{length}} out of {{maxfiles}} files",{length:t.length,maxfiles:a.maxFiles}))),s.createElement(M.A.Item,null,s.createElement(pe.A,(0,f.humanReadableBytes)(n,o)===(0,f.humanReadableBytes)(a.maxStorage,o)?{color:"blue"}:{},(0,f.humanReadableBytes)(n,o)," ",g.M.t("out of")," ",(0,f.humanReadableBytes)(a.maxStorage,o))))))))};kn.propTypes={filesList:p().array,filesSize:p().oneOfType([p().number,p().string]),filesEnabled:p().bool.isRequired,quota:p().object,decimalSizeDisplay:p().bool,showMetadataOnlyToggle:p().bool},kn.defaultProps={filesList:void 0,filesSize:void 0,quota:void 0,decimalSizeDisplay:!1,showMetadataOnlyToggle:!0};var On=["config","files","isDraftRecord","hasParentRecord","quota","permissions","record","uploadFiles","deleteFile","importParentFiles","importButtonIcon","importButtonText","isFileImportInProgress","decimalSizeDisplay","filesLocked"],Dn=function(e){var t=e.config,n=e.files,i=e.isDraftRecord,a=e.hasParentRecord,o=e.quota,l=e.permissions,c=e.record,u=e.uploadFiles,d=e.deleteFile,p=e.importParentFiles,h=e.importButtonIcon,v=e.importButtonText,b=e.isFileImportInProgress,y=e.decimalSizeDisplay,A=e.filesLocked,w=(0,J.A)(e,On),C=(0,m.useFormikContext)().values,R=fe()(C,"files.enabled",!1),P=(0,s.useState)(),k=(0,be.A)(P,2),O=k[0],D=k[1],x=!i&&A,M=Object.values(n).map((function(e){return{name:e.name,size:e.size,checksum:e.checksum,links:e.links,uploadState:{isFailed:e.status===un.error,isUploading:e.status===un.uploading,isFinished:e.status===un.finished,isPending:e.status===un.pending},progressPercentage:e.progressPercentage,cancelUploadFn:e.cancelUploadFn}})),T=M.reduce((function(e,t){return e+t.size}),0),_={preventDropOnDocument:!0,onDropAccepted:function(e){var t=M.length+e.length>o.maxFiles,n=e.reduce((function(e,t){return e+t.size}),0),r=T+n>o.maxStorage,i=Ee()(M,"name"),a=e.filter((function(e){return i.includes(e.name)}));t?D(s.createElement("div",{className:"content"},s.createElement(U.A,{warning:!0,icon:"warning circle",header:"Could not upload files.",content:"Uploading the selected files would result in ".concat(M.length+e.length," files (max.").concat(o.maxFiles,")")}))):r?D(s.createElement("div",{className:"content"},s.createElement(U.A,{warning:!0,icon:"warning circle",header:"Could not upload files.",content:s.createElement(s.Fragment,null,g.M.t("Uploading the selected files would result in")," ",(0,f.humanReadableBytes)(T+n,y),g.M.t("but the limit is"),(0,f.humanReadableBytes)(o.maxStorage,y),".")}))):I()(a)?u(C,e):D(s.createElement("div",{className:"content"},s.createElement(U.A,{warning:!0,icon:"warning circle",header:g.M.t("The following files already exist"),list:Ee()(a,"name")})))},multiple:!0,noClick:!0,noKeyboard:!0,disabled:!1};M.length<o.maxFiles||(_.disabled=!0);var q=R&&i&&a&&!M.length;return s.createElement(S.default,(0,r.A)({id:"ReactInvenioDeposit.FileUploader.layout",config:t,files:n,isDraftRecord:i,hasParentRecord:a,quota:o,permissions:l,record:c,uploadFiles:u,deleteFile:d,importParentFiles:p,importButtonIcon:h,importButtonText:v,isFileImportInProgress:b,decimalSizeDisplay:y,filesEnabled:R,filesList:M,displayImportBtn:q,filesSize:T,dropzoneParams:_,warningMsg:O,setWarningMsg:D,filesLocked:x},w),s.createElement(s.Fragment,null,s.createElement(K.A,{className:"file-uploader"},s.createElement(K.A.Row,{className:"pt-10 pb-5"},!x&&s.createElement(kn,(0,r.A)({},w,{config:t,filesEnabled:R,filesList:M,filesSize:T,quota:o,decimalSizeDisplay:y}))),s.createElement(S.default,(0,r.A)({id:"ReactInvenioDeposit.FileUploader.ImportButton.container",importButtonIcon:h,importButtonText:v,importParentFiles:p,isFileImportInProgress:b,displayImportBtn:q},w),q&&s.createElement(K.A.Row,{className:"pb-5 pt-5"},s.createElement(K.A.Column,{width:16},s.createElement(U.A,{visible:!0,info:!0},s.createElement("div",{className:"right-floated display-inline-block"},s.createElement(E.A,{type:"button",size:"mini",primary:!0,icon:h,content:v,onClick:function(){return p()},disabled:b,loading:b})),s.createElement("p",{className:"display-inline-block mt-5"},s.createElement(F.A,{name:"info circle"}),g.M.t("You can import files from the previous version.")))))),s.createElement(S.default,(0,r.A)({id:"ReactInvenioDeposit.FileUploader.FileUploaderArea.container",filesList:M,dropzoneParams:_,filesLocked:x,filesEnabled:R,deleteFile:d,decimalSizeDisplay:y},w),R&&s.createElement(K.A.Row,{className:"pt-0 pb-0"},s.createElement(Sn,(0,r.A)({},w,{filesList:M,dropzoneParams:_,filesLocked:x,filesEnabled:R,deleteFile:d,decimalSizeDisplay:y})))),s.createElement(S.default,(0,r.A)({id:"ReactInvenioDeposit.FileUploader.NewVersionButton.container",isDraftRecord:i,draft:C,filesLocked:x,permissions:l,record:c},w),i?s.createElement(K.A.Row,{className:"file-upload-note pt-5"},s.createElement(K.A.Column,{width:16},s.createElement(U.A,{visible:!0,warning:!0},s.createElement("p",null,s.createElement(F.A,{name:"warning sign"}),g.M.t("File addition, removal or modification are not allowed after you have published your upload."))))):A&&s.createElement(K.A.Row,{className:"file-upload-note pt-5"},s.createElement(K.A.Column,{width:16},s.createElement(U.A,{info:!0},s.createElement(hn,{record:c,onError:function(){},className:"right-floated",disabled:!l.can_new_version}),s.createElement("p",{className:"mt-5 display-inline-block"},s.createElement(F.A,{name:"info circle",size:"large"}),g.M.t("You must create a new version to add, modify or delete files."))))))),s.createElement(S.default,(0,r.A)({id:"ReactInvenioDeposit.FileUploader.Modal.container",warningMsg:O,setWarningMsg:D},w),s.createElement(we.A,{open:!!O,header:"Warning!",content:O,onClose:function(){return D()},closeIcon:!0}))))},In=p().objectOf(p().shape({name:p().string,size:p().number,progressPercentage:p().number,checksum:p().string,links:p().object,cancelUploadFn:p().func,state:p().oneOf(Object.values(un)),enabled:p().bool}));Dn.propTypes={config:p().object,dragText:p().string,files:In,isDraftRecord:p().bool,hasParentRecord:p().bool,quota:p().shape({maxStorage:p().number,maxFiles:p().number}),record:p().object,uploadButtonIcon:p().string,uploadButtonText:p().string,importButtonIcon:p().string,importButtonText:p().string,isFileImportInProgress:p().bool,importParentFiles:p().func.isRequired,uploadFiles:p().func.isRequired,deleteFile:p().func.isRequired,decimalSizeDisplay:p().bool,filesLocked:p().bool,permissions:p().object},Dn.defaultProps={permissions:void 0,config:void 0,files:void 0,record:void 0,isFileImportInProgress:!1,dragText:g.M.t("Drag and drop files"),isDraftRecord:!0,hasParentRecord:!1,quota:{maxFiles:5,maxStorage:Math.pow(10,10)},uploadButtonIcon:"upload",uploadButtonText:g.M.t("Upload files"),importButtonIcon:"sync",importButtonText:g.M.t("Import files"),decimalSizeDisplay:!0,filesLocked:!1};var xn=(0,u.connect)((function(e){var t,n,r=e.files,i=r.links;return{files:r.entries,links:i,record:e.deposit.record,config:e.deposit.config,permissions:e.deposit.permissions,isFileImportInProgress:e.files.isFileImportInProgress,hasParentRecord:Boolean((null===(t=e.deposit.record)||void 0===t||null===(t=t.versions)||void 0===t?void 0:t.index)&&(null===(n=e.deposit.record)||void 0===n||null===(n=n.versions)||void 0===n?void 0:n.index)>1)}}),(function(e){return{uploadFiles:function(t,n){return e(function(e,t){return function(){var n=(0,dt.A)(mt().mark((function n(r,i,a){var o,l,c,s,u;return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,en(e,a.service.drafts);case 3:o=n.sent,r({type:vt,payload:{data:o.data}}),l=o.data.links.files,c=an(t);try{for(c.s();!(s=c.n()).done;)u=s.value,a.service.files.upload(l,u)}catch(i){c.e(i)}finally{c.f()}n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(0),r({type:Bt,payload:{errors:n.t0.errors}}),n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t,r){return n.apply(this,arguments)}}()}(t,n))},importParentFiles:function(){return e(function(){var e=(0,dt.A)(mt().mark((function e(t,n,r){var i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=n().deposit.record).id){e.next=3;break}return e.abrupt("return");case 3:return t({type:Ut}),e.prev=4,a=i.links,e.next=8,r.service.files.importParentRecordFiles(a);case 8:o=e.sent,t({type:Vt,payload:{files:o}}),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(4),t({type:Ht}),e.t0;case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n,r){return e.apply(this,arguments)}}())},deleteFile:function(t){return e(function(e){return function(){var t=(0,dt.A)(mt().mark((function t(n,r,i){var a,o;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.links,t.next=4,i.service.files.delete(a);case 4:n({type:Wt,payload:{filename:e.name}}),t.next=15;break;case 7:if(t.prev=7,t.t0=t.catch(0),404!==t.t0.response.status||null===(o=e.uploadState)||void 0===o||!o.isPending){t.next=13;break}n({type:Wt,payload:{filename:e.name}}),t.next=15;break;case 13:throw n({type:Yt}),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))}}}))(Dn),Mn={scheme:"",identifier:""};function Fn(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Tn()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Tn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tn=function(){return!!e})()}var _n=function(e){function t(){return(0,i.A)(this,t),Fn(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.label,r=e.labelIcon,i=e.required,a=e.schemeOptions,o=e.showEmptyValue;return s.createElement(f.ArrayField,{addButtonLabel:g.M.t("Add identifier"),defaultNewValue:Mn,fieldPath:t,label:s.createElement(f.FieldLabel,{htmlFor:t,icon:r,label:n}),required:i,showEmptyValue:o},(function(e){var n=e.arrayHelpers,r=e.indexPath,i="".concat(t,".").concat(r);return s.createElement(f.GroupField,null,s.createElement(f.TextField,{fieldPath:"".concat(i,".identifier"),label:g.M.t("Identifier"),required:!0,width:11}),a&&s.createElement(f.SelectField,{fieldPath:"".concat(i,".scheme"),label:g.M.t("Scheme"),"aria-label":g.M.t("Scheme"),options:a,optimized:!0,required:!0,width:5}),!a&&s.createElement(f.TextField,{fieldPath:"".concat(i,".scheme"),label:g.M.t("Scheme"),"aria-label":g.M.t("Scheme"),required:!0,width:5}),s.createElement(v.A.Field,null,s.createElement(E.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",icon:"close",onClick:function(){return n.remove(r)}})))}))}}])}(s.Component);_n.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,required:p().bool,schemeOptions:p().arrayOf(p().shape({text:p().string,value:p().string})),showEmptyValue:p().bool},_n.defaultProps={label:g.M.t("Identifiers"),labelIcon:"barcode",required:!1,schemeOptions:void 0,showEmptyValue:!1};var qn=n(38221),Nn=n.n(qn),Ln=n(73591),zn={SAVE:"SAVE",PUBLISH:"PUBLISH",PUBLISH_WITHOUT_COMMUNITY:"PUBLISH_WITHOUT_COMMUNITY",PREVIEW:"PREVIEW",DELETE:"DELETE",RESERVE_PID:"RESERVE_PID",DISCARD_PID:"DISCARD_PID",SUBMIT_REVIEW:"SUBMIT_REVIEW"},jn=s.createContext({setSubmitContext:void 0});function Bn(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Un()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Un(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Un=function(){return!!e})()}var Vn="external",Hn=function(e,t){return(0,m.getIn)(e.errors,t,null)||(0,m.getIn)(e.initialErrors,t,null)},Wn=function(e){function t(){return(0,i.A)(this,t),Bn(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.handleReservePID,r=e.label,i=e.loading;return s.createElement(m.Field,null,(function(e){var a=e.form;return s.createElement(v.A.Button,{className:"positive",size:"mini",loading:i,disabled:t||i,onClick:function(e){return n(e,a)},content:r})}))}}])}(s.Component);Wn.propTypes={disabled:p().bool,handleReservePID:p().func.isRequired,label:p().string.isRequired,loading:p().bool},Wn.defaultProps={disabled:!1,loading:!1};var Yn=function(e){function t(){return(0,i.A)(this,t),Bn(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.handleDiscardPID,r=e.label,i=e.loading;return s.createElement(mn.A,{content:r,trigger:s.createElement(m.Field,null,(function(e){var r=e.form;return s.createElement(v.A.Button,{disabled:t||i,loading:i,icon:"close",onClick:function(e){return n(e,r)},size:"mini"})}))})}}])}(s.Component);Yn.propTypes={disabled:p().bool,handleDiscardPID:p().func.isRequired,label:p().string.isRequired,loading:p().bool},Yn.defaultProps={disabled:!1,loading:!1};var Qn=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Bn(this,t,[].concat(r)),(0,A.A)(e,"handleChange",(function(t,n){var r=n.value;(0,e.props.onManagedUnmanagedChange)("managed"===r)})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.isManagedSelected,r=e.pidLabel;return s.createElement(v.A.Group,{inline:!0},s.createElement(v.A.Field,null,g.M.t("Do you already have a {{pidLabel}} for this upload?",{pidLabel:r})),s.createElement(v.A.Field,{width:2},s.createElement(Ln.A,{label:g.M.t("Yes"),"aria-label":g.M.t("Yes"),name:"radioGroup",value:"unmanaged",disabled:t,checked:!n,onChange:this.handleChange})),s.createElement(v.A.Field,{width:2},s.createElement(Ln.A,{label:g.M.t("No"),"aria-label":g.M.t("No"),name:"radioGroup",value:"managed",disabled:t,checked:n,onChange:this.handleChange})))}}])}(s.Component);Qn.propTypes={disabled:p().bool,isManagedSelected:p().bool.isRequired,onManagedUnmanagedChange:p().func.isRequired,pidLabel:p().string},Qn.defaultProps={disabled:!1,pidLabel:void 0};var Gn=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Bn(this,t,[].concat(r)),(0,A.A)(e,"handleReservePID",(function(t,n){var r=e.props.pidType;(0,e.context.setSubmitContext)(zn.RESERVE_PID,{pidType:r}),n.handleSubmit(t)})),(0,A.A)(e,"handleDiscardPID",(function(t,n){var r=e.props.pidType;(0,e.context.setSubmitContext)(zn.DISCARD_PID,{pidType:r}),n.handleSubmit(t)})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.actionState,n=e.actionStateExtra,r=e.btnLabelDiscardPID,i=e.btnLabelGetPID,a=e.disabled,o=e.helpText,l=e.identifier,c=e.pidPlaceholder,u=e.pidType,d=""!==l,p=s.createElement(Wn,{disabled:a||d,label:i,loading:t===xt&&n.pidType===u,handleReservePID:this.handleReservePID}),m=s.createElement(Yn,{disabled:a,label:r,handleDiscardPID:this.handleDiscardPID,loading:t===Tt&&n.pidType===u,pidType:u});return s.createElement(s.Fragment,null,s.createElement(v.A.Group,{inline:!0},d?s.createElement(v.A.Field,null,s.createElement("label",null,l)):s.createElement(v.A.Field,{width:4},s.createElement(v.A.Input,{disabled:!0,value:"",placeholder:c,width:16})),s.createElement(v.A.Field,null,l?m:p)),o&&s.createElement("label",{className:"helptext"},o))}}])}(s.Component);(0,A.A)(Gn,"contextType",jn),Gn.propTypes={btnLabelGetPID:p().string.isRequired,disabled:p().bool,helpText:p().string,identifier:p().string.isRequired,btnLabelDiscardPID:p().string.isRequired,pidPlaceholder:p().string.isRequired,pidType:p().string.isRequired,actionState:p().string,actionStateExtra:p().object},Gn.defaultProps={disabled:!1,helpText:null,actionState:"",actionStateExtra:{}};var Kn=(0,u.connect)((function(e){return{actionState:e.deposit.actionState,actionStateExtra:e.deposit.actionStateExtra}}),null)(Gn),Xn=function(e){function t(e){var n;(0,i.A)(this,t),n=Bn(this,t,[e]),(0,A.A)(n,"handleIdentifierUpdate",(function(e){n.setState({localIdentifier:e})})),(0,A.A)(n,"onChange",(function(e){var t=n.props.onIdentifierChanged;n.setState({localIdentifier:e},(function(){return t(e)}))}));var r=e.identifier;return n.state={localIdentifier:r},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.identifier;t!==e.identifier&&this.handleIdentifierUpdate(t)}},{key:"render",value:function(){var e=this,t=this.state.localIdentifier,n=this.props,r=n.form,i=n.fieldPath,a=n.helpText,o=n.pidPlaceholder,l=Hn(r,i);return s.createElement(s.Fragment,null,s.createElement(v.A.Field,{width:8,error:l},s.createElement(v.A.Input,{onChange:function(t,n){var r=n.value;return e.onChange(r)},value:t,placeholder:o,width:16,error:l})),a&&s.createElement("label",{className:"helptext"},a))}}])}(s.Component);Xn.propTypes={form:p().object.isRequired,fieldPath:p().string.isRequired,helpText:p().string,identifier:p().string.isRequired,onIdentifierChanged:p().func.isRequired,pidPlaceholder:p().string.isRequired},Xn.defaultProps={helpText:null};var Jn=function(e){function t(e){var n;(0,i.A)(this,t),n=Bn(this,t,[e]),(0,A.A)(n,"onExternalIdentifierChanged",(function(e){var t=n.props,r=t.form,i=t.fieldPath,a={identifier:e,provider:Vn};n.debounced&&n.debounced.cancel(),n.debounced=Nn()((function(){r.setFieldValue(i,a)}),200),n.debounced()}));var r=n.props,a=r.canBeManaged,o=r.canBeUnmanaged;return n.canBeManagedAndUnmanaged=a&&o,n.state={isManagedSelected:void 0},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.state.isManagedSelected,n=this.props,r=n.btnLabelDiscardPID,i=n.btnLabelGetPID,a=n.canBeManaged,o=n.canBeUnmanaged,l=n.form,c=n.fieldPath,u=n.fieldLabel,d=n.isEditingPublishedRecord,p=n.managedHelpText,m=n.pidLabel,h=n.pidIcon,b=n.pidPlaceholder,y=n.required,g=n.unmanagedHelpText,A=n.pidType,E=n.field.value||{},w=E.identifier||"",C=E.provider||"",R="",P="";if(""!==w){var S=C===Vn;R=S?"":w,P=S?w:""}var k=""!==R,O=void 0===t?k||""===C:t,D=Hn(l,c);return s.createElement(s.Fragment,null,s.createElement(v.A.Field,{required:y,error:D},s.createElement(f.FieldLabel,{htmlFor:c,icon:h,label:u})),this.canBeManagedAndUnmanaged&&s.createElement(Qn,{disabled:d||k,isManagedSelected:O,onManagedUnmanagedChange:function(t){t?l.setFieldValue("pids",{}):e.onExternalIdentifierChanged(""),e.setState({isManagedSelected:t})},pidLabel:m}),a&&O&&s.createElement(Kn,{disabled:d,btnLabelDiscardPID:r,btnLabelGetPID:i,form:l,identifier:R,helpText:p,pidPlaceholder:b,pidType:A,pidLabel:m}),o&&!O&&s.createElement(Xn,{identifier:P,onIdentifierChanged:function(t){e.onExternalIdentifierChanged(t)},form:l,fieldPath:c,pidPlaceholder:b,helpText:g}))}}])}(s.Component);Jn.propTypes={field:p().object,form:p().object.isRequired,btnLabelDiscardPID:p().string.isRequired,btnLabelGetPID:p().string.isRequired,canBeManaged:p().bool.isRequired,canBeUnmanaged:p().bool.isRequired,fieldPath:p().string.isRequired,fieldLabel:p().string.isRequired,isEditingPublishedRecord:p().bool.isRequired,managedHelpText:p().string,pidIcon:p().string.isRequired,pidLabel:p().string.isRequired,pidPlaceholder:p().string.isRequired,pidType:p().string.isRequired,required:p().bool.isRequired,unmanagedHelpText:p().string},Jn.defaultProps={managedHelpText:null,unmanagedHelpText:null,field:void 0};var $n=function(e){function t(e){var n;return(0,i.A)(this,t),n=Bn(this,t,[e]),(0,A.A)(n,"validatePropValues",(function(){var e=n.props,t=e.canBeManaged,r=e.canBeUnmanaged,i=e.fieldPath;if(!t&&!r)throw Error("".concat(i," must be managed, unmanaged or both."))})),n.validatePropValues(),n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props.fieldPath;return s.createElement(m.FastField,(0,r.A)({name:e,component:Jn},this.props))}}])}(s.Component);$n.propTypes={btnLabelDiscardPID:p().string,btnLabelGetPID:p().string,canBeManaged:p().bool,canBeUnmanaged:p().bool,fieldPath:p().string.isRequired,fieldLabel:p().string.isRequired,isEditingPublishedRecord:p().bool.isRequired,managedHelpText:p().string,pidIcon:p().string,pidLabel:p().string.isRequired,pidPlaceholder:p().string,pidType:p().string.isRequired,required:p().bool,unmanagedHelpText:p().string},$n.defaultProps={btnLabelDiscardPID:"Discard",btnLabelGetPID:"Reserve",canBeManaged:!0,canBeUnmanaged:!0,managedHelpText:null,pidIcon:"barcode",pidPlaceholder:"",required:!1,unmanagedHelpText:null};var Zn=n(98871),er=n(73083),tr=function(e){var t=e.updateQueryFilters,n=e.userSelectionFilters,r=e.filterValue,i=e.label,a=e.title,o=function(){t(n.concat([r]))},l=function(e){var t=e.filter((function(e){return e[1]===r[1]})).length>0;return t}(n);return l?s.createElement(er.A.Item,{name:i,active:!0,as:E.A,primary:!0,onClick:o},a):s.createElement(er.A.Item,{name:i,onClick:o},a)};tr.propTypes={updateQueryFilters:p().func.isRequired,userSelectionFilters:p().array.isRequired,filterValue:p().array.isRequired,label:p().string.isRequired,title:p().string.isRequired};var nr=n(23848),rr=(0,Zn.Q2)((function(e){var t=e.currentResultsState,n=e.serializeLicenses,i=n||function(e){return{title:e.title_l10n,description:e.description_l10n,id:e.id}};return s.createElement(m.FastField,{name:"selectedLicense"},(function(e){var n=e.form,a=n.values,o=n.setFieldValue;return s.createElement(nr.A.Group,null,t.data.hits.map((function(e){var t=e.title_l10n,n=e.description_l10n;return s.createElement(nr.A,{key:t,onClick:function(){return o("selectedLicense",i(e))},className:"license-item mb-15"},s.createElement(Ln.A,(0,r.A)({checked:fe()(a,"selectedLicense.title")===t,onChange:function(){return o("selectedLicense",i(e))}},!n&&{className:"mt-0"})),s.createElement(nr.A.Content,{className:"license-item-content"},s.createElement(y.A,{size:"small",className:"mt-0"},t),n&&s.createElement(nr.A.Description,{className:"license-item-description"},n)))})))}))})),ir=n(92257);function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lr(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,cr()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function cr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cr=function(){return!!e})()}var sr=function(e){var t=e.updateQueryState,n=e.currentQueryState,r=e.autofocus,i=e.actionProps,a=e.placeholder,o=(0,s.useState)(""),l=(0,be.A)(o,2),c=l[0],u=l[1],d=function(){n.filters[0]=["tags","all"],n.queryString=c,t(n)};return s.createElement(ur,{actionProps:i,autofocus:r,executeSearch:d,onBtnSearchClick:d,onInputChange:function(e){u(e)},onKeyPress:function(e){"Enter"===e.key&&d()},placeholder:a,queryString:c})};sr.propTypes={actionProps:p().object,autofocus:p().bool,currentQueryState:p().object,updateQueryState:p().func,placeholder:p().string},sr.defaultProps={actionProps:null,autofocus:!1,placeholder:"",currentQueryState:null,updateQueryState:null};var ur=function(e){function t(){return(0,i.A)(this,t),lr(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){this.props.autofocus&&this.focusInput&&this.focusInput.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.actionProps,r=t.onBtnSearchClick,i=t.onInputChange,a=t.onKeyPress,o=t.placeholder,l=t.queryString;return s.createElement(ir.A,{action:or({content:"Search",onClick:r},n),fluid:!0,placeholder:o||"Type something",onChange:function(e,t){var n=t.value;i(n)},value:l,onKeyPress:a,ref:function(t){e.focusInput=t}})}}])}(s.Component);ur.propTypes={actionProps:p().object,autofocus:p().bool,onBtnSearchClick:p().func,onInputChange:p().func,onKeyPress:p().func,placeholder:p().string,queryString:p().string},ur.defaultProps={actionProps:null,autofocus:!1,onBtnSearchClick:null,onInputChange:null,onKeyPress:null,placeholder:"",queryString:""};var dr=(0,Zn.Q2)(sr);function pr(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,mr()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function mr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mr=function(){return!!e})()}var fr={"SearchFilters.Toggle":tr},hr="standard",vr="custom",br="add",yr=Ce.Ik().shape({selectedLicense:Ce.Ik().shape({title:Ce.Yj().required(g.M.t("Title is a required field.")),link:Ce.Yj().url(g.M.t("Link must be a valid URL"))})}),gr=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=pr(this,t,[].concat(r)),(0,A.A)(e,"state",{open:!1}),(0,A.A)(e,"openModal",(function(){e.setState({open:!0})})),(0,A.A)(e,"closeModal",(function(){e.setState({open:!1})})),(0,A.A)(e,"onSubmit",(function(t,n){var r=e.props.onLicenseChange;e.closeModal(),r(t.selectedLicense),n.resetForm()})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.mode,r=t.trigger,i=t.action,a=t.searchConfig,o=t.serializeLicenses,l=t.initialLicense,c=this.state.open,u=l||{title:"",description:"",id:null,link:""},d=new Zn.HZ(a.searchApi);return s.createElement(m.Formik,{initialValues:{selectedLicense:u},onSubmit:this.onSubmit,validationSchema:yr,validateOnChange:!1,validateOnBlur:!1},(function(t){var l=t.handleSubmit,u=t.resetForm;return s.createElement(we.A,{onOpen:function(){return e.openModal()},open:c,trigger:r,onClose:function(){e.closeModal(),u()},closeIcon:!0,closeOnDimmerClick:!1},s.createElement(we.A.Header,{as:"h2",className:"pt-10 pb-10"},i===br?g.M.t("Add {{mode}} license",{mode:n}):g.M.t("Change {{mode}} license",{mode:n})),s.createElement(we.A.Content,{scrolling:!0},n===hr&&s.createElement(S.OverridableContext.Provider,{value:fr},s.createElement(Zn.gz,{searchApi:d,appName:"licenses",urlHandlerApi:{enabled:!1},initialQueryState:a.initialQueryState},s.createElement(K.A,null,s.createElement(K.A.Row,null,s.createElement(K.A.Column,{width:8,floated:"left",verticalAlign:"middle"},s.createElement(dr,{placeholder:g.M.t("Search"),autofocus:!0,actionProps:{icon:"search",content:null,className:"search"}})),s.createElement(K.A.Column,{width:8,textAlign:"right",floated:"right"},s.createElement(er.A,{compact:!0},s.createElement(Zn.lM,{title:g.M.t("Recommended"),label:"recommended",filterValue:["tags","recommended"]}),s.createElement(Zn.lM,{title:g.M.t("All"),label:"all",filterValue:["tags","all"]}),s.createElement(Zn.lM,{title:g.M.t("Data"),label:"data",filterValue:["tags","data"]}),s.createElement(Zn.lM,{title:g.M.t("Software"),label:"software",filterValue:["tags","software"]})))),s.createElement(K.A.Row,{verticalAlign:"middle"},s.createElement(K.A.Column,null,s.createElement(Zn.oK,null,s.createElement(Zn.i6,null),s.createElement(Zn.$D,null),s.createElement(rr,o&&{serializeLicenses:o}))))))),n===vr&&s.createElement(v.A,null,s.createElement(f.TextField,{label:g.M.t("Title"),placeholder:g.M.t("License title"),fieldPath:"selectedLicense.title",required:!0,autoFocus:!0}),s.createElement(f.TextAreaField,{fieldPath:"selectedLicense.description",label:g.M.t("Description")}),s.createElement(f.TextField,{label:g.M.t("Link"),placeholder:g.M.t("License link"),fieldPath:"selectedLicense.link"}))),s.createElement(we.A.Actions,null,s.createElement(E.A,{name:"cancel",onClick:function(){u(),e.closeModal()},icon:"remove",labelPosition:"left",content:g.M.t("Cancel"),floated:"left"}),s.createElement(E.A,{name:"submit",onClick:function(e){return l(e)},primary:!0,icon:"checkmark",labelPosition:"left",content:i===br?g.M.t("Add license"):g.M.t("Change license")})))}))}}])}(s.Component);gr.propTypes={mode:p().oneOf(["standard","custom"]).isRequired,action:p().oneOf(["add","edit"]).isRequired,initialLicense:p().shape({id:p().string,title:p().string,description:p().string}),trigger:p().object.isRequired,onLicenseChange:p().func.isRequired,searchConfig:p().shape({searchApi:p().shape({axios:p().shape({headers:p().object})}).isRequired,initialQueryState:p().shape({filters:p().arrayOf(p().array)}).isRequired}).isRequired,serializeLicenses:p().func},gr.defaultProps={initialLicense:void 0,serializeLicenses:void 0};var Ar=n(92516),Er=n.n(Ar),wr=function(e){var t=e.license,n=e.moveLicense,r=e.replaceLicense,i=e.removeLicense,a=e.searchConfig,o=e.serializeLicenses,l=s.useRef(null),c=(0,Ve.i)({item:{index:t.index,type:"license"}}),u=(0,be.A)(c,3),d=u[1],p=u[2],m=(0,He.H)({accept:"license",hover:function(e,r){if(l.current){var i=e.index,a=t.index;i!==a&&r.isOver({shallow:!0})&&(n(i,a),e.index=a)}},collect:function(e){return{hidden:e.isOver({shallow:!0})}}}),f=(0,be.A)(m,2),h=f[0].hidden;return(0,f[1])(l),s.createElement(We.o,{innerRef:l,key:t.key},s.createElement(M.A.Item,{key:t.key,className:h?"deposit-drag-listitem hidden":"deposit-drag-listitem"},s.createElement(M.A.Content,{floated:"right"},s.createElement(gr,{searchConfig:a,onLicenseChange:function(e){r(t.index,e)},mode:t.type,initialLicense:t.initial,action:"edit",trigger:s.createElement(E.A,{size:"mini",primary:!0,type:"button"},g.M.t("Edit")),serializeLicenses:o}),s.createElement(E.A,{size:"mini",type:"button",onClick:function(){i(t.index)}},g.M.t("Remove"))),s.createElement(We.o,{innerRef:d},s.createElement(M.A.Icon,{name:"bars",className:"drag-anchor"})),s.createElement(We.o,{innerRef:p},s.createElement(M.A.Content,null,s.createElement(M.A.Header,null,t.title),t.description&&s.createElement(M.A.Description,null,Er()(t.description,{length:300})),t.link&&s.createElement("span",null,s.createElement("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},t.description&&s.createElement("span",null,"\xa0"),g.M.t("Read more")))))))};function Cr(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Rr()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Rr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rr=function(){return!!e})()}wr.propTypes={license:p().object.isRequired,moveLicense:p().func.isRequired,replaceLicense:p().func.isRequired,removeLicense:p().func.isRequired,searchConfig:p().object.isRequired,serializeLicenses:p().func},wr.defaultProps={serializeLicenses:void 0};var Pr=(0,a.A)((function e(t,n,r){(0,i.A)(this,e),this.index=r,this.type=n.id?"standard":"custom",this.key=n.id||n.title,this.initial="custom"===this.type?n:null;var a=ge()(t,n.id?function(e){return e.id===n.id}:function(e){return e.title===n.title})||{};this.description=a.description_l10n||n.description||"",this.title=a.title_l10n||n.title||"",this.link=a.props&&a.props.url||a.link||n.props&&n.props.url||n.link||""})),Sr=function(e){function t(){return(0,i.A)(this,t),Cr(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.labelIcon,r=e.fieldPath,i=e.uiFieldPath,a=e.form.values,o=e.move,l=e.push,c=e.remove,u=e.replace,d=e.required,p=e.searchConfig,h=e.serializeLicenses,b=(0,m.getIn)(a,i,[]);return s.createElement(ve.Q,{backend:he.t2},s.createElement(v.A.Field,{required:d},s.createElement(f.FieldLabel,{htmlFor:r,icon:n,label:t}),s.createElement(M.A,null,(0,m.getIn)(a,r,[]).map((function(e,t){var n=new Pr(b,e,t);return s.createElement(wr,{key:n.key,license:n,moveLicense:o,replaceLicense:u,removeLicense:c,searchConfig:p,serializeLicenses:h})}))),s.createElement(gr,{searchConfig:p,trigger:s.createElement(E.A,{type:"button",key:"standard",icon:!0,labelPosition:"left"},s.createElement(F.A,{name:"add"}),g.M.t("Add standard")),onLicenseChange:function(e){l(e)},mode:"standard",action:"add",serializeLicenses:h}),s.createElement(gr,{searchConfig:p,trigger:s.createElement(E.A,{type:"button",key:"custom",icon:!0,labelPosition:"left"},s.createElement(F.A,{name:"add"}),g.M.t("Add custom")),onLicenseChange:function(e){l(e)},mode:"custom",action:"add"})))}}])}(s.Component);Sr.propTypes={label:p().node.isRequired,labelIcon:p().node,fieldPath:p().string.isRequired,uiFieldPath:p().string,form:p().object.isRequired,move:p().func.isRequired,push:p().func.isRequired,remove:p().func.isRequired,replace:p().func.isRequired,required:p().bool.isRequired,searchConfig:p().object.isRequired,serializeLicenses:p().func},Sr.defaultProps={labelIcon:void 0,uiFieldPath:void 0,serializeLicenses:void 0};var kr=function(e){function t(){return(0,i.A)(this,t),Cr(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props.fieldPath;return s.createElement(m.FieldArray,{name:t,component:function(t){return s.createElement(Sr,(0,r.A)({},t,e.props))}})}}])}(s.Component);function Or(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Dr()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Dr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dr=function(){return!!e})()}kr.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,searchConfig:p().object.isRequired,required:p().bool,serializeLicenses:p().func,uiFieldPath:p().string},kr.defaultProps={label:g.M.t("Licenses"),uiFieldPath:"ui.rights",labelIcon:"drivers license",required:!1,serializeLicenses:void 0};var Ir=function(e){function t(){return(0,i.A)(this,t),Or(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.helpText,r=e.label,i=e.labelIcon,a=e.placeholder,o=e.required;return s.createElement(f.TextField,{fieldPath:t,helpText:n,label:s.createElement(f.FieldLabel,{htmlFor:t,icon:i,label:r}),placeholder:a,required:o})}}])}(s.Component);function xr(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Mr()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Mr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mr=function(){return!!e})()}Ir.propTypes={fieldPath:p().string.isRequired,helpText:p().string,label:p().string,labelIcon:p().string,placeholder:p().string,required:p().bool},Ir.defaultProps={helpText:g.M.t("In case your upload was already published elsewhere, please use the date of the first publication. Format: YYYY-MM-DD, YYYY-MM, or YYYY. For intervals use DATE/DATE, e.g. 1939/1945."),label:g.M.t("Publication date"),labelIcon:"calendar",required:void 0,placeholder:g.M.t("YYYY-MM-DD or YYYY-MM-DD/YYYY-MM-DD for intervals. MM and DD are optional.")};var Fr=function(e){function t(){return(0,i.A)(this,t),xr(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.label,r=e.labelIcon,i=e.placeholder;return s.createElement(f.TextField,{fieldPath:t,helpText:g.M.t("The publisher is used to formulate the citation, so consider the prominence of the role."),label:s.createElement(f.FieldLabel,{htmlFor:t,icon:r,label:n}),placeholder:i})}}])}(s.Component);Fr.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,placeholder:p().string},Fr.defaultProps={label:g.M.t("Publisher"),labelIcon:"building outline",placeholder:g.M.t("Publisher")};var Tr={reference:""};function _r(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,qr()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function qr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qr=function(){return!!e})()}var Nr=function(e){function t(){return(0,i.A)(this,t),_r(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.label,r=e.labelIcon,i=e.required,a=e.showEmptyValue;return s.createElement(f.ArrayField,{addButtonLabel:g.M.t("Add reference"),defaultNewValue:Tr,fieldPath:t,label:s.createElement(f.FieldLabel,{htmlFor:t,icon:r,label:n}),required:i,showEmptyValue:a},(function(e){var n=e.arrayHelpers,r=e.indexPath,i="".concat(t,".").concat(r);return s.createElement(f.GroupField,{optimized:!0},s.createElement(f.TextField,{fieldPath:"".concat(i,".reference"),label:g.M.t("Reference string"),required:!0,width:16}),s.createElement(v.A.Field,null,s.createElement(E.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",icon:!0,onClick:function(){return n.remove(r)}},s.createElement(F.A,{name:"close"}))))}))}}])}(s.Component);Nr.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,required:p().bool,showEmptyValue:p().bool},Nr.defaultProps={label:g.M.t("References"),labelIcon:"bookmark",required:!1,showEmptyValue:!1};var Lr={scheme:"",identifier:"",resource_type:"",relation_type:""},zr=["fieldPath","label","labelIcon","options"];function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ur(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Vr()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Vr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vr=function(){return!!e})()}var Hr=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Ur(this,t,[].concat(r)),(0,A.A)(e,"groupErrors",(function(e,t){var n=fe()(e,t);return n?{content:n}:null})),(0,A.A)(e,"_label",(function(e){return e.type_name+(e.subtype_name?" / "+e.subtype_name:"")})),(0,A.A)(e,"createOptions",(function(t){return t.map((function(t){return Br(Br({},t),{},{label:e._label(t)})})).sort((function(e,t){return e.label.localeCompare(t.label)})).map((function(e){return{value:e.id,icon:e.icon,text:e.label}}))})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.label,i=e.labelIcon,a=e.options,o=(0,J.A)(e,zr),l=this.createOptions(a);return s.createElement(f.SelectField,(0,r.A)({fieldPath:t,label:s.createElement(f.FieldLabel,{htmlFor:t,icon:i,label:n}),optimized:!0,"aria-label":n,options:l,selectOnBlur:!1},o))}}])}(s.Component);function Wr(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Yr()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Yr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yr=function(){return!!e})()}Hr.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,labelclassname:p().string,options:p().arrayOf(p().shape({icon:p().string,type_name:p().string,subtype_name:p().string,id:p().string})).isRequired,required:p().bool},Hr.defaultProps={label:g.M.t("Resource type"),labelIcon:"tag",labelclassname:"field-label-class",required:!1};var Qr=function(e){function t(){return(0,i.A)(this,t),Wr(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.label,r=e.labelIcon,i=e.required,a=e.options,o=e.showEmptyValue;return s.createElement(s.Fragment,null,s.createElement("label",{className:"helptext",style:{marginBottom:"10px"}},g.M.t("Specify identifiers of related works. Supported identifiers include DOI, Handle, ARK, PURL, ISSN, ISBN, PubMed ID, PubMed Central ID, ADS Bibliographic Code, arXiv, Life Science Identifiers (LSID), EAN-13, ISTC, URNs, and URLs.")),s.createElement(f.ArrayField,{addButtonLabel:g.M.t("Add related work"),defaultNewValue:Lr,fieldPath:t,label:s.createElement(f.FieldLabel,{htmlFor:t,icon:r,label:n}),required:i,showEmptyValue:o},(function(e){var n=e.arrayHelpers,r=e.indexPath,i="".concat(t,".").concat(r);return s.createElement(f.GroupField,{optimized:!0},s.createElement(f.SelectField,{clearable:!0,fieldPath:"".concat(i,".relation_type"),label:g.M.t("Relation"),"aria-label":g.M.t("Relation"),optimized:!0,options:a.relations,placeholder:{role:"option",content:"Select relation..."},required:!0,width:3}),s.createElement(f.TextField,{fieldPath:"".concat(i,".identifier"),label:g.M.t("Identifier"),required:!0,width:4}),s.createElement(f.SelectField,{clearable:!0,fieldPath:"".concat(i,".scheme"),label:g.M.t("Scheme"),"aria-label":g.M.t("Scheme"),optimized:!0,options:a.scheme,required:!0,width:2}),s.createElement(Hr,{clearable:!0,fieldPath:"".concat(i,".resource_type"),labelIcon:"",options:a.resource_type,width:7,labelclassname:"small field-label-class"}),s.createElement(v.A.Field,null,s.createElement(E.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",icon:!0,onClick:function(){return n.remove(r)}},s.createElement(F.A,{name:"close"}))))})))}}])}(s.Component);function Gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xr(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Jr()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Jr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jr=function(){return!!e})()}Qr.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,required:p().bool,options:p().object.isRequired,showEmptyValue:p().bool},Qr.defaultProps={label:g.M.t("Related works"),labelIcon:"barcode",required:void 0,showEmptyValue:!1};var $r=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Xr(this,t,[].concat(r)),(0,A.A)(e,"state",{limitTo:"all"}),(0,A.A)(e,"serializeSubjects",(function(e){return e.map((function(e){return Kr(Kr({text:(e.scheme?"(".concat(e.scheme,") "):"")+e.subject,value:e.subject,key:e.subject},e.id?{id:e.id}:{}),{},{subject:e.subject})}))})),(0,A.A)(e,"prepareSuggest",(function(t){var n=e.state.limitTo,r="all"===n?"":"".concat(n,":");return"".concat(r).concat(t)})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.fieldPath,r=t.label,i=t.labelIcon,a=t.required,o=t.multiple,l=t.placeholder,c=t.clearable,u=t.limitToOptions;return s.createElement(f.GroupField,{className:"main-group-field"},s.createElement(v.A.Field,{width:5,className:"subjects-field"},s.createElement(f.FieldLabel,{htmlFor:n,icon:i,label:r}),s.createElement(f.GroupField,null,s.createElement(v.A.Field,{width:8,style:{marginBottom:"auto",marginTop:"auto"},className:"p-0"},g.M.t("Suggest from")),s.createElement(v.A.Dropdown,{className:"p-0",defaultValue:u[0].value,fluid:!0,"aria-label":g.M.t("Suggest from"),onChange:function(t,n){return e.setState({limitTo:n.value})},options:u,selection:!0,width:8}))),s.createElement(m.Field,{name:n},(function(t){var r=t.form.values;return s.createElement(f.RemoteSelectField,{clearable:c,fieldPath:n,initialSuggestions:(0,m.getIn)(r,n,[]),multiple:o,noQueryMessage:g.M.t("Search or create subjects..."),placeholder:l,preSearchChange:e.prepareSuggest,required:a,serializeSuggestions:e.serializeSubjects,serializeAddedValue:function(e){return{text:e,value:e,key:e,subject:e}},suggestionAPIUrl:"/api/subjects",onValueChange:function(e,t){e.formikProps.form.setFieldValue(n,t)},value:(0,m.getIn)(r,n,[]).map((function(e){return e.subject})),label:s.createElement(s.Fragment,null,s.createElement("label",{className:"mobile-hidden"},"\xa0")),allowAdditions:!0,width:11})})))}}])}(s.Component);$r.propTypes={limitToOptions:p().array.isRequired,fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,required:p().bool,multiple:p().bool,clearable:p().bool,placeholder:p().string},$r.defaultProps={required:!1,label:g.M.t("Keywords and subjects"),labelIcon:"tag",multiple:!0,clearable:!0,placeholder:g.M.t("Search for a subject by name")};var Zr={lang:"",title:"",type:"alternative-title"};function ei(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,ti()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function ti(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ti=function(){return!!e})()}var ni=function(e){function t(){return(0,i.A)(this,t),ei(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.options,r=e.recordUI;return s.createElement(f.ArrayField,{addButtonLabel:g.M.t("Add titles"),defaultNewValue:Zr,fieldPath:t,className:"additional-titles"},(function(e){var i,a=e.arrayHelpers,o=e.indexPath,l="".concat(t,".").concat(o);return s.createElement(f.GroupField,{fieldPath:t,optimized:!0},s.createElement(f.TextField,{fieldPath:"".concat(l,".title"),label:"Additional title",required:!0,width:5}),s.createElement(f.SelectField,{fieldPath:"".concat(l,".type"),label:"Type",optimized:!0,options:n.type,required:!0,width:5}),s.createElement(te,{serializeSuggestions:function(e){return e.map((function(e){return{text:e.title_l10n,value:e.id,fieldPathPrefix:e.id}}))},initialOptions:null!==r&&void 0!==r&&r.additional_titles&&null!==(i=r.additional_titles[o])&&void 0!==i&&i.lang?[r.additional_titles[o].lang]:[],fieldPath:"".concat(l,".lang"),label:"Language",multiple:!1,placeholder:"Select language",labelIcon:null,clearable:!0,selectOnBlur:!1,width:5}),s.createElement(v.A.Field,null,s.createElement(E.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",icon:!0,onClick:function(){return a.remove(o)}},s.createElement(F.A,{name:"close"}))))}))}}])}(s.Component);function ri(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,ii()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function ii(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ii=function(){return!!e})()}ni.propTypes={fieldPath:p().string.isRequired,options:p().shape({type:p().arrayOf(p().shape({icon:p().string,text:p().string,value:p().string})),lang:p().arrayOf(p().shape({text:p().string,value:p().string}))}),recordUI:p().object},ni.defaultProps={options:void 0,recordUI:void 0};var ai=function(e){function t(){return(0,i.A)(this,t),ri(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.options,r=e.label,i=e.required,a=e.recordUI;return s.createElement(s.Fragment,null,s.createElement(f.TextField,{fieldPath:t,label:s.createElement(f.FieldLabel,{htmlFor:t,icon:"book",label:r}),required:i,className:"title-field",optimized:!0}),s.createElement(ni,{options:n,recordUI:a,fieldPath:"metadata.additional_titles"}))}}])}(s.Component);function oi(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,li()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function li(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(li=function(){return!!e})()}ai.propTypes={fieldPath:p().string.isRequired,label:p().string,options:p().shape({type:p().arrayOf(p().shape({icon:p().string,text:p().string,value:p().string})),lang:p().arrayOf(p().shape({text:p().string,value:p().string}))}).isRequired,required:p().bool,recordUI:p().object},ai.defaultProps={label:g.M.t("Title"),required:!1,recordUI:void 0};var ci=function(e){function t(){return(0,i.A)(this,t),oi(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.label,r=e.labelIcon,i=e.placeholder,a=s.createElement("span",null,s.createElement(j.x,null,"Mostly relevant for software and dataset uploads. A semantic version string is preferred see",s.createElement("a",{href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"}," ","semver.org"),", but any version string is accepted."));return s.createElement(f.TextField,{fieldPath:t,helpText:a,label:s.createElement(f.FieldLabel,{htmlFor:t,icon:r,label:n}),placeholder:i})}}])}(s.Component);function si(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,ui()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function ui(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ui=function(){return!!e})()}ci.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,placeholder:p().string},ci.defaultProps={label:g.M.t("Version"),labelIcon:"code branch",placeholder:""};var di=function(e){function t(){return(0,i.A)(this,t),si(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.label,r=e.labelIcon;return s.createElement(v.A.Field,{id:t,name:t},s.createElement(f.FieldLabel,{htmlFor:t,icon:r,label:n}),s.createElement(gn.A,{size:"massive",tertiary:!0,textAlign:"center"},"Coming soon"))}}])}(s.Component);di.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string},di.defaultProps={label:void 0,labelIcon:void 0};var pi=n(90179),mi=n.n(pi),fi=n(92411),hi=n.n(fi),vi=["draftExists","isPublished","isVersion","actionState","formik"];function bi(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,yi()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function yi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yi=function(){return!!e})()}var gi=g.M.t("discard changes"),Ai=g.M.t("discard version"),Ei=g.M.t("delete"),wi=g.M.t("Are you sure you want to discard the changes to this draft?"),Ci=g.M.t("Are you sure you want to delete this new version?"),Ri=g.M.t("Are you sure you want to delete this draft?"),Pi=function(e){var t="";switch(e.actionLbl){case gi:t=wi;break;case Ai:t=Ci;break;case Ei:t=Ri}return t},Si=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=bi(this,t,[].concat(r)),(0,A.A)(e,"state",{modalOpen:!1}),(0,A.A)(e,"openConfirmModal",(function(){return e.setState({modalOpen:!0})})),(0,A.A)(e,"closeConfirmModal",(function(){return e.setState({modalOpen:!1})})),(0,A.A)(e,"handleDelete",function(){var t=(0,dt.A)(mt().mark((function t(n){var r,i,a,o,l;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,i=r.isPublished,a=r.isVersion,o=r.formik,l=o.handleSubmit,(0,e.context.setSubmitContext)(zn.DELETE,{isDiscardingVersion:i||a}),l(n),e.closeConfirmModal();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.draftExists,n=e.isPublished,i=e.isVersion,a=e.actionState,o=e.formik,l=(0,J.A)(e,vi),c=this.state.modalOpen,u=o.isSubmitting,d=mi()(l,["dispatch"]),p="";p=n?gi:i?Ai:Ei;var m=n?"warning":"negative",f=hi()(p);return s.createElement(s.Fragment,null,s.createElement(E.A,(0,r.A)({disabled:!t||u,onClick:this.openConfirmModal,className:m,icon:!0,loading:u&&a===St,labelPosition:"left"},d,{content:f})),s.createElement(we.A,{open:c,onClose:this.closeConfirmModal,size:"tiny"},s.createElement(we.A.Content,null,s.createElement(Pi,{actionLbl:p})),s.createElement(we.A.Actions,null,s.createElement(E.A,{onClick:this.closeConfirmModal,floated:"left"},g.M.t("Cancel")),s.createElement(E.A,{className:m,onClick:this.handleDelete,loading:u&&a===St,icon:"trash alternate outline",content:f}))))}}])}(s.Component);(0,A.A)(Si,"contextType",jn),Si.propTypes={draftExists:p().bool,isPublished:p().bool,isVersion:p().bool,actionState:p().string,formik:p().object.isRequired},Si.defaultProps={draftExists:!1,isPublished:!1,isVersion:!1,actionState:void 0};var ki=(0,u.connect)((function(e){var t;return{draftExists:Boolean(e.deposit.record.id),isPublished:e.deposit.record.is_published,isVersion:(null===(t=e.deposit.record.versions)||void 0===t?void 0:t.index)>1,actionState:e.deposit.actionState}}),null)((0,m.connect)(Si)),Oi=["actionState","formik"];function Di(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Ii()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Ii(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ii=function(){return!!e})()}var xi=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Di(this,t,[].concat(r)),(0,A.A)(e,"handlePreview",(function(t,n){(0,e.context.setSubmitContext)(zn.PREVIEW),n(t)})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.actionState,i=t.formik,a=(0,J.A)(t,Oi),o=i.handleSubmit,l=i.isSubmitting,c=mi()(a,["dispatch"]);return s.createElement(E.A,(0,r.A)({name:"preview",disabled:l,onClick:function(t){return e.handlePreview(t,o)},loading:l&&n===Rt,icon:"eye",labelPosition:"left",content:g.M.t("Preview")},c))}}])}(s.Component);(0,A.A)(xi,"contextType",jn),xi.propTypes={actionState:p().string,formik:p().object.isRequired},xi.defaultProps={actionState:void 0};var Mi=(0,u.connect)((function(e){return{actionState:e.deposit.actionState,record:e.deposit.record}}),null)((0,m.connect)(xi)),Fi=s.createContext({}),Ti=n(78585),_i=function(e){var t,n=e.result,r=e.record,i=e.isInitialSubmission,a=(0,s.useContext)(Fi),o=a.setLocalCommunity,l=a.getChosenCommunity,c=a.userCommunitiesMemberships,u=a.displaySelected,d=n.metadata,p=(null===(t=l())||void 0===t?void 0:t.id)===n.id,m=c[n.id],h="public"===r.access.record&&"restricted"===n.access.visibility,v=(0,ft.get)(n,"theme.enabled"),b=i&&v,y=h||b,A=s.createElement(s.Fragment,null,h&&s.createElement(f.InvenioPopup,{popupId:"community-inclusion-info-popup",size:"small",trigger:s.createElement(F.A,{className:"mb-5",color:"grey",name:"question circle outline"}),ariaLabel:g.M.t("Community inclusion information"),content:g.M.t("Submission to this community is only allowed if the record is restricted.")}),b&&s.createElement(s.Fragment,null,s.createElement(f.InvenioPopup,{popupId:"community-inclusion-info-popup",size:"small",trigger:s.createElement(F.A,{className:"mb-5",color:"grey",name:"question circle outline"}),ariaLabel:g.M.t("Community submission conditions information"),content:g.M.t("Submission to this community is only allowed by dedicated upload form. Use the button to jump to the form.")}),s.createElement(E.A,{size:"tiny",as:"a",href:"/communities/".concat(n.slug)},"Go to the community")),!b&&s.createElement(E.A,{content:u&&p?g.M.t("Selected"):g.M.t("Select"),size:"tiny",positive:u&&p,onClick:function(){return o(n)},disabled:y,"aria-label":g.M.t("Select {{title}}",{title:d.title})})),w=s.createElement(s.Fragment,null,m&&s.createElement(pe.A,{size:"small",horizontal:!0,color:"teal"},s.createElement(F.A,{name:"key"}),hi()(m)),v&&s.createElement(pe.A,{color:"green",horizontal:!0,size:"small"},s.createElement(F.A,{name:"check circle"}),"Verified"));return s.createElement(Ti.mG,{result:n,actions:A,extraLabels:w,showPermissionLabel:!0})};function qi(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Ni()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Ni(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ni=function(){return!!e})()}_i.propTypes={result:p().object.isRequired,record:p().object.isRequired,isInitialSubmission:p().bool},_i.defaultProps={isInitialSubmission:!0};var Li=function(e){function t(e){var n;(0,i.A)(this,t);var r=(n=qi(this,t,[e])).props.apiConfigs.allCommunities;return n.state={selectedConfig:r},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.state.selectedConfig,n=t.searchApi,r=t.appId,i=t.initialQueryState,a=t.toggleText,o=this.props,l=o.apiConfigs,c=l.allCommunities,u=l.myCommunities,d=o.record,p=o.isInitialSubmission,m=new Zn.HZ(n),f=(0,A.A)({},"".concat(r,".ResultsList.item"),(0,S.parametrize)(_i,{record:d,isInitialSubmission:p}));return s.createElement(S.OverridableContext.Provider,{value:f},s.createElement(Zn.gz,{appName:r,urlHandlerApi:{enabled:!1},searchApi:m,key:r,initialQueryState:i},s.createElement(s.Fragment,null,s.createElement(we.A.Content,{as:K.A,className:"m-0 pb-0"},s.createElement(K.A.Column,{mobile:16,tablet:8,computer:8,textAlign:"left",floated:"left",className:"pt-0 pl-0"},s.createElement(er.A,{role:"tablist",compact:!0},s.createElement(er.A.Item,{as:"button",role:"tab",id:"all-communities-tab","aria-selected":r===c.appId,"aria-controls":c.appId,name:"All",active:r===c.appId,onClick:function(){return e.setState({selectedConfig:c})}},g.M.t("All")),s.createElement(er.A.Item,{as:"button",role:"tab",id:"my-communities-tab","aria-selected":r===u.appId,"aria-controls":u.appId,name:"My communities",active:r===u.appId,onClick:function(){return e.setState({selectedConfig:u})}},g.M.t("My communities")))),s.createElement(K.A.Column,{mobile:16,tablet:8,computer:8,floated:"right",verticalAlign:"middle",className:"pt-0 pr-0 pl-0"},s.createElement(Zn.IW,{placeholder:a,autofocus:!0,actionProps:{icon:"search",content:null,className:"search","aria-label":g.M.t("Search")}}))),s.createElement(we.A.Content,{role:"tabpanel",id:r,scrolling:!0,className:"community-list-results"},s.createElement(Zn.oK,null,s.createElement(Zn.i6,null),s.createElement(Zn.$D,null),s.createElement(Zn.dy,null))),s.createElement(we.A.Content,{className:"text-align-center"},s.createElement(Zn.dK,null)))))}}])}(s.Component);function zi(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,ji()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function ji(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ji=function(){return!!e})()}Li.propTypes={apiConfigs:p().shape({allCommunities:p().shape({appId:p().string.isRequired,initialQueryState:p().object.isRequired,searchApi:p().object.isRequired}),myCommunities:p().shape({appId:p().string.isRequired,initialQueryState:p().object.isRequired,searchApi:p().object.isRequired})}),record:p().object.isRequired,isInitialSubmission:p().bool},Li.defaultProps={isInitialSubmission:!0,apiConfigs:{allCommunities:{initialQueryState:{size:5,page:1},searchApi:{axios:{url:"/api/communities",headers:{Accept:"application/vnd.inveniordm.v1+json"}}},appId:"ReactInvenioDeposit.CommunitySelectionSearch.AllCommunities",toggleText:"Search in all communities"},myCommunities:{initialQueryState:{size:5,page:1},searchApi:{axios:{url:"/api/user/communities",headers:{Accept:"application/vnd.inveniordm.v1+json"}}},appId:"ReactInvenioDeposit.CommunitySelectionSearch.MyCommunities",toggleText:"Search in my communities"}}};var Bi=function(e){function t(e){var n;(0,i.A)(this,t),n=zi(this,t,[e]),(0,A.A)(n,"getChosenCommunity",(function(){return n.state.localChosenCommunity})),(0,A.A)(n,"setCommunity",(function(e){(0,n.props.onCommunityChange)(e),n.setState({localChosenCommunity:e})})),(0,A.A)(n,"modalTrigger",(function(){var e=n.props,t=e.trigger,r=e.modalOpen;if(!I()(t))return s.cloneElement(t,{"aria-haspopup":"dialog","aria-expanded":r})})),(0,A.A)(n,"handleModalOpen",(function(){var e=n.props,t=e.chosenCommunity,r=e.onModalChange;n.setState({localChosenCommunity:t}),r&&r(!0)}));var r=e.chosenCommunity,a=e.userCommunitiesMemberships,o=e.displaySelected;return n.state={localChosenCommunity:r},n.contextValue={setLocalCommunity:n.setCommunity,getChosenCommunity:n.getChosenCommunity,userCommunitiesMemberships:a,displaySelected:o},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.extraContentComponents,n=e.modalHeader,r=e.onModalChange,i=e.modalOpen,a=e.apiConfigs,o=e.handleClose,l=e.record,c=e.isInitialSubmission;return s.createElement(Fi.Provider,{value:this.contextValue},s.createElement(we.A,{role:"dialog","aria-labelledby":"community-modal-header",id:"community-selection-modal",className:"m-0",closeIcon:!0,closeOnDimmerClick:!1,open:i,onClose:function(){r&&r(!1)},onOpen:this.handleModalOpen,trigger:this.modalTrigger()},s.createElement(we.A.Header,null,s.createElement(y.A,{as:"h2",size:"small",id:"community-modal-header",className:"mt-5"},n)),s.createElement(Li,{apiConfigs:a,record:l,isInitialSubmission:c}),t&&s.createElement(we.A.Content,null,t),s.createElement(we.A.Actions,null,s.createElement(E.A,{onClick:o},g.M.t("Close")))))}}])}(s.Component);Bi.propTypes={chosenCommunity:p().object,onCommunityChange:p().func.isRequired,trigger:p().object,userCommunitiesMemberships:p().object.isRequired,extraContentComponents:p().node,modalHeader:p().string,onModalChange:p().func,displaySelected:p().bool,modalOpen:p().bool,apiConfigs:p().object,handleClose:p().func.isRequired,record:p().object.isRequired,isInitialSubmission:p().bool},Bi.defaultProps={chosenCommunity:void 0,extraContentComponents:void 0,modalHeader:g.M.t("Select a community"),onModalChange:void 0,displaySelected:!1,modalOpen:!1,trigger:void 0,apiConfigs:void 0,isInitialSubmission:!0};var Ui=(0,u.connect)((function(e){return{userCommunitiesMemberships:e.deposit.config.user_communities_memberships}}),null)(Bi),Vi=["actionState","numberOfFiles","buttonLabel","publishWithoutCommunity","formik","publishModalExtraContent"];function Hi(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Wi()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Wi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wi=function(){return!!e})()}var Yi=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Hi(this,t,[].concat(r)),(0,A.A)(e,"state",{isConfirmModalOpen:!1}),(0,A.A)(e,"openConfirmModal",(function(){return e.setState({isConfirmModalOpen:!0})})),(0,A.A)(e,"closeConfirmModal",(function(){return e.setState({isConfirmModalOpen:!1})})),(0,A.A)(e,"handlePublish",(function(t,n,r){(0,e.context.setSubmitContext)(r?zn.PUBLISH_WITHOUT_COMMUNITY:zn.PUBLISH),n(t),e.closeConfirmModal()})),(0,A.A)(e,"isDisabled",(function(e,t,n){var r=fe()(e,"files.enabled",!1);return t||r&&!n})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.actionState,i=t.numberOfFiles,a=t.buttonLabel,o=t.publishWithoutCommunity,l=t.formik,c=t.publishModalExtraContent,u=(0,J.A)(t,Vi),d=this.state.isConfirmModalOpen,p=l.values,m=l.isSubmitting,f=l.handleSubmit,h=mi()(u,["dispatch"]);return s.createElement(s.Fragment,null,s.createElement(E.A,(0,r.A)({disabled:this.isDisabled(p,m,i),name:"publish",onClick:this.openConfirmModal,positive:!0,icon:"upload",loading:m&&n===Et,labelPosition:"left",content:a},h,{type:"button"})),d&&s.createElement(we.A,{open:d,onClose:this.closeConfirmModal,size:"small",closeIcon:!0,closeOnDimmerClick:!1},s.createElement(we.A.Header,null,g.M.t("Are you sure you want to publish this record?")),s.createElement(we.A.Content,null,s.createElement(U.A,{visible:!0,warning:!0},s.createElement("p",null,s.createElement(F.A,{name:"warning sign"})," ",g.M.t("Once the record is published you will no longer be able to change the files in the upload! However, you will still be able to update the record's metadata later."))),c&&s.createElement("div",{dangerouslySetInnerHTML:{__html:c}})),s.createElement(we.A.Actions,null,s.createElement(E.A,{onClick:this.closeConfirmModal,floated:"left"},g.M.t("Cancel")),s.createElement(E.A,{onClick:function(t){return e.handlePublish(t,f,o)},positive:!0,content:a}))))}}])}(s.Component);(0,A.A)(Yi,"contextType",jn),Yi.propTypes={buttonLabel:p().string,publishWithoutCommunity:p().bool,actionState:p().string,numberOfFiles:p().number.isRequired,formik:p().object.isRequired,publishModalExtraContent:p().string},Yi.defaultProps={buttonLabel:g.M.t("Publish"),publishWithoutCommunity:!1,actionState:void 0,publishModalExtraContent:void 0};var Qi,Gi=(0,u.connect)((function(e){return{actionState:e.deposit.actionState,numberOfFiles:Object.values(e.files.entries).length,publishModalExtraContent:e.deposit.config.publish_modal_extra}}),null)((0,m.connect)(Yi));function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ji=(0,a.A)((function e(){(0,i.A)(this,e)}));function $i(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).includes(e.status)}function Zi(e){var t,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=$i(e,Ji.allowsReviewDeletionStates),l=$i(e,Ji.allowsReviewUpdateStates),c=$i(e,Ji.disallowsSubmitForReviewStates),s=function(e,t){switch(t){case void 0:var n,r,i=null===(n=e.parent)||void 0===n||null===(n=n.review)||void 0===n||null===(n=n.receiver)||void 0===n?void 0:n.community,a=null===(r=e.parent)||void 0===r||null===(r=r.communities)||void 0===r?void 0:r.default;if(!i&&!a)return;return $i(e,[Ji.PUBLISHED,Ji.NEW_VERSION_DRAFT])?e.expanded.parent.communities.default:e.expanded.parent.review.receiver;case null:return null;default:return t}}(e,a),u=!I()(s),d=null===e||void 0===e||null===(t=e.parent)||void 0===t?void 0:t.review,p=$i(e,[Ji.DRAFT_WITH_REVIEW])&&(null===d||void 0===d||null===(n=d.receiver)||void 0===n?void 0:n.community)===(null===s||void 0===s?void 0:s.id),m=$i(e,[Ji.DECLINED,Ji.EXPIRED])&&(null===d||void 0===d||null===(r=d.receiver)||void 0===r?void 0:r.community)===(null===s||void 0===s?void 0:s.id),f=!0===(null===s||void 0===s?void 0:s.is_ghost),h=u&&!f,v=$i(e,[Ji.PUBLISHED,Ji.NEW_VERSION_DRAFT])&&(I()(null===(i=e.parent)||void 0===i?void 0:i.communities)||!h),b=u&&!$i(e,[Ji.PUBLISHED,Ji.NEW_VERSION_DRAFT])&&s.ui.permissions.can_include_directly,y=u&&!m&&!$i(e,[Ji.PUBLISHED,Ji.NEW_VERSION_DRAFT]),g=!$i(e,[Ji.PUBLISHED,Ji.NEW_VERSION_DRAFT]),A=u&&l&&!p&&!m,E=!u&&o;return{selectedCommunity:s,ui:{showSubmitForReviewButton:y,showDirectPublishButton:b,disableSubmitForReviewButton:y&&c,showChangeCommunityButton:m,showCommunitySelectionButton:g,showCommunityHeader:!v,disableCommunitySelectionButton:g&&(m||c&&!v)},actions:{shouldUpdateReview:A,shouldDeleteReview:E,communityStateMustBeChecked:A||E}}}Qi=Ji,(0,A.A)(Ji,"DRAFT","draft"),(0,A.A)(Ji,"NEW_VERSION_DRAFT","new_version_draft"),(0,A.A)(Ji,"DRAFT_WITH_REVIEW","draft_with_review"),(0,A.A)(Ji,"IN_REVIEW","in_review"),(0,A.A)(Ji,"DECLINED","declined"),(0,A.A)(Ji,"EXPIRED","expired"),(0,A.A)(Ji,"PUBLISHED","published"),(0,A.A)(Ji,"allowsReviewDeletionStates",[Qi.DRAFT_WITH_REVIEW,Qi.DECLINED,Qi.EXPIRED]),(0,A.A)(Ji,"allowsReviewUpdateStates",[Qi.DRAFT_WITH_REVIEW,Qi.DECLINED,Qi.EXPIRED,Qi.DRAFT]),(0,A.A)(Ji,"disallowsSubmitForReviewStates",[Qi.PUBLISHED,Qi.IN_REVIEW,Qi.NEW_VERSION_DRAFT]);const ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yt:case Et:case St:case Rt:return Xi(Xi({},e),{},{actionState:t.type});case Ot:return Xi(Xi({},e),{},{actionState:t.type,actionStateExtra:{reviewComment:t.payload.reviewComment,directPublish:t.payload.directPublish}});case xt:case Tt:return Xi(Xi({},e),{},{actionState:t.type,actionStateExtra:{pidType:t.payload.pidType}});case Mt:case _t:return Xi(Xi({},e),{},{record:Xi(Xi({},e.record),t.payload.data),editorState:Zi(t.payload.data,e.editorState.selectedCommunity),errors:{},actionState:t.type,actionStateExtra:{}});case vt:case gt:return Xi(Xi({},e),{},{record:Xi({},t.payload.data),editorState:Zi(t.payload.data,e.editorState.selectedCommunity),errors:{},actionState:t.type,actionStateExtra:{}});case bt:case Ct:case It:return Xi(Xi({},e),{},{record:Xi(Xi({},e.record),t.payload.data),editorState:Zi(t.payload.data,e.editorState.selectedCommunity),errors:Xi({},t.payload.errors),actionState:t.type});case At:case wt:case kt:case Pt:case Ft:case qt:case Dt:return Xi(Xi({},e),{},{errors:Xi({},t.payload.errors),actionState:t.type,actionStateExtra:{}});case Kt:var n,r=Xi({},e.record),i="restricted"===(null===(n=t.payload)||void 0===n||null===(n=n.community)||void 0===n||null===(n=n.access)||void 0===n?void 0:n.visibility);return"public"===r.access.record&&i&&(r=Xi(Xi({},e.record),{},{access:{files:"restricted",record:"restricted"}})),Xi(Xi({},e),{},{record:r,editorState:Zi(r,t.payload.community)});default:return e}};function ta(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,na()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function na(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(na=function(){return!!e})()}var ra=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=ta(this,t,[].concat(r)),(0,A.A)(e,"ConfirmSubmitReviewSchema",Ce.Ik({acceptAccessToRecord:Ce.lc().oneOf([!0],g.M.t("You must accept this.")),reviewComment:Ce.Yj()})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("accept-access-checkbox").querySelector("input");null===e||void 0===e||e.focus()}},{key:"render",value:function(){var e,t,n,r,i=this,a=this.props,o=a.initialReviewComment,l=a.isConfirmModalOpen,c=a.community,u=a.onClose,d=a.onSubmit,p=a.publishModalExtraContent,h=a.directPublish,b=a.errors,y=a.loading,A=a.record,w=c.metadata.title;null!==A&&void 0!==A&&A.is_published?(e=g.M.t("Submit to community"),t=g.M.t("Before submitting to community, please read and check the following:"),r=g.M.t("Submit to community")):h?(e=g.M.t("Publish to community"),t=g.M.t("Before publishing to the community, please read and check the following:"),n=g.M.t("Your upload will be <bold>immediately published</bold> in '{{communityTitle}}'. You will no longer be able to change the files in the upload! However, you will still be able to update the record's metadata later.",{communityTitle:w}),r=g.M.t("Publish record to community")):(e=g.M.t("Submit for review"),t=g.M.t("Before requesting review, please read and check the following:"),n=g.M.t("If your upload is accepted by the community curators, it will be <bold>immediately published</bold>. Before that, you will still be able to modify metadata and files of this upload."),r=g.M.t("Submit record for review"));return s.createElement(m.Formik,{initialValues:{acceptAccessToRecord:!1,acceptAfterPublishRecord:!1,reviewComment:o||""},onSubmit:d,validationSchema:function(){if(A)return i.ConfirmSubmitReviewSchema;var e=Ce.Ik({acceptAfterPublishRecord:Ce.lc().oneOf([!0],g.M.t("You must accept this."))});return i.ConfirmSubmitReviewSchema.concat(e)},validateOnChange:!1,validateOnBlur:!1},(function(i){var a=i.values,o=i.handleSubmit;return s.createElement(we.A,{open:l,onClose:u,size:"small",closeIcon:!0,closeOnDimmerClick:!1},s.createElement(we.A.Header,null,e),s.createElement(we.A.Content,null,b&&s.createElement(f.ErrorMessage,{errors:b}),s.createElement(U.A,{visible:!0,warning:!0},s.createElement("p",null,s.createElement(F.A,{name:"warning sign"}),t)),s.createElement(v.A,null,s.createElement(v.A.Field,{id:"accept-access-checkbox"},s.createElement(f.RadioField,{control:T.A,fieldPath:"acceptAccessToRecord",label:s.createElement(j.x,{defaults:g.M.t("The '{{communityTitle}}' curators will have access to <bold>view</bold> and <bold>edit</bold> your upload's metadata and files.",{communityTitle:w}),values:{communityTitle:w},components:{bold:s.createElement("b",null)},shouldUnescape:!0}),checked:!0===fe()(a,"acceptAccessToRecord"),onChange:function(e){var t=e.data;e.formikProps.form.setFieldValue("acceptAccessToRecord",t.checked)},optimized:!0}),s.createElement(f.ErrorLabel,{role:"alert",fieldPath:"acceptAccessToRecord",className:"mt-0 mb-5"})),!A&&s.createElement(v.A.Field,null,s.createElement(f.RadioField,{control:T.A,fieldPath:"acceptAfterPublishRecord",label:s.createElement(j.x,{defaults:n,values:{communityTitle:w},components:{bold:s.createElement("b",null)}}),checked:!0===fe()(a,"acceptAfterPublishRecord"),onChange:function(e){var t=e.data;e.formikProps.form.setFieldValue("acceptAfterPublishRecord",t.checked)},optimized:!0}),s.createElement(f.ErrorLabel,{role:"alert",fieldPath:"acceptAfterPublishRecord",className:"mt-0 mb-5"})),!h&&s.createElement(f.TextAreaField,{fieldPath:"reviewComment",label:g.M.t("Message to curators (optional)")}),p&&s.createElement("div",{dangerouslySetInnerHTML:{__html:p}}))),s.createElement(we.A.Actions,null,s.createElement(E.A,{onClick:u,floated:"left",loading:y,disabled:y},g.M.t("Cancel")),s.createElement(E.A,{name:"submitReview",onClick:function(e){o(e)},loading:y,disabled:y,positive:h,primary:!h,content:r})))}))}}])}(s.Component);ra.propTypes={isConfirmModalOpen:p().bool.isRequired,community:p().object.isRequired,onClose:p().func.isRequired,onSubmit:p().func.isRequired,initialReviewComment:p().string,publishModalExtraContent:p().string,directPublish:p().bool,errors:p().node,loading:p().bool,record:p().object.isRequired},ra.defaultProps={initialReviewComment:"",publishModalExtraContent:void 0,directPublish:!1,errors:void 0,loading:!1};var ia=["actionState","actionStateExtra","community","disableSubmitForReviewButton","directPublish","formik","isRecordSubmittedForReview","numberOfFiles","publishModalExtraContent"];function aa(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,oa()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function oa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oa=function(){return!!e})()}var la=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=aa(this,t,[].concat(r)),(0,A.A)(e,"state",{isConfirmModalOpen:!1}),(0,A.A)(e,"openConfirmModal",(function(){return e.setState({isConfirmModalOpen:!0})})),(0,A.A)(e,"closeConfirmModal",(function(){return e.setState({isConfirmModalOpen:!1})})),(0,A.A)(e,"handleSubmitReview",(function(t){var n=t.reviewComment,r=e.props,i=r.formik,a=r.directPublish,o=i.handleSubmit;(0,e.context.setSubmitContext)(zn.SUBMIT_REVIEW,{reviewComment:n,directPublish:a}),o(),e.closeConfirmModal()})),(0,A.A)(e,"isDisabled",(function(t,n){var r=e.props.formik,i=r.values,a=r.isSubmitting,o=fe()(i,"files.enabled",!1);return a||o&&!t||n})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.actionState,n=e.actionStateExtra,i=e.community,a=e.disableSubmitForReviewButton,o=e.directPublish,l=e.formik,c=e.isRecordSubmittedForReview,u=e.numberOfFiles,d=e.publishModalExtraContent,p=(0,J.A)(e,ia),m=l.isSubmitting,f=mi()(p,["dispatch"]),h=this.state.isConfirmModalOpen,v=c?g.M.t("Submitted for review"):g.M.t("Submit for review"),b=o?g.M.t("Publish to community"):v;return s.createElement(s.Fragment,null,s.createElement(E.A,(0,r.A)({disabled:this.isDisabled(u,a),name:"SubmitReview",onClick:this.openConfirmModal,positive:o,primary:!o,icon:"upload",loading:m&&"DRAFT_SUBMIT_REVIEW_STARTED"===t,labelPosition:"left",content:b},f,{type:"button"})),h&&s.createElement(ra,{isConfirmModalOpen:h,initialReviewComment:n.reviewComment,onSubmit:this.handleSubmitReview,community:i,onClose:this.closeConfirmModal,publishModalExtraContent:d,directPublish:o}))}}])}(s.Component);(0,A.A)(la,"contextType",jn),la.propTypes={actionState:p().string,actionStateExtra:p().object.isRequired,community:p().object.isRequired,numberOfFiles:p().number,disableSubmitForReviewButton:p().bool,isRecordSubmittedForReview:p().bool.isRequired,directPublish:p().bool,formik:p().object.isRequired,publishModalExtraContent:p().string},la.defaultProps={actionState:void 0,numberOfFiles:void 0,disableSubmitForReviewButton:void 0,publishModalExtraContent:void 0,directPublish:!1};var ca=(0,u.connect)((function(e){return{actionState:e.deposit.actionState,actionStateExtra:e.deposit.actionStateExtra,community:e.deposit.editorState.selectedCommunity,isRecordSubmittedForReview:e.deposit.record.status===Ji.IN_REVIEW,disableSubmitForReviewButton:e.deposit.editorState.ui.disableSubmitForReviewButton,numberOfFiles:Object.values(e.files.entries).length,publishModalExtraContent:e.deposit.config.publish_modal_extra}}),null)((0,m.connect)(la)),sa=["community","changeSelectedCommunityFn","showChangeCommunityButton","showDirectPublishButton","showSubmitForReviewButton","record"];function ua(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,da()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function da(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(da=function(){return!!e})()}var pa=function(e){function t(e){var n;return(0,i.A)(this,t),(n=ua(this,t,[e])).state={modalOpen:!1},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.community,i=t.changeSelectedCommunityFn,a=t.showChangeCommunityButton,o=t.showDirectPublishButton,l=t.showSubmitForReviewButton,c=t.record,u=(0,J.A)(t,sa),d=this.state.modalOpen;return l?s.createElement(ca,(0,r.A)({directPublish:o},u,{fluid:!0,className:"mb-10"})):a?s.createElement(s.Fragment,null,s.createElement(Ui,{onCommunityChange:function(e){i(e)},onModalChange:function(t){return e.setState({modalOpen:t})},modalOpen:d,displaySelected:!0,record:c,chosenCommunity:n,trigger:s.createElement(E.A,{content:g.M.t("Change community"),fluid:!0,className:"mb-10"})}),s.createElement(Gi,(0,r.A)({buttonLabel:g.M.t("Publish without community"),publishWithoutCommunity:!0},u))):s.createElement(Gi,u)}}])}(s.Component);pa.propTypes={community:p().object,changeSelectedCommunityFn:p().func.isRequired,showChangeCommunityButton:p().bool.isRequired,showDirectPublishButton:p().bool.isRequired,showSubmitForReviewButton:p().bool.isRequired,record:p().object.isRequired},pa.defaultProps={community:void 0};var ma=(0,u.connect)((function(e){return{community:e.deposit.editorState.selectedCommunity,showDirectPublishButton:e.deposit.editorState.ui.showDirectPublishButton,showChangeCommunityButton:e.deposit.editorState.ui.showChangeCommunityButton,showSubmitForReviewButton:e.deposit.editorState.ui.showSubmitForReviewButton}}),(function(e){return{changeSelectedCommunityFn:function(t){return e(rn(t))}}}))(pa),fa=["actionState","formik"];function ha(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,va()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function va(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(va=function(){return!!e})()}var ba=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=ha(this,t,[].concat(r)),(0,A.A)(e,"handleSave",(function(t){var n=e.props.formik,r=e.context.setSubmitContext,i=n.handleSubmit;r(zn.SAVE),i(t),ae()})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.actionState,i=t.formik,a=(0,J.A)(t,fa),o=i.isSubmitting,l=mi()(a,["dispatch"]);return s.createElement(E.A,(0,r.A)({name:"save",disabled:o,onClick:function(t){return e.handleSave(t)},icon:"save",loading:o&&n===yt,labelPosition:"left",content:g.M.t("Save draft")},l))}}])}(s.Component);(0,A.A)(ba,"contextType",jn),ba.propTypes={formik:p().object.isRequired,actionState:p().string},ba.defaultProps={actionState:void 0};var ya,ga=(0,u.connect)((function(e){return{actionState:e.deposit.actionState}}),null)((0,m.connect)(ba)),Aa=n(23805),Ea=n.n(Aa);function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ra(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Pa()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Pa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pa=function(){return!!e})()}var Sa={"files.enabled":g.M.t("Files"),"metadata.resource_type":g.M.t("Resource type"),"metadata.title":g.M.t("Title"),"metadata.additional_titles":g.M.t("Additional titles"),"metadata.publication_date":g.M.t("Publication date"),"metadata.creators":g.M.t("Creators"),"metadata.contributors":g.M.t("Contributors"),"metadata.description":g.M.t("Description"),"metadata.additional_descriptions":g.M.t("Additional descriptions"),"metadata.rights":g.M.t("Licenses"),"metadata.languages":g.M.t("Languages"),"metadata.dates":g.M.t("Dates"),"metadata.version":g.M.t("Version"),"metadata.publisher":g.M.t("Publisher"),"metadata.related_identifiers":g.M.t("Related works"),"metadata.references":g.M.t("References"),"metadata.identifiers":g.M.t("Alternate identifiers"),"metadata.subjects":g.M.t("Keywords and subjects"),"access.embargo.until":g.M.t("Embargo until"),"pids.doi":g.M.t("DOI")},ka=(ya={},(0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)(ya,gt,{feedback:"positive",message:g.M.t("Record successfully saved.")}),bt,{feedback:"warning",message:g.M.t("Record saved with validation errors:")}),At,{feedback:"negative",message:g.M.t("The draft was not saved. Please try again. If the problem persists, contact user support.")}),wt,{feedback:"negative",message:g.M.t("The draft was not published. Please try again. If the problem persists, contact user support.")}),Ct,{feedback:"negative",message:g.M.t("The draft was not published. Record saved with validation errors:")}),Dt,{feedback:"negative",message:g.M.t("The draft was not submitted for review. Please try again. If the problem persists, contact user support.")}),It,{feedback:"negative",message:g.M.t("The draft was not submitted for review. Record saved with validation errors:")}),kt,{feedback:"negative",message:g.M.t("Draft deletion failed. Please try again. If the problem persists, contact user support.")}),Pt,{feedback:"negative",message:g.M.t("Draft preview failed. Please try again. If the problem persists, contact user support.")}),Ft,{feedback:"negative",message:g.M.t("Identifier reservation failed. Please try again. If the problem persists, contact user support.")}),(0,A.A)((0,A.A)((0,A.A)(ya,qt,{feedback:"negative",message:g.M.t("Identifier could not be discarded. Please try again. If the problem persists, contact user support.")}),Bt,{feedback:"negative",message:g.M.t("Draft save failed before file upload. Please try again. If the problem persists, contact user support.")}),Ht,{feedback:"negative",message:g.M.t("Files import from the previous version failed. Please try again. If the problem persists, contact user support.")})),Oa=function(e){function t(e){var n;return(0,i.A)(this,t),(n=Ra(this,t,[e])).labels=Ca(Ca({},Sa),e.labels),n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"renderErrorMessages",value:function(e){var t=(0,ke.A)(new Set(e));return 1===t.length?e[0]:s.createElement("ul",null,t.map((function(e){return s.createElement("li",{key:e},e)})))}},{key:"toErrorMessages",value:function(e){var t=[];return re(e,(function(e){t.push(e)})),t}},{key:"toLabelledErrorMessages",value:function(e){var t,n=this,r=e.metadata||{},i=Object.entries(r).map((function(e){var t=(0,be.A)(e,2);return["metadata."+t[0],t[1]]})),a=e.files||{},o=Object.entries(a).map((function(e){var t=(0,be.A)(e,2);return["files."+t[0],t[1]]})),l=(null===(t=e.access)||void 0===t?void 0:t.embargo)||{},c=Object.entries(l).map((function(e){var t=(0,be.A)(e,2);return["access.embargo."+t[0],t[1]]})),s=e.pids||{},u=Ea()(s)?Object.entries(s).map((function(e){var t=(0,be.A)(e,2);return["pids."+t[0],t[1]]})):[["pids",s]],d=e.custom_fields||{},p=Object.entries(d).map((function(e){var t=(0,be.A)(e,2);return["custom_fields."+t[0],t[1]]})),m=Object.fromEntries(i.concat(o).concat(c).concat(u).concat(p)),f=Object.fromEntries(Object.entries(m).map((function(e){var t=(0,be.A)(e,2),r=t[0],i=t[1];return[r,n.toErrorMessages(i)]}))),h={};for(var v in f){var b=this.labels[v]||"Unknown field",y=h[b]||[];h[b]=y.concat(f[v])}return h}},{key:"render",value:function(){var e=this,t=this.props,n=t.errors,r=t.actionState,i=n||{},a=fe()(ka,r,{feedback:void 0,message:void 0}),o=a.feedback,l=a.message;if(!l)return null;var c=this.toLabelledErrorMessages(i),u=Object.entries(c).map((function(t){var n=(0,be.A)(t,2),r=n[0],i=n[1];return s.createElement(U.A.Item,{key:r},s.createElement("b",null,r),": ",e.renderErrorMessages(i))})),d=i.message;return s.createElement(U.A,{visible:!0,positive:"positive"===o,warning:"warning"===o,negative:"negative"===o,className:"flashed top attached"},s.createElement(K.A,{container:!0},s.createElement(K.A.Column,{width:15,textAlign:"left"},s.createElement("strong",null,d||l),u.length>0&&s.createElement(U.A.List,null,u))))}}])}(s.Component);Oa.propTypes={errors:p().object,actionState:p().string,labels:p().object},Oa.defaultProps={errors:void 0,actionState:void 0,labels:void 0};var Da=(0,u.connect)((function(e){return{actionState:e.deposit.actionState,errors:e.deposit.errors}}),null)(Oa);n(75866);var Ia=n(72505),xa=n.n(Ia);function Ma(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Fa()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Fa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fa=function(){return!!e})()}var Ta={json:{"Content-Type":"application/json"},"vnd+json":{"Content-Type":"application/json",Accept:"application/vnd.inveniordm.v1+json"},"octet-stream":{"Content-Type":"application/octet-stream"}},_a=(0,a.A)((function e(t,n){(0,i.A)(this,e),this.data=t,this.errors=n})),qa=function(){return(0,a.A)((function e(t,n,r){if((0,i.A)(this,e),this.constructor===e)throw new Error("Abstract");var a=fe()(t,"headers");this.apiHeaders=Object.assign({},Ta,a),this.apiConfig={withCredentials:!0,xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",headers:this.apiHeaders["vnd+json"]},this.axiosWithConfig=xa().create(this.apiConfig),this.cancelToken=xa().CancelToken}),[{key:"createDraft",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveDraft",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"publishDraft",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDraft",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"reservePID",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"discardPID",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createOrUpdateReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}])}(),Na=function(e){function t(e,n,r){var a;return(0,i.A)(this,t),(a=Ma(this,t,[e])).createDraftURL=n,a.recordSerializer=r,a}return(0,c.A)(t,e),(0,a.A)(t,[{key:"_createResponse",value:function(){var e=(0,dt.A)(mt().mark((function e(t){var n,r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return n=e.sent,r=this.recordSerializer.deserialize(n.data||{}),i=this.recordSerializer.deserializeErrors(n.data.errors||[]),e.abrupt("return",new _a(r,i));case 9:throw e.prev=9,e.t0=e.catch(0),a=e.t0.response.data,new _a({},a);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createDraft",value:function(){var e=(0,dt.A)(mt().mark((function e(t){var n,r=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.recordSerializer.serialize(t),e.abrupt("return",this._createResponse((function(){return r.axiosWithConfig.post(r.createDraftURL,n,{params:{expand:1}})})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readDraft",value:function(){var e=(0,dt.A)(mt().mark((function e(t){var n=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse((function(){return n.axiosWithConfig.get(t.self,{params:{expand:1}})})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveDraft",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){var r,i=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.recordSerializer.serialize(t),e.abrupt("return",this._createResponse((function(){return i.axiosWithConfig.put(n.self,r,{params:{expand:1}})})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"publishDraft",value:function(){var e=(0,dt.A)(mt().mark((function e(t){var n=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse((function(){return n.axiosWithConfig.post(t.publish,{},{params:{expand:1}})})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDraft",value:function(){var e=(0,dt.A)(mt().mark((function e(t){var n=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse((function(){return n.axiosWithConfig.delete(t.self,{})})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reservePID",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){var r=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse((function(){var e="reserve_".concat(n),i=t[e];return r.axiosWithConfig.post(i,{},{params:{expand:1}})})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"discardPID",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){var r=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse((function(){var e="reserve_".concat(n),i=t[e];return r.axiosWithConfig.delete(i,{params:{expand:1}})})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createOrUpdateReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){var r=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse((function(){return r.axiosWithConfig.put(t.review,{receiver:{community:n},type:"community-submission"})})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t){var n=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse((function(){return n.axiosWithConfig.delete(t.review,{})})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){var r=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse((function(){var e=n?{payload:{content:n,format:"html"}}:{};return r.axiosWithConfig.post(t["submit-review"],e)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cancelReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axiosWithConfig.post(t.actions.cancel,n?{payload:{content:n,format:"html"}}:{}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}])}(qa),La=function(){return(0,a.A)((function e(t){if((0,i.A)(this,e),this.constructor===e)throw new Error("Abstract");var n=fe()(t,"headers",{});this.apiHeaders=Object.assign({},Ta,n);var r={withCredentials:!0,xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",headers:this.apiHeaders.json};this.axiosWithConfig=xa().create(r)}),[{key:"isCancelled",value:function(e){return xa().isCancel(e)}},{key:"initializeFileUpload",value:function(e,t){throw new Error("Not implemented.")}},{key:"uploadFile",value:function(e,t,n,r){throw new Error("Not implemented.")}},{key:"finalizeFileUpload",value:function(e){throw new Error("Not implemented.")}},{key:"deleteFile",value:function(e){throw new Error("Not implemented.")}}])}(),za=function(e){function t(){return(0,i.A)(this,t),Ma(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"initializeFileUpload",value:function(e,t){var n=[{key:t}];return this.axiosWithConfig.post(e,n,{})}},{key:"uploadFile",value:function(e,t,n,r){return this.axiosWithConfig.put(e,t,{headers:this.apiHeaders["octet-stream"],onUploadProgress:function(e){var t=Math.floor(e.loaded/e.total*100);n&&n(t)},cancelToken:new(xa().CancelToken)(r)})}},{key:"finalizeFileUpload",value:function(e){return this.axiosWithConfig.post(e,{})}},{key:"importParentRecordFiles",value:function(e){var t="".concat(e.self,"/actions/files-import");return this.axiosWithConfig.post(t,{})}},{key:"deleteFile",value:function(e){return this.axiosWithConfig.delete(e.self)}}])}(La),ja=n(52230),Ba=["isFileUploadInProgress"];function Ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ua(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ha(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Wa()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Wa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wa=function(){return!!e})()}var Ya=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Ha(this,t,[].concat(r)),(0,A.A)(e,"submitContext",void 0),(0,A.A)(e,"setSubmitContext",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.submitContext={actionName:t,extra:n}})),(0,A.A)(e,"onFormSubmit",function(){var t=(0,dt.A)(mt().mark((function t(n,r){var i,a,o,l,c,s,u,d,p,m,f,h,v;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.props,a=i.saveAction,o=i.publishAction,l=i.submitReview,c=i.previewAction,s=i.deleteAction,u=i.reservePIDAction,d=i.discardPIDAction,p=e.submitContext,m=p.actionName,f=p.extra,h=void 0,v={},t.t0=m,t.next=t.t0===zn.SAVE?7:t.t0===zn.PUBLISH?9:t.t0===zn.PUBLISH_WITHOUT_COMMUNITY?11:t.t0===zn.SUBMIT_REVIEW?14:t.t0===zn.PREVIEW?18:t.t0===zn.DELETE?20:t.t0===zn.RESERVE_PID?23:t.t0===zn.DISCARD_PID?26:29;break;case 7:return h=a,t.abrupt("break",30);case 9:return h=o,t.abrupt("break",30);case 11:return h=o,v.removeSelectedCommunity=!0,t.abrupt("break",30);case 14:return h=l,v.reviewComment=f.reviewComment,v.directPublish=f.directPublish,t.abrupt("break",30);case 18:return h=c,t.abrupt("break",30);case 20:return h=s,v.isDiscardingVersion=f.isDiscardingVersion,t.abrupt("break",30);case 23:return h=u,v.pidType=f.pidType,t.abrupt("break",30);case 26:return h=d,v.pidType=f.pidType,t.abrupt("break",30);case 29:throw Error("The submit btn must set the form action name.");case 30:return t.prev=30,t.next=33,h(n,v);case 33:t.next=38;break;case 35:t.prev=35,t.t1=t.catch(30),t.t1&&t.t1.errors?r.setErrors(t.t1.errors):ae();case 38:return t.prev=38,e.submitContext={},t.finish(38);case 41:case"end":return t.stop()}}),t,null,[[30,35,38,41]])})));return function(e,n){return t.apply(this,arguments)}}()),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeunload",(function(t){if(e.props.fileUploadOngoing)return t.returnValue="",""})),window.addEventListener("unload",(0,dt.A)(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))))}},{key:"render",value:function(){var e=this.props,t=e.errors,n=e.record,r=e.children,i=e.validate,a=e.validationSchema;return s.createElement(jn.Provider,{value:{setSubmitContext:this.setSubmitContext}},s.createElement(f.BaseForm,{onSubmit:this.onFormSubmit,formik:Va({enableReinitialize:!0,initialValues:n,validate:i,validationSchema:a},t&&{initialErrors:t})},r))}}])}(s.Component);Ya.propTypes={errors:p().object,record:p().object.isRequired,children:p().node,saveAction:p().func.isRequired,publishAction:p().func.isRequired,submitReview:p().func.isRequired,previewAction:p().func.isRequired,deleteAction:p().func.isRequired,reservePIDAction:p().func.isRequired,discardPIDAction:p().func.isRequired,fileUploadOngoing:p().bool,validate:p().func,validationSchema:p().object},Ya.defaultProps={errors:void 0,children:void 0,fileUploadOngoing:!1,validate:void 0,validationSchema:void 0};var Qa=(0,u.connect)((function(e){var t=e.files,n=t.isFileUploadInProgress,r=(0,J.A)(t,Ba);return{record:e.deposit.record,errors:e.deposit.errors,formState:e.deposit.formState,fileUploadOngoing:n,files:r}}),(function(e){return{publishAction:function(t,n){var r=n.removeSelectedCommunity;return e(function(e,t){var n=t.removeSelectedCommunity,r=void 0!==n&&n;return function(){var t=(0,dt.A)(mt().mark((function t(n,i,a){var o,l,c,s;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:Et}),!r){t.next=4;break}return t.next=4,n(rn(null));case 4:return t.next=6,tn(e,a.service.drafts,{depositState:i().deposit,dispatchFn:n,failType:wt,partialValidationActionType:Ct});case 6:return o=t.sent,l=o.data,t.prev=8,t.next=11,a.service.drafts.publish(l.links);case 11:c=t.sent,s=c.data.links.self_html,window.location.replace(s),t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(8),n({type:wt,payload:{errors:t.t0.errors}}),t.t0;case 20:case"end":return t.stop()}}),t,null,[[8,16]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t,{removeSelectedCommunity:void 0!==r&&r}))},submitReview:function(t,n){var r=n.reviewComment,i=n.directPublish;return e(function(e,t){var n=t.reviewComment,r=t.directPublish;return function(){var t=(0,dt.A)(mt().mark((function t(i,a,o){var l,c,s,u;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i({type:Ot,payload:{reviewComment:n},directPublish:r}),t.next=3,tn(e,o.service.drafts,{depositState:a().deposit,dispatchFn:i,failType:Dt,partialValidationActionType:It});case 3:return l=t.sent,c=l.data,t.prev=5,t.next=8,o.service.drafts.submitReview(c.links,n);case 8:s=t.sent,u=s.data.links.next_html,window.location.replace(u),t.next=17;break;case 13:throw t.prev=13,t.t0=t.catch(5),i({type:Dt,payload:{errors:t.t0.errors}}),t.t0;case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t,{reviewComment:r,directPublish:i}))},saveAction:function(t){return e((n=t,function(){var e=(0,dt.A)(mt().mark((function e(t,r,i){var a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:yt}),e.next=3,tn(n,i.service.drafts,{depositState:r().deposit,dispatchFn:t,failType:At,partialValidationActionType:bt});case 3:a=e.sent,t({type:gt,payload:{data:a.data}});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()));var n},previewAction:function(t){return e((n=t,function(){var e=(0,dt.A)(mt().mark((function e(t,r,i){var a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Rt}),e.next=3,tn(n,i.service.drafts,{depositState:r().deposit,dispatchFn:t,failType:Pt,partialValidationActionType:bt});case 3:a=e.sent,o=a.data.links.record_html,window.location="".concat(o,"?preview=1");case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()));var n},deleteAction:function(t,n){n.isDiscardingVersion;return e(function(){var e=(0,dt.A)(mt().mark((function e(t,n,r){var i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:St}),e.prev=1,i=n().deposit.record,e.next=5,r.service.drafts.delete(i.links);case 5:window.location.replace("/me/uploads"),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(1),t({type:kt,payload:{errors:e.t0.errors}}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n,r){return e.apply(this,arguments)}}())},reservePIDAction:function(t,n){var r=n.pidType;return e(function(e,t){var n=t.pidType;return function(){var t=(0,dt.A)(mt().mark((function t(r,i,a){var o,l;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:xt,payload:{pidType:n}}),t.prev=1,t.next=4,en(e,a.service.drafts);case 4:return o=t.sent,l=o.data,t.next=8,a.service.drafts.reservePID(l.links,n);case 8:o=t.sent,r({type:Mt,payload:{data:o.data}}),t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(1),r({type:Ft,payload:{errors:t.t0.errors}}),t.t0;case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t,{pidType:r}))},discardPIDAction:function(t,n){var r=n.pidType;return e(function(e,t){var n=t.pidType;return function(){var t=(0,dt.A)(mt().mark((function t(r,i,a){var o,l;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:Tt,payload:{pidType:n}}),t.prev=1,t.next=4,en(e,a.service.drafts);case 4:return o=t.sent,l=o.data,t.next=8,a.service.drafts.discardPID(l.links,n);case 8:o=t.sent,r({type:_t,payload:{data:o.data}}),t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(1),r({type:qt,payload:{errors:t.t0.errors}}),t.t0;case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t,{pidType:r}))}}}))(Ya);function Ga(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Ka()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Ka(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ka=function(){return!!e})()}var Xa=function(){return(0,a.A)((function e(t){if((0,i.A)(this,e),this.constructor===e)throw new Error("Abstract")}),[{key:"read",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"publish",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"reservePID",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"discardPID",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createOrUpdateReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}])}(),Ja=function(e){function t(e){var n;return(0,i.A)(this,t),(n=Ga(this,t)).apiClient=e,n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"_draftAlreadyCreated",value:function(e){return!!e.id}},{key:"create",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.createDraft(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.readDraft(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._draftAlreadyCreated(t)?this.apiClient.saveDraft(t,t.links):this.create(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publish",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.publishDraft(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.deleteDraft(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reservePID",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.reservePID(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"discardPID",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.discardPID(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createOrUpdateReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.createOrUpdateReview(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.deleteReview(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitReview",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.submitReview(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}])}(Xa);function $a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eo(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,to()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function to(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(to=function(){return!!e})()}var no=function(){return(0,a.A)((function e(){(0,i.A)(this,e),(0,A.A)(this,"currents",[]),(0,A.A)(this,"pending",[])}),[{key:"put",value:function(e,t){this.pending.push({initializeUploadURL:e,file:t})}},{key:"totalInProgress",get:function(){return this.currents.length}},{key:"next",get:function(){var e=this.pending.shift();return void 0!==e&&this.currents.push(e.file),e}},{key:"markCompleted",value:function(e){var t=this.currents.indexOf(e);t>=0&&this.currents.splice(t,1)}}])}(),ro=function(){return(0,a.A)((function e(t){(0,i.A)(this,e),this.dispatcher=t}),[{key:"onUploadAdded",value:function(e){throw new Error("Not implemented.")}},{key:"onUploadStarted",value:function(e,t){throw new Error("Not implemented.")}},{key:"onUploadProgress",value:function(e,t){throw new Error("Not implemented.")}},{key:"onUploadCompleted",value:function(e,t,n,r){throw new Error("Not implemented.")}},{key:"onUploadCancelled",value:function(e){throw new Error("Not implemented.")}},{key:"onUploadFailed",value:function(e){throw new Error("Not implemented.")}}])}(),io=function(){return(0,a.A)((function e(t,n){if((0,i.A)(this,e),this.constructor===e)throw new Error("Abstract")}),[{key:"setProgressNotifier",value:function(e){if(!(e instanceof ro))throw new Error("Progress notifier must be an instance of `UploadProgressNotifier`");this.progressNotifier=e}},{key:"upload",value:function(){var e=(0,dt.A)(mt().mark((function e(t,n,r){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"importParentRecordFiles",value:function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}])}(),ao=function(e){function t(e,n){var r;return(0,i.A)(this,t),r=eo(this,t),(0,A.A)(r,"_initializeUpload",function(){var e=(0,dt.A)(mt().mark((function e(t,n){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fileApiClient.initializeFileUpload(t,n.name);case 2:return i=e.sent,a=i.data.entries.filter((function(e){return e.key.normalize()===n.name.normalize()}))[0],e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,A.A)(r,"_doUpload",function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fileApiClient.uploadFile(t,n,(function(e){return r.progressNotifier.onUploadProgress(n.name,e)}),(function(e){return r.progressNotifier.onUploadStarted(n.name,e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,A.A)(r,"_finalizeUpload",function(){var e=(0,dt.A)(mt().mark((function e(t,n){var i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.uploaderQueue.markCompleted(n),r._startNextUpload(),e.next=4,r.fileApiClient.finalizeFileUpload(t);case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,A.A)(r,"_onError",(function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?r.progressNotifier.onUploadCancelled(e.name):r.progressNotifier.onUploadFailed(e.name),r.uploaderQueue.markCompleted(e),r._startNextUpload()})),(0,A.A)(r,"_startNewUpload",function(){var e=(0,dt.A)(mt().mark((function e(t,n){var i,a,o,l,c;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r._initializeUpload(t,n);case 3:i=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),r._onError(n),e.abrupt("return");case 10:return a=i.links.content,o=i.links.commit,e.prev=12,e.next=15,r._doUpload(a,n);case 15:return e.next=17,r._finalizeUpload(o,n);case 17:l=e.sent,r.progressNotifier.onUploadCompleted(l.key,l.size,l.checksum,l.links),e.next=26;break;case 21:e.prev=21,e.t1=e.catch(12),console.error(e.t1),c=r.fileApiClient.isCancelled(e.t1),r._onError(n,c);case 26:case"end":return e.stop()}}),e,null,[[0,6],[12,21]])})));return function(t,n){return e.apply(this,arguments)}}()),(0,A.A)(r,"_startNextUpload",(0,dt.A)(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.uploaderQueue.totalInProgress<r.maxConcurrentUploads)){e.next=6;break}if(!(t=r.uploaderQueue.next)){e.next=6;break}return e.next=6,r._startNewUpload(t.initializeUploadURL,t.file);case 6:case"end":return e.stop()}}),e)})))),(0,A.A)(r,"upload",function(){var e=(0,dt.A)(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.uploaderQueue.put(t,n),r.progressNotifier.onUploadAdded(n.name),e.next=4,r._startNextUpload();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,A.A)(r,"delete",function(){var e=(0,dt.A)(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fileApiClient.deleteFile(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,A.A)(r,"importParentRecordFiles",function(){var e=(0,dt.A)(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fileApiClient.importParentRecordFiles(t);case 2:return n=e.sent,e.abrupt("return",n.data.entries.reduce((function(e,t){return Za(Za({},e),{},(0,A.A)({},t.key,{status:un.finished,size:t.size,name:t.key,progressPercentage:100,checksum:t.checksum,links:t.links}))}),{}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.fileApiClient=e,r.maxConcurrentUploads=n||3,r.uploaderQueue=new no,r}return(0,c.A)(t,e),(0,a.A)(t)}(io),oo=n(88055),lo=n.n(oo),co=n(84684),so=n.n(co),uo=n(56449),po=n.n(uo),mo=n(53812),fo=n.n(mo),ho=n(5187),vo=n.n(ho),bo=n(98023),yo=n.n(bo),go=n(73916),Ao=n.n(go),Eo=n(44383),wo=n.n(Eo),Co=n(71086),Ro=n.n(Co),Po=n(63560),So=n.n(Po),ko=n(8306),Oo=n(80357);function Do(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Io(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Io(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function Io(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fo(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,To()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function To(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(To=function(){return!!e})()}var _o=function(){return(0,a.A)((function e(t){if((0,i.A)(this,e),this.constructor===e)throw new Error("Abstract")}),[{key:"deserialize",value:function(e){throw new Error("Not implemented.")}},{key:"deserializeErrors",value:function(e){throw new Error("Not implemented.")}},{key:"serialize",value:function(e){throw new Error("Not implemented.")}}])}(),qo=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,i.A)(this,t),(n=Fo(this,t)).defaultLocale=e,n.customFieldVocabularies=r,n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"depositRecordSchema",get:function(){return{files:new ko.D0({fieldpath:"files"}),media_files:new ko.D0({fieldpath:"media_files"}),links:new ko.D0({fieldpath:"links"}),expanded:new ko.D0({fieldpath:"expanded",deserializedDefault:{}}),pids:new ko.D0({fieldpath:"pids",deserializedDefault:{},serializedDefault:{}}),title:new ko.D0({fieldpath:"metadata.title",deserializedDefault:""}),additional_titles:new ko.yv({fieldpath:"metadata.additional_titles",schema:{title:new ko.D0({fieldpath:"title"}),type:new ko.vE({fieldpath:"type",deserializedDefault:"",serializedDefault:""}),lang:new ko.vE({fieldpath:"lang",deserializedDefault:"",serializedDefault:""})}}),additional_descriptions:new ko.yv({fieldpath:"metadata.additional_descriptions",schema:{description:new ko.D0({fieldpath:"description"}),type:new ko.vE({fieldpath:"type",deserializedDefault:"",serializedDefault:""}),lang:new ko.vE({fieldpath:"lang",deserializedDefault:"",serializedDefault:""})}}),creators:new ko.yv({fieldpath:"metadata.creators",schema:{person_or_org:new ko.D0({fieldpath:"person_or_org"}),role:new ko.vE({fieldpath:"role",deserializedDefault:"",serializedDefault:""}),affiliations:new ko.TV({fieldpath:"affiliations",deserializedDefault:[],serializedDefault:[],labelField:"name"})}}),contributors:new ko.yv({fieldpath:"metadata.contributors",schema:{person_or_org:new ko.D0({fieldpath:"person_or_org"}),role:new ko.vE({fieldpath:"role",deserializedDefault:"",serializedDefault:""}),affiliations:new ko.TV({fieldpath:"affiliations",deserializedDefault:[],serializedDefault:[],labelField:"name"})}}),resource_type:new ko.vE({fieldpath:"metadata.resource_type",deserializedDefault:"",serializedDefault:""}),access:new ko.D0({fieldpath:"access",deserializedDefault:{record:"public",files:"public"}}),publication_date:new ko.D0({fieldpath:"metadata.publication_date",deserializedDefault:""}),dates:new ko.yv({fieldpath:"metadata.dates",schema:{date:new ko.D0({fieldpath:"date"}),type:new ko.vE({fieldpath:"type",deserializedDefault:"",serializedDefault:""}),description:new ko.D0({fieldpath:"description"})},deserializedDefault:[]}),languages:new ko.vE({fieldpath:"metadata.languages",deserializedDefault:[],serializedDefault:[]}),identifiers:new ko.yv({fieldpath:"metadata.identifiers",schema:{scheme:new ko.D0({fieldpath:"scheme"}),identifier:new ko.D0({fieldpath:"identifier"})},deserializedDefault:[]}),related_identifiers:new ko.yv({fieldpath:"metadata.related_identifiers",schema:{scheme:new ko.D0({fieldpath:"scheme"}),identifier:new ko.D0({fieldpath:"identifier"}),relation_type:new ko.vE({fieldpath:"relation_type",deserializedDefault:"",serializedDefault:""}),resource_type:new ko.vE({fieldpath:"resource_type",deserializedDefault:"",serializedDefault:""})},deserializedDefault:[]}),references:new ko.yv({fieldpath:"metadata.references",schema:{reference:new ko.D0({fieldpath:"reference"})},deserializedDefault:[]}),subjects:new ko.TV({fieldpath:"metadata.subjects",deserializedDefault:[],serializedDefault:[],labelField:"subject"}),funding:new ko.yv({fieldpath:"metadata.funding",schema:{award:new ko.qB({fieldpath:"award",deserializedDefault:{}}),funder:new ko.qB({fieldpath:"funder",deserializedDefault:{}})}}),version:new ko.D0({fieldpath:"metadata.version",deserializedDefault:""}),rights:new ko.MQ({fieldpath:"metadata.rights",deserializedDefault:[],serializedDefault:[],localeFields:["title","description"]}),custom_fields:new Oo.CustomField({fieldpath:"custom_fields",deserializedDefault:{},serializedDefault:{},vocabularyFields:this.customFieldVocabularies})}}},{key:"_removeEmptyValues",value:function(e){var t=this;if(po()(e))return e.map((function(e){return t._removeEmptyValues(e)})).filter((function(e){return fo()(e)||yo()(e)?e:!I()(e)}));if(Ea()(e)){var n=Ao()(e,(function(e){return t._removeEmptyValues(e)}));return Ro()(n,(function(e){return po()(e)||Ea()(e)?!I()(e):!vo()(e)}))}return yo()(e)||fo()(e)||e?e:null}},{key:"deserialize",value:function(e){var t=wo()(lo()(e),["access","expanded","metadata","id","links","files","media_files","is_published","versions","parent","status","pids","ui","custom_fields"]),n=t.pids||{},r=this._removeEmptyValues(t);for(var i in r=Mo(Mo({},r),I()(n)?{}:{pids:n}),this.depositRecordSchema)r=this.depositRecordSchema[i].deserialize(r,this.defaultLocale);return r}},{key:"deserializeErrors",value:function(e){var t,n={},r=Do(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;So()(n,i.field,i.messages.join(" "))}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"serialize",value:function(e){var t=wo()(lo()(e),["access","metadata","id","links","files","media_files","pids","parent","custom_fields"]),n=t.pids||{},r=this._removeEmptyValues(t);for(var i in this.depositRecordSchema)r=this.depositRecordSchema[i].serialize(r,this.defaultLocale);return r=Mo(Mo({},r=this._removeEmptyValues(r)),{pids:I()(n)?{}:n}),so()(r,{metadata:{},custom_fields:{}}),r}}])}(_o),No=function(){return(0,a.A)((function e(t,n){(0,i.A)(this,e),this.draftsService=t,this.filesService=n}),[{key:"drafts",get:function(){return this.draftsService}},{key:"files",get:function(){return this.filesService}}])}(),Lo=n(68238),zo=n(1265);const jo=(0,Lo.combineReducers)({deposit:ea,files:pn});var Bo=["record","preselectedCommunity","files","config","permissions"];function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ho=function(e){var t=lo()(e);return{links:e.links||{},entries:fe()(t,"entries",[]).map((function(e){var t=e.size>=0,n={name:e.key,size:e.size||0,checksum:e.checksum||"",links:e.links||{}};return Vo(t?{status:un.finished,progressPercentage:100}:{status:un.pending},n)})).reduce((function(e,t){return e[t.name]=Vo({},t),e}),{})}};function Wo(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Yo()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Yo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yo=function(){return!!e})()}var Qo=function(e){function t(){return(0,i.A)(this,t),Wo(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"onUploadAdded",value:function(e){this.dispatcher&&this.dispatcher({type:Nt,payload:{filename:e}})}},{key:"onUploadStarted",value:function(e,t){this.dispatcher&&this.dispatcher({type:Qt,payload:{filename:e,cancelUploadFn:t}})}},{key:"onUploadProgress",value:function(e,t){this.dispatcher&&this.dispatcher({type:Lt,payload:{filename:e,percent:t}})}},{key:"onUploadCompleted",value:function(e,t,n,r){this.dispatcher&&this.dispatcher({type:zt,payload:{filename:e,size:t,checksum:n,links:r}})}},{key:"onUploadCancelled",value:function(e){this.dispatcher&&this.dispatcher({type:Gt,payload:{filename:e}})}},{key:"onUploadFailed",value:function(e){this.dispatcher&&this.dispatcher({type:jt,payload:{filename:e}})}}])}(ro);function Go(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,Ko()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function Ko(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ko=function(){return!!e})()}var Xo=function(e){function t(e){var n;(0,i.A)(this,t),n=Go(this,t,[e]);var r=e.recordSerializer?e.recordSerializer:new qo(e.config.default_locale,e.config.custom_fields.vocabularies),a={headers:e.config.apiHeaders?e.config.apiHeaders:null},o=e.apiClient?e.apiClient:new Na(a,e.config.createUrl,r),l=e.fileApiClient?e.fileApiClient:new za(a),c=e.draftsService?e.draftsService:new Ja(o),s=e.filesService?e.filesService:new ao(l,e.config.fileUploadConcurrency),u=new No(c,s),d={config:e.config,record:r.deserialize(e.record),preselectedCommunity:e.preselectedCommunity,files:e.files,apiClient:o,fileApiClient:l,service:u,permissions:e.permissions,recordSerializer:r};n.store=function(e){var t=e.record,n=e.preselectedCommunity,r=e.files,i=e.config,a=e.permissions,o=(0,J.A)(e,Bo),l={deposit:{record:t,editorState:Zi(t,n||void 0),config:i,permissions:a,actionState:null,actionStateExtra:{}},files:Ho(r||{})},c=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Lo.compose;return(0,Lo.createStore)(jo,l,c((0,Lo.applyMiddleware)(zo.default.withExtraArgument(Vo({config:i},o)))))}(d);var p=new Qo(n.store.dispatch);return s.setProgressNotifier(p),n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.validate,r=e.validationSchema;return s.createElement(u.Provider,{store:this.store},s.createElement(ja.x,{i18n:g.M},s.createElement(Qa,{validate:n,validationSchema:r},t)))}}])}(s.Component);Xo.propTypes={config:p().object.isRequired,record:p().object.isRequired,preselectedCommunity:p().object,files:p().object,permissions:p().object,apiClient:p().instanceOf(qa),fileApiClient:p().instanceOf(La),draftsService:p().instanceOf(Xa),filesService:p().instanceOf(io),recordSerializer:p().instanceOf(_o),children:p().node,validate:p().func,validationSchema:p().object},Xo.defaultProps={preselectedCommunity:void 0,permissions:void 0,apiClient:void 0,fileApiClient:void 0,draftsService:void 0,filesService:void 0,recordSerializer:void 0,files:void 0,children:void 0,validate:void 0,validationSchema:void 0};var Jo=(0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)({},Ji.IN_REVIEW,{color:"warning",title:g.M.t("In review"),message:g.M.t("Community curators will review your upload. Once accepted, it will be published.")}),Ji.DECLINED,{color:"negative",title:g.M.t("Declined"),message:g.M.t("The request to submit this upload to the community was declined.")}),Ji.EXPIRED,{color:"expired",title:g.M.t("Expired"),message:g.M.t("The request to submit this upload to the community has expired.")}),Ji.PUBLISHED,{color:"positive",title:g.M.t("Published"),message:g.M.t("Your upload is published.")}),Ji.DRAFT_WITH_REVIEW,{color:"neutral",title:g.M.t("Draft"),message:g.M.t("Once your upload is complete, you can submit it for review to the community curators.")}),Ji.DRAFT,{color:"neutral",title:g.M.t("Draft"),message:g.M.t("Once your upload is complete, you can publish or submit it for review to the community curators.")}),Ji.NEW_VERSION_DRAFT,{color:"neutral",title:g.M.t("New version draft"),message:g.M.t("Once your upload is complete, you can publish it.")}),$o=function(e){var t=e.depositReview,n=e.depositStatus,r=Jo[n];if(!r)throw new Error("Status is undefined");var i=n===Ji.IN_REVIEW;return s.createElement(K.A,{verticalAlign:"middle"},s.createElement(K.A.Row,{centered:!0,className:"pt-5 pb-5 ".concat(r.color)},s.createElement(K.A.Column,{width:i?8:16,textAlign:i?"left":"center"},s.createElement("span",null,r.title),s.createElement(mn.A,{trigger:s.createElement(F.A,{className:"ml-10",name:"info circle"}),content:r.message})),i&&s.createElement(K.A.Column,{width:8,textAlign:"right"},s.createElement(E.A,{href:"/me/requests/".concat(t.id),target:"_blank",icon:"external alternate",content:g.M.t("View request"),size:"mini",className:"transparent",title:g.M.t("Opens in new tab")}))))};$o.propTypes={depositReview:p().bool,depositStatus:p().string.isRequired},$o.defaultProps={depositReview:void 0};var Zo=(0,u.connect)((function(e){return{depositStatus:e.deposit.record.status,depositReview:e.deposit.record.status!==Ji.DRAFT&&e.deposit.record.parent.review}}),null)($o),el=n(27089);function tl(e,t,n){return t=(0,l.A)(t),(0,o.A)(e,nl()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function nl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nl=function(){return!!e})()}var rl=function(e){function t(e){var n;return(0,i.A)(this,t),(n=tl(this,t,[e])).state={modalOpen:!1},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.changeSelectedCommunity,i=n.community,a=n.imagePlaceholderLink,o=n.showCommunitySelectionButton,l=n.disableCommunitySelectionButton,c=n.showCommunityHeader,u=n.record,d=this.state.modalOpen;return c&&s.createElement(el.A,{className:"page-subheader-outer compact ml-0-mobile mr-0-mobile",fluid:!0},s.createElement(el.A,{className:"page-subheader"},i?s.createElement(s.Fragment,null,s.createElement("div",{className:"page-subheader-element"},s.createElement(f.Image,{rounded:!0,className:"community-header-logo",src:(null===(e=i.links)||void 0===e?void 0:e.logo)||a,fallbackSrc:a})),s.createElement("div",{className:"page-subheader-element flex align-items-center"},i.metadata.title)):s.createElement("div",{className:"page-subheader-element"},g.M.t("Select the community where you want to submit your record.")),s.createElement("div",{className:"community-header-element flex align-items-center rel-ml-1"},o&&s.createElement(s.Fragment,null,s.createElement(Ui,{onCommunityChange:function(e){r(e),t.setState({modalOpen:!1})},onModalChange:function(e){return t.setState({modalOpen:e})},modalOpen:d,chosenCommunity:i,displaySelected:!0,record:u,trigger:s.createElement(E.A,{className:"community-header-button",disabled:l,onClick:function(){return t.setState({modalOpen:!0})},primary:!0,size:"mini",name:"setting",type:"button",content:i?g.M.t("Change"):g.M.t("Select a community")})}),i&&s.createElement(E.A,{basic:!0,size:"mini",labelPosition:"left",className:"community-header-button ml-5",onClick:function(){return r(null)},content:g.M.t("Remove"),icon:"close",disabled:l})))))}}])}(s.Component);rl.propTypes={imagePlaceholderLink:p().string.isRequired,community:p().object,disableCommunitySelectionButton:p().bool.isRequired,showCommunitySelectionButton:p().bool.isRequired,showCommunityHeader:p().bool.isRequired,changeSelectedCommunity:p().func.isRequired,record:p().object.isRequired},rl.defaultProps={community:void 0};var il=(0,u.connect)((function(e){return{community:e.deposit.editorState.selectedCommunity,disableCommunitySelectionButton:e.deposit.editorState.ui.disableCommunitySelectionButton,showCommunitySelectionButton:e.deposit.editorState.ui.showCommunitySelectionButton,showCommunityHeader:e.deposit.editorState.ui.showCommunityHeader}}),(function(e){return{changeSelectedCommunity:function(t){return e(rn(t))}}}))(rl);var al=function(e){var t=document.getElementsByName(e);return t.length>0&&t[0].hasAttribute("value")?JSON.parse(t[0].value):null}},80357:(e,t,n)=>{n.r(t),n.d(t,{CustomField:()=>S,Imprint:()=>q,Journal:()=>z,Meeting:()=>U,Thesis:()=>W});var r=n(80296),i=n(82284),a=n(23029),o=n(92901),l=n(56822),c=n(53954),s=n(85501),u=n(58156),d=n.n(u),p=n(63560),m=n.n(p),f=n(88055),h=n.n(f),v=n(56449),b=n.n(v),y=n(23805),g=n.n(y),A=n(8306);function E(e,t,n){return t=(0,c.A)(t),(0,l.A)(e,w()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function C(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function R(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var P=new WeakSet,S=function(e){function t(e){var n,r=e.fieldpath,i=e.deserializedDefault,o=void 0===i?null:i,l=e.serializedDefault,c=void 0===l?null:l,s=e.allowEmpty,u=void 0!==s&&s,d=e.vocabularyFields,p=void 0===d?[]:d;return(0,a.A)(this,t),C(n=E(this,t,[{fieldpath:r,deserializedDefault:o,serializedDefault:c,allowEmpty:u}]),P),n.vocabularyFields=p,n}return(0,s.A)(t,e),(0,o.A)(t,[{key:"recursiveMapping",value:function(e,t,n){var r=null;if(b()(e))r=e.map((function(e,r){return n(e,r,t)}));else if(g()(e)&&!t){for(var i in e)e[i]=this.recursiveMapping(e[i],t,n);r=e}else r=n(e,null,t);return r}},{key:"deserialize",value:function(e){var t=h()(e),n=d()(e,this.fieldpath,this.deserializedDefault);return R(P,this,k).call(this,t,n,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&null!==e&&void 0!==e&&e.id?e.id:(t&&"object"===(0,i.A)(e)&&null!==e&&(e.__key=t),e)})),t}},{key:"serialize",value:function(e){var t=h()(e),n=d()(e,this.fieldpath,this.serializedDefault);return R(P,this,k).call(this,t,n,(function(e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&"string"===typeof e?{id:e}:(delete e.__key,e)})),t}}])}(A.D0);function k(e,t,n){if(null!==t)for(var i=0,a=Object.entries(t);i<a.length;i++){var o=(0,r.A)(a[i],2),l=o[0],c=o[1],s=this.vocabularyFields.includes(l),u=this.recursiveMapping(c,s,n);e=m()(e,"custom_fields.".concat(l),u)}}var O=n(96540),D=n(81057),I=n(36713),x=n(1489),M=n(5556),F=n.n(M);function T(e,t,n){return t=(0,c.A)(t),(0,l.A)(e,_()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}var q=function(e){function t(){return(0,a.A)(this,t),T(this,t,arguments)}return(0,s.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.title,r=e.place,i=e.isbn,a=e.pages,o=e.label,l=e.icon;return O.createElement(O.Fragment,null,o&&O.createElement(O.Fragment,null,O.createElement(D.FieldLabel,{htmlFor:t,icon:l,label:o}),O.createElement(I.A,{fitted:!0})),O.createElement(x.A,{padded:!0},O.createElement(x.A.Column,{width:"12"},O.createElement(D.Input,{fieldPath:"".concat(t,".title"),label:n.label,placeholder:n.placeholder}),n.description&&O.createElement("label",{className:"helptext mb-0"},n.description)),O.createElement(x.A.Column,{width:"4"},O.createElement(D.Input,{fieldPath:"".concat(t,".isbn"),label:i.label,placeholder:i.placeholder}),i.description&&O.createElement("label",{className:"helptext mb-0"},i.description)),O.createElement(x.A.Column,{width:"6"},O.createElement(D.Input,{fieldPath:"".concat(t,".place"),label:r.label,placeholder:r.placeholder}),r.description&&O.createElement("label",{className:"helptext mb-0"},r.description)),O.createElement(x.A.Column,{width:"6"},O.createElement(D.Input,{fieldPath:"".concat(t,".pages"),label:a.label,placeholder:a.placeholder}),a.description&&O.createElement("label",{className:"helptext mb-0"},a.description))))}}])}(O.Component);function N(e,t,n){return t=(0,c.A)(t),(0,l.A)(e,L()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}q.propTypes={fieldPath:F().string.isRequired,title:F().object.isRequired,place:F().object.isRequired,isbn:F().object.isRequired,pages:F().object.isRequired,icon:F().string,label:F().string},q.defaultProps={icon:void 0,label:void 0};var z=function(e){function t(){return(0,a.A)(this,t),N(this,t,arguments)}return(0,s.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.title,r=e.volume,i=e.issue,a=e.pages,o=e.issn,l=e.icon,c=e.label;return O.createElement(O.Fragment,null,c&&O.createElement(O.Fragment,null,O.createElement(D.FieldLabel,{htmlFor:t,icon:l,label:c}),O.createElement(I.A,{fitted:!0})),O.createElement(x.A,{padded:!0},O.createElement(x.A.Column,{width:"12"},O.createElement(D.Input,{fieldPath:"".concat(t,".title"),label:n.label,placeholder:n.placeholder}),n.description&&O.createElement("label",{className:"helptext mb-0"},n.description)),O.createElement(x.A.Column,{width:"4"},O.createElement(D.Input,{fieldPath:"".concat(t,".issn"),label:o.label,placeholder:o.placeholder}),o.description&&O.createElement("label",{className:"helptext mb-0"},o.description)),O.createElement(x.A.Column,{width:"6"},O.createElement(D.Input,{fieldPath:"".concat(t,".volume"),label:r.label,placeholder:r.placeholder}),r.description&&O.createElement("label",{className:"helptext mb-0"},r.description)),O.createElement(x.A.Column,{width:"6"},O.createElement(D.Input,{fieldPath:"".concat(t,".issue"),label:i.label,placeholder:i.placeholder}),i.description&&O.createElement("label",{className:"helptext mb-0"},i.description)),O.createElement(x.A.Column,{width:"4"},O.createElement(D.Input,{fieldPath:"".concat(t,".pages"),label:a.label,placeholder:a.placeholder}),a.description&&O.createElement("label",{className:"helptext mb-0"},a.description))))}}])}(O.Component);function j(e,t,n){return t=(0,c.A)(t),(0,l.A)(e,B()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function B(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}z.propTypes={fieldPath:F().string.isRequired,title:F().object.isRequired,volume:F().object.isRequired,issue:F().object.isRequired,pages:F().object.isRequired,issn:F().object.isRequired,icon:F().string,label:F().string},z.defaultProps={icon:void 0,label:void 0};var U=function(e){function t(){return(0,a.A)(this,t),j(this,t,arguments)}return(0,s.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.title,r=e.acronym,i=e.dates,a=e.place,o=e.url,l=e.session,c=e.session_part,s=e.icon,u=e.label;return O.createElement(O.Fragment,null,u&&O.createElement(O.Fragment,null,O.createElement(D.FieldLabel,{htmlFor:t,icon:s,label:u}),O.createElement(I.A,{fitted:!0})),O.createElement(x.A,{padded:!0},O.createElement(x.A.Column,{width:"12"},O.createElement(D.Input,{fieldPath:"".concat(t,".title"),label:n.label,placeholder:n.placeholder}),n.description&&O.createElement("label",{className:"helptext mb-0"},n.description)),O.createElement(x.A.Column,{width:"4"},O.createElement(D.Input,{fieldPath:"".concat(t,".acronym"),label:r.label,placeholder:r.placeholder}),r.description&&O.createElement("label",{className:"helptext mb-0"},r.description)),O.createElement(x.A.Column,{width:"12"},O.createElement(D.Input,{fieldPath:"".concat(t,".place"),label:a.label,placeholder:a.placeholder}),a.description&&O.createElement("label",{className:"helptext mb-0"},a.description)),O.createElement(x.A.Column,{width:"4"},O.createElement(D.Input,{fieldPath:"".concat(t,".dates"),label:i.label,placeholder:i.placeholder}),i.description&&O.createElement("label",{className:"helptext mb-0"},i.description)),O.createElement(x.A.Column,{width:"12"},O.createElement(D.Input,{fieldPath:"".concat(t,".url"),label:o.label,placeholder:o.placeholder}),o.description&&O.createElement("label",{className:"helptext mb-0"},o.description)),O.createElement(x.A.Column,{width:"6"},O.createElement(D.Input,{fieldPath:"".concat(t,".session"),label:l.label,placeholder:l.placeholder}),l.description&&O.createElement("label",{className:"helptext mb-0"},l.description)),O.createElement(x.A.Column,{width:"6"},O.createElement(D.Input,{fieldPath:"".concat(t,".session_part"),label:c.label,placeholder:c.placeholder}),c.description&&O.createElement("label",{className:"helptext mb-0"},c.description))))}}])}(O.Component);function V(e,t,n){return t=(0,c.A)(t),(0,l.A)(e,H()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}U.propTypes={fieldPath:F().string.isRequired,title:F().object.isRequired,acronym:F().object.isRequired,session_part:F().object.isRequired,session:F().object.isRequired,url:F().object.isRequired,dates:F().object.isRequired,place:F().object.isRequired,icon:F().string,label:F().string},U.defaultProps={icon:void 0,label:void 0};var W=function(e){function t(){return(0,a.A)(this,t),V(this,t,arguments)}return(0,s.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,n=e.university,r=e.icon,i=e.label;return O.createElement(O.Fragment,null,i&&O.createElement(O.Fragment,null,O.createElement(D.FieldLabel,{htmlFor:t,icon:r,label:i}),O.createElement(I.A,{fitted:!0})),O.createElement(x.A,{padded:!0},O.createElement(x.A.Column,{width:"16"},O.createElement(D.Input,{fieldPath:t,label:n.label,placeholder:n.placeholder}),n.description&&O.createElement("label",{className:"helptext mb-0"},n.description))))}}])}(O.Component);W.propTypes={fieldPath:F().string.isRequired,university:F().object.isRequired,icon:F().string,label:F().string},W.defaultProps={icon:void 0,label:void 0}},8306:(e,t,n)=>{n.d(t,{TV:()=>q,D0:()=>d,qB:()=>O,MQ:()=>x,yv:()=>g,vE:()=>P});var r=n(58156),i=n.n(r),a=(n(2404),n(23029)),o=n(92901),l=n(63560),c=n.n(l),s=n(88055),u=n.n(s),d=function(){return(0,o.A)((function e(t){var n=t.fieldpath,r=t.deserializedDefault,i=void 0===r?null:r,o=t.serializedDefault,l=void 0===o?null:o,c=t.allowEmpty,s=void 0!==c&&c;(0,a.A)(this,e),this.fieldpath=n,this.deserializedDefault=i,this.serializedDefault=l,this.allowEmpty=s}),[{key:"deserialize",value:function(e){var t=i()(e,this.fieldpath,this.deserializedDefault);return null!==t?c()(u()(e),this.fieldpath,t):e}},{key:"serialize",value:function(e){var t=i()(e,this.fieldpath,this.serializedDefault);return null!==t?c()(u()(e),this.fieldpath,t):e}}])}();var p=n(56822),m=n(53954),f=n(85501),h=n(44383),v=n.n(h);function b(e,t,n){return t=(0,m.A)(t),(0,p.A)(e,y()?Reflect.construct(t,n||[],(0,m.A)(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var g=function(e){function t(e){var n,r=e.fieldpath,i=e.schema,o=e.deserializedDefault,l=void 0===o?[]:o,c=e.serializedDefault,s=void 0===c?[]:c;return(0,a.A)(this,t),(n=b(this,t,[{fieldpath:r,deserializedDefault:l,serializedDefault:s}])).schema=i,n.schemaKeys=Object.keys(n.schema),n}return(0,f.A)(t,e),(0,o.A)(t,[{key:"deserialize",value:function(e,t){var n=this,r=i()(e,this.fieldpath,this.deserializedDefault).map((function(e,r){var i=v()(e,n.schemaKeys);return n.schemaKeys.forEach((function(e){i=n.schema[e].deserialize(i,t)})),i.__key=r,i}));return c()(u()(e),this.fieldpath,r)}},{key:"serialize",value:function(e,t){var n=this,r=i()(e,this.fieldpath,this.serializedDefault).map((function(e){var r=v()(e,n.schemaKeys);return n.schemaKeys.forEach((function(e){r=n.schema[e].serialize(r,t)})),r}));return null!==r?c()(u()(e),this.fieldpath,r):r}}])}(d),A=n(64467);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t=(0,m.A)(t),(0,p.A)(e,R()?Reflect.construct(t,n||[],(0,m.A)(e).constructor):t.apply(e,n))}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}var P=function(e){function t(e){var n,r=e.fieldpath,i=e.deserializedDefault,o=void 0===i?null:i,l=e.serializedDefault,c=void 0===l?null:l,s=e.labelField,u=void 0===s?"name":s;return(0,a.A)(this,t),(n=C(this,t,[{fieldpath:r,deserializedDefault:o,serializedDefault:c}])).labelField=u,n}return(0,f.A)(t,e),(0,o.A)(t,[{key:"deserialize",value:function(e){var t=function(e){if(null!==e&&void 0!==e&&e.id)return e.id},n=i()(e,this.fieldpath,this.deserializedDefault),r=null;return null!==n&&(r=Array.isArray(n)?n.map(t):t(n)),c()(u()(e),this.fieldpath,r||n)}},{key:"serialize",value:function(e){var t=this,n=function(e){return"string"===typeof e?{id:e}:w(w({},e.id?{id:e.id}:{}),e[t.labelField]&&(0,A.A)({},t.labelField,e[t.labelField]))},r=i()(e,this.fieldpath,this.serializedDefault),a=null;return null!==r&&(a=Array.isArray(r)?r.map(n):n(r)),c()(u()(e),this.fieldpath,a||r)}}])}(d);function S(e,t,n){return t=(0,m.A)(t),(0,p.A)(e,k()?Reflect.construct(t,n||[],(0,m.A)(e).constructor):t.apply(e,n))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}var O=function(e){function t(e){var n=e.fieldpath,r=e.deserializedDefault,i=void 0===r?null:r,o=e.serializedDefault,l=void 0===o?null:o;return(0,a.A)(this,t),S(this,t,[{fieldpath:n,deserializedDefault:i,serializedDefault:l}])}return(0,f.A)(t,e),(0,o.A)(t,[{key:"deserialize",value:function(e,t){var n=function(e){var n=u()(e);if(null!==e&&void 0!==e&&e.title&&(n.title=e.title[t]),e.identifiers){["url"].forEach((function(t){var r=null;e.identifiers.forEach((function(e){e.scheme===t&&(r=e.identifier)})),r&&(n[t]=r)})),delete n.identifiers}return n},r=i()(e,this.fieldpath,this.deserializedDefault),a=null;return null!==r&&(a=Array.isArray(r)?r.map(n):n(r)),c()(u()(e),this.fieldpath,a||r)}},{key:"serialize",value:function(e,t){var n=function(e){if(e.id)return{id:e.id};var n=u()(e);return e.title&&(n.title=(0,A.A)({},t,e.title)),e.url&&(n.identifiers=[{identifier:e.url,scheme:"url"}],delete n.url),n},r=i()(e,this.fieldpath,this.serializedDefault),a=null;return null!==r&&(a=Array.isArray(r)?r.map(n):n(r)),c()(u()(e),this.fieldpath,a||r)}}])}(d);function D(e,t,n){return t=(0,m.A)(t),(0,p.A)(e,I()?Reflect.construct(t,n||[],(0,m.A)(e).constructor):t.apply(e,n))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}var x=function(e){function t(e){var n,r=e.fieldpath,i=e.deserializedDefault,o=void 0===i?null:i,l=e.serializedDefault,c=void 0===l?null:l,s=e.localeFields,u=void 0===s?[]:s;return(0,a.A)(this,t),(n=D(this,t,[{fieldpath:r,deserializedDefault:o,serializedDefault:c}])).localeFields=u,n}return(0,f.A)(t,e),(0,o.A)(t,[{key:"deserialize",value:function(e,t){var n=this,r=i()(e,this.fieldpath,this.deserializedDefault),a=function(e){if("id"in e)return"string"===typeof e.title?e:{id:e.id};var r=u()(e);return n.localeFields.forEach((function(n){e[n]&&(r[n]=e[n][t])})),r},o=null;return null!==r&&(o=Array.isArray(r)?r.map(a):a(r)),c()(u()(e),this.fieldpath,o||r)}},{key:"serialize",value:function(e,t){var n=this,r=i()(e,this.fieldpath,this.serializedDefault),a=null,o=function(e){var r=u()(e);return"id"in e?{id:e.id}:(n.localeFields.forEach((function(n){n in e&&(r[n]=(0,A.A)({},t,e[n]))})),r)};return null!==r&&(a=Array.isArray(r)?r.map(o):o(r)),c()(u()(e),this.fieldpath,a||r)}}])}(P);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,A.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t=(0,m.A)(t),(0,p.A)(e,_()?Reflect.construct(t,n||[],(0,m.A)(e).constructor):t.apply(e,n))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}var q=function(e){function t(){return(0,a.A)(this,t),T(this,t,arguments)}return(0,f.A)(t,e),(0,o.A)(t,[{key:"deserialize",value:function(e){var t=this,n=i()(e,this.fieldpath,this.deserializedDefault),r=function(e){return F(F({},e.id?{id:e.id}:{}),{},(0,A.A)({},t.labelField,e[t.labelField]))},a=null;return null!==n&&(a=Array.isArray(n)?n.map(r):r(n)),c()(u()(e),this.fieldpath,a||n)}}])}(P)},11990:(e,t,n)=>{n.d(t,{M:()=>u});var r=n(47127),i=n(17508);const a=JSON.parse('{"Copy to clipboard":"Copy to clipboard","Copied!":"Copied!","This set is not editable as it was created by the system.":"This set is not editable as it was created by the system.","This set is not deletable as it was created by the system.":"This set is not deletable as it was created by the system.","Links":"Links","Format":"Format","List records":"List records","Opens in new tab":"Opens in new tab","List identifiers":"List identifiers","Before deleting, make sure to alert all harvesters that this set will no longer be available.":"Before deleting, make sure to alert all harvesters that this set will no longer be available.","I have alerted all harvesters that this set will no longer be available.":"I have alerted all harvesters that this set will no longer be available.","Cancel":"Cancel","Delete":"Delete","Delete {{title}}":"Delete {{title}}","This will delete the set \'{{title}}\'.":"This will delete the set \'{{title}}\'."}'),o=JSON.parse('{"Copy to clipboard":"","Copied!":"","This set is not editable as it was created by the system.":"","This set is not deletable as it was created by the system.":"","Links":"","Format":"","List records":"","Opens in new tab":"","List identifiers":"","Before deleting, make sure to alert all harvesters that this set will no longer be available.":"","I have alerted all harvesters that this set will no longer be available.":"","Cancel":"","Delete":"","Delete {{title}}":"Delete {{title}}","This will delete the set \'{{title}}\'.":"This will delete the set \'{{title}}\'."}');var l={el:{translation:JSON.parse('{"Copy to clipboard":"","Copied!":"","This set is not editable as it was created by the system.":"","This set is not deletable as it was created by the system.":"","Links":"","Format":"","List records":"","Opens in new tab":"","List identifiers":"","Before deleting, make sure to alert all harvesters that this set will no longer be available.":"","I have alerted all harvesters that this set will no longer be available.":"","Cancel":"","Delete":"","Delete {{title}}":"Delete {{title}}","This will delete the set \'{{title}}\'.":"This will delete the set \'{{title}}\'."}')},en:{translation:a},de:{translation:o}},c=n(65414),s={fallbackLng:"en",returnEmptyString:!1,debug:!1,resources:l,keySeparator:!1,nsSeparator:!1,detection:{order:["htmlTag"],caches:[]},react:{transKeepBasicHtmlNodesFor:[]}},u=r.A.createInstance();u.use(i.A).use(c.r9).init(s)}}]);
//# sourceMappingURL=3532.4db1210389262a9569a8.js.map