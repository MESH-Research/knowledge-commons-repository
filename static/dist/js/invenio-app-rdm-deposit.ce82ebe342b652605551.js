(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[8434],{87101:(e,t,i)=>{"use strict";var a=i(96540),n=i(40961),r=i(93532),l=i(23029),o=i(92901),d=i(56822),s=i(53954),c=i(85501),m=i(64467),u=i(70742),p=i(58156),f=i.n(p),b=i(62193),h=i.n(b),v=i(81057),g=i(91751),E=i(27089),A=i(1489),P=i(16147),_=i(90447),y=i(83794),F=i(5556),I=i.n(F),R=i(53196);function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function j(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,m.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function C(e,t,i){return t=(0,s.A)(t),(0,d.A)(e,O()?Reflect.construct(t,i||[],(0,s.A)(e).constructor):t.apply(e,i))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}var w=function(e){function t(e){var i;(0,l.A)(this,t),i=C(this,t,[e]),(0,m.A)(i,"formFeedbackRef",(0,a.createRef)()),(0,m.A)(i,"sidebarRef",(0,a.createRef)()),i.config=e.config||{};var n=i.props,r=n.files,o=n.record;return i.vocabularies={metadata:j(j({},i.config.vocabularies),{},{creators:j(j({},i.config.vocabularies.creators),{},{type:[{text:"Person",value:"personal"},{text:"Organization",value:"organizational"}]}),contributors:j(j({},i.config.vocabularies.contributors),{},{type:[{text:"Person",value:"personal"},{text:"Organization",value:"organizational"}]}),identifiers:j({},i.config.vocabularies.identifiers)})},i.noFiles=!1,(!Array.isArray(r.entries)||!r.entries.length&&o.is_published)&&(i.noFiles=!0),i.hide_community_selection=i.config.hide_community_selection||!1,i}return(0,c.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.record,n=e.files,l=e.permissions,o=e.preselectedCommunity,d=e.filesLocked,s=this.config.custom_fields.ui;return a.createElement(r.k6,{config:this.config,record:t,preselectedCommunity:o,files:n,permissions:l},a.createElement(R.default,{id:"InvenioAppRdm.Deposit.FormFeedback.container",labels:this.config.custom_fields.error_labels,fieldPath:"message"},a.createElement(r.yY,{fieldPath:"message",labels:this.config.custom_fields.error_labels})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.CommunityHeader.container"},!this.hide_community_selection&&a.createElement(r.D,{imagePlaceholderLink:"/static/images/square-placeholder.png",record:t})),a.createElement(E.A,{id:"rdm-deposit-form",className:"rel-mt-1"},a.createElement(A.A,{className:"mt-25"},a.createElement(A.A.Column,{mobile:16,tablet:16,computer:11},a.createElement(R.default,{id:"InvenioAppRdm.Deposit.AccordionFieldFiles.container",record:t,config:this.config,noFiles:this.noFiles},a.createElement(v.AccordionField,{includesPaths:["files.enabled"],active:!0,label:u.M.t("Files")},this.noFiles&&t.is_published&&a.createElement("div",{className:"text-align-center pb-10"},a.createElement("em",null,u.M.t("The record has no files."))),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.FileUploader.container",record:t,config:this.config},a.createElement(r.l0,{isDraftRecord:!t.is_published,quota:this.config.quota,decimalSizeDisplay:this.config.decimal_size_display,showMetadataOnlyToggle:null===l||void 0===l?void 0:l.can_manage_files,filesLocked:d})))),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.AccordionFieldBasicInformation.container",config:this.config,record:t,vocabularies:this.vocabularies},a.createElement(v.AccordionField,{includesPaths:["metadata.resource_type","metadata.title","metadata.additional_titles","metadata.publication_date","metadata.creators","metadata.description","metadata.additional_descriptions","metadata.rights"],active:!0,label:u.M.t("Basic information")},a.createElement(R.default,{id:"InvenioAppRdm.Deposit.PIDField.container",config:this.config,record:t},a.createElement(a.Fragment,null,this.config.pids.map((function(e){return a.createElement(a.Fragment,{key:e.scheme},a.createElement(r.EM,{btnLabelDiscardPID:e.btn_label_discard_pid,btnLabelGetPID:e.btn_label_get_pid,canBeManaged:e.can_be_managed,canBeUnmanaged:e.can_be_unmanaged,fieldPath:"pids.".concat(e.scheme),fieldLabel:e.field_label,isEditingPublishedRecord:!0===t.is_published,managedHelpText:e.managed_help_text,pidLabel:e.pid_label,pidPlaceholder:e.pid_placeholder,pidType:e.scheme,unmanagedHelpText:e.unmanaged_help_text,required:!0}))})))),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.ResourceTypeField.container",vocabularies:this.vocabularies,fieldPath:"metadata.resource_type"},a.createElement(r.n,{options:this.vocabularies.metadata.resource_type,fieldPath:"metadata.resource_type",required:!0})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.TitlesField.container",vocabularies:this.vocabularies,fieldPath:"metadata.title",record:t},a.createElement(r.y5,{options:this.vocabularies.metadata.titles,fieldPath:"metadata.title",recordUI:t.ui,required:!0})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.PublicationDateField.container",fieldPath:"metadata.publication_date"},a.createElement(r.Hq,{required:!0,fieldPath:"metadata.publication_date"})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.CreatorsField.container",vocabularies:this.vocabularies,config:this.config,fieldPath:"metadata.creators"},a.createElement(r.Y4,{label:u.M.t("Creators"),labelIcon:"user",fieldPath:"metadata.creators",roleOptions:this.vocabularies.metadata.creators.role,schema:"creators",autocompleteNames:this.config.autocomplete_names,required:!0})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.DescriptionsField.container",record:t,vocabularies:this.vocabularies,fieldPath:"metadata.description"},a.createElement(r.q1,{fieldPath:"metadata.description",options:this.vocabularies.metadata.descriptions,recordUI:f()(t,"ui",null)})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.LicenseField.container",fieldPath:"metadata.rights"},a.createElement(r.g7,{fieldPath:"metadata.rights",searchConfig:{searchApi:{axios:{headers:{Accept:"application/vnd.inveniordm.v1+json"},url:"/api/vocabularies/licenses",withCredentials:!1}},initialQueryState:{filters:[["tags","recommended"]]}},serializeLicenses:function(e){return{title:e.title_l10n,description:e.description_l10n,id:e.id,link:e.props.url}}})))),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.AccordionFieldRecommendedInformation.container",vocabularies:this.vocabularies,config:this.config,record:t},a.createElement(v.AccordionField,{includesPaths:["metadata.contributors","metadata.subjects","metadata.languages","metadata.dates","metadata.version","metadata.publisher"],active:!0,label:u.M.t("Recommended information")},a.createElement(R.default,{id:"InvenioAppRdm.Deposit.ContributorsField.container",fieldPath:"metadata.contributors",vocabularies:this.vocabularies,config:this.config},a.createElement(r.Y4,{addButtonLabel:u.M.t("Add contributor"),label:u.M.t("Contributors"),labelIcon:"user plus",fieldPath:"metadata.contributors",roleOptions:this.vocabularies.metadata.contributors.role,schema:"contributors",autocompleteNames:this.config.autocomplete_names,modal:{addLabel:"Add contributor",editLabel:"Edit contributor"}})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.SubjectsField.container",vocabularies:this.vocabularies,fieldPath:"metadata.subjects",record:t},a.createElement(r.GC,{fieldPath:"metadata.subjects",initialOptions:f()(t,"ui.subjects",null),limitToOptions:this.vocabularies.metadata.subjects.limit_to})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.LanguagesField.container",fieldPath:"metadata.languages",record:t},a.createElement(r.Km,{fieldPath:"metadata.languages",initialOptions:f()(t,"ui.languages",[]).filter((function(e){return null!==e})),serializeSuggestions:function(e){return e.map((function(e){return{text:e.title_l10n,value:e.id,key:e.id}}))}})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.DateField.container",vocabularies:this.vocabularies,fieldPath:"metadata.dates"},a.createElement(r.Kp,{fieldPath:"metadata.dates",options:this.vocabularies.metadata.dates,showEmptyValue:!0})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.VersionField.container",fieldPath:"metadata.version"},a.createElement(r.Je,{fieldPath:"metadata.version"})),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.PublisherField.container",fieldPath:"metadata.publisher"},a.createElement(r.nH,{fieldPath:"metadata.publisher"})))),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.AccordionFieldFunding.container",ui:this.accordionStyle},a.createElement(v.AccordionField,{includesPaths:["metadata.funding"],active:!0,label:"Funding",ui:this.accordionStyle},a.createElement(R.default,{id:"InvenioAppRdm.Deposit.FundingField.container",fieldPath:"metadata.funding"},a.createElement(g.q,{fieldPath:"metadata.funding",searchConfig:{searchApi:{axios:{headers:{Accept:"application/vnd.inveniordm.v1+json"},url:"/api/awards",withCredentials:!1}},initialQueryState:{sortBy:"bestmatch",sortOrder:"asc",layout:"list",page:1,size:5}},label:"Awards",labelIcon:"money bill alternate outline",deserializeAward:function(e){var t;return j(j({title:e.title_l10n,number:e.number,funder:null!==(t=e.funder)&&void 0!==t?t:"",id:e.id},e.identifiers&&{identifiers:e.identifiers}),e.acronym&&{acronym:e.acronym})},deserializeFunder:function(e){return j(j(j(j({id:e.id,name:e.name},e.title_l10n&&{title:e.title_l10n}),e.pid&&{pid:e.pid}),e.country&&{country:e.country}),e.identifiers&&{identifiers:e.identifiers})},computeFundingContents:function(e){var t,i,a="";if(e.funder){var n,r,l,o,d,s,c=null!==(n=null!==(r=null!==(l=null===(o=e.funder)||void 0===o?void 0:o.name)&&void 0!==l?l:null===(d=e.funder)||void 0===d?void 0:d.title)&&void 0!==r?r:null===(s=e.funder)||void 0===s?void 0:s.id)&&void 0!==n?n:"";if(a="funder",t=c,i="",e.award){var m=e.award,u=m.acronym,p=m.title;a="award",i=c,t=u?"".concat(u," \u2014 ").concat(p):p}}return{headerContent:t,descriptionContent:i,awardOrFunder:a}}})))),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.AccordionFieldAlternateIdentifiers.container",vocabularies:this.vocabularies},a.createElement(v.AccordionField,{includesPaths:["metadata.identifiers"],active:!0,label:u.M.t("Alternate identifiers")},a.createElement(R.default,{id:"InvenioAppRdm.Deposit.IdentifiersField.container",vocabularies:this.vocabularies,fieldPath:"metadata.identifiers"},a.createElement(r.l4,{fieldPath:"metadata.identifiers",label:u.M.t("Alternate identifiers"),labelIcon:"barcode",schemeOptions:this.vocabularies.metadata.identifiers.scheme,showEmptyValue:!0})))),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.AccordionFieldRelatedWorks.container",vocabularies:this.vocabularies},a.createElement(v.AccordionField,{includesPaths:["metadata.related_identifiers"],active:!0,label:u.M.t("Related works")},a.createElement(R.default,{id:"InvenioAppRdm.Deposit.RelatedWorksField.container",fieldPath:"metadata.related_identifiers",vocabularies:this.vocabularies},a.createElement(r.CP,{fieldPath:"metadata.related_identifiers",options:this.vocabularies.metadata.identifiers,showEmptyValue:!0})))),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.AccordionFieldReferences.container",vocabularies:this.vocabularies},a.createElement(v.AccordionField,{includesPaths:["metadata.references"],active:!0,label:u.M.t("References")},a.createElement(R.default,{id:"InvenioAppRdm.Deposit.ReferencesField.container",fieldPath:"metadata.references",vocabularies:this.vocabularies},a.createElement(r.bT,{fieldPath:"metadata.references",showEmptyValue:!0})))),!h()(s)&&a.createElement(R.default,{id:"InvenioAppRdm.Deposit.CustomFields.container",customFieldsUI:s},a.createElement(v.CustomFields,{config:s,record:t,templateLoaders:[function(e){return i(34222)("./".concat(e,".js"))},function(e){return Promise.resolve().then(i.bind(i,80357))},function(e){return Promise.resolve().then(i.bind(i,81057))}],fieldPathPrefix:"custom_fields"}))),a.createElement(P.o,{innerRef:this.sidebarRef},a.createElement(A.A.Column,{mobile:16,tablet:16,computer:5,className:"deposit-sidebar"},a.createElement(_.A,{context:this.sidebarRef,offset:20},a.createElement(R.default,{id:"InvenioAppRdm.Deposit.CardDepositStatusBox.container"},a.createElement(y.A,null,a.createElement(y.A.Content,null,a.createElement(r.KI,null)),a.createElement(y.A.Content,null,a.createElement(A.A,{relaxed:!0},a.createElement(A.A.Column,{computer:8,mobile:16,className:"pb-0 left-btn-col"},a.createElement(r.fB,{fluid:!0})),a.createElement(A.A.Column,{computer:8,mobile:16,className:"pb-0 right-btn-col"},a.createElement(r.PI,{fluid:!0})),a.createElement(A.A.Column,{width:16,className:"pt-10"},a.createElement(r.IZ,{fluid:!0})))))),a.createElement(R.default,{id:"InvenioAppRdm.Deposit.AccessRightField.container",fieldPath:"access"},a.createElement(r.Re,{label:u.M.t("Visibility"),labelIcon:"shield",fieldPath:"access",showMetadataAccess:null===l||void 0===l?void 0:l.can_manage_record_access})),(null===l||void 0===l?void 0:l.can_delete_draft)&&a.createElement(R.default,{id:"InvenioAppRdm.Deposit.CardDeleteButton.container",record:t},a.createElement(y.A,null,a.createElement(y.A.Content,null,a.createElement(r.et,{fluid:!0}))))))))))}}])}(a.Component);w.propTypes={config:I().object.isRequired,record:I().object.isRequired,preselectedCommunity:I().object,files:I().object,permissions:I().object,filesLocked:I().bool},w.defaultProps={preselectedCommunity:void 0,permissions:null,files:null,filesLocked:!1};var k=R.overrideStore.getAll();n.render(a.createElement(R.OverridableContext.Provider,{value:k},a.createElement(w,{record:(0,r.n2)("deposits-record"),preselectedCommunity:(0,r.n2)("deposits-draft-community"),files:(0,r.n2)("deposits-record-files"),config:(0,r.n2)("deposits-config"),permissions:(0,r.n2)("deposits-record-permissions"),filesLocked:(0,r.n2)("deposits-record-locked-files")})),document.getElementById("deposit-form"))},34222:(e,t,i)=>{var a={"./AIUsageField.js":[57149,5373,6267,9777,5941,7501,4218,742,6528,3532,1751,226,5848],"./BookSeriesField.js":[15668,5668],"./ImprintISBNField.js":[75157,5157],"./ImprintPagesField.js":[9005,9005],"./ImprintPlaceField.js":[72188,2188],"./ImprintTitleField.js":[50519,519],"./JournalIssueField.js":[38078,8078],"./Notes.js":[36845,6845],"./UserDefinedTags.js":[34809,742,4809],"./Volumes.js":[74059,4059]};function n(e){if(!i.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return Promise.all(t.slice(1).map(i.e)).then((()=>i(n)))}n.keys=()=>Object.keys(a),n.id=34222,e.exports=n}},e=>{e.O(0,[402,1057,7655,5373,6267,9777,5941,7501,4218,9841,8102,742,6528,3532,1751],(()=>{return t=87101,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=invenio-app-rdm-deposit.ce82ebe342b652605551.js.map