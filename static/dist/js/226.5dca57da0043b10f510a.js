(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[226],{75898:(e,t,n)=>{"use strict";n.d(t,{Y:()=>te,G:()=>ne});var i=n(64467),o=n(80296),r=n(96540),a=(n(58156),n(62193),n(70742)),l=n(93532),s=n(27089),c=n(1489),u=n(1151),d=n(3487),m=n(80124),p=n(56991),f=n(48423),h=n(76217),b=n(5556),g=n.n(b),v=n(53196),A=n(64383),y=n(30226),E=n(40451),C=n(58168),F=n(80045),S=n(80501),I=n(2685),w=function(e){var t=e.children,n=e.icon,i=e.sectionName,o=e.label,a=e.show_heading,l=void 0!==a&&a;return r.createElement(I.A,{id:"InvenioAppRdm.Deposit.".concat(i,".container"),as:"fieldset",className:"invenio-fieldset ".concat(i)},l&&r.createElement("legend",{className:"field-label-class invenio-field-label"},!!n&&r.createElement(h.A,{name:n})," ",o),t.length>1&&!r.Children.toArray(t).some((function(e){return"FormRow"===e.props.component}))?r.createElement(S.A.Group,null,t):t)},P=["subsections","classnames"],_=["section","component"],R=["section","component","wrapped","index","commonFieldProps"];function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t=e.section,n=e.component,i=e.wrapped,o=e.index,a=e.commonFieldProps,l=(0,F.A)(e,R),s=a.fieldComponents[n][0];return i?r.createElement(w,{sectionName:t,icon:l.icon,label:l.label,show_heading:l.show_heading},r.createElement(s,(0,C.A)({key:o},a,l))):r.createElement(s,(0,C.A)({key:o},a,l))},N=(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({AbstractComponent:[y.uj,["metadata.description"]],AccessComponent:[l.Re,["access"]],AccessRightsComponent:[y.zO,["access"]],AdditionalDatesComponent:[y.S8,["metadata.dates"]],AdditionalDescriptionComponent:[y.Fi,["metadata.additional_descriptions"]],AdditionalTitlesComponent:[y.iN,["metadata.additional_titles"]],AlternateIdentifiersComponent:[y.eh,["metadata.identifiers"]],BookTitleComponent:[y.PD,["custom_fields.imprint:imprint.title"]],CommunitiesComponent:[y.vh,[]],CodeDevelopmentStatusComponent:[y.mN,["custom_fields.code:developmentStatus"]],CodeRepositoryComponent:[y.PY,["custom_fields.code:codeRepository"]],CodeProgrammingLanguageComponent:[y.cM,["custom_fields.code:programmingLanguage"]],CodeOperatingSystemComponent:[y.j3,["custom_fields.code:operatingSystem"]],CodeRuntimePlatformComponent:[y._b,["custom_fields.code:runtimePlatform"]],ContributorsComponent:[y.Wt,["metadata.contributors"]],CreatorsComponent:[y.$Y,["metadata.creators"]],DateComponent:[y.gz,["metadata.publication_date"]],DoiComponent:[y.IE,["pids.doi"]],FundingComponent:[y.Dj,["metadata.funding"]],ISBNComponent:[y.uO,["custom_fields.imprint:imprint.isbn"]],JournalISSNComponent:[y.gx,["custom_fields.journal:journal.issn"]],JournalIssueComponent:[y.Iu,["custom_fields.journal:journal.issue"]],JournalTitleComponent:[y.nh,["custom_fields.journal:journal.title"]],JournalVolumeComponent:[y.ZK,["custom_fields.journal:journal.volume"]],FilesUploadComponent:[y.M9,["files"]],LanguagesComponent:[y.td,["metadata.languages"]],LicensesComponent:[y.m_,["metadata.rights"]],MetadataOnlyComponent:[y.JO,["access.status"]],MeetingAcronymComponent:[y.ci,["custom_fields.meeting:meeting.acronym"]],MeetingDatesComponent:[y.aP,["custom_fields.meeting:meeting.dates"]],MeetingPlaceComponent:[y._A,["custom_fields.meeting:meeting.place"]],MeetingSessionComponent:[y.ZU,["custom_fields.meeting:meeting.session"]],MeetingSessionPartComponent:[y.gG,["custom_fields.meeting:meeting.session_part"]],MeetingTitleComponent:[y.D2,["custom_fields.meeting:meeting.title"]],MeetingURLComponent:[y.S9,["custom_fields.meeting:meeting.url"]],PublisherComponent:[y.Kh,["metadata.publisher"]],PublicationLocationComponent:[y.XX,["custom_fields.imprint:imprint.place"]],RelatedWorksComponent:[y.Px,["metadata.related_identifiers"]],ResourceTypeComponent:[y.sj,["metadata.resource_type"]],SectionPagesComponent:[y.zu,["custom_fields.journal:journal.pages"]],SizesComponent:[y.q8,["metadata.sizes"]],SubjectsComponent:[y.TY,["metadata.subjects"]],SubtitleComponent:[y.KS,["metadata.additional_titles"]],TitleComponent:[y.WI,["metadata.title"]],TotalPagesComponent:[y.Sp,["custom_fields.imprint:imprint.pages"]],VersionComponent:[y.G5,["metadata.version"]],CombinedDatesComponent:[E.g4,["metadata.publication_date","metadata.dates"]],DeleteComponent:[y.b3,[]],FormRow:[function(e){var t=e.subsections,n=e.classnames,i=(0,F.A)(e,P);return console.log("FormRow props",i),console.log("FormRow subsections",t),r.createElement(S.A.Group,{className:n||null},t.map((function(e,t){var n=e.section,o=e.component,a=(0,F.A)(e,_),l=i.fieldComponents[o][0];return r.createElement(l,(0,C.A)({key:t},O(O({section:n,component:o,index:t},i),a)))})))},[]]},"ISBNComponent",[y.uO,["custom_fields.imprint:imprint.isbn"]]),"SectionPagesComponent",[y.zu,["custom_fields.journal:journal.pages"]]),"OrganizationDetailsComponent",[E.Nf,["custom_fields.imprint:imprint.place"]]),"PublicationDetailsComponent",[E.Wm,["custom_fields.imprint:imprint.isbn","metadata.version","metadata.publisher","custom_fields.imprint:imprint.place"]]),"SubmissionComponent",[y.Cq,[]]),"SubmitActionsComponent",[E.zO,["access"]]),"ThesisDetailsComponent",[E.K2,["custom_fields.thesis:university"]]),"TypeTitleComponent",[E.Ur,["metadata.title","metadata.resource_type"]]),U=n(54033);U&&Object.assign(N,U.componentsMap);var D=n(10467),j=n(54756),k=n.n(j),x=n(17684),q=n(79551),L=n(8909),B=(n(2543),["errors","initialErrors","initialTouched","initialValues","isValid","setFieldValue","setFieldTouched","setTouched","setValues","touched","validateField","validateForm","values"]),V=["section","component","wrapped","subsections"],Y=["component"];function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(e){var t=e.confirmModalRef,n=e.focusFirstElement,i=e.handleStorageData,l=e.isDraft,s=(e.isVersionDraft,e.setRecoveryAsked),c=(0,r.useState)(!0),u=(0,o.A)(c,2),m=u[0],p=u[1],b=(0,r.useRef)(null);return(0,r.useEffect)((function(){window.setTimeout((function(){b.current.focus()}),20)}),[]),r.createElement(f.A,{onClose:function(){return p(!1)},onOpen:function(){return p(!0)},open:m},r.createElement(f.A.Header,null,r.createElement(h.A,{name:"redo"})," ",a.M.t("Recover unsaved information?")),r.createElement(f.A.Content,null,r.createElement(f.A.Description,null,r.createElement("p",null,a.M.t("This form was closed with unsaved information. Do you want to recover it and continue with the same work?")))),r.createElement(f.A.Actions,null,r.createElement(d.A,{content:l?a.M.t("No, start a new work"):a.M.t("No, start from the saved version"),onClick:function(){p(!1),i(!1),n(),s(!0)},ref:b}),r.createElement(d.A,{content:l?a.M.t("Yes, recover the unsaved draft"):a.M.t("Yes, recover the unsaved changes"),labelPosition:"right",icon:"checkmark",onClick:function(){p(!1),i(!0),n(),s(!0)},positive:!0,ref:t})))},H=function(e){var t=e.commonFieldProps,n=e.currentFormPage,i=e.focusFirstElement,a=e.id,l=e.pageNums,s=e.recoveryAsked,c=e.setRecoveryAsked,u=e.storageDataPresent,m=e.setStorageDataPresent,p=e.subsections,f=e.handleSettingFieldTouched,b=(0,x.useFormikContext)(),g=b.errors,v=b.initialErrors,y=b.initialTouched,E=b.initialValues,S=b.isValid,I=(b.setFieldValue,b.setFieldTouched),P=(b.setTouched,b.setValues),_=b.touched,R=(b.validateField,b.validateForm,b.values),M=((0,F.A)(b,B),(0,r.useContext)(te)),O=(M.currentValues,M.handleValuesChange),N=M.currentErrors,U=M.currentTouched,j=M.handleErrorsChange,z=M.handleFormPageChange,H=l.indexOf(n),J=H+1,K=H-1,X=J<l.length?l[J]:null,$=K>=0?l[K]:null,Z=(0,r.useRef)(null),Q=(0,r.useRef)(null),ee=function(e){var t=(0,r.useState)(!1),n=(0,o.A)(t,2),i=n[0],a=n[1],l=(0,r.useMemo)((function(){return new IntersectionObserver((function(e){var t=(0,o.A)(e,1)[0];return a(t.isIntersecting)}))}),[]);return(0,r.useEffect)((function(){return l.observe(e.current),function(){l.disconnect()}}),[e,l]),i}(Z),ne=(0,r.useState)(null),ie=(0,o.A)(ne,2),oe=ie[0],re=ie[1];(0,r.useEffect)((function(){O(R),s&&!(0,A.M$)(E,R,["ui"])&&window.localStorage.setItem("rdmDepositFormValues.".concat(t.currentUserprofile.id,".").concat(R.id),JSON.stringify(R))}),[R]),(0,r.useEffect)((function(){N!==g&&j(g,_,v,y,S)}),[]),(0,r.useEffect)((function(){var e=t.currentUserprofile.id,n="rdmDepositFormValues.".concat(e,".").concat(null===E||void 0===E?void 0:E.id),i=window.localStorage.getItem(n),o=JSON.parse(i);s||!o||(0,A.M$)(o,R,["ui"])?c(!0):(re(o),m(!0))}),[]);(0,r.useEffect)((function(){f(I)}),[]),(0,r.useEffect)((function(){v&&j(g,_,v,y,S)}),[]),(0,r.useEffect)((function(){console.log("errors or touched changed errors",g),console.log("errors or touched changed touched",_),N===g&&U===_||j(g,_,v,y,S)}),[g,_]);var ae=function(e,t){var n=t.value;z(e,{value:n})};return r.createElement(q.Q,{backend:L.t2},r.createElement("div",{className:"formPageWrapper",id:a},p.map((function(e,n){var i=e.section,o=e.component,a=e.wrapped,l=e.subsections,s=(0,F.A)(e,V);return"SectionWrapper"===o?r.createElement(w,(0,C.A)({sectionName:i,key:i},s),l.map((function(e,n){var o=e.component,l=(0,F.A)(e,Y);return r.createElement(T,(0,C.A)({key:n},G({section:i,component:o,wrapped:a,index:n,commonFieldProps:t},l)))}))):r.createElement(T,G({section:i,component:o,wrapped:a,index:n,commonFieldProps:t},s))})),r.createElement("div",{id:"sticky-footer-observation-target",ref:Z}),r.createElement("div",{className:"ui container ".concat(ee?"sticky-footer-static":"sticky-footer-fixed")},!!$&&r.createElement(d.A,{type:"button",onClick:ae,value:$,icon:!0,labelPosition:"left"},r.createElement(h.A,{name:"left arrow"}),"Back"),!!X&&r.createElement(d.A,{primary:!0,type:"button",onClick:ae,value:X,icon:!0,labelPosition:"right"},r.createElement(h.A,{name:"right arrow"}),"Continue"))),!s&&u&&r.createElement(W,{isDraft:"draft"===R.status,isVersionDraft:"new_version_draft"===R.status,confirmModalRef:Q,focusFirstElement:i,handleStorageData:function(e){if(e){var n=function(){var e=(0,D.A)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(oe,!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n(),re(null)}window.localStorage.removeItem("rdmDepositFormValues.".concat(t.currentUserprofile.id,".").concat(R.id))},setRecoveryAsked:c}))};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw r}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Z=n(33147),Q=null!==Z&&void 0!==Z&&Z.validationSchema?null===Z||void 0===Z?void 0:Z.validationSchema:null,ee=null!==Z&&void 0!==Z&&Z.validate?null===Z||void 0===Z?void 0:Z.validate:null,te=(0,r.createContext)(),ne=function(e){var t=e.commonFields,n=e.config,i=e.currentUserprofile,b=e.defaultFieldValues,g=e.defaultResourceType,y=e.descriptionModifications,E=e.extraRequiredFields,C=e.files,F=e.fieldsByType,S=e.helpTextModifications,I=e.iconModifications,w=e.labelModifications,P=e.record,_=e.permissions,R=e.pidsConfigOverrides,M=e.placeholderModifications,O=e.preselectedCommunity,T=e.priorityFieldValues,U=t[0].subsections,D=U.map((function(e){return e.section})),j=(0,r.useState)(U[0].section),k=(0,o.A)(j,2),x=k[0],q=k[1],L=(0,r.useState)(null),B=(0,o.A)(L,2),V=B[0],Y=B[1],z=(0,r.useState)(!1),G=(0,o.A)(z,2),W=G[0],J=G[1],$=(0,r.useState)({}),Z=(0,o.A)($,2),ne=Z[0],ie=Z[1],oe=(0,r.useState)({}),re=(0,o.A)(oe,2),ae=re[0],le=re[1],se=(0,r.useState)({}),ce=(0,o.A)(se,2),ue=ce[0],de=ce[1],me=(0,r.useState)({}),pe=(0,o.A)(me,2),fe=pe[0],he=pe[1],be=(0,r.useState)({}),ge=(0,o.A)(be,2),ve=ge[0],Ae=ge[1],ye=(0,r.useState)({}),Ee=(0,o.A)(ye,2),Ce=Ee[0],Fe=Ee[1],Se=(0,r.useState)(g),Ie=(0,o.A)(Se,2),we=Ie[0],Pe=Ie[1],_e=(0,r.useState)(F[g]),Re=(0,o.A)(_e,2),Me=Re[0],Oe=Re[1],Te=(0,r.useState)(),Ne=(0,o.A)(Te,2),Ue=Ne[0],De=Ne[1],je={labelMods:w[we],iconMods:I[we],helpTextMods:S[we],placeholderMods:M[we],descriptionMods:y[we],defaultFieldValues:b[we],priorityFieldValues:T[we],extraRequiredFields:E[we]},ke=n.custom_fields.ui,xe=(0,r.useState)({}),qe=(0,o.A)(xe,2),Le=qe[0],Be=qe[1];console.log("RDMDepositForm values",ne);var Ve=(0,r.useState)(!1),Ye=(0,o.A)(Ve,2),ze=Ye[0],Ge=Ye[1],We=(0,r.useState)(!1),He=(0,o.A)(We,2),Je=He[0],Ke=He[1],Xe=(0,r.useRef)();(0,r.useEffect)((function(){function e(e){e.target.scrollIntoView({block:"center",behavior:"smooth"})}var t=document.querySelectorAll("#rdm-deposit-form input, #rdm-deposit-form button, #rdm-deposit-form select");t.forEach((function(t){t.addEventListener("focus",e)}));var n=document.querySelectorAll("#rdm-deposit-form textarea");return n.forEach((function(t){t.addEventListener("focus",e)})),function(){t.forEach((function(t){t.removeEventListener("focus",e)})),n.forEach((function(t){t.removeEventListener("focus",e)}))}}),[x]);var $e=function(e){void 0===e&&(e=x);var t=new URLSearchParams(window.location.search);t.has("depositFormPage")?!t.depositFormPage!==e&&t.set("depositFormPage",e):t.append("depositFormPage",e);var n=window.location.origin,i=window.location.pathname,o=t.toString(),r="".concat(n).concat(i,"?").concat(o);window.history.pushState("fake-route",document.title,r)},Ze=function(){var e=new URLSearchParams(window.location.search).get("depositFormPage");return e&&D.includes(e)?q(e):e="1",e};(0,r.useEffect)((function(){var e=Ze();return $e(e),window.addEventListener("popstate",Ze),function(){window.removeEventListener("popstate",Ze),"fake-route"===window.history.state&&window.history.back()}}),[]),(0,r.useEffect)((function(){!function(e,t,n){var i,o=(0,A.jj)(e),r=(0,A.jj)(t),a=(0,A.jj)(n),l={},s={},c=X(U);try{for(c.s();!(i=c.n()).done;){var u,d,m=i.value,p=null===(u=Le[m.section])||void 0===u?void 0:u.filter((function(e){return o.includes(e)})),f=null===p||void 0===p?void 0:p.filter((function(e){return r.includes(e)||(0,A.$u)(Ce,e)})),h=null===(d=Le[m.section])||void 0===d?void 0:d.filter((function(e){return a.includes(e)}));(null===p||void 0===p?void 0:p.length)>0&&(l[m.section]=p),(null===f||void 0===f?void 0:f.length)>0?s[m.section]=f:(null===h||void 0===h?void 0:h.length)>0&&(null===p||void 0===p?void 0:p.length)>0&&(s[m.section]=h)}}catch(b){c.e(b)}finally{c.f()}he(l),Ae(s)}(ae,Ce,ue)}),[ae,Ce,ue]);var Qe={metadata:K(K({},n.vocabularies),{},{creators:K(K({},n.vocabularies.creators),{},{type:[{text:"Person",value:"personal"},{text:"Organization",value:"organizational"}]}),contributors:K(K({},n.vocabularies.contributors),{},{type:[{text:"Person",value:"personal"},{text:"Organization",value:"organizational"}]}),identifiers:K({},n.vocabularies.identifiers)})},et=!1;(!Array.isArray(C.entries)||!C.entries.length&&P.is_published)&&(et=!0);var tt=function(){setTimeout((function(){var e="page-6"===x?1:0,t="InvenioAppRdm\\.Deposit\\.FormPage\\.".concat(x),n=document.querySelectorAll("#".concat(t," button, #").concat(t," input, #").concat(t," .selection.dropdown input"))[e];null===n||void 0===n||n.focus(),console.log("scrolling: focusing on",n)}),100)};(0,r.useLayoutEffect)((function(){tt()}),[x]);var nt=function(e,t){var n,i,o=t.value,r=X(Le[x]);try{for(r.s();!(i=r.n()).done;){var a=i.value;Ue(a)}}catch(l){r.e(l)}finally{r.f()}(null===(n=fe[x])||void 0===n?void 0:n.length)>0&&!W?(J(!0),setTimeout((function(){Xe.current.focus()}),20),Y(o)):(q(o),$e(o))};(0,r.useEffect)((function(){var e,t={},n=X(U);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=Me;if(o&&o[i.section]&&o[i.section][0].same_as){var r=Me[i.section][0].same_as;o=F[r],Oe(o)}var a=(o&&o[i.section]?(0,A.lq)({subsections:o[i.section]}):(0,A.lq)(i)).reduce((function(e,t){var n=t.component;return e=e.concat(N[n][1])}),[]);t[i.section]=a}}catch(l){n.e(l)}finally{n.f()}Be(t)}),[we]);null!==R&&void 0!==R&&R.doi&&Object.assign(n.pids.filter((function(e){return"doi"===e.scheme}))[0],R.doi);var it=function(e){De((function(){return e}))},ot=K({config:n,currentUserprofile:i,fieldComponents:N,noFiles:et,record:P,vocabularies:Qe,permissions:_,customFieldsUI:ke,currentResourceType:we},je);return r.createElement(te.Provider,{value:{currentValues:ne,handleValuesChange:function(e){ie(e),Pe(e.metadata.resource_type),Oe(F[e.metadata.resource_type])},currentErrors:ae,currentTouched:Ce,handleErrorsChange:function(e,t,n){console.log("handleErrorsChange errors",e),console.log("handleErrorsChange touched",t),console.log("handleErrorsChange fields",Me),e!={}&&(le(e),Fe(t)),n!={}&&de(n)},handleFormPageChange:nt}},r.createElement(l.k6,{config:n,record:P,preselectedCommunity:O,files:C,permissions:_,validate:ee,validationSchema:Q},r.createElement(v.default,{id:"InvenioAppRdm.Deposit.FormFeedback.container",labels:n.custom_fields.error_labels,fieldPath:"message"},r.createElement(l.yY,{fieldPath:"message",labels:n.custom_fields.error_labels})),r.createElement(s.A,{text:!0,id:"rdm-deposit-form",className:"rel-mt-1"},r.createElement(c.A,{className:"mt-25"},r.createElement(c.A.Column,{mobile:16,tablet:16,computer:16},r.createElement("h2",null,a.M.t("".concat(null!==P.id?"Updating ":"New ","\n                ").concat("draft"===P.status?"Draft ":"Published ","Deposit"))),r.createElement(u.A.Group,{widths:U.length,className:"upload-form-pager",fluid:!0,size:"small"},U.map((function(e,t){var n=e.section,i=e.label;return r.createElement(u.A,{key:t,as:d.A,active:x===n,link:!0,onClick:nt,value:n,formNoValidate:!0,className:"ui button upload-form-stepper-step ".concat(n,"\n                     ").concat(ve[n]?"has-error":""),type:"button"},r.createElement(u.A.Content,null,r.createElement(u.A.Title,null,a.M.t(i))))}))),r.createElement(m.A.Group,{animation:"fade",duration:{show:1e3,hide:20}},U.map((function(e,t){var n=e.section,o=e.subsections;return Me&&Me[n]&&(o=Me[n])[0].same_as&&(o=F[o[0].same_as][n]),x===n&&r.createElement("div",{key:t},r.createElement(H,{currentFormPage:n,currentUserprofile:i,commonFieldProps:ot,focusFirstElement:tt,id:"InvenioAppRdm.Deposit.FormPage.".concat(n),pageFields:Le[n],pageNums:U.map((function(e){return e.section})),recoveryAsked:ze,setRecoveryAsked:Ge,storageDataPresent:Je,setStorageDataPresent:Ke,subsections:o,handleSettingFieldTouched:it}))}))),r.createElement(p.A,{icon:"question circle outline",id:"confirm-page-change",className:"confirm-page-change",open:W,header:a.M.t("Hmmm..."),content:r.createElement(f.A.Content,{image:!0},r.createElement(h.A,{name:"question circle outline",size:"huge"}),r.createElement(f.A.Description,null,a.M.t("There are problems with the information you've entered. Do you want to fix them before moving on?"))),confirmButton:r.createElement("button",{className:"ui button"},a.M.t("Continue anyway")),cancelButton:r.createElement("button",{className:"ui button positive",ref:Xe},a.M.t("Fix the problems")),onCancel:function(){J(!1),tt()},onConfirm:function(){J(!1),nt(null,{value:V})}}))))))};ne.propTypes={config:g().object.isRequired,record:g().object.isRequired,preselectedCommunity:g().object,files:g().object,permissions:g().object},ne.defaultProps={preselectedCommunity:void 0,permissions:null,files:null}},61537:(e,t,n)=>{"use strict";n.d(t,{_:()=>f,d:()=>h});var i=n(58168),o=n(64467),r=n(80296),a=n(80045),l=n(96540),s=(n(58156),n(62193),n(70742),n(81057)),c=n(53196),u=n(52568),d=["sectionName","fieldName","idString","customFieldsUI"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){var t=e.sectionName,o=e.fieldName,c=e.idString,m=e.customFieldsUI,f=(0,a.A)(e,d),h=(0,l.useState)(),b=(0,r.A)(h,2),g=b[0],v=b[1],A=new Array(m.find((function(e){return e.section===t}))),y=A[0].fields.find((function(e){return e.field===o}));console.log("chosenFieldConfig",y),y.props=p(p({},y.props),f);var E=[function(e){return n(34222)("./".concat(e,".js"))},function(e){return n(914)("./".concat(e,".jsx"))},function(){return Promise.resolve().then(n.bind(n,80357))},function(){return Promise.resolve().then(n.bind(n,66614))},function(){return Promise.resolve().then(n.bind(n,81057))}],C="custom_fields";return(0,l.useEffect)((function(){(0,s.loadWidgetsFromConfig)({templateLoaders:E,fieldPathPrefix:C,fields:new Array(y)}).then((function(e){return v(e[0])}))}),[]),l.createElement(u.p,(0,i.A)({componentName:c,fieldPath:C+"."+o,customFieldsUI:A},y.props),g)},h=function(e){var t=e.sectionName,i=e.idString,o=e.customFieldsUI,r=new Array(o.find((function(e){return e.section===t}))),a=[function(e){return n(34222)("./".concat(e,".js"))},function(e){return Promise.resolve().then(n.bind(n,80357))},function(e){return Promise.resolve().then(n.bind(n,81057))}];return l.createElement(c.default,{id:"InvenioAppRdm.Deposit.".concat(i,".container"),customFieldsUI:r},l.createElement(s.CustomFields,{config:r,templateLoaders:a,fieldPathPrefix:"custom_fields"}))}},52568:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var i=n(64467),o=n(80045),r=n(96540),a=n(53196),l=n(2543),s=["children","componentName","fieldPath","icon","iconMods","label","labelMods","defaultFieldValues","description","descriptionMods","extraRequiredFields","helpText","helpTextMods","placeholder","placeholderMods","priorityFieldValues","required"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var u=function(e){var t=e.children,n=e.componentName,u=e.fieldPath,d=e.icon,m=e.iconMods,p=e.label,f=e.labelMods,h=e.defaultFieldValues,b=e.description,g=e.descriptionMods,v=e.extraRequiredFields,A=e.helpText,y=e.helpTextMods,E=e.placeholder,C=e.placeholderMods,F=e.priorityFieldValues,S=e.required,I=(0,o.A)(e,s),w=m&&m.hasOwnProperty(u)?m[u]:d,P=f&&f.hasOwnProperty(u)?f[u]:p,_=g&&g.hasOwnProperty(u)?g[u]:b,R=C&&C.hasOwnProperty(u)?C[u]:E,M=y&&y.hasOwnProperty(u)?y[u]:A,O=v&&v.hasOwnProperty(u)?v[u]:S,T=h&&h.hasOwnProperty[u]?h[u]:null,N=F&&F.hasOwnProperty(u)?F[u]:null,U=(0,l.pickBy)(I,(function(e){return void 0!==e}));return r.createElement(r.Fragment,null,r.createElement(a.default,{id:"InvenioAppRdm.Deposit.".concat(n,".container"),fieldPath:u},t&&r.cloneElement(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({defaultFieldValue:T,description:"",fieldPath:u,helptext:M||_,label:P,labelIcon:w,placeholder:R,priorityFieldValues:N,required:O},U),null)),(M||_)&&r.createElement("label",{id:"".concat(u,".helptext"),className:"helptext"},M||_))}},40451:(e,t,n)=>{"use strict";n.d(t,{K2:()=>p,Nf:()=>u,TK:()=>c,Ur:()=>f,Wm:()=>d,g4:()=>s,zO:()=>m});var i=n(96540),o=(n(58156),n(62193),n(70742),n(93532),n(80501)),r=n(1489),a=(n(53196),n(30226)),l=n(61537),s=function(e){var t=e.vocabularies;return i.createElement(i.Fragment,null,i.createElement(a.gz,null),i.createElement(a.S8,{vocabularies:t}))},c=function(e){var t=e.customFieldsUI;return i.createElement(i.Fragment,null,i.createElement(a.D2,{customFieldsUI:t}),i.createElement(a.aP,{customFieldsUI:t}),i.createElement(a._A,{customFieldsUI:t}))},u=function(e){var t=e.customFieldsUI;return i.createElement(i.Fragment,null,i.createElement(a.XX,{customFieldsUI:t}))},d=function(e){var t=e.customFieldsUI;return i.createElement(i.Fragment,null,i.createElement(o.A.Group,{widths:"equal"},i.createElement(l._,{sectionName:"Book / Report / Chapter",fieldName:"imprint:imprint.isbn",idString:"ImprintISBNField",description:"e.g. 0-06-251587-X",placeholder:"",customFieldsUI:t}),i.createElement(a.G5,{description:""})),i.createElement(o.A.Group,{widths:"equal"},i.createElement(a.Kh,null),i.createElement(a.XX,{customFieldsUI:t})))},m=function(e){var t=e.permissions,n=e.record;return i.createElement(r.A,{className:"submit-actions"},i.createElement(r.A.Row,null,i.createElement(r.A.Column,{width:"16"},i.createElement(a.zO,{permissions:t}))),i.createElement(r.A.Row,{className:"submit-buttons-row"},i.createElement(a.Cq,{record:n,permissions:t})))},p=function(e){var t=e.customFieldsUI,n=e.labelMods;return i.createElement(i.Fragment,null,i.createElement(a.MX,{customFieldsUI:t,labelMods:n}))},f=function(e){var t=e.vocabularies,n=e.record,o=e.labelMods;return i.createElement(i.Fragment,null,i.createElement(a.WI,{vocabularies:t,record:n,labelMods:o}),i.createElement(a.sj,{vocabularies:t,labelMods:o}))}},30226:(e,t,n)=>{"use strict";n.d(t,{uj:()=>_e,zO:()=>Re,S8:()=>Me,Fi:()=>Oe,iN:()=>Te,eh:()=>Ne,PD:()=>Ue,mN:()=>De,j3:()=>je,cM:()=>ke,PY:()=>xe,_b:()=>qe,G_:()=>Le,vh:()=>Be,Wt:()=>Ve,$Y:()=>Ye,gz:()=>ze,b3:()=>Ge,IE:()=>We,M9:()=>He,Dj:()=>Je,uO:()=>Ke,gx:()=>$e,Iu:()=>Qe,nh:()=>Xe,ZK:()=>Ze,td:()=>et,m_:()=>tt,ci:()=>it,aP:()=>ot,_A:()=>rt,ZU:()=>at,gG:()=>lt,D2:()=>st,S9:()=>ct,JO:()=>nt,XX:()=>mt,Kh:()=>dt,at:()=>pt,Px:()=>ft,sj:()=>ht,zu:()=>ut,q8:()=>bt,TY:()=>gt,Cq:()=>vt,Lq:()=>At,bg:()=>yt,KS:()=>Et,WI:()=>Ct,Sp:()=>Ft,MX:()=>St,G5:()=>It});var i=n(10467),o=n(80296),r=n(45458),a=n(64467),l=n(20454),s=n(58168),c=n(80045),u=n(54756),d=n.n(u),m=n(96540),p=n(58156),f=n.n(p),h=n(62193),b=n.n(h),g=n(70742),v=n(17684),A=n(61225),y=n(81057),E=n(93532),C=n(91751),F=n(1489),S=n(87395),I=n(53196),w=n(82999),P=n(36775),_=n(68455),R=n(7965),M=n(5556),O=n.n(M),T=["fieldPath","additionLabel","label","description","placeholder","icon","classnames","required"],N=function(e){var t=e.fieldPath,n=void 0===t?"metadata.sizes":t,i=e.additionLabel,o=e.label,r=void 0===o?g.M.t("Sizes"):o,a=e.description,l=e.placeholder,u=void 0===l?g.M.t("e.g., 32 x 24 cm or 1.5 GB (press 'enter' to add)"):l,d=e.icon,p=void 0===d?"crop":d,f=e.classnames,h=e.required,b=(0,c.A)(e,T);return console.log("Sizes extraProps",b),m.createElement(m.Fragment,null,m.createElement(y.MultiInput,(0,s.A)({fieldPath:"".concat(n),additionLabel:i,label:r,description:a,placeholder:u,icon:p,classnames:f,required:h},b)),a&&m.createElement("label",{className:"helptext mb-0"},a))};N.propTypes={fieldPath:O().string.isRequired,icon:O().string,label:O().string};var U=n(53444),D=n(64383),j=n(61537),k=n(52568),x=n(75898),q=["record","vocabularies"],L=["permissions"],B=["vocabularies"],V=["record","vocabularies"],Y=["vocabularies"],z=["customFieldsUI"],G=["customFieldsUI"],W=["customFieldsUI"],H=["customFieldsUI"],J=["customFieldsUI"],K=["customFieldsUI"],X=["config","vocabularies"],$=["config","vocabularies","currentUserProfile"],Z=["permissions","record"],Q=["config","record"],ee=["config","noFiles","record","permissions"],te=["customFieldsUI"],ne=["customFieldsUI"],ie=["customFieldsUI"],oe=["customFieldsUI"],re=["customFieldsUI"],ae=["record"],le=["customFieldsUI"],se=["customFieldsUI"],ce=["customFieldsUI"],ue=["customFieldsUI"],de=["customFieldsUI"],me=["customFieldsUI"],pe=["customFieldsUI"],fe=["customFieldsUI"],he=["customFieldsUI"],be=["vocabularies"],ge=["vocabularies"],ve=["vocabularies"],Ae=["customFieldsUI"],ye=["record","vocabularies"],Ee=["customFieldsUI"],Ce=["customFieldsUI"],Fe=["vocabularies","record"],Se=["customFieldsUI"],Ie=["customFieldsUI"];function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=function(e){var t=e.record,n=e.vocabularies,i=(0,c.A)(e,q);return m.createElement(k.p,(0,s.A)({componentName:"DescriptionsField",fieldPath:"metadata.description"},i),m.createElement(E.q1,{fieldPath:"metadata.description",options:n.metadata.descriptions,recordUI:f()(t,"ui",null),label:i.label||"Description",editorConfig:{removePlugins:["Image","ImageCaption","ImageStyle","ImageToolbar","ImageUpload","MediaEmbed","Table","TableToolbar","TableProperties","TableCellProperties"]}}))},Re=function(e){var t=e.permissions,n=(0,c.A)(e,L);return m.createElement(k.p,(0,s.A)({componentName:"AccessRightField",fieldPath:"access"},n,{icon:n.icon||"shield",label:n.label||g.M.t("Public access")}),m.createElement(E.Re,{fieldPath:"access",showMetadataAccess:null===t||void 0===t?void 0:t.can_manage_record_access,fluid:!0}))},Me=function(e){var t=e.vocabularies,n=(0,c.A)(e,B);return m.createElement(k.p,(0,s.A)({componentName:"DateField",fieldPath:"metadata.dates"},n),m.createElement(w.K,{fieldPath:"metadata.dates",options:t.metadata.dates,showEmptyValue:!1}))},Oe=function(e){var t=e.record,n=e.vocabularies,i=(0,c.A)(e,V);return m.createElement(k.p,(0,s.A)({componentName:"DescriptionsField",fieldPath:"metadata.description"},i),m.createElement(E.q1,{options:n.metadata.descriptions,recordUI:f()(t,"ui",null),editorConfig:{removePlugins:["Image","ImageCaption","ImageStyle","ImageToolbar","ImageUpload","MediaEmbed","Table","TableToolbar","TableProperties","TableCellProperties"]}}))},Te=function(){return m.createElement(m.Fragment,null)},Ne=function(e){var t=e.vocabularies,n=(0,c.A)(e,Y);return m.createElement(k.p,(0,s.A)({componentName:"IdentifiersField",fieldPath:"metadata.identifiers",label:g.M.t("URLs and Other Identifiers"),icon:"barcode"},n),m.createElement(E.l4,{schemeOptions:t.metadata.identifiers.scheme,showEmptyValue:!1}))},Ue=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,z);return m.createElement(j._,(0,s.A)({sectionName:"Book / Report / Chapter",fieldName:"imprint:imprint.title",idString:"ImprintTitleField",customFieldsUI:t,description:"",label:"Book title",icon:"book"},n))},De=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,G);return m.createElement(j._,(0,s.A)({sectionName:"Software",fieldName:"code:developmentStatus",idString:"CodeDevelopmentStatusField",customFieldsUI:t,description:""},n))},je=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,W);return m.createElement(j._,(0,s.A)({sectionName:"Software",fieldName:"code:operatingSystem",idString:"CodeOperatingSystemField",customFieldsUI:t,description:""},n))},ke=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,H);return m.createElement(j._,(0,s.A)({sectionName:"Software",fieldName:"code:programmingLanguage",idString:"CodeProgrammingLanguageField",customFieldsUI:t,description:""},n))},xe=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,J);return m.createElement(j._,(0,s.A)({sectionName:"Software",fieldName:"code:codeRepository",idString:"CodeRepositoryField",customFieldsUI:t,description:""},n))},qe=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,K);return m.createElement(j._,(0,s.A)({sectionName:"Software",fieldName:"code:runtimePlatform",idString:"CodeRuntimePlatformField",customFieldsUI:t,description:""},n))},Le=function(e){var t=e.customFieldsUI;return m.createElement(j._,(0,s.A)({sectionName:"Commons admin info",fieldName:"kcr:commons_domain",idString:"CommonsDomainField",customFieldsUI:t,description:""},extraProps))},Be=function(){return m.createElement(P._,{imagePlaceholderLink:"/static/images/square-placeholder.png"})},Ve=function(e){var t=e.config,n=e.vocabularies,i=(0,c.A)(e,X);return m.createElement(k.p,(0,s.A)({componentName:"ContibutorsField",fieldPath:"metadata.contributors",label:g.M.t("Contributors"),labelIcon:"user plus"},i),m.createElement(E.Y4,{addButtonLabel:g.M.t("Add contributor"),roleOptions:n.metadata.contributors.role,schema:"contributors",autocompleteNames:t.autocomplete_names,modal:{addLabel:"Add contributor",editLabel:"Edit contributor"},id:"InvenioAppRdm.Deposit.ContributorsField.card"}))},Ye=function(e){var t=e.config,n=e.vocabularies,i=e.currentUserProfile,o=(0,c.A)(e,$);return m.createElement(k.p,(0,s.A)({componentName:"CreatorsField",fieldPath:"metadata.creators",label:g.M.t("Creators"),icon:"user",description:""},o),m.createElement(E.Y4,{roleOptions:n.metadata.creators.role,schema:"creators",autocompleteNames:t.autocomplete_names,required:!0,config:t,addButtonLabel:g.M.t("Add creator"),currentUserprofile:i,modal:{addLabel:g.M.t("Add creator"),editLabel:g.M.t("Edit creator")}}))},ze=function(e){var t=(0,s.A)({},((0,l.A)(e),e));return m.createElement(k.p,(0,s.A)({componentName:"PublicationDateField",fieldPath:"metadata.publication_date"},t),m.createElement(E.Hq,{required:!0,fieldPath:"metadata.publication_date"}))},Ge=function(e){var t=e.permissions,n=(e.record,(0,c.A)(e,Z));return m.createElement(m.Fragment,null,null!==t&&void 0!==t&&t.can_delete_draft?m.createElement(k.p,(0,s.A)({componentName:"CardDeleteButton",fieldPath:""},n),m.createElement(E.et,{fluid:!0})):null)},We=function(e){var t=e.config,n=e.record,i=(0,c.A)(e,Q);return m.createElement(m.Fragment,null,t.pids.map((function(e){return m.createElement(m.Fragment,{key:e.scheme},m.createElement(_.E,(0,s.A)({btnLabelDiscardPID:e.btn_label_discard_pid,btnLabelGetPID:e.btn_label_get_pid,canBeManaged:e.can_be_managed,canBeUnmanaged:e.can_be_unmanaged,fieldPath:"pids.".concat(e.scheme),fieldLabel:e.field_label,isEditingPublishedRecord:!0===n.is_published,managedHelpText:e.managed_help_text,pidLabel:e.pid_label,pidPlaceholder:e.pid_placeholder,pidType:e.scheme,unmanagedHelpText:e.unmanaged_help_text,required:!0},i)))})))},He=function(e){var t=e.config,n=e.noFiles,i=e.record,o=(e.permissions,(0,c.A)(e,ee));return m.createElement(m.Fragment,null,m.createElement(k.p,(0,s.A)({componentName:"FileUploader",fieldPath:"files"},o),m.createElement(E.l0,{noFiles:n,isDraftRecord:!i.is_published,quota:t.quota,decimalSizeDisplay:t.decimal_size_display,showMetadataOnlyToggle:!1})))},Je=function(e){var t=(0,s.A)({},((0,l.A)(e),e));return m.createElement(k.p,(0,s.A)({componentName:"FundingField",fieldPath:"metadata.funding"},t),m.createElement(C.q,{searchConfig:{searchApi:{axios:{headers:{Accept:"application/vnd.inveniordm.v1+json"},url:"/api/awards",withCredentials:!1}},initialQueryState:{sortBy:"bestmatch",sortOrder:"asc",layout:"list",page:1,size:5}},label:"Funding",labelIcon:"money bill alternate outline",deserializeAward:function(e){var t;return Pe(Pe({title:e.title_l10n,number:e.number,funder:null!==(t=e.funder)&&void 0!==t?t:"",id:e.id},e.identifiers&&{identifiers:e.identifiers}),e.acronym&&{acronym:e.acronym})},deserializeFunder:function(e){return Pe(Pe(Pe(Pe({id:e.id,name:e.name},e.title_l10n&&{title:e.title_l10n}),e.pid&&{pid:e.pid}),e.country&&{country:e.country}),e.identifiers&&{identifiers:e.identifiers})},computeFundingContents:function(e){var t,n,i="";if(e.funder){var o,r,a,l,s,c,u=null!==(o=null!==(r=null!==(a=null===(l=e.funder)||void 0===l?void 0:l.name)&&void 0!==a?a:null===(s=e.funder)||void 0===s?void 0:s.title)&&void 0!==r?r:null===(c=e.funder)||void 0===c?void 0:c.id)&&void 0!==o?o:"";i="funder",t=u,n="",e.award&&(i="award",n=u,t=e.award.title)}return{headerContent:t,descriptionContent:n,awardOrFunder:i}}}))},Ke=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,te);return m.createElement(j._,(0,s.A)({sectionName:"Book / Report / Chapter",fieldName:"imprint:imprint.isbn",idString:"ImprintISBNField",customFieldsUI:t,icon:"barcode",placeholder:"e.g. 0-06-251587-X",description:""},n))},Xe=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,ne);return m.createElement(j._,(0,s.A)({sectionName:"Journal",fieldName:"journal:journal.title",idString:"JournalTitleField",label:"Journal title",icon:"",description:"",customFieldsUI:t},n))},$e=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,ie);return m.createElement(j._,(0,s.A)({sectionName:"Journal",fieldName:"journal:journal.issn",idString:"JournalISSNField",label:"ISSN",icon:"barcode",description:"",placeholder:"e.g. 1234-5678",customFieldsUI:t},n))},Ze=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,oe);return m.createElement(j._,(0,s.A)({sectionName:"Journal",fieldName:"journal:journal.volume",idString:"JournalVolumeField",label:g.M.t("Volume"),description:"",icon:"zip",customFieldsUI:t},n))},Qe=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,re);return m.createElement(j._,(0,s.A)({sectionName:"Journal",fieldName:"journal:journal.issue",idString:"JournalIssueField",label:g.M.t("Issue"),description:"",icon:"book",customFieldsUI:t},n))},et=function(e){var t=e.record,n=(0,c.A)(e,ae);return m.createElement(k.p,(0,s.A)({componentName:"LanguagesField",fieldPath:"metadata.languages"},n),m.createElement(E.Km,{fieldPath:"metadata.languages",initialOptions:f()(t,"ui.languages",[]).filter((function(e){return null!==e})),placeholder:g.M.t('Type to search for a language (press "enter" to select)'),description:g.M.t('Search for the language(s) of the resource (e.g., "eng", "fra", "Swahili"). Press enter to select each language.'),serializeSuggestions:function(e){return e.map((function(e){return{text:e.title_l10n,value:e.id,key:e.id}}))},"aria-describedby":"metadata.languages.helptext"}))},tt=function(e){var t=(0,s.A)({},((0,l.A)(e),e));return m.createElement(k.p,(0,s.A)({componentName:"LicenseField",fieldPath:"metadata.rights"},t),m.createElement(E.g7,{searchConfig:{searchApi:{axios:{headers:{Accept:"application/vnd.inveniordm.v1+json"},url:"/api/vocabularies/licenses",withCredentials:!1}},initialQueryState:{filters:[["tags","recommended"]]}},serializeLicenses:function(e){return{title:e.title_l10n,description:e.description_l10n,id:e.id,link:e.props.url}}}))},nt=function(){return m.createElement(m.Fragment,null)},it=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,le);return m.createElement(j._,(0,s.A)({sectionName:"Conference",fieldName:"meeting:meeting.acronym",idString:"MeetingAcronymField",customFieldsUI:t,description:""},n))},ot=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,se);return m.createElement(j._,(0,s.A)({sectionName:"Conference",fieldName:"meeting:meeting.dates",idString:"MeetingDatesField",customFieldsUI:t,description:""},n))},rt=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,ce);return m.createElement(j._,(0,s.A)({sectionName:"Conference",fieldName:"meeting:meeting.place",idString:"MeetingPlaceField",customFieldsUI:t,description:""},n))},at=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,ue);return m.createElement(j._,(0,s.A)({sectionName:"Conference",fieldName:"meeting:meeting.session",idString:"MeetingSessionField",customFieldsUI:t,description:""},n))},lt=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,de);return m.createElement(j._,(0,s.A)({sectionName:"Conference",fieldName:"meeting:meeting.session_part",idString:"MeetingSessionPartField",customFieldsUI:t,description:""},n))},st=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,me);return m.createElement(j._,(0,s.A)({sectionName:"Conference",fieldName:"meeting:meeting.title",idString:"MeetingTitleField",customFieldsUI:t,description:""},n))},ct=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,pe);return m.createElement(j._,(0,s.A)({sectionName:"Conference",fieldName:"meeting:meeting.url",idString:"MeetingURLField",customFieldsUI:t,description:""},n))},ut=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,fe);return m.createElement(j._,(0,s.A)({sectionName:"Journal",fieldName:"journal:journal.pages",idString:"JournalPagesField",customFieldsUI:t,description:"",label:"Section pages",icon:"file outline",placeholder:"e.g. 123-145"},n))},dt=function(e){var t=(0,s.A)({},((0,l.A)(e),e));return m.createElement(k.p,(0,s.A)({componentName:"PublisherField",fieldPath:"metadata.publisher",description:"",helpText:"",placeholder:""},t),m.createElement(E.nH,{fieldPath:"metadata.publisher",required:!0}))},mt=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,he);return m.createElement(j._,(0,s.A)({sectionName:"Book / Report / Chapter",fieldName:"imprint:imprint.place",idString:"ImprintPlaceField",customFieldsUI:t,label:"Place of Publication",icon:"map marker alternate",description:"",placeholder:"e.g. Lagos, Nigeria"},n))},pt=function(e){var t=e.vocabularies,n=(0,c.A)(e,be);return m.createElement(k.p,(0,s.A)({componentName:"ReferencesField",fieldPath:"metadata.references",vocabularies:t},n),m.createElement(E.bT,{showEmptyValue:!0}))},ft=function(e){var t=e.vocabularies,n=(0,c.A)(e,ge);return m.createElement(k.p,(0,s.A)({componentName:"RelatedWorksField",fieldPath:"metadata.related_identifiers"},n),m.createElement(E.CP,{fieldPath:"metadata.related_identifiers",options:t.metadata.identifiers,showEmptyValue:!1}))},ht=function(e){var t=e.vocabularies,n=(0,c.A)(e,ve),i="metadata.resource_type";return m.createElement(k.p,(0,s.A)({componentName:"ResourceTypeSelectorField",fieldPath:i},n),m.createElement(R.A,{fieldPath:i,options:t.metadata.resource_type,required:!0}))},bt=function(e){e.customFieldsUI;var t=(0,c.A)(e,Ae);return m.createElement(k.p,(0,s.A)({componentName:"SizeField",fieldPath:"metadata.sizes",icon:"crop",label:g.M.t("Dimensions")},t),m.createElement(N,{fieldPath:"metadata.sizes",label:"Size"}))},gt=function(e){var t=e.record,n=e.vocabularies,i=(0,c.A)(e,ye),o=(0,r.A)(n.metadata.subjects.limit_to);return o.reverse(),o=(0,D.eH)(o,["FOS","FAST-topical","all"],"value"),m.createElement(k.p,(0,s.A)({componentName:"SubjectsField",fieldPath:"metadata.subjects",placeholder:g.M.t("Search for a subject by name (press 'enter' to select)"),label:"Subjects",description:g.M.t("These standardized subject headings help people to find your materials!")},i),m.createElement(E.GC,{initialOptions:f()(t,"ui.subjects",null),limitToOptions:o}))},vt=function(e){var t=e.record,n=e.permissions,r=e.currentUserprofile,a=(0,v.useFormikContext)(),l=a.errors,s=a.values,c=a.setFieldValue,u=(0,m.useContext)(x.Y).handleFormPageChange,p=(0,m.useState)(void 0),f=(0,o.A)(p,2),h=(f[0],f[1]),y=(0,A.useStore)(),E=Object.keys(y.getState().files.entries).length>0,C=!!s.files.enabled,w=C&&!E,P=function(){var e=(0,i.A)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.metadata.identifiers.length&&(t=s.metadata.identifiers.reduce((function(e,t){return""!==t.identifier&&""!==t.scheme&&e.push(t),e}),[]),c("metadata.identifiers",t)),e.abrupt("return",s.metadata.identifiers);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,i.A)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""!==s.metadata.publisher&&s.metadata.publisher||c("metadata.publisher","unknown"),e.abrupt("return",s.metadata.publisher);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,i.A)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=4;break}return h(!0),e.next=4,c("files.enabled",!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){h(!1),u(null,{value:"page-5"})},O=function(){var e=(0,i.A)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return e.next=4,_();case 4:if(!E||C){e.next=7;break}return e.next=7,c("files.enabled",!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m.createElement(I.default,{id:"InvenioAppRdm.Deposit.CardDepositStatusBox.container"},m.createElement(F.A,{relaxed:!0,className:"save-submit-buttons"},l&&!b()(l)&&m.createElement(F.A.Row,null,m.createElement(F.A.Column,{computer:"8",tablet:"6"},m.createElement(S.A,{visible:!0,negative:!0,icon:"warning sign",header:g.M.t("There are problems with your submission. Please fix the highlighted sections.")}))),m.createElement(F.A.Row,null,m.createElement(F.A.Column,{computer:"8",tablet:"6"},m.createElement(U.G,{fluid:!0,actionName:"saveDraft","aria-describedby":"save-button-description",currentUserProfile:r,handleConfirmNeedsFiles:M,handleConfirmNoFiles:R,sanitizeDataForSaving:O,missingFiles:w,disabled:l&&!b()(l)})),m.createElement(F.A.Column,{tablet:"10",computer:"8",id:"save-button-description",className:"helptext"},m.createElement("p",null,m.createElement("b",null,"Draft deposits")," can be edited",(null===n||void 0===n?void 0:n.can_delete_draft)&&", deleted,"," and the files can be added or changed."))),m.createElement(F.A.Row,null,m.createElement(F.A.Column,{computer:8,tablet:6},m.createElement(U.G,{fluid:!0,actionName:"preview","aria-describedby":"preview-button-description",currentUserProfile:r,handleConfirmNeedsFiles:M,handleConfirmNoFiles:R,sanitizeDataForSaving:O,missingFiles:w,disabled:l&&!b()(l)})),m.createElement(F.A.Column,{tablet:"10",computer:"8",id:"preview-button-description",className:"helptext"})),m.createElement(F.A.Row,null,m.createElement(F.A.Column,{computer:8,tablet:6,className:""},m.createElement(U.G,{fluid:!0,actionName:"publish",currentUserProfile:r,handleConfirmNeedsFiles:M,handleConfirmNoFiles:R,sanitizeDataForSaving:O,missingFiles:w,"aria-describedby":"publish-button-description",size:"massive",id:"deposit-form-publish-button",positive:!0,disabled:l&&!b()(l)})),m.createElement(F.A.Column,{tablet:"10",computer:"8",id:"publish-button-description",className:"helptext"},m.createElement("p",null,m.createElement("b",null,"Published deposits")," can still be edited, but you will no longer be able to"," ",(null===n||void 0===n?void 0:n.can_delete_draft)&&"delete the deposit or ","change the attached files. To add or change files for a published deposit you must create a new version of the record."))),m.createElement(F.A.Row,null,m.createElement(F.A.Column,{computer:8,tablet:6},m.createElement(Ge,{permissions:n,record:t,"aria-describedby":"delete-button-description",icon:"trash alternate outline"})),m.createElement(F.A.Column,{tablet:"10",computer:"8",id:"delete-button-description",className:"helptext"},m.createElement("p",null,"Deposits can only be ",m.createElement("b",null,"deleted while they are drafts"),". Once you publish your deposit, you can only restrict access and/or create a new version.")))))},At=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,Ee);return m.createElement(j._,(0,s.A)({sectionName:"Commons admin info",fieldName:"kcr:submitter_email",idString:"SubmitterEmailField",customFieldsUI:t,description:""},n))},yt=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,Ce);return m.createElement(j._,(0,s.A)({sectionName:"Commons admin info",fieldName:"kcr:submitter_username",idString:"SubmitterUsernameField",customFieldsUI:t,description:""},n))},Et=function(){return m.createElement(m.Fragment,null)},Ct=function(e){var t=e.vocabularies,n=e.record,i=(0,c.A)(e,Fe);return m.createElement(k.p,(0,s.A)({componentName:"TitlesField",fieldPath:"metadata.title",required:!0,label:i.label},i),m.createElement(E.y5,{fieldPath:"metadata.title",options:t.metadata.titles,recordUI:n.ui}))},Ft=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,Se);return m.createElement(j._,(0,s.A)({sectionName:"Book / Report / Chapter",fieldName:"imprint:imprint.pages",idString:"ImprintPagesField",customFieldsUI:t,description:"",label:g.M.t("Total book pages"),icon:"file outline"},n))},St=function(e){var t=e.customFieldsUI,n=(0,c.A)(e,Ie);return m.createElement(j._,(0,s.A)({sectionName:"KCR Book information",fieldName:"thesis:university",idString:"ThesisUniversity",customFieldsUI:t},n))},It=function(e){var t=(0,s.A)({},((0,l.A)(e),e));return m.createElement(k.p,(0,s.A)({componentName:"VersionField",fieldPath:"metadata.version",helpText:""},t),m.createElement(E.Je,null))}},66614:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractComponent:()=>u.uj,AccessRightsComponent:()=>u.zO,AdditionalDatesComponent:()=>u.S8,AdditionalDescriptionComponent:()=>u.Fi,AdditionalTitlesComponent:()=>u.iN,AlternateIdentifiersComponent:()=>u.eh,BookTitleComponent:()=>u.PD,CodeDevelopmentStatusComponent:()=>u.mN,CodeOperatingSystemComponent:()=>u.j3,CodeProgrammingLanguageComponent:()=>u.cM,CodeRepositoryComponent:()=>u.PY,CodeRuntimePlatformComponent:()=>u._b,CombinedDatesComponent:()=>c.g4,CommonsDomainComponent:()=>u.G_,CommunitiesComponent:()=>u.vh,CommunityContext:()=>h.V,CommunityField:()=>d._,CommunitySelectionModal:()=>f.R,CommunitySelectionModalComponent:()=>f.q,ContributorsComponent:()=>u.Wt,CreatorsComponent:()=>u.$Y,DateComponent:()=>u.gz,DatesField:()=>m.K,DeleteComponent:()=>u.b3,DoiComponent:()=>u.IE,FilesUploadComponent:()=>u.M9,FormValuesContext:()=>a.Y,FundingComponent:()=>u.Dj,ISBNComponent:()=>u.uO,JournalISSNComponent:()=>u.gx,JournalIssueComponent:()=>u.Iu,JournalTitleComponent:()=>u.nh,JournalVolumeComponent:()=>u.ZK,LanguagesComponent:()=>u.td,LicensesComponent:()=>u.m_,MeetingAcronymComponent:()=>u.ci,MeetingDatesComponent:()=>u.aP,MeetingDetailsComponent:()=>c.TK,MeetingPlaceComponent:()=>u._A,MeetingSessionComponent:()=>u.ZU,MeetingSessionPartComponent:()=>u.gG,MeetingTitleComponent:()=>u.D2,MeetingURLComponent:()=>u.S9,MetadataOnlyComponent:()=>u.JO,OrganizationDetailsComponent:()=>c.Nf,PIDField:()=>p.E,PublicationDetailsComponent:()=>c.Wm,PublicationLocationComponent:()=>u.XX,PublisherComponent:()=>u.Kh,RDMDepositForm:()=>a.G,ReferencesComponent:()=>u.at,RelatedWorksComponent:()=>u.Px,ResourceTypeComponent:()=>u.sj,SectionPagesComponent:()=>u.zu,SelectField:()=>v.z,SizesComponent:()=>u.q8,SubjectsComponent:()=>u.TY,SubmissionComponent:()=>u.Cq,SubmitActionsComponent:()=>c.zO,SubmitButtonModal:()=>b.G,SubmitReviewModal:()=>g.K,SubmitterEmailComponent:()=>u.Lq,SubmitterUsernameComponent:()=>u.bg,SubtitleComponent:()=>u.KS,TextArea:()=>y.f,TextField:()=>A.A,ThesisDetailsComponent:()=>c.K2,TitleComponent:()=>u.WI,TotalPagesComponent:()=>u.Sp,TypeTitleComponent:()=>c.Ur,UniversityComponent:()=>u.MX,VersionComponent:()=>u.G5,areDeeplyEqual:()=>s.M$,changeSelectedCommunity:()=>d.d,emptyDate:()=>m.S,excludeObjectKeys:()=>s.oG,flattenKeysDotJoined:()=>s.jj,flattenWrappers:()=>s.lq,getTouchedParent:()=>s.$u,moveToArrayStart:()=>s.eH,pushToArrayEnd:()=>s.o_,scrollTop:()=>s.F1});var i=n(96540),o=n(40961),r=n(93532),a=n(75898),l=n(53196),s=n(64383),c=n(40451),u=n(30226),d=n(36775),m=n(82999),p=n(68455),f=(n(7965),n(57386)),h=n(52439),b=n(53444),g=n(68871),v=n(10182),A=n(21095),y=n(65466),E=l.overrideStore.getAll(),C=document.getElementById("deposit-form"),F=C.dataset;o.render(i.createElement(l.OverridableContext.Provider,{value:E},i.createElement(a.G,{commonFields:JSON.parse(F.commonFields),config:(0,r.n2)("deposits-config"),currentUserprofile:JSON.parse(F.currentUserprofile),defaultFieldValues:JSON.parse(F.defaultFieldValues),defaultResourceType:JSON.parse(F.defaultResourceType),descriptionModifications:JSON.parse(F.descriptionModifications),extraRequiredFields:JSON.parse(F.extraRequiredFields),fieldsByType:JSON.parse(F.fieldsByType),files:(0,r.n2)("deposits-record-files"),helpTextModifications:JSON.parse(F.helpTextModifications),iconModifications:JSON.parse(F.iconModifications),labelModifications:JSON.parse(F.labelModifications),permissions:(0,r.n2)("deposits-record-permissions"),pidsConfigOverrides:JSON.parse(F.pidsConfigOverrides),placeholderModifications:JSON.parse(F.placeholderModifications),preselectedCommunity:(0,r.n2)("deposits-draft-community"),priorityFieldValues:JSON.parse(F.priorityFieldValues),record:(0,r.n2)("deposits-record")})),C)},36775:(e,t,n)=>{"use strict";n.d(t,{_:()=>E,d:()=>A});var i=n(80296),o=n(10467),r=n(54756),a=n.n(r),l=n(11990),s=n(5556),c=n.n(s),u=n(96540),d=n(81057),m=n(61225),p=n(80501),f=n(76217),h=n(1489),b=n(27041),g=n(3487),v=n(57386),A=function(e){return function(){var t=(0,o.A)(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_COMMUNITY",payload:{community:e}}),window.setTimeout((function(){document.querySelectorAll(".community-field-button")[0].focus()}),50);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e){var t,n=e.community,o=void 0===n?void 0:n,r=e.changeSelectedCommunity,a=e.imagePlaceholderLink,s=e.showCommunitySelectionButton,c=e.disableCommunitySelectionButton,m=(0,u.useState)(),A=(0,i.A)(m,2),y=A[0],E=A[1],C=function(){document.querySelectorAll(".community-field-button")[0].focus()};return u.createElement(u.Fragment,null,u.createElement(p.A.Field,null,u.createElement("label",{htmlFor:"community-selector",className:"field-label-class invenio-field-label"},u.createElement(f.A,{name:"users"}),"Community submission")),u.createElement(p.A.Group,null,o&&u.createElement(p.A.Field,{width:12},u.createElement(h.A,{fluid:!0},u.createElement(h.A.Column,{width:3},u.createElement(d.Image,{size:"tiny",className:"community-header-logo",src:(null===(t=o.links)||void 0===t?void 0:t.logo)||a,fallbackSrc:a})),u.createElement(h.A.Column,{width:13},u.createElement(b.A,{size:"small"},o.metadata.title)))),u.createElement(p.A.Field,{width:o?4:6,className:"right-btn-column"},s&&u.createElement(v.R,{onCommunityChange:function(e){r(e),C(),E(!1)},onModalChange:function(e){!1===e&&C(),E(e)},modalOpen:y,chosenCommunity:o,displaySelected:!0,trigger:u.createElement(g.A,{className:"community-field-button add-button",disabled:c,onClick:function(){return E(!0)},name:"setting",id:"community-selector",type:"button",floated:o?"":"left"},o?l.M.t("Change"):l.M.t("Select a community")),focusAddButtonHandler:C}),o&&u.createElement(g.A,{"aria-label":l.M.t("Remove item"),className:"close-btn",icon:!0,onClick:function(){return r(null)},disabled:!s},u.createElement(f.A,{name:"close"}))),!o&&u.createElement(p.A.Field,{width:11,className:"communities-helptext-wrapper"},u.createElement("label",{htmlFor:"community-selector",className:"helptext"},l.M.t("Select a community where you want this deposit to be published.")))))};y.propTypes={imagePlaceholderLink:c().string.isRequired,community:c().object,disableCommunitySelectionButton:c().bool.isRequired,showCommunitySelectionButton:c().bool.isRequired,showCommunityHeader:c().bool.isRequired,changeSelectedCommunity:c().func.isRequired};var E=(0,m.connect)((function(e){return{community:e.deposit.editorState.selectedCommunity,disableCommunitySelectionButton:e.deposit.editorState.ui.disableCommunitySelectionButton,showCommunitySelectionButton:e.deposit.editorState.ui.showCommunitySelectionButton,showCommunityHeader:e.deposit.editorState.ui.showCommunityHeader}}),(function(e){return{changeSelectedCommunity:function(t){return e(A(t))}}}))(y)},52439:(e,t,n)=>{"use strict";n.d(t,{V:()=>i});var i=n(96540).createContext({})},57386:(e,t,n)=>{"use strict";n.d(t,{R:()=>x,q:()=>k});var i=n(23029),o=n(92901),r=n(56822),a=n(53954),l=n(85501),s=n(64467),c=n(11990),u=n(5556),d=n.n(u),m=n(96540),p=n(61225),f=n(48423),h=n(27041),b=n(3487),g=n(52439),v=n(53196),A=n(98871),y=n(1489),E=n(73083),C=n(2685),F=n(27089),S=n(92411),I=n.n(S),w=n(28085),P=n(76217),_=n(78585),R=function(e){var t,n=e.result,i=(0,m.useContext)(g.V),o=i.setLocalCommunity,r=i.getChosenCommunity,a=i.userCommunitiesMemberships,l=i.displaySelected,s=n.metadata,u=(null===(t=r())||void 0===t?void 0:t.id)===n.id,d=a[n.id],p=m.createElement(b.A,{content:l&&u?c.M.t("Selected"):c.M.t("Select"),size:"small",positive:l&&u,onClick:function(){return o(n)},"aria-label":c.M.t("Select {{title}}",{title:s.title})}),f=d&&m.createElement(w.A,{size:"small",horizontal:!0,color:"teal"},m.createElement(P.A,{name:"key"}),I()(d));return m.createElement(_.mG,{result:n,actions:p,extraLabels:f,showPermissionLabel:!0})};function M(e,t,n){return t=(0,a.A)(t),(0,r.A)(e,O()?Reflect.construct(t,n||[],(0,a.A)(e).constructor):t.apply(e,n))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}R.propTypes={result:d().object.isRequired};var T=function(e){function t(e){var n;(0,i.A)(this,t);var o=(n=M(this,t,[e])).props.apiConfigs.allCommunities;return n.state={selectedConfig:o},n}return(0,l.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this,t=this.state.selectedConfig,n=t.searchApi,i=t.appId,o=t.initialQueryState,r=t.toggleText,a=this.props.apiConfigs,l=a.allCommunities,u=a.myCommunities,d=new A.HZ(n),p=(0,s.A)({},"".concat(i,".ResultsList.item"),R);return m.createElement(v.OverridableContext.Provider,{value:p},m.createElement(A.gz,{appName:i,urlHandlerApi:{enabled:!1},searchApi:d,key:i,initialQueryState:o},m.createElement(y.A,null,m.createElement(y.A.Row,{verticalAlign:"middle"},m.createElement(y.A.Column,{width:8,textAlign:"left",floated:"left"},m.createElement(E.A,{role:"tablist",compact:!0},m.createElement(E.A.Item,{as:"button",role:"tab",id:"all-communities-tab","aria-selected":i===l.appId,"aria-controls":l.appId,name:"All",active:i===l.appId,onClick:function(){return e.setState({selectedConfig:l})}},c.M.t("All")),m.createElement(E.A.Item,{as:"button",role:"tab",id:"my-communities-tab","aria-selected":i===u.appId,"aria-controls":u.appId,name:"My communities",active:i===u.appId,onClick:function(){return e.setState({selectedConfig:u})}},c.M.t("My communities")))),m.createElement(y.A.Column,{width:8,floated:"right",verticalAlign:"middle"},m.createElement(A.IW,{placeholder:r,autofocus:!0,actionProps:{icon:"search",content:null,className:"search","aria-label":c.M.t("Search")}}))),m.createElement(y.A.Row,{verticalAlign:"middle"},m.createElement(y.A.Column,null,m.createElement(A.oK,null,m.createElement(C.A,{className:"community-list-container p-0"},m.createElement(f.A.Content,{role:"tabpanel",id:i,scrolling:!0,className:"community-list-results"},m.createElement(A.i6,null),m.createElement(A.$D,null),m.createElement(A.dy,null))),m.createElement(F.A,{textAlign:"center"},m.createElement(A.dK,null))))))))}}])}(m.Component);T.propTypes={apiConfigs:d().shape({allCommunities:d().shape({appId:d().string.isRequired,initialQueryState:d().object.isRequired,searchApi:d().object.isRequired}),myCommunities:d().shape({appId:d().string.isRequired,initialQueryState:d().object.isRequired,searchApi:d().object.isRequired})})},T.defaultProps={apiConfigs:{allCommunities:{initialQueryState:{size:5,page:1},searchApi:{axios:{url:"/api/communities",headers:{Accept:"application/vnd.inveniordm.v1+json"}}},appId:"ReactInvenioDeposit.CommunitySelectionSearch.AllCommunities",toggleText:"Search in all communities"},myCommunities:{initialQueryState:{size:5,page:1},searchApi:{axios:{url:"/api/user/communities",headers:{Accept:"application/vnd.inveniordm.v1+json"}}},appId:"ReactInvenioDeposit.CommunitySelectionSearch.MyCommunities",toggleText:"Search in my communities"}}};var N=n(62193),U=n.n(N);function D(e,t,n){return t=(0,a.A)(t),(0,r.A)(e,j()?Reflect.construct(t,n||[],(0,a.A)(e).constructor):t.apply(e,n))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}var k=function(e){function t(e){var n;(0,i.A)(this,t),n=D(this,t,[e]),(0,s.A)(n,"modalTrigger",(function(){var e=n.props,t=e.trigger,i=e.modalOpen;if(!U()(t))return m.cloneElement(t,{"aria-haspopup":"dialog","aria-expanded":i})}));var o=e.chosenCommunity,r=e.onCommunityChange,a=e.userCommunitiesMemberships,l=e.displaySelected;e.focusAddButtonHandler;return n.state={localChosenCommunity:o},n.contextValue={setLocalCommunity:function(e){r(e),n.setState({localChosenCommunity:e})},getChosenCommunity:function(){return n.state.localChosenCommunity},userCommunitiesMemberships:a,displaySelected:l},n}return(0,l.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.chosenCommunity,i=t.extraContentComponents,o=t.modalHeader,r=t.onModalChange,a=t.modalOpen,l=t.apiConfigs;t.handleClose;return m.createElement(g.V.Provider,{value:this.contextValue},m.createElement(f.A,{role:"dialog","aria-labelledby":"community-modal-header",id:"community-selection-modal",className:"m-0",closeIcon:!0,closeOnDimmerClick:!1,open:a,onClose:function(){r&&r(!1)},onOpen:function(){e.setState({localChosenCommunity:n}),r&&r(!0)},trigger:this.modalTrigger()},m.createElement(f.A.Header,null,m.createElement(h.A,{as:"h2",id:"community-modal-header"},o)),m.createElement(f.A.Content,null,m.createElement(T,{apiConfigs:l}),i),m.createElement(f.A.Actions,null,m.createElement(b.A,{onClick:function(){return r(!1)}},c.M.t("Close")))))}}])}(m.Component);k.propTypes={chosenCommunity:d().object,onCommunityChange:d().func.isRequired,trigger:d().object,userCommunitiesMemberships:d().object.isRequired,extraContentComponents:d().node,modalHeader:d().string,onModalChange:d().func,displaySelected:d().bool,modalOpen:d().bool,apiConfigs:d().object,handleClose:d().func.isRequired},k.defaultProps={chosenCommunity:void 0,extraContentComponents:void 0,modalHeader:c.M.t("Select a community"),onModalChange:void 0,displaySelected:!1,modalOpen:!1,trigger:void 0,apiConfigs:void 0};var x=(0,p.connect)((function(e){return{userCommunitiesMemberships:e.deposit.config.user_communities_memberships}}),null)(k)},82999:(e,t,n)=>{"use strict";n.d(t,{K:()=>P,S:()=>w});var i=n(80296),o=n(96540),r=n(5556),a=n.n(r),l=n(81057),s=n(80501),c=n(3487),u=n(76217),d=n(62193),m=n.n(d),p=n(61505),f=n.n(p),h=n(87612),b=n.n(h),g=n(2404),v=n.n(g),A=n(61448),y=n.n(A),E=n(11990),C=n(93532),F=n(17684);function S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw r}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var w={date:"",description:"",type:""},P=function(e){var t=e.requiredOptions,n=void 0===t?[]:t,r=e.fieldPath,a=e.options,d=e.label,p=(void 0===d&&E.M.t("Dates"),e.addButtonLabel),h=void 0===p?E.M.t("Add another date"):p,g=(e.labelIcon,e.placeholderDate),A=void 0===g?E.M.t("YYYY-MM-DD or YYYY-MM-DD/YYYY-MM-DD"):g,I=e.required,P=void 0!==I&&I,_=e.showEmptyValue,R=void 0!==_&&_,M=(0,F.useFormikContext)().values,O=(0,o.useState)(-1),T=(0,i.A)(O,2),N=T[0],U=T[1],D=(0,o.useState)(!1),j=(0,i.A)(D,2),k=j[0],x=j[1];(0,o.useEffect)((function(){var e,t;k&&(N<0?null===(e=document.getElementById("".concat(r,".add-button")))||void 0===e||e.focus():null===(t=document.getElementById("".concat(r,".").concat(N,".date")))||void 0===t||t.focus())}),[N]);return o.createElement(F.FieldArray,{name:r,required:P,requiredOptions:n,showEmptyValue:R,render:function(e){return o.createElement(o.Fragment,null,M.metadata.dates.map((function(t,i){var d="".concat(r,".").concat(i),p=function(e,t){var i,o=S(n);try{for(o.s();!(i=o.n()).done;){var r=i.value,a=b()(t,f()(r))[0];if(v()(a,e))return r}}catch(l){o.e(l)}finally{o.f()}return null}(t,M.metadata.dates),h=y()(p,"date"),g=y()(p,"type"),F=y()(p,"description");return o.createElement(s.A.Group,{key:i,optimized:!0},o.createElement(l.TextField,{fieldPath:"".concat(d,".date"),id:"".concat(d,".date"),label:0===i?E.M.t("Date"):"",placeholder:A,disabled:h,required:!0,width:5}),o.createElement(l.SelectField,{fieldPath:"".concat(d,".type"),id:"".concat(d,".type"),label:0===i?E.M.t("Type"):"",options:(0,C.vP)(a.type),disabled:g,required:!0,width:5,optimized:!0}),o.createElement(l.TextField,{fieldPath:"".concat(d,".description"),id:"".concat(d,".description"),label:0===i?E.M.t("Description"):"",disabled:F,width:5}),o.createElement(s.A.Field,null,o.createElement(c.A,{"aria-label":E.M.t("Remove item"),className:"close-btn",disabled:!m()(p),icon:!0,onClick:function(){return function(e,t){x(!0),e.remove(t),U(N-1)}(e,i)},type:"button"},o.createElement(u.A,{name:"close"}))))})),o.createElement(c.A,{type:"button",onClick:function(){return function(e,t){x(!0),e.push(t),U(N+1)}(e,w)},icon:!0,className:"align-self-end add-btn",labelPosition:"left",id:"".concat(r,".add-button")},o.createElement(u.A,{name:"add"}),h))}})};P.propTypes={fieldPath:a().string.isRequired,label:a().string,labelIcon:a().string,options:a().shape({type:a().arrayOf(a().shape({text:a().string,value:a().string}))}).isRequired,required:a().bool,placeholderDate:a().string,requiredOptions:a().array,showEmptyValue:a().bool}},68455:(e,t,n)=>{"use strict";n.d(t,{E:()=>j});var i=n(58168),o=n(64467),r=n(23029),a=n(92901),l=n(56822),s=n(53954),c=n(85501),u=n(11990),d=n(17684),m=n(38221),p=n.n(m),f=n(5556),h=n.n(f),b=n(96540),g=n(81057),v=n(61225),A=n(80501),y=n(93682),E=n(73591);function C(e,t,n){return t=(0,s.A)(t),(0,l.A)(e,F()?Reflect.construct(t,n||[],(0,s.A)(e).constructor):t.apply(e,n))}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F=function(){return!!e})()}var S="RESERVE_PID",I="DISCARD_PID",w=b.createContext({setSubmitContext:void 0}),P="external",_=function(e,t){return(0,d.getIn)(e.errors,t,null)||(0,d.getIn)(e.initialErrors,t,null)},R=function(e){function t(){return(0,r.A)(this,t),C(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.handleReservePID,i=e.label,o=e.loading;return b.createElement(d.Field,null,(function(e){var r=e.form;return b.createElement(A.A.Button,{className:"positive",size:"mini",loading:o,disabled:t||o,onClick:function(e){return n(e,r)},content:i})}))}}])}(b.Component);R.propTypes={disabled:h().bool,handleReservePID:h().func.isRequired,label:h().string.isRequired,loading:h().bool},R.defaultProps={disabled:!1,loading:!1};var M=function(e){function t(){return(0,r.A)(this,t),C(this,t,arguments)}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.handleDiscardPID,i=e.label,o=e.loading;return b.createElement(y.A,{content:i,trigger:b.createElement(d.Field,null,(function(e){var i=e.form;return b.createElement(A.A.Button,{disabled:t||o,loading:o,icon:"close",onClick:function(e){return n(e,i)},size:"mini"})}))})}}])}(b.Component);M.propTypes={disabled:h().bool,handleDiscardPID:h().func.isRequired,label:h().string.isRequired,loading:h().bool},M.defaultProps={disabled:!1,loading:!1};var O=function(e){function t(){var e;(0,r.A)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=C(this,t,[].concat(i)),(0,o.A)(e,"handleChange",(function(t,n){var i=n.value;(0,e.props.onManagedUnmanagedChange)("managed"===i)})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.isManagedSelected,i=e.fieldPath,o=e.pidLabel;return b.createElement(A.A.Group,{inline:!0},b.createElement(A.A.Field,null,b.createElement(g.FieldLabel,{htmlFor:i,icon:"",label:u.M.t("Do you have a {{pidLabel}} for this work?",{pidLabel:o})})),b.createElement(A.A.Field,{width:2},b.createElement(E.A,{label:u.M.t("Yes"),name:"radioGroup",value:"unmanaged",disabled:t,checked:!n,onChange:this.handleChange})),b.createElement(A.A.Field,{width:2},b.createElement(E.A,{label:u.M.t("No"),name:"radioGroup",value:"managed",disabled:t,checked:n,onChange:this.handleChange})))}}])}(b.Component);O.propTypes={disabled:h().bool,isManagedSelected:h().bool.isRequired,onManagedUnmanagedChange:h().func.isRequired,pidLabel:h().string},O.defaultProps={disabled:!1,pidLabel:void 0};var T=function(e){function t(){var e;(0,r.A)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=C(this,t,[].concat(i)),(0,o.A)(e,"handleReservePID",(function(t,n){var i=e.props.pidType;(0,e.context.setSubmitContext)(S,{pidType:i}),n.handleSubmit(t)})),(0,o.A)(e,"handleDiscardPID",(function(t,n){var i=e.props.pidType;(0,e.context.setSubmitContext)(I,{pidType:i}),n.handleSubmit(t)})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e,t=this.props,n=t.actionState,i=t.actionStateExtra,o=t.btnLabelDiscardPID,r=t.btnLabelGetPID,a=t.disabled,l=(t.helpText,t.identifier),s=(t.pidPlaceholder,t.pidType),c=(t.isEditingPublishedRecord,t.form),u=""!==l;"RESERVE_PID_STARTED"===n&&i.pidType,this.handleReservePID,this.handleDiscardPID,"DISCARD_PID_STARTED"===n&&i.pidType,null===(e=c.values.pids.doi)||void 0===e||e.provider;return b.createElement(b.Fragment,null,u?b.createElement(A.A.Group,{inline:!0},b.createElement(A.A.Field,null,b.createElement("label",null,"https://doi.org/".concat(l)))):null)}}])}(b.Component);(0,o.A)(T,"contextType",w),T.propTypes={btnLabelGetPID:h().string.isRequired,disabled:h().bool,helpText:h().string,identifier:h().string.isRequired,btnLabelDiscardPID:h().string.isRequired,pidPlaceholder:h().string.isRequired,pidType:h().string.isRequired,actionState:h().string,actionStateExtra:h().object},T.defaultProps={disabled:!1,helpText:null,actionState:"",actionStateExtra:{}};var N=(0,v.connect)((function(e){return{actionState:e.deposit.actionState,actionStateExtra:e.deposit.actionStateExtra}}),null)(T),U=function(e){function t(e){var n;(0,r.A)(this,t),n=C(this,t,[e]),(0,o.A)(n,"handleIdentifierUpdate",(function(e){n.setState({localIdentifier:e})})),(0,o.A)(n,"onChange",(function(e){var t=n.props.onIdentifierChanged;n.setState({localIdentifier:e},(function(){return t(e)}))}));var i=e.identifier;return n.state={localIdentifier:i},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.identifier;t!==e.identifier&&this.handleIdentifierUpdate(t)}},{key:"render",value:function(){var e=this,t=this.state.localIdentifier,n=this.props,i=n.form,o=n.fieldPath,r=n.helpText,a=n.pidPlaceholder,l=_(i,o);return b.createElement(b.Fragment,null,b.createElement(A.A.Field,{error:l},b.createElement(A.A.Input,{onChange:function(t,n){var i=n.value;return e.onChange(i)},value:t,placeholder:a,error:l,"aria-describedby":"".concat(o,".help-text")})),b.createElement(A.A.Field,null,r&&b.createElement("label",{id:"".concat(o,".help-text"),className:"helptext"},r)))}}])}(b.Component);U.propTypes={form:h().object.isRequired,fieldPath:h().string.isRequired,helpText:h().string,identifier:h().string.isRequired,onIdentifierChanged:h().func.isRequired,pidPlaceholder:h().string.isRequired},U.defaultProps={helpText:null};var D=function(e){function t(e){var n;(0,r.A)(this,t),n=C(this,t,[e]),(0,o.A)(n,"onExternalIdentifierChanged",(function(e){var t=n.props,i=t.form,o=t.fieldPath,r={identifier:e,provider:P};""!==e?(n.setState({isManagedSelected:!1}),n.debounced&&n.debounced.cancel(),n.debounced=p()((function(){i.setFieldValue(o,r)}),200),n.debounced()):(n.setState({isManagedSelected:!0}),n.debounced&&n.debounced.cancel(),n.debounced=p()((function(){i.setFieldValue("pids",{})}),200),n.debounced())}));var i=n.props,a=i.canBeManaged,l=i.canBeUnmanaged;return n.canBeManagedAndUnmanaged=a&&l,n.state={isManagedSelected:void 0},n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){var e;""==(null===(e=this.props.form.values.pids)||void 0===e||null===(e=e.doi)||void 0===e?void 0:e.identifier)&&this.props.form.setFieldValue("pids",{})}},{key:"render",value:function(){var e=this,t=this.state.isManagedSelected,n=this.props,i=n.btnLabelDiscardPID,o=n.btnLabelGetPID,r=n.canBeManaged,a=n.canBeUnmanaged,l=n.form,s=n.fieldPath,c=n.fieldLabel,u=n.icon,d=n.isEditingPublishedRecord,m=n.managedHelpText,p=n.pidLabel,f=n.pidIcon,h=n.pidPlaceholder,v=(n.required,n.unmanagedHelpText),y=n.pidType,E=n.field.value||{},C=E.identifier||"",F=E.provider||"",S="",I="";if(""!==C){var w=F===P;S=w?"":C,I=w?C:""}console.log("managedIdentifier",S);var R=""!==S,M=void 0===t?R||""===F:t,T=_(l,s);return b.createElement(b.Fragment,null,b.createElement(A.A.Field,{required:!1,error:T},b.createElement(g.FieldLabel,{htmlFor:s,icon:u||f,label:c})),this.canBeManagedAndUnmanaged&&""===S&&b.createElement(O,{disabled:d||R,isManagedSelected:M,onManagedUnmanagedChange:function(t){t?l.setFieldValue("pids",{}):e.onExternalIdentifierChanged(""),e.setState({isManagedSelected:t})},pidLabel:p}),r&&M&&b.createElement(N,{disabled:d,btnLabelDiscardPID:i,btnLabelGetPID:o,form:l,identifier:S,helpText:m,pidPlaceholder:h,pidType:y,pidLabel:p,isEditingPublishedRecord:d}),a&&!M&&b.createElement(U,{identifier:I,onIdentifierChanged:function(t){e.onExternalIdentifierChanged(t)},form:l,fieldPath:s,pidPlaceholder:h,helpText:v}))}}])}(b.Component);D.propTypes={field:h().object,form:h().object.isRequired,btnLabelDiscardPID:h().string.isRequired,btnLabelGetPID:h().string.isRequired,canBeManaged:h().bool.isRequired,canBeUnmanaged:h().bool.isRequired,fieldPath:h().string.isRequired,fieldLabel:h().string.isRequired,isEditingPublishedRecord:h().bool.isRequired,managedHelpText:h().string,pidIcon:h().string.isRequired,pidLabel:h().string.isRequired,pidPlaceholder:h().string.isRequired,pidType:h().string.isRequired,required:h().bool.isRequired,unmanagedHelpText:h().string},D.defaultProps={managedHelpText:null,unmanagedHelpText:null,field:void 0};var j=function(e){function t(e){var n;return(0,r.A)(this,t),n=C(this,t,[e]),(0,o.A)(n,"validatePropValues",(function(){var e=n.props,t=e.canBeManaged,i=e.canBeUnmanaged,o=e.fieldPath;if(!t&&!i)throw Error("".concat(o," must be managed, unmanaged or both."))})),n.validatePropValues(),n}return(0,c.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props.fieldPath;return b.createElement(d.FastField,(0,i.A)({name:e,component:D},this.props))}}])}(b.Component);j.propTypes={btnLabelDiscardPID:h().string,btnLabelGetPID:h().string,canBeManaged:h().bool,canBeUnmanaged:h().bool,fieldPath:h().string.isRequired,fieldLabel:h().string.isRequired,isEditingPublishedRecord:h().bool.isRequired,managedHelpText:h().string,pidIcon:h().string,pidLabel:h().string.isRequired,pidPlaceholder:h().string,pidType:h().string.isRequired,required:h().bool,unmanagedHelpText:h().string},j.defaultProps={btnLabelDiscardPID:"Discard",btnLabelGetPID:"Reserve",canBeManaged:!0,canBeUnmanaged:!0,managedHelpText:null,pidIcon:"barcode",pidPlaceholder:"",required:!1,unmanagedHelpText:null}},53444:(e,t,n)=>{"use strict";n.d(t,{G:()=>M});var i,o=n(58168),r=n(45458),a=n(80296),l=n(80045),s=n(92901),c=n(23029),u=n(64467),d=n(11990),m=n(96540),p=n(61225),f=n(17684),h=n(93532),b=n(3487),g=n(48423),v=n(27041),A=n(76217),y=n(87395),E=n(90179),C=n.n(E),F=n(5556),S=n.n(F),I=n(68871),w=(n(2543),["actionName","actionState","actionStateExtra","currentUserProfile","record","publishWithoutCommunity","numberOfFiles","publishModalExtraContent","handleConfirmNoFiles","handleConfirmNeedsFiles","sanitizeDataForSaving","missingFiles","community","changeSelectedCommunityFn","showChangeCommunityButton","showDirectPublishButton","showSubmitForReviewButton","disableSubmitForReviewButton","isRecordSubmittedForReview"]),P="DRAFT_SUBMIT_REVIEW_STARTED",_=(0,s.A)((function e(){(0,c.A)(this,e)}));i=_,(0,u.A)(_,"DRAFT","draft"),(0,u.A)(_,"NEW_VERSION_DRAFT","new_version_draft"),(0,u.A)(_,"DRAFT_WITH_REVIEW","draft_with_review"),(0,u.A)(_,"IN_REVIEW","in_review"),(0,u.A)(_,"DECLINED","declined"),(0,u.A)(_,"EXPIRED","expired"),(0,u.A)(_,"PUBLISHED","published"),(0,u.A)(_,"allowsReviewDeletionStates",[i.DRAFT_WITH_REVIEW,i.DECLINED,i.EXPIRED]),(0,u.A)(_,"allowsReviewUpdateStates",[i.DRAFT_WITH_REVIEW,i.DECLINED,i.EXPIRED,i.DRAFT]),(0,u.A)(_,"disallowsSubmitForReviewStates",[i.PUBLISHED,i.IN_REVIEW,i.NEW_VERSION_DRAFT]);var R=function(e){var t=e.actionName,n=e.actionState,i=void 0===n?void 0:n,s=e.actionStateExtra,c=e.currentUserProfile,u=(e.record,e.publishWithoutCommunity),p=(e.numberOfFiles,e.publishModalExtraContent),E=void 0===p?void 0:p,F=e.handleConfirmNoFiles,S=e.handleConfirmNeedsFiles,_=e.sanitizeDataForSaving,R=e.missingFiles,M=e.community,O=void 0===M?void 0:M,T=(e.changeSelectedCommunityFn,e.showChangeCommunityButton,e.showDirectPublishButton),N=e.showSubmitForReviewButton,U=e.disableSubmitForReviewButton,D=void 0===U?void 0:U,j=e.isRecordSubmittedForReview,k=(0,l.A)(e,w),x=(0,f.useFormikContext)(),q=(x.values,x.errors,x.handleSubmit),L=x.initialValues,B=x.isSubmitting,V=(0,m.useContext)(h.Gd).setSubmitContext,Y=(0,m.useState)(!1),z=(0,a.A)(Y,2),G=z[0],W=z[1],H=(0,m.useState)(!1),J=(0,a.A)(H,2),K=J[0],X=J[1],$=C()(k,["dispatch"]),Z=m.useRef(null),Q=m.useRef(null);(0,m.useEffect)((function(){window.setTimeout((function(){G||K&&!N&&Q.current.focus()}),20)}),[]);var ee=function(){X(!1),W(!1)},te={preview:{name:"preview",buttonLabel:d.M.t("Preview"),actionText:d.M.t("preview this deposit"),icon:"eye",action:[h.W5.PREVIEW],newActionState:"DRAFT_PREVIEW_STARTED"},saveDraft:{name:"save",buttonLabel:d.M.t("Save draft"),actionText:d.M.t("save this draft"),icon:"save",action:[h.W5.SAVE],newActionState:"DRAFT_SAVE_STARTED"},publish:{name:"publish",buttonLabel:d.M.t("Publish"),actionText:d.M.t("publish this deposit"),icon:"upload",action:[u?h.W5.PUBLISH_WITHOUT_COMMUNITY:h.W5.PUBLISH],newActionState:"DRAFT_PUBLISH_STARTED"},submitForReview:{name:"SubmitReview",buttonLabel:j?d.M.t("Submitted for review"):d.M.t("Submit for review"),actionText:d.M.t("submit this deposit for community review"),icon:"upload",action:[h.W5.SUBMIT_REVIEW,{reviewComment:s.reviewComment,directPublish:T}],newActionState:P},directPublish:{name:"SubmitReview",buttonLabel:d.M.t("Publish to community"),actionText:d.M.t("publish this deposit"),icon:"upload",action:[h.W5.SUBMIT_REVIEW,{reviewComment:s.reviewComment,directPublish:T}],newActionState:P}},ne=t;"publish"===t&&N&&(ne=T?"directPublish":"submitForReview");var ie=te[ne],oe=ie.name,re=ie.buttonLabel,ae=ie.actionText,le=ie.icon,se=ie.action,ce=ie.newActionState,ue=function(e){_().then(F()).then((function(){var e="rdmDepositFormValues.".concat(c.id,".").concat(null===L||void 0===L?void 0:L.id);window.localStorage.removeItem(e)})).then((function(){V.apply(void 0,(0,r.A)(se)),q(e),W(!1),X(!1)}))},de=function(e){"publish"===t?(W(!1),X(!0),window.setTimeout((function(){Q.current.focus()}),20)):ue(e)};return m.createElement(m.Fragment,null,m.createElement(b.A,(0,o.A)({name:oe,disabled:B||"publish"===t&&D,onClick:R?function(){W(!0),window.setTimeout((function(){Z.current.focus()}),20)}:de,loading:B&&i===ce,icon:le,labelPosition:"left",content:re,type:R||N?"button":"submit"},$)),m.createElement(g.A,{closeIcon:!0,open:G,onClose:function(){return W(!1)},onOpen:function(){return W(!0)}},m.createElement(v.A,{icon:"archive",content:"No files included"}),m.createElement(g.A.Content,null,m.createElement("p",null,d.M.t("Are you sure you want to {{actionText}} without any uploaded files?",{actionText:ae}))),m.createElement(g.A.Actions,null,m.createElement(b.A,{negative:!0,onClick:function(){R&&S(),W(!1)},ref:Z},m.createElement(A.A,{name:"remove"})," No, let me add files"),m.createElement(b.A,{positive:!0,onClick:de},m.createElement(A.A,{name:"checkmark"})," Yes, continue without files"))),m.createElement(g.A,{open:K&&!N,size:"small",closeIcon:!0,closeOnDimmerClick:!1,onClose:function(){return X(!1)},onOpen:function(){return X(!0)}},m.createElement(g.A.Header,null,d.M.t("Are you sure you want to {{actionText}}?",{actionText:ae})),m.createElement(g.A.Content,null,m.createElement(y.A,{visible:!0,warning:!0,icon:!0},m.createElement("p",null,m.createElement(A.A,{name:"warning sign"})," ",d.M.t("Once the deposit is published you cannot change or add attached files! (You can still update the published record's other information.)"))),E&&m.createElement("div",{dangerouslySetInnerHTML:{__html:E}})),m.createElement(g.A.Actions,null,m.createElement(b.A,{onClick:ee,floated:"left",negative:!0,ref:Q},m.createElement(A.A,{name:"remove"})," ",d.M.t("Cancel")),m.createElement(b.A,{onClick:ue,positive:!0,icon:"upload",content:re}))),N&&m.createElement(I.K,{config:config,isConfirmModalOpen:K&&N,initialReviewComment:s.reviewComment,onSubmit:ue,community:O,onClose:ee,publishModalExtraContent:E,directPublish:T}))};R.propTypes={actionState:S().string,actionStateExtra:S().object,publishWithoutCommunity:S().bool,numberOfFiles:S().number.isRequired,publishModalExtraContent:S().string,changeSelectedCommunityFn:S().func.isRequired,showChangeCommunityButton:S().bool.isRequired,showDirectPublishButton:S().bool.isRequired,showSubmitForReviewButton:S().bool.isRequired,disableSubmitForReviewButton:S().bool,isRecordSubmittedForReview:S().bool.isRequired};var M=(0,p.connect)((function(e){return{actionState:e.deposit.actionState,actionStateExtra:e.deposit.actionStateExtra,record:e.deposit.record,numberOfFiles:Object.values(e.files.entries).length,publishModalExtraContent:e.deposit.config.publish_modal_extra,community:e.deposit.editorState.selectedCommunity,showDirectPublishButton:e.deposit.editorState.ui.showDirectPublishButton,showChangeCommunityButton:e.deposit.editorState.ui.showChangeCommunityButton,showSubmitForReviewButton:e.deposit.editorState.ui.showSubmitForReviewButton,disableSubmitForReviewButton:e.deposit.editorState.ui.disableSubmitForReviewButton,isRecordSubmittedForReview:e.deposit.record.status===_.IN_REVIEW}}),(function(e){return{changeSelectedCommunityFn:function(t){return e(changeSelectedCommunity(t))}}}))(R)},68871:(e,t,n)=>{"use strict";n.d(t,{K:()=>P});var i=n(23029),o=n(92901),r=n(56822),a=n(53954),l=n(85501),s=n(64467),c=n(11990),u=n(17684),d=n(58156),m=n.n(d),p=n(5556),f=n.n(p),h=n(96540),b=n(52822),g=n(81057),v=n(48423),A=n(87395),y=n(76217),E=n(80501),C=n(50363),F=n(3487),S=n(15941);function I(e,t,n){return t=(0,a.A)(t),(0,r.A)(e,w()?Reflect.construct(t,n||[],(0,a.A)(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var P=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=I(this,t,[].concat(o)),(0,s.A)(e,"ConfirmSubmitReviewSchema",S.Ik({acceptAccessToRecord:S.lc().oneOf([!0],c.M.t("You must accept this.")),acceptAfterPublishRecord:S.lc().oneOf([!0],c.M.t("You must accept this.")),reviewComment:S.Yj()})),e}return(0,l.A)(t,e),(0,o.A)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("accept-access-checkbox"),t=null===e||void 0===e?void 0:e.querySelector("input");null===t||void 0===t||t.focus()}},{key:"render",value:function(){var e,t,n,i,o=this.props,r=o.initialReviewComment,a=o.isConfirmModalOpen,l=o.community,s=o.onClose,d=o.onSubmit,p=o.publishModalExtraContent,f=o.directPublish,S=o.errors,I=o.loading,w=l.metadata.title;return f?(e=c.M.t("Publish to community"),t=c.M.t("Before publishing to the community, please read and check the following:"),n=c.M.t("Your upload will be <bold>immediately published</bold> in '{{communityTitle}}'. You will no longer be able to change the files in the upload! However, you will still be able to update the record's metadata later.",{communityTitle:w}),i=c.M.t("Publish record to community")):(e=c.M.t("Submit for review"),t=c.M.t("Before requesting review, please read and check the following:"),n=c.M.t("If your upload is accepted by the community curators, it will be <bold>immediately published</bold>. Before that, you will still be able to modify metadata and files of this upload."),i=c.M.t("Submit record for review")),h.createElement(u.Formik,{initialValues:{acceptAccessToRecord:!1,acceptAfterPublishRecord:!1,reviewComment:r||""},onSubmit:d,validationSchema:this.ConfirmSubmitReviewSchema,validateOnChange:!1,validateOnBlur:!1},(function(o){var r=o.values,l=o.handleSubmit;return h.createElement(v.A,{open:a,onClose:s,size:"small",closeIcon:!0,closeOnDimmerClick:!1},h.createElement(v.A.Header,null,e),h.createElement(v.A.Content,null,S&&h.createElement(g.ErrorMessage,{errors:S}),h.createElement(A.A,{visible:!0,warning:!0},h.createElement("p",null,h.createElement(y.A,{name:"warning sign"}),t)),h.createElement(E.A,null,h.createElement(E.A.Field,{id:"accept-access-checkbox"},h.createElement(g.RadioField,{control:C.A,fieldPath:"acceptAccessToRecord",label:h.createElement(b.x,{defaults:c.M.t("The '{{communityTitle}}' curators will have access to <bold>view</bold> and <bold>edit</bold> your upload's metadata and files.",{communityTitle:w}),values:{communityTitle:w},components:{bold:h.createElement("b",null)},shouldUnescape:!0}),checked:!0===m()(r,"acceptAccessToRecord"),onChange:function(e){var t=e.data;e.formikProps.form.setFieldValue("acceptAccessToRecord",t.checked)},optimized:!0}),h.createElement(g.ErrorLabel,{role:"alert",fieldPath:"acceptAccessToRecord",className:"mt-0 mb-5"})),h.createElement(E.A.Field,null,h.createElement(g.RadioField,{control:C.A,fieldPath:"acceptAfterPublishRecord",label:h.createElement(b.x,{defaults:n,values:{communityTitle:w},components:{bold:h.createElement("b",null)}}),checked:!0===m()(r,"acceptAfterPublishRecord"),onChange:function(e){var t=e.data;e.formikProps.form.setFieldValue("acceptAfterPublishRecord",t.checked)},optimized:!0}),h.createElement(g.ErrorLabel,{role:"alert",fieldPath:"acceptAfterPublishRecord",className:"mt-0 mb-5"})),!f&&h.createElement(g.TextAreaField,{fieldPath:"reviewComment",label:c.M.t("Message to curators (optional)")}),p&&h.createElement("div",{dangerouslySetInnerHTML:{__html:p}}))),h.createElement(v.A.Actions,null,h.createElement(F.A,{onClick:s,floated:"left",loading:I,disabled:I},h.createElement(y.A,{name:"remove"})," ",c.M.t("Cancel")),h.createElement(F.A,{name:"submitReview",onClick:function(e){l(e)},loading:I,disabled:I,positive:f,primary:!f},h.createElement(y.A,{name:"checkmark"})," ",i)))}))}}])}(h.Component);P.propTypes={isConfirmModalOpen:f().bool.isRequired,community:f().object.isRequired,onClose:f().func.isRequired,onSubmit:f().func.isRequired,initialReviewComment:f().string,publishModalExtraContent:f().string,directPublish:f().bool,errors:f().node,loading:f().bool},P.defaultProps={initialReviewComment:"",publishModalExtraContent:void 0,directPublish:!1,errors:void 0,loading:!1}},7965:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(58168),o=n(64467),r=n(80296),a=n(80045),l=n(96540),s=n(5556),c=n.n(s),u=(n(58156),n(80501)),d=n(81057),m=n(11990),p=n(17684),f=n(76217),h=n(28085),b=(n(2543),["fieldPath","label","labelIcon","options","labelclassname","required"]);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e){var t=e.fieldPath,n=e.label,o=void 0===n?m.M.t("Resource type"):n,s=e.labelIcon,c=void 0===s?"tag":s,g=e.options,A=(e.labelclassname,e.required),y=void 0!==A&&A,E=(0,a.A)(e,b),C=(0,p.useFormikContext)(),F=C.values,S=(C.errors,C.setFieldValue),I=(C.initialValues,(0,l.useState)(!1)),w=(0,r.A)(I,2),P=w[0],_=w[1],R=[{id:"textDocument-journalArticle",label:"Journal Article",icon:"file text"},{id:"textDocument-review",label:"Review",icon:"thumbs up"},{id:"textDocument-book",label:"Book",icon:"book"},{id:"textDocument-bookSection",label:"Book Section",icon:"book"},{id:"instructionalResource-syllabus",label:"Syllabus",icon:"graduation"}];(0,l.useEffect)((function(){F.metadata.resource_type&&!R.map((function(e){return e.id})).includes(F.metadata.resource_type)&&(_(!0),S("metadata.resource_type",F.metadata.resource_type))}),[F.metadata.resource_type]);var M=g.map((function(e){return v(v({},e),{},{label:(t=e,t.type_name+(t.subtype_name?" / "+t.subtype_name:""))});var t})).sort((function(e,t){return e.label.localeCompare(t.label)})).map((function(e){return{value:e.id,icon:e.icon,text:e.label}})),O=function(e){S("metadata.resource_type",e.target.closest("button").name),_(!1)},T=function(){S("metadata.resource_type",M[0].value),_(!0),setTimeout((function(){document.querySelectorAll("#InvenioAppRdm\\.Deposit\\.resource_type\\.container .invenio-select-field input")[0].focus()}),200)};return l.createElement(p.Field,{id:t,name:t},(function(e){e.field;var n=e.form,r=(n.touched,n.errors,n.setFieldValue,e.meta);return l.createElement(u.A.Field,{required:!!y,error:!!r.error&&!!r.touched},l.createElement(d.FieldLabel,{htmlFor:t,icon:c,label:o}),l.createElement("div",{className:"ui compact fluid icon labeled six item menu"},R.map((function(e,t){return l.createElement("button",{key:t,id:e.id,name:e.id,onClick:O,className:"ui button item ".concat(F.metadata.resource_type===e.id?"active":""),formNoValidate:!0,type:"button"},l.createElement(f.A,{name:e.icon}),e.label)})),l.createElement("button",{id:"otherToggle",name:"otherToggle",onClick:T,className:"ui button item ".concat(!0===P?"active":""),formNoValidate:!0,type:"button"},l.createElement(f.A,{name:"asterisk"}),"Other...")),!!P&&l.createElement(d.SelectField,(0,i.A)({fieldPath:t,label:"",optimized:!0,options:M,selectOnBlur:!0,selectOnNavigation:!0,search:!0,placeholder:"choose another resource type..."},E)),r.error&&r.touched&&l.createElement(h.A,{pointing:!0,className:"prompt error"},r.error))}))};A.propTypes={fieldPath:c().string.isRequired,label:c().string,labelIcon:c().string,labelclassname:c().string,options:c().arrayOf(c().shape({icon:c().string,type_name:c().string,subtype_name:c().string,id:c().string})).isRequired,required:c().bool};const y=A},10182:(e,t,n)=>{"use strict";n.d(t,{z:()=>d});var i=n(58168),o=n(80045),r=n(96540),a=n(17684),l=(n(62193),n(80501)),s=n(34667),c=n(81057),u=(n(2543),["defaultValue","error","errorDirection","fieldPath","label","labelIcon","onAddItem","onChange","optimized","options","multiple","required","selectOnBlur","width"]),d=function(e){var t=e.defaultValue,n=void 0===t?"":t,d=(e.error,e.errorDirection),m=void 0===d?"above":d,p=e.fieldPath,f=e.label,h=void 0===f?"":f,b=e.labelIcon,g=void 0===b?void 0:b,v=e.onAddItem,A=void 0===v?void 0:v,y=(e.onChange,e.optimized),E=void 0!==y&&y,C=e.options,F=e.multiple,S=void 0!==F&&F,I=(e.required,e.selectOnBlur),w=void 0!==I&&I,P=e.width,_=void 0===P?void 0:P,R=(0,o.A)(e,u),M=E?a.FastField:a.Field,O=(0,a.useFormikContext)().setFieldValue,T=function(e,t){var n=t.value;O(p,n)};return r.createElement(M,(0,i.A)({id:p,name:p,as:"select"},R),(function(e){var t=e.field,o=e.form,a=(o.touched,o.errors,e.meta);return r.createElement(l.A.Field,{error:!(!a.error||!a.touched)||void 0,width:_},r.createElement(c.FieldLabel,{htmlFor:p,icon:g,label:h}),r.createElement(s.A,(0,i.A)({className:"invenio-select-field",error:!(!a.error||!a.touched)||void 0,fluid:!0,id:p,multiple:S,name:p,options:C,selection:!0,selectOnBlur:w},t,R,{onChange:T,onAddItem:A,value:t.value||n})),a.error&&a.touched&&r.createElement("div",{className:"ui pointing above ".concat(m," prompt label "),role:"alert","aria-atomic":"true"},a.error))}))}},65466:(e,t,n)=>{"use strict";n.d(t,{f:()=>m});var i=n(58168),o=n(80045),r=n(96540),a=n(17684),l=n(80501),s=n(81057),c=n(64383),u=["classnames","error","fieldPath","fluid","helpText","label","onBlur","optimized","required","rows","showLabel","width"],d=["customFieldsUI","currentResourceType","currentUserprofile","descriptionMods","defaultFieldValue","extraRequiredFields","fieldComponents","helpTextMods","icon","iconMods","inputIcon","labelIcon","labelMods","noFiles","placeholderMods","priorityFieldValues"],m=function(e){var t=e.classnames,n=e.error,m=e.fieldPath,p=(e.fluid,e.helpText),f=void 0===p?"":p,h=e.label,b=e.onBlur,g=e.optimized,v=void 0!==g&&g,A=e.required,y=void 0!==A&&A,E=e.rows,C=void 0===E?3:E,F=e.showLabel,S=void 0===F||F,I=e.width,w=(0,o.A)(e,u),P=(w.customFieldsUI,w.currentResourceType,w.currentUserprofile,w.descriptionMods,w.defaultFieldValue,w.extraRequiredFields,w.fieldComponents,w.helpTextMods,w.icon),_=(w.iconMods,w.inputIcon,w.labelIcon),R=(w.labelMods,w.noFiles,w.placeholderMods,w.priorityFieldValues,(0,o.A)(w,d)),M=v?a.FastField:a.Field;return r.createElement(M,{id:m,key:m,name:m,fieldPath:m,optimized:v},(function(e){var o=e.field,a=e.form,u=a.touched,d=(a.errors,a.values,e.meta),p=(0,c.$u)(u,m);return console.log("TextArea",m,d,p),r.createElement(l.A.Field,{required:!!y,error:!!d.error&&(!!d.touched||p)||!!n,className:"invenio-text-area-field ".concat(t),width:I},S&&r.createElement(s.FieldLabel,{htmlFor:m,icon:_||P,label:h}),r.createElement(l.A.TextArea,(0,i.A)({id:m,name:m,rows:C},f?{"aria-describedby":"".concat(m,".helptext")}:{},o,b&&{onBlur:function(e){b(e),o.onBlur(e)}},R)),(!!d.error&&(!!d.touched||p)||!!n)&&r.createElement(s.ErrorLabel,{fieldPath:m}),f&&r.createElement("label",{className:"helptext"},description))}))}},21095:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(58168),o=n(80045),r=n(96540),a=n(17684),l=n(80501),s=n(81057),c=n(11990),u=n(64383),d=["fieldPath","label","labelIcon","inputIcon","required","disabled","error","helpText","optimized","classnames","showLabel","fluid","onBlur","width"],m=["customFieldsUI","currentResourceType","currentUserprofile","descriptionMods","defaultFieldValue","extraRequiredFields","fieldComponents","helpTextMods","icon","iconMods","inputIcon","labelIcon","labelMods","noFiles","placeholderMods","priorityFieldValues"],p=function(e){var t=e.fieldPath,n=e.label,p=e.labelIcon,f=e.inputIcon,h=void 0===f||f,b=e.required,g=e.disabled,v=e.error,A=e.helpText,y=e.optimized,E=e.classnames,C=e.showLabel,F=void 0===C||C,S=e.fluid,I=void 0===S?"true":S,w=e.onBlur,P=e.width,_=(0,o.A)(e,d),R=y?a.FastField:a.Field,M=(_.customFieldsUI,_.currentResourceType,_.currentUserprofile,_.descriptionMods,_.defaultFieldValue,_.extraRequiredFields,_.fieldComponents,_.helpTextMods,_.icon,_.iconMods,_.inputIcon,_.labelIcon,_.labelMods,_.noFiles,_.placeholderMods,_.priorityFieldValues,(0,o.A)(_,m));return r.createElement(R,{id:t,name:t},(function(e){var o=e.field,a=e.form,d=a.touched,m=(a.errors,e.meta),f=(0,u.$u)(d,t);return r.createElement(l.A.Field,{required:!!b,error:!!m.error&&(!!m.touched||f)||!!v||!m.touched&&m.initialError,className:"invenio-text-input-field ".concat(E),fluid:I,width:P},F&&r.createElement(s.FieldLabel,{htmlFor:t,icon:p,label:n}),r.createElement(l.A.Input,(0,i.A)({error:m.error&&(m.touched||f)||!m.touched&&m.initialError?m.error:void 0,disabled:g,fluid:I,icon:h?p:void 0,id:t,name:t,"aria-describedby":"".concat(t,".helptext")},o,w&&{onBlur:function(e){w(e),o.onBlur(e)}},M)),A&&r.createElement("div",{className:"helptext",id:"".concat(t,".helptext")},c.M.t(A)))}))}},64383:(e,t,n)=>{"use strict";n.d(t,{$u:()=>p,F1:()=>s,M$:()=>f,eH:()=>c,jj:()=>d,lq:()=>m,oG:()=>h,o_:()=>u});var i=n(82284),o=n(45458),r=n(17684);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(){window.scrollTo({top:0,left:0,behavior:"smooth"})}function c(e,t,n){var i,r=(0,o.A)(e),l=a(t);try{var s=function(){var e=i.value,t=r.findIndex((function(t){return t[n]===e}));r.unshift.apply(r,(0,o.A)(r.splice(t,1)))};for(l.s();!(i=l.n()).done;)s()}catch(c){l.e(c)}finally{l.f()}return r}function u(e,t,n){var i=(0,o.A)(e);return i.push.apply(i,(0,o.A)(i.splice(i.findIndex((function(e){return e[n]===t})),1))),i}function d(e){for(var t=Object.keys(e),n=[],o=function(o){var r=e[t[o]];if("object"!==(0,i.A)(r)||Array.isArray(r)||null===r)n.push(t[o]);else{var a=d(e[t[o]]).map((function(e){return"".concat(t[o],".").concat(e)}));n=n.concat(a)}},r=0;r<t.length;r++)o(r);return n}function m(e){var t=[];if(e.subsections){var n,i=a(e.subsections);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.subsections?t=t.concat(m(o)):t.push(o)}}catch(r){i.e(r)}finally{i.f()}}else t.push(e);return t}function p(e,t){for(var n=t.split("."),i=!1,o=n.length;o>1;o--){var a=n.slice(0,o).join(".");if(!0===(0,r.getIn)(e,a)){i=!0;break}}return i}function f(e,t,n){if(n&&(e=h(e,n),t=h(t,n)),e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((function(e,n){return f(e,t[n])}));if("object"===(0,i.A)(e)&&"object"===(0,i.A)(t)&&null!==e&&null!==t){if(Array.isArray(e)||Array.isArray(t))return!1;var o=Object.keys(e),r=Object.keys(t);if(o.length!==r.length||!o.every((function(e){return r.includes(e)})))return!1;for(var a in e){if(console.log(e[a],t[a]),!f(e[a],t[a]))return!1}return!0}return!1}function h(e,t){var n={};for(var i in e)t.includes(i)||(n[i]=e[i]);return n}},54033:(e,t,n)=>{"use strict";n.r(t),n.d(t,{componentsMap:()=>M});var i=n(58168),o=n(80045),r=n(96540),a=n(61537),l=["customFieldsUI"],s=["customFieldsUI"],c=n(70742),u=["customFieldsUI"],d=function(e){var t=e.customFieldsUI,n=(0,o.A)(e,u);return r.createElement(a._,(0,i.A)({sectionName:"KCR Book information",fieldName:"kcr:chapter_label",idString:"ChapterLabelField",customFieldsUI:t,label:c.M.t("Chapter number/label"),description:"",icon:"tag"},n))},m=["customFieldsUI"],p=["customFieldsUI"],f=["customFieldsUI"],h=["customFieldsUI"],b=["customFieldsUI"],g=["customFieldsUI"],v=function(e){var t=e.customFieldsUI,n=(0,o.A)(e,g);return r.createElement(a._,(0,i.A)({sectionName:"KCR Book information",fieldName:"kcr:edition",idString:"EditionField",customFieldsUI:t,description:"",label:"Edition or Version",icon:"code branch",placeholder:"e.g., 2nd revised"},n))},A=["customFieldsUI"],y=["customFieldsUI"],E=function(e){var t=e.customFieldsUI,n=(0,o.A)(e,y);return r.createElement(a._,(0,i.A)({sectionName:"Tags",label:"User-defined Keywords",fieldName:"kcr:user_defined_tags",idString:"KCRKeywordsField",customFieldsUI:t},n))},C=["customFieldsUI"],F=["customFieldsUI"],S=["customFieldsUI"],I=["customFieldsUI"],w=["customFieldsUI"],P=["customFieldsUI"],_=n(30226),R=["customFieldsUI"],M={AdminMetadataComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,l);return r.createElement(a.d,(0,i.A)({sectionName:"Commons admin info",idString:"AdminMetadataFields",customFieldsUI:t},n))},["kcr:commons_domain","kcr:submitter_email","kcr:submitter_username"]],AIComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,s);return r.createElement(a._,(0,i.A)({sectionName:"AI Usage",fieldName:"kcr:ai_usage",idString:"AIUsageField",customFieldsUI:t},n))},["custom_fields.kcr:ai_usage"]],ChapterLabelComponent:[d,["custom_fields.kcr:chapter_label"]],CommonsLegacyInfoComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,m);return r.createElement(a.d,(0,i.A)({sectionName:"Commons legacy info",idString:"HCLegacyFields",customFieldsUI:t},n))},["hclegacy:groups_for_deposit","hclegacy:collection","hclegacy:committee_deposit","hclegacy:file_location","hclegacy:file_pid","hclegacy:groups_for_deposit","hclegacy:previously_published","hclegacy:publication_type","hclegacy:record_change_date","hclegacy:record_creation_date","hclegacy:record_identifier","hclegacy:society","hclegacy:submitter_org_memberships","hclegacy:submitter_affiliation","hclegacy:submitter_id"]],ContentWarningComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,p);return r.createElement(a._,(0,i.A)({fieldName:"kcr:content_warning",sectionName:"Content warning",idString:"ContentWarning",customFieldsUI:t,editorConfig:{removePlugins:["Image","ImageCaption","ImageStyle","ImageToolbar","ImageUpload","MediaEmbed","Table","TableToolbar","TableProperties","TableCellProperties"]}},n))},["custom_fields.kcr:content_warning"]],CourseTitleComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,f);return r.createElement(a._,(0,i.A)({sectionName:"Course",fieldName:"kcr:course_title",idString:"CourseTitleField",customFieldsUI:t,description:""},n))},["custom_fields.kcr:course_title"]],DegreeComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,h);return r.createElement(a._,(0,i.A)({sectionName:"KCR thesis information",fieldName:"kcr:degree",idString:"DegreeField",customFieldsUI:t,description:""},n))},["custom_fields.kcr:degree"]],DisciplineComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,b);return r.createElement(a._,(0,i.A)({sectionName:"KCR thesis information",fieldName:"kcr:discipline",idString:"DisciplineField",customFieldsUI:t,description:""},n))},["custom_fields.kcr:discipline"]],EditionComponent:[v,["custom_fields.kcr:edition"]],EditionSectionComponent:[function(e){var t=e.customFieldsUI,n=e.labelMods;return r.createElement(r.Fragment,null,r.createElement(v,{customFieldsUI:t,labelMods:n}),r.createElement(d,{customFieldsUI:t,labelMods:n}))},["custom_fields.kcr:edition","custom_fields.kcr:chapter_label"]],InstitutionDepartmentComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,A);return r.createElement(a._,(0,i.A)({sectionName:"KCR thesis information",fieldName:"kcr:institution_department",idString:"InstitutionDepartmentField",customFieldsUI:t,description:"",icon:""},n))},["custom_fields.kcr:institution_department"]],KeywordsComponent:[E,["custom_fields.kcr:user_defined_tags"]],MediaComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,C);return r.createElement(a._,(0,i.A)({sectionName:"Media",label:"Media and materials",fieldName:"kcr:media",idString:"KCRMediaField",customFieldsUI:t,icon:"paint brush",placeholder:"e.g., oil on canvas (press 'enter' to add each medium/material)",helpText:"",description:""},n))},["custom_fields.kcr:media"]],MeetingOrganizationComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,F);return r.createElement(a._,(0,i.A)({sectionName:"KCR Conference information",fieldName:"kcr:meeting_organization",idString:"MeetingOrganizationField",customFieldsUI:t,description:"",icon:"group"},n))},["custom_fields.kcr:meeting_organization"]],ProjectTitleComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,S);return r.createElement(a._,(0,i.A)({sectionName:"Project",fieldName:"kcr:project_title",idString:"ProjectTitleField",customFieldsUI:t,description:"",label:"Project title",icon:"briefcase",placeholder:""},n))},["custom_fields.kcr:project_title"]],PublicationURLComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,I);return r.createElement(a._,(0,i.A)({sectionName:"KCR journal information",fieldName:"kcr:publication_url",idString:"PublicationURLField",customFieldsUI:t,description:"",icon:"linkify"},n))},["custom_fields.kcr:publication_url"]],SeriesComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,w);return r.createElement(a._,(0,i.A)({sectionName:"Series",fieldName:"kcr:book_series",idString:"KcrBookSeries",icon:"list",customFieldsUI:t},n))},["custom_fields.kcr:book_series"]],SponsoringInstitutionComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,P);return r.createElement(a._,(0,i.A)({sectionName:"KCR Book information",fieldName:"kcr:sponsoring_institution",idString:"SponsoringInstitutionField",customFieldsUI:t,description:"",icon:"group"},n))},["custom_fields.kcr:sponsoring_institution"]],SubjectsKeywordsComponent:[function(e){var t=e.record,n=e.vocabularies,i=e.customFieldsUI;return r.createElement(r.Fragment,null,r.createElement(_.TY,{record:t,vocabularies:n,description:""}),r.createElement(E,{customFieldsUI:i}))},["metadata.subjects","custom_fields.kcr:user_defined_tags"]],VolumeComponent:[function(e){var t=e.customFieldsUI,n=(0,o.A)(e,R);return r.createElement(a._,(0,i.A)({sectionName:"KCR Book information",fieldName:"kcr:volumes",idString:"KcrVolumes",customFieldsUI:t},n))},["custom_fields.kcr:volumes"]]}},33147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{validationSchema:()=>d});var i=n(80296),o=n(15941),r=function(e){return new RegExp("(?:https?://)?(?:ror\\.org/)?(0\\w{6}\\d{2})$","i").test(e)};function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}(0,o.Zg)(o.Yj,"ror",(function(){return this.test("test-name",r)})),(0,o.Zg)(o.Yj,"gnd",(function(){return this.test("test-name",(function(e){var t="http://d-nb.info/gnd/",n=new RegExp("(gnd:|GND:)?((1|10)\\d{7}[0-9X]|[47]\\d{6}-\\d|[1-9]\\d{0,7}-[0-9X]|3\\d{7}[0-9X])");return e.startsWith(t)&&(e=e.slice(21)),n.test(e)}))}));var s=function(e){if(16!==(e=e.replace(/-/g,"").replace(/ /g,"").toUpperCase()).length)return!1;try{var t,n=0,i=a(e.slice(0,-1));try{for(i.s();!(t=i.n()).done;){var o=t.value;n=2*(n+parseInt(o,10))}}catch(r){i.e(r)}finally{i.f()}return(12-n%11)%11===function(e){return"X"!==e?parseInt(e,10):10}(e.slice(-1))}catch(l){return!1}},c=["http://orcid.org/","https://orcid.org/"],u=[35e6,9001e8];(0,o.Zg)(o.Yj,"orcid",(function(){return this.test("test-name",(function(e){for(var t=0,n=c;t<n.length;t++){var o=n[t];if(e.startsWith(o)){e=e.slice(o.length);break}}return e=e.replace(/-/g,"").replace(/ /g,""),!!s(e)&&(e=parseInt(e.slice(0,-1),10),u.some((function(t){var n=(0,i.A)(t,2),o=n[0],r=n[1];return o<=e&&e<=r})))}))})),(0,o.Zg)(o.Yj,"isni",(function(){return this.test("test-name",(function(e){return s(e)}))})),(0,o.Zg)(o.Yj,"dateInSequence",(function(){return this.test("test-name",(function(e){this.path;var t=this.createError,n=!1;if(e){var i=e.split("/");if((null===i||void 0===i?void 0:i.length)>1)new Date(i[0])>new Date(i[1])&&(n=!0)}return!1===n||t({message:"End date must be after start date"})}))}));var d=(0,o.Ik)().shape({access:(0,o.Ik)().shape({}),custom_fields:(0,o.Ik)().shape({"kcr:ai_usage":(0,o.Ik)().shape({ai_used:(0,o.zM)(),ai_description:(0,o.Yj)().when("ai_used",{is:!0,then:(0,o.Yj)().required("Please describe the role AI played in this work")})})}),metadata:(0,o.Ik)().shape({creators:(0,o.YO)().of((0,o.Ik)().shape({affiliations:(0,o.YO)().of((0,o.Ik)().shape({name:(0,o.Yj)().matches(/(?!\s).+/,"Affiliation cannot be blank").required("An affiliation is required")})),person_or_org:(0,o.Ik)().shape({type:(0,o.Yj)().required("A type is required"),family_name:(0,o.Yj)().matches(/(?!\s).+/,"Family name cannot be blank").required("A family name is required"),given_name:(0,o.Yj)().matches(/(?!\s).+/,{disallowEmptyString:!0,message:"Given name cannot be spaces only"}),identifiers:(0,o.YO)().of((0,o.Ik)().shape({scheme:(0,o.Yj)().required("A scheme is required for each identifier"),identifier:(0,o.Yj)().when("scheme",{is:"url",then:(0,o.Yj)().url("Must be a valid URL (e.g. https://example.com)").required("You must provide a URL or remove this row")}).when("scheme",{is:"orcid",then:(0,o.Yj)().orcid("Must be a valid ORCID id (e.g., 0000-0001-2345-6789)").required("You must provide an ORCID id or remove this row")}).when("scheme",{is:"isni",then:(0,o.Yj)().isni("Must be a valid ISNI id (e.g., 0000-0001-2345-6789)").required("You must provide an ISNI id or remove this row")}).when("scheme",{is:"gnd",then:(0,o.Yj)().gnd("Must be a valid GND id (e.g., gnd:118627813)").required("You must provide a GND id or remove this row")}).when("scheme",{is:"ror",then:(0,o.Yj)().ror("Must be a valid ROR id (e.g., 03rjyp183)").required("You must provide a GND id or remove this row")}).matches(/(?!\s).+/,{disallowEmptyString:!0,message:"Identifier cannot be blank"}).required("A value is required for each identifier")}))}),role:(0,o.Yj)().required("A role is required for each contributor")})).min(1,"At least one contributor must be listed").required("At least one contributor must be listed"),identifiers:(0,o.YO)().of((0,o.Ik)().shape({scheme:(0,o.Yj)().required("An scheme is required for each identifier"),identifier:(0,o.Yj)().when("scheme",{is:"url",then:(0,o.Yj)().url("Must be a valid URL (e.g. https://example.com)").required("You must provide a URL or remove this item")}).matches(/(?!\s).+/,{disallowEmptyString:!0,message:"Identifier cannot be blank"}).required("You must provide an identifier or remove this row")})),publisher:(0,o.Yj)(),publication_date:(0,o.Yj)().dateInSequence().required("A publication date is required"),title:(0,o.Yj)().matches(/(?!\s).+/,"Title cannot be blank").min(3,"Title must be at least 3 characters").required("A title is required"),resource_type:(0,o.Yj)().required("A resource type is required"),additional_descriptions:(0,o.YO)().of((0,o.Ik)().shape({description:(0,o.Yj)().matches(/(?!\s).+/,"Description cannot be blank").required("Provide a description or remove this item"),type:(0,o.Yj)().required("A type is required for each additional description"),lang:(0,o.Yj)()}))}).required("Some metadata is required")})},914:(e,t,n)=>{var i={"./EditionField.jsx":[66680,6680],"./JournalISSNField.jsx":[28500,8500],"./JournalPagesField.jsx":[49470,7089],"./JournalTitleField.jsx":[66703,6703],"./JournalVolumeField.jsx":[99947,9947],"./SponsoringInstitutionField.jsx":[5498,5498]};function o(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],o=t[0];return n.e(t[1]).then((()=>n(o)))}o.keys=()=>Object.keys(i),o.id=914,e.exports=o}}]);
//# sourceMappingURL=226.5dca57da0043b10f510a.js.map