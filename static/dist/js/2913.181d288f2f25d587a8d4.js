"use strict";(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[2913],{22724:(e,t,n)=>{n.d(t,{A:()=>v});var r=n(23029),o=n(92901),a=n(56822),c=n(53954),i=n(85501),l=n(5556),s=n.n(l),u=n(96540),d=n(48423),p=n(53196);function f(e,t,n){return t=(0,c.A)(t),(0,a.A)(e,m()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}var A=function(e){function t(){return(0,r.A)(this,t),f(this,t,arguments)}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.modalOpen,r=e.resource;return u.createElement(p.default,{id:"InvenioAdministration.ActionModal.layout",modalOpen:n,children:t,resource:r},u.createElement(d.A,{role:"dialog",open:n},t))}}])}(u.Component);A.propTypes={children:s().object,modalOpen:s().bool,resource:s().object.isRequired},A.defaultProps={modalOpen:!1,children:null};const v=p.default.component("InvenioAdministration.ActionModal",A)},90972:(e,t,n)=>{n.d(t,{E:()=>C});var r=n(23029),o=n(92901),a=n(56822),c=n(53954),i=n(85501),l=n(46343),s=n(17836),u=n(28587),d=n(96540),p=n(5556),f=n.n(p),m=n(62193),A=n.n(m),v=n(98008),h=n(34667),y=n(3487),b=n(87229),g=n(58156),E=n.n(g);function R(e,t,n){return t=(0,c.A)(t),(0,a.A)(e,k()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}var C=function(e){function t(){return(0,r.A)(this,t),R(this,t,arguments)}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.resourceName,r=e.actions,o=e.resource,a=e.successCallback,c=e.idKeyPath,i=e.editUrl,p=e.displayEdit,f=e.displayDelete;return e.displayAsDropdown||p&&f&&Object.keys(r).length>1?d.createElement(h.A,null,!A()(r)&&d.createElement(v.A,{resource:o,successCallback:a,idKeyPath:c,actions:r,Element:h.A.Item,trigger:d.createElement(y.A,{icon:"cog",size:"tiny",className:"transparent rel-ml-1","aria-label":b.M.t("Open list of actions")})}),p&&d.createElement(l.A,{editUrl:i,resource:o}),f&&d.createElement(u.f,{title:t,resourceName:n,apiEndpoint:E()(o,"links.self"),resource:o,successCallback:a,idKeyPath:c,Element:h.A.Item})):d.createElement(d.Fragment,null,!A()(r)&&d.createElement(v.A,{resource:o,successCallback:a,idKeyPath:c,actions:r}),p&&d.createElement(l.A,{editUrl:i,resource:o}),f&&d.createElement(s.A,{successCallback:a,resource:o,resourceName:n,title:t}))}}])}(d.Component);C.propTypes={title:f().string.isRequired,resourceName:f().string.isRequired,displayEdit:f().bool,displayDelete:f().bool,displayAsDropdown:f().bool,resource:f().object.isRequired,successCallback:f().func.isRequired,idKeyPath:f().string,actions:f().object.isRequired,editUrl:f().string.isRequired},C.defaultProps={displayEdit:!0,displayDelete:!0,displayAsDropdown:!1,idKeyPath:"pid"}},17836:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(23029),o=n(92901),a=n(56822),c=n(53954),i=n(85501),l=n(28587),s=n(96540),u=n(5556),d=n.n(u),p=n(93682),f=n(87229),m=n(58156),A=n.n(m),v=n(53196);function h(e,t,n){return t=(0,c.A)(t),(0,a.A)(e,y()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var b=function(e){function t(){return(0,r.A)(this,t),h(this,t,arguments)}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabledMessage,n=e.disable,r=e.title,o=e.resourceName,a=e.successCallback,c=e.idKeyPath,i=e.resource,u=n(i);return s.createElement(p.A,{content:t,disabled:!u,trigger:s.createElement("span",null,s.createElement(l.f,{title:r,resourceName:o,resource:i,successCallback:a,idKeyPath:c,disabled:u,apiEndpoint:A()(i,"links.self"),disabledDeleteMessage:t}))})}}])}(s.Component);b.propTypes={disabledMessage:d().string,title:d().string.isRequired,resourceName:d().string.isRequired,successCallback:d().func.isRequired,idKeyPath:d().string,disable:d().func,resource:d().object.isRequired},b.defaultProps={disabledMessage:f.M.t("Resource is not deletable."),idKeyPath:"pid",disable:function(){return!1}};const g=v.default.component("InvenioAdministration.DeleteAction",b)},83679:(e,t,n)=>{n.d(t,{A:()=>P});var r=n(58168),o=n(10467),a=n(23029),c=n(92901),i=n(56822),l=n(53954),s=n(85501),u=n(64467),d=n(54756),p=n.n(d),f=n(96540),m=n(5556),A=n.n(m),v=n(3487),h=n(76217),y=n(87229),b=n(48423),g=n(52822),E=n(62193),R=n.n(E),k=n(50067),C=n(85544),O=n(53196),S=n(90196);function M(e,t,n){return t=(0,l.A)(t),(0,i.A)(e,q()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}var B=function(e){function t(e){var n;return(0,a.A)(this,t),n=M(this,t,[e]),(0,u.A)(n,"cleanError",(function(){n.setState({error:void 0})})),(0,u.A)(n,"handleOnButtonClick",(0,o.A)(p().mark((function e(){var t,r,o,a,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.successCallback,o=t.apiEndpoint,a=t.toggleModal,c=n.context.addNotification,e.prev=2,e.next=5,S.Y.deleteResource(o);case 5:a(!1),c({title:"Success",content:"Resource was successfully deleted.",type:"success"}),r(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n.setState({error:{header:"Action error",content:e.t0.message,id:e.t0.code}});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))),(0,u.A)(n,"resetErrorState",(function(){n.setState({error:void 0})})),n.state={loading:!1,error:void 0},n.cancelButton=f.createRef(),n}return(0,s.A)(t,e),(0,c.A)(t,[{key:"componentDidUpdate",value:function(){var e;null===(e=this.cancelButton.current)||void 0===e||e.focus()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,o=t.error,a=this.props,c=a.modalOpen,i=a.toggleModal,l=a.children,s=a.title;return f.createElement(O.default,(0,r.A)({id:"DeleteModal.layout"},this.props,{handleOnButtonClick:this.handleOnButtonClick,cleanError:this.cleanError,resetErrorState:this.resetErrorState}),f.createElement(b.A,{role:"dialog",open:c},f.createElement(b.A.Header,{as:"h2"},f.createElement(g.x,{defaults:"Delete {{title}}",values:{title:s}})),f.createElement(b.A.Content,null,f.createElement(b.A.Description,null,l,!R()(o)&&f.createElement(k.Kw,(0,r.A)({},o,{removeNotification:this.resetErrorState})))),f.createElement(b.A.Actions,null,f.createElement(v.A,{ref:this.cancelButton,icon:"cancel",onClick:function(){e.cleanError(),i(!1)},loading:n,content:y.M.t("Cancel"),floated:"left",size:"medium"}),f.createElement(v.A,{negative:!0,onClick:this.handleOnButtonClick,loading:n},f.createElement(h.A,{name:"trash alternate"}),y.M.t("Delete")))))}}])}(f.Component);(0,u.A)(B,"contextType",C.V),B.propTypes={title:A().string.isRequired,apiEndpoint:A().string.isRequired,successCallback:A().func.isRequired,toggleModal:A().func.isRequired,modalOpen:A().bool.isRequired,children:A().node},B.defaultProps={children:null};const P=O.default.component("DeleteModal",B)},28587:(e,t,n)=>{n.d(t,{f:()=>k});var r=n(23029),o=n(92901),a=n(56822),c=n(53954),i=n(85501),l=n(64467),s=n(96540),u=n(5556),d=n.n(u),p=n(87229),f=n(76217),m=n(3487),A=n(83679),v=n(48423),h=n(52822),y=n(58156),b=n.n(y),g=n(53196);function E(e,t,n){return t=(0,c.A)(t),(0,a.A)(e,R()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}var k=function(e){function t(e){var n;return(0,r.A)(this,t),n=E(this,t,[e]),(0,l.A)(n,"toggleModal",(function(e){n.setState({modalOpen:e})})),n.state={modalOpen:!1},n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.resourceName,o=t.apiEndpoint,a=t.resource,c=t.successCallback,i=t.idKeyPath,l=t.Element,u=t.disabled,d=t.disabledDeleteMessage,m=this.state.modalOpen,y="delete-modal-trigger-".concat(a.id);return s.createElement(g.default,{id:"InvenioAdministration.DeleteModalTrigger"},s.createElement(s.Fragment,null,s.createElement(l,{id:y,disabled:u,icon:!0,negative:!0,onClick:function(){return e.toggleModal(!0)},"aria-label":p.M.t("Delete"),"aria-controls":"delete-modal","aria-expanded":m,"aria-haspopup":"dialog",title:d},s.createElement(f.A,{name:"trash alternate"})),s.createElement(A.A,{id:"delete-modal","aria-labelledby":y,title:n,apiEndpoint:o,resource:a,successCallback:c,idKeyPath:i,toggleModal:this.toggleModal,modalOpen:m},s.createElement(v.A.Content,null,s.createElement(v.A.Description,null,s.createElement(h.x,{defaults:"Are you sure you want to delete {{resourceName}}? ",values:{resourceName:b()(a,r)}}))))))}}])}(s.Component);k.propTypes={title:d().string.isRequired,resourceName:d().string.isRequired,apiEndpoint:d().string.isRequired,resource:d().object.isRequired,successCallback:d().func.isRequired,Element:d().object,idKeyPath:d().string.isRequired,disabled:d().bool,disabledDeleteMessage:d().string},k.defaultProps={Element:m.A,disabled:!1,disabledDeleteMessage:""}},46343:(e,t,n)=>{n.d(t,{A:()=>b});var r=n(23029),o=n(92901),a=n(56822),c=n(53954),i=n(85501),l=n(5556),s=n.n(l),u=n(96540),d=n(87229),p=n(93682),f=n(3487),m=n(76217),A=n(53196);function v(e,t,n){return t=(0,c.A)(t),(0,a.A)(e,h()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}var y=function(e){function t(){return(0,r.A)(this,t),v(this,t,arguments)}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.display,n=e.editUrl,r=e.disable,o=e.disabledMessage,a=e.resource;if(!t)return null;var c=r(a);return u.createElement(p.A,{content:o,disabled:!c,trigger:u.createElement("span",{className:"mr-5"},u.createElement(f.A,{as:"a",disabled:c,href:n,icon:!0,labelPosition:"left"},u.createElement(m.A,{name:"pencil"}),d.M.t("Edit")))})}}])}(u.Component);y.propTypes={display:s().bool,editUrl:s().string.isRequired,disable:s().func,disabledMessage:s().string,resource:s().object},y.defaultProps={display:!0,disable:function(){return!1},disabledMessage:d.M.t("Resource is not editable."),resource:void 0};const b=A.default.component("InvenioAdministration.EditAction",y)},98008:(e,t,n)=>{n.d(t,{A:()=>k});var r=n(80296),o=n(23029),a=n(92901),c=n(56822),i=n(53954),l=n(85501),s=n(64467),u=n(96540),d=n(5556),p=n.n(d),f=n(48423),m=n(3487),A=n(43060),v=n(22724),h=n(62193),y=n.n(h),b=n(53196);function g(e,t,n){return t=(0,i.A)(t),(0,c.A)(e,E()?Reflect.construct(t,n||[],(0,i.A)(e).constructor):t.apply(e,n))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}var R=function(e){function t(e){var n;return(0,o.A)(this,t),n=g(this,t,[e]),(0,s.A)(n,"onModalTriggerClick",(function(e,t){var r=t.payloadSchema,o=t.dataName,a=t.dataActionKey,c=n.props.resource;n.setState({modalOpen:!0,modalHeader:o,modalBody:u.createElement(A.dI,{actionKey:a,actionSchema:r,actionSuccessCallback:n.onModalClose,actionCancelCallback:n.closeModal,resource:c})})})),(0,s.A)(n,"closeModal",(function(){n.setState({modalOpen:!1,modalHeader:void 0,modalBody:void 0})})),(0,s.A)(n,"onModalClose",(function(){var e=n.props.successCallback;n.setState({modalOpen:!1,modalHeader:void 0,modalBody:void 0}),e()})),n.state={modalOpen:!1,modalHeader:void 0,modalBody:void 0},n}return(0,l.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.actions,o=t.Element,a=t.resource,c=this.state,i=c.modalOpen,l=c.modalHeader,s=c.modalBody;return u.createElement(u.Fragment,null,Object.entries(n).map((function(t){var n=(0,r.A)(t,2),a=n[0],c=n[1];return u.createElement(o,{key:a,onClick:e.onModalTriggerClick,payloadSchema:c.payload_schema,dataName:c.text,dataActionKey:a,basic:!0},c.text)})),u.createElement(v.A,{modalOpen:i,resource:a},l&&u.createElement(f.A.Header,null,l),!y()(s)&&s))}}])}(u.Component);R.propTypes={resource:p().object.isRequired,successCallback:p().func.isRequired,actions:p().shape({text:p().string.isRequired,payload_schema:p().object.isRequired,order:p().number.isRequired}),Element:p().node},R.defaultProps={Element:m.A,actions:void 0};const k=b.default.component("InvenioAdministration.ResourceActions",R)},51826:(e,t,n)=>{n.d(t,{A:()=>v});var r=n(23029),o=n(92901),a=n(56822),c=n(53954),i=n(85501),l=n(5556),s=n.n(l),u=n(96540),d=n(76217),p=n(53196);function f(e,t,n){return t=(0,c.A)(t),(0,a.A)(e,m()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}var A=function(e){function t(){return(0,r.A)(this,t),f(this,t,arguments)}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.icon,r=e.color,o=e.tooltip;return t?u.createElement(d.A,{title:o,name:n,color:r}):null}}])}(u.Component);A.propTypes={value:s().string.isRequired,icon:s().string,color:s().string,tooltip:s().string},A.defaultProps={icon:"check",color:"green"};const v=p.default.component("InvenioAdministration.BoolFormatter",A)},90462:(e,t,n)=>{n.d(t,{A:()=>A});var r=n(23029),o=n(92901),a=n(56822),c=n(53954),i=n(85501),l=n(91272),s=n(5556),u=n.n(s),d=n(96540);function p(e,t,n){return t=(0,c.A)(t),(0,a.A)(e,f()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}var m=function(e){function t(){return(0,r.A)(this,t),p(this,t,arguments)}return(0,i.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props.value;if(!e)return null;var t=l.DateTime.fromISO(e);return d.createElement("p",{"data-testid":"date-formatter"},t.toLocaleString(l.DateTime.DATETIME_MED))}}])}(d.Component);m.propTypes={value:u().string.isRequired};const A=m},56954:(e,t,n)=>{n.d(t,{A:()=>R});var r=n(58168),o=n(80045),a=n(23029),c=n(92901),i=n(56822),l=n(53954),s=n(85501),u=n(96540),d=n(5556),p=n.n(d),f=n(58156),m=n.n(f),A=n(90462),v=n(51826),h=["resourceSchema","result","property","fieldSchema"];function y(e,t,n){return t=(0,l.A)(t),(0,i.A)(e,b()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}var g={datetime:A.A,date:A.A,bool:v.A},E=function(e){function t(){return(0,a.A)(this,t),y(this,t,arguments)}return(0,s.A)(t,e),(0,c.A)(t,[{key:"render",value:function(){var e=this.props,t=e.resourceSchema,n=e.result,a=e.property,c=e.fieldSchema,i=(0,o.A)(e,h),l=a.replace(/\./g,".properties."),s="".concat(l,".type"),d=m()(t,s),p=m()(g,d),f=m()(n,a,null);return null!==c&&void 0!==c&&c.escape?u.createElement("div",{dangerouslySetInnerHTML:{__html:f}}):p?u.createElement(p,(0,r.A)({value:f},i)):f}}])}(u.Component);E.propTypes={resourceSchema:p().object.isRequired,result:p().object.isRequired,property:p().string.isRequired,fieldSchema:p().object.isRequired};const R=E},43060:(e,t,n)=>{n.d(t,{dI:()=>D});var r=n(58168),o=n(10467),a=n(23029),c=n(92901),i=n(56822),l=n(53954),s=n(85501),u=n(64467),d=n(54756),p=n.n(d),f=n(96540),m=n(5556),A=n.n(m),v=n(17684),h=n(90196),y=n(48423),b=n(3487),g=n(80501),E=n(58156),R=n.n(E),k=n(93971),C=n(62193),O=n.n(C),S=n(1290),M=n(85965),q=n(87229);function B(e,t,n){return t=(0,l.A)(t),(0,i.A)(e,P()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}var D=function(e){function t(e){var n;return(0,a.A)(this,t),n=B(this,t,[e]),(0,u.A)(n,"onSubmit",function(){var e=(0,o.A)(p().mark((function e(t,r){var o,a,c,i,l,s,u,d,f,m;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),o=n.props,a=o.actionKey,c=o.actionSuccessCallback,i=n.getEndpoint(a),e.prev=3,e.next=6,h.Y.resourceAction(i,t);case 6:l=e.sent,n.setState({loading:!1}),c(l.data),e.next=19;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),n.setState({loading:!1}),u=e.t0.message,(d=null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.data)&&(f=d.errors||[],m=(0,M.P)(f),r.setErrors(m),u=d.message||u),n.setState({error:{header:"Action error",content:u,id:e.t0.code}});case 19:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()),(0,u.A)(n,"getEndpoint",(function(e){var t,r=n.props.resource;return t=R()(r,"links.actions[".concat(e,"]")),O()(t)&&(t=R()(r,"links[".concat(e,"]"))),t||console.error("Action endpoint not found in the resource!"),t})),(0,u.A)(n,"resetErrorState",(function(){n.setState({error:void 0})})),n.state={loading:!1,error:void 0,formData:{}},n}return(0,s.A)(t,e),(0,c.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.actionSchema,o=(t.formFields,t.actionCancelCallback),a=this.state,c=a.loading,i=a.formData,l=a.error;return f.createElement(v.Formik,{initialValues:i,onSubmit:this.onSubmit},(function(t){return f.createElement(f.Fragment,null,f.createElement(y.A.Content,null,f.createElement(g.A,{as:v.Form,id:"action-form",onSubmit:t.handleSubmit},f.createElement(S.c,{jsonSchema:n,formFields:n,create:!0,dropDumpOnly:!0}),!O()(l)&&f.createElement(k.Kw,(0,r.A)({},l,{removeNotification:e.resetErrorState})))),f.createElement(y.A.Actions,null,f.createElement(b.A,{type:"submit",primary:!0,form:"action-form",loading:c},q.M.t("Save")),f.createElement(b.A,{onClick:o,floated:"left",icon:"cancel",labelPosition:"left",content:q.M.t("Cancel")})))}))}}])}(f.Component);D.propTypes={resource:A().object.isRequired,actionSchema:A().object.isRequired,actionKey:A().string.isRequired,actionSuccessCallback:A().func.isRequired,actionCancelCallback:A().func.isRequired,formFields:A().object},D.defaultProps={formFields:{}};n(34903)},28021:(e,t,n)=>{n.d(t,{Q:()=>i});var r=n(64467),o=n(58156),a=n.n(o);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{detailsView:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pid";return"".concat(e,"/").concat(a()(t,n))},editView:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pid";return"".concat(e,"/").concat(a()(t,n),"/edit")}})}}]);
//# sourceMappingURL=2913.181d288f2f25d587a8d4.js.map