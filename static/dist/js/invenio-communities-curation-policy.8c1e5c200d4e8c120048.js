(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[5722],{77918:(e,t,r)=>{"use strict";r.d(t,{$:()=>C});var n=r(10467),a=r(23029),i=r(92901),u=r(56822),o=r(53954),c=r(85501),s=r(64467),l=r(54756),f=r.n(l),m=r(38102),p=r(17684),v=r(74354),d=r.n(v),y=r(96540),b=r(80501),g=r(87395),h=r(3487),A=r(76217),S=r(4252),E=r(64483),x=r(5556),k=r.n(x);function w(e,t,r){return t=(0,o.A)(t),(0,u.A)(e,O()?Reflect.construct(t,r||[],(0,o.A)(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}var C=function(e){function t(){var e;(0,a.A)(this,t);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return e=w(this,t,[].concat(i)),(0,s.A)(e,"state",{error:void 0,isSaved:!1}),(0,s.A)(e,"getInitialValues",(function(){var t=e.props,r=t.community,n=t.initialValues;return d()(r,n)})),(0,s.A)(e,"setGlobalError",(function(t){e.setState({error:t})})),(0,s.A)(e,"setIsSavedState",(function(t){e.setState({isSaved:t})})),(0,s.A)(e,"onSubmit",function(){var t=(0,n.A)(f().mark((function t(r,n){var a,i,u,o,c,s,l;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.setSubmitting,i=n.setFieldError,u=e.props.community,a(!0),t.prev=3,o=new S.AM,t.next=7,o.update(u.id,r);case 7:e.setIsSavedState(!0),t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(3),"UNMOUNTED"!==t.t0){t.next=14;break}return t.abrupt("return");case 14:c=(0,E.U9)(t.t0),s=c.message,l=c.errors,s&&e.setGlobalError(s),l&&l.forEach((function(e){var t=e.field,r=e.messages;return i(t,r[0])}));case 17:a(!1);case 18:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,r){return t.apply(this,arguments)}}()),e}return(0,c.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.community,n=this.state,a=n.isSaved,i=n.error,u=void 0!==i;return y.createElement(p.Formik,{initialValues:this.getInitialValues(r),onSubmit:this.onSubmit},(function(e){var r=e.isSubmitting,n=e.handleSubmit;e.values;return y.createElement(b.A,{onSubmit:n},y.createElement(g.A,{hidden:!u,negative:!0},y.createElement(g.A.Content,null,i)),t,y.createElement(h.A,{primary:!0,icon:!0,labelPosition:"left",loading:r,toggle:!0,active:a,type:"submit"},y.createElement(A.A,{name:"save"}),a?m.M.t("Saved"):m.M.t("Save")))}))}}])}(y.Component);C.propTypes={community:k().object.isRequired,children:k().node.isRequired,initialValues:k().object.isRequired}},55027:(e,t,r)=>{"use strict";var n=r(96540),a=r(40961),i=r(23029),u=r(92901),o=r(56822),c=r(53954),s=r(85501),l=r(64467),f=r(80296),m=r(80045),p=r(38102),v=r(17684),d=r(77918),y=r(58156),b=r.n(y),g=r(81057),h=r(27041),A=r(5556),S=r.n(A),E=r(15941),x=["label","formConfig"];function k(e,t,r){return t=(0,c.A)(t),(0,o.A)(e,w()?Reflect.construct(t,r||[],(0,c.A)(e).constructor):t.apply(e,r))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var O=E.Ik({metadata:E.Ik({curation_policy:E.Yj().max(5e3,"Maximum number of characters is 5000")})}),C=function(e){e.label;var t=e.formConfig,r=(0,m.A)(e,x),a=(0,v.useField)(r),i=(0,f.A)(a,1)[0];return n.createElement(n.Fragment,null,t.access.review_policy.map((function(e){return n.createElement(n.Fragment,{key:e.value},n.createElement(g.RadioField,{key:e.value,fieldPath:"access.review_policy",label:e.text,"aria-label":e.text,labelIcon:e.icon,checked:b()(i.value,"access.review_policy")===e.value,value:e.value}),n.createElement("label",{className:"helptext"},e.helpText))})))};C.propTypes={label:S().string,formConfig:S().object.isRequired},C.defaultProps={label:""};var R=function(e){function t(){var e;(0,i.A)(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=k(this,t,[].concat(n)),(0,l.A)(e,"getInitialValues",(function(){return{metadata:{curation_policy:""},access:{review_policy:"closed"}}})),e}return(0,s.A)(t,e),(0,u.A)(t,[{key:"render",value:function(){var e=this.props,t=e.community,r=e.formConfig;return n.createElement(d.$,{initialValues:this.getInitialValues(),community:t,validationSchema:O},n.createElement(h.A,{size:"tiny",className:"mt-0"},p.M.t("Submission review policy")),n.createElement(C,{formConfig:r}))}}])}(n.Component);R.propTypes={community:S().object.isRequired,formConfig:S().object.isRequired};var j=document.getElementById("app"),I=JSON.parse(j.dataset.community),V=JSON.parse(j.dataset.formConfig);a.render(n.createElement(R,{community:I,formConfig:V}),j)},61074:e=>{e.exports=function(e){return e.split("")}},69302:(e,t,r)=>{var n=r(83488),a=r(56757),i=r(32865);e.exports=function(e,t){return i(a(e,t,n),e+"")}},28754:(e,t,r)=>{var n=r(25160);e.exports=function(e,t,r){var a=e.length;return r=void 0===r?a:r,!t&&r>=a?e:n(e,t,r)}},20999:(e,t,r)=>{var n=r(69302),a=r(36800);e.exports=function(e){return n((function(t,r){var n=-1,i=r.length,u=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(u=e.length>3&&"function"==typeof u?(i--,u):void 0,o&&a(r[0],r[1],o)&&(u=i<3?void 0:u,i=1),t=Object(t);++n<i;){var c=r[n];c&&e(t,c,n,u)}return t}))}},49698:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},36800:(e,t,r)=>{var n=r(75288),a=r(64894),i=r(30361),u=r(23805);e.exports=function(e,t,r){if(!u(r))return!1;var o=typeof t;return!!("number"==o?a(r)&&i(t,r.length):"string"==o&&t in r)&&n(r[t],e)}},63912:(e,t,r)=>{var n=r(61074),a=r(49698),i=r(42054);e.exports=function(e){return a(e)?i(e):n(e)}},42054:e=>{var t="\\ud800-\\udfff",r="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",i="[^"+t+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+n+"|"+a+")"+"?",s="[\\ufe0e\\ufe0f]?",l=s+c+("(?:\\u200d(?:"+[i,u,o].join("|")+")"+s+c+")*"),f="(?:"+[i+n+"?",n,u,o,r].join("|")+")",m=RegExp(a+"(?="+a+")|"+f+l,"g");e.exports=function(e){return e.match(m)||[]}},83693:(e,t,r)=>{var n=r(64894),a=r(40346);e.exports=function(e){return a(e)&&n(e)}},80045:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(98587);function a(e,t){if(null==e)return{};var r,a,i=(0,n.A)(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)r=u[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}}},e=>{e.O(0,[402,1057,7655,5941,6932,8102,4252],(()=>{return t=55027,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=invenio-communities-curation-policy.8c1e5c200d4e8c120048.js.map