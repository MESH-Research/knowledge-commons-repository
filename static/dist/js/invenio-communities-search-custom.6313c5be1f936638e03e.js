"use strict";(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[8878],{87115:(e,t,n)=>{n.d(t,{A:()=>x});var a=n(23029),r=n(92901),l=n(56822),i=n(53954),s=n(85501),o=n(38102),c=n(92516),m=n.n(c),u=n(5556),d=n.n(u),p=n(96540),h=n(81057),f=n(53196),b=n(23848),v=n(1489),A=n(27041),g=n(3487),E=n(16767),y=n.n(E);function C(e,t,n){return t=(0,i.A)(t),(0,l.A)(e,w()?Reflect.construct(t,n||[],(0,i.A)(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var N=function(e){function t(){return(0,a.A)(this,t),C(this,t,arguments)}return(0,s.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.community,n=e.defaultLogo,a=e.className,r=e.showUploadBtn,l=t.links.self_html.replace("communities","collections"),i=y().generate(t.slug);return p.createElement(f.default,{id:"InvenioCommunities.CarouselItem.layout",community:t,defaultLogo:n,className:a},p.createElement(b.A,{className:"carousel flex align-items-center ".concat(a),key:t.id},p.createElement(h.Image,{size:"small",src:t.links.logo,fallbackSrc:i.toDataUri()}),p.createElement(b.A.Content,null,p.createElement(b.A.Header,{as:v.A,stackable:!0,className:"rel-pb-1"},p.createElement(v.A.Column,{computer:"10",tablet:"16",className:"pl-0 pb-0"},p.createElement(A.A,{as:"a",size:"medium",href:l},t.metadata.title)),p.createElement(v.A.Column,{computer:"6",tablet:"16",className:"buttons pl-0 pb-0"},p.createElement(g.A,{size:"mini",href:l,content:o.M.t("Browse"),className:"browse-btn"}),r&&p.createElement(g.A,{size:"mini",positive:!0,href:"/uploads/new?community=".concat(t.slug),content:o.M.t("Contribute"),className:"contribute-btn"}))),p.createElement(b.A.Description,{content:m()(t.metadata.description,{length:300})}))))}}])}(p.Component);N.propTypes={community:d().object.isRequired,defaultLogo:d().string.isRequired,className:d().string,showUploadBtn:d().bool},N.defaultProps={className:"",showUploadBtn:!0};const x=f.default.component("InvenioCommunities.CarouselItem",N)},92287:(e,t,n)=>{n.d(t,{A:()=>R});var a=n(10467),r=n(23029),l=n(92901),i=n(56822),s=n(53954),o=n(85501),c=n(64467),m=n(54756),u=n.n(m),d=n(38102),p=n(62193),h=n.n(p),f=n(5556),b=n.n(f),v=n(96540),A=n(81057),g=n(53196),E=n(27089),y=n(1489),C=n(27041),w=n(23848),N=n(24941),x=n(76217),k=n(80124),L=n(87115);function P(e,t,n){return t=(0,s.A)(t),(0,i.A)(e,D()?Reflect.construct(t,n||[],(0,s.A)(e).constructor):t.apply(e,n))}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}var I=function(e){function t(e){var n;return(0,r.A)(this,t),n=P(this,t,[e]),(0,c.A)(n,"getDataIndex",(function(e){var t=n.props.itemsPerPage,a=n.state.data.hits,r=e*parseInt(t);return r>a.length-1?0:r<0?a.length-1:r})),(0,c.A)(n,"runCarousel",function(){var e=(0,a.A)(u().mark((function e(t){var a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.activeIndex,r=t<a?"right":"left",e.next=4,n.setState({animationDirection:r});case 4:n.setState({activeIndex:n.getDataIndex(t)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.A)(n,"setCarouselTimer",(function(){var e=n.state,t=e.data.hits,a=e.activeIndex,r=n.props.intervalDelay;n.setState({carouselTimer:setInterval((function(){t&&n.runCarousel(a+1)}),r)})})),(0,c.A)(n,"stopCarousel",(function(){var e=n.state.carouselTimer;clearInterval(e)})),(0,c.A)(n,"startCarousel",(function(){n.setCarouselTimer()})),(0,c.A)(n,"fetchData",(0,a.A)(u().mark((function e(){var t,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.fetchUrl,n.cancellableFetch=(0,A.withCancel)(A.http.get(t)),e.prev=2,e.next=5,n.cancellableFetch.promise;case 5:a=e.sent,n.setState({data:a.data.hits}),n.setCarouselTimer(),n.setState({isLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),n.setState({isLoading:!1});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))),(0,c.A)(n,"renderPlaceholder",(function(){var e=n.props.title;return v.createElement(E.A,{fluid:!0,className:"rel-pt-2 rel-pb-2 ml-0-mobile mr-0-mobile"},v.createElement(y.A,{container:!0,className:"carousel-header-container"},v.createElement(y.A.Column,{width:"2"}),v.createElement(y.A.Column,{width:"12"},v.createElement(C.A,{as:"h2",className:"rel-mb-1"},e)),v.createElement(y.A.Column,{width:"2"})),v.createElement(y.A,{container:!0,className:"carousel-items-container"},v.createElement(y.A.Column,{width:"2"}),v.createElement(y.A.Column,{width:"12"},v.createElement(w.A.Group,null,v.createElement(w.A,null,v.createElement(w.A.Image,null,v.createElement(N.A,null,v.createElement(N.A.Image,{square:!0}))),v.createElement(w.A.Content,null,v.createElement(w.A.Header,{className:"mt-5 rel-mb-2"},v.createElement(N.A,null,v.createElement(N.A.Header,null,v.createElement(N.A.Line,null)))),v.createElement(w.A.Description,null,v.createElement(N.A,null,v.createElement(N.A.Paragraph,null,v.createElement(N.A.Line,null),v.createElement(N.A.Line,null),v.createElement(N.A.Line,null)))))))),v.createElement(y.A.Column,{width:"2"})))})),(0,c.A)(n,"carouselSlides",(function(){var e,t=n.state,a=t.data,r=t.activeIndex,l=n.props,i=l.defaultLogo,s=l.itemsPerPage,o=l.showUploadBtn,c=parseInt(r)+parseInt(s);return null===(e=a.hits)||void 0===e?void 0:e.slice(r,c).map((function(e){return v.createElement(L.A,{community:e,defaultLogo:i,key:e.id,showUploadBtn:o})}))})),n.state={data:{hits:[]},activeIndex:0,animationDirection:"left",carouselTimer:null,isLoading:!0},n}return(0,o.A)(t,e),(0,l.A)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){this.cancellableFetch&&this.cancellableFetch.cancel(),this.stopCarousel()}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.animationDirection,r=t.activeIndex,l=t.isLoading,i=this.props,s=i.title,o=i.animationSpeed,c=i.itemsPerPage;return v.createElement(g.default,{id:"InvenioCommunities.CommunitiesCarousel.layout",data:n,animationDirection:a,activeIndex:r,title:s,animationSpeed:o,carouselSlides:this.carouselSlides(),stopCarousel:this.stopCarousel,startCarousel:this.startCarousel,runCarousel:this.runCarousel,itemsPerPage:c},v.createElement(v.Fragment,null,l&&this.renderPlaceholder(),!l&&!h()(n.hits)&&v.createElement(E.A,{fluid:!0,className:"carousel rel-pt-2 rel-pb-2 ml-0-mobile mr-0-mobile"},v.createElement(y.A,{container:!0,className:"rel-mb-0"},v.createElement(y.A.Column,{width:"2"}),v.createElement(y.A.Column,{width:"12"},v.createElement(C.A,{as:"h2"},s)),v.createElement(y.A.Column,{width:"2"})),v.createElement(y.A,{container:!0,onFocus:this.stopCarousel,onBlur:this.startCarousel},v.createElement(y.A.Column,{width:"2",className:"pr-0",verticalAlign:"middle",textAlign:"left"},v.createElement(x.A,{className:"carousel-arrow",inverted:!0,role:"button",name:"angle left",size:"huge","aria-label":d.M.t("Previous slide"),onClick:function(){return e.runCarousel(r-1)},onKeyDown:function(t){return"Enter"===t.key&&e.runCarousel(r-1)},tabIndex:"0"})),v.createElement(y.A.Column,{width:"12"},v.createElement(k.A.Group,{as:w.A.Group,className:"flex align-items-center justify-center",duration:o,animation:"carousel-slide ".concat(a),directional:!0},this.carouselSlides())),v.createElement(y.A.Column,{width:"2",className:"pl-0",verticalAlign:"middle",textAlign:"right"},v.createElement(x.A,{className:"carousel-arrow",inverted:!0,role:"button",name:"angle right",size:"huge","aria-label":d.M.t("Next slide"),onClick:function(){return e.runCarousel(r+1)},onKeyDown:function(t){return"Enter"===t.key&&e.runCarousel(r+1)},tabIndex:"0"}))))))}}])}(v.Component);I.propTypes={title:b().string.isRequired,fetchUrl:b().string.isRequired,intervalDelay:b().number.isRequired,animationSpeed:b().number.isRequired,defaultLogo:b().string.isRequired,itemsPerPage:b().string.isRequired,showUploadBtn:b().bool},I.defaultProps={showUploadBtn:!0};const R=g.default.component("InvenioCommunities.CommunitiesCarousel",I)},66111:(e,t,n)=>{n.d(t,{A:()=>N});var a=n(10467),r=n(23029),l=n(92901),i=n(56822),s=n(53954),o=n(85501),c=n(64467),m=n(54756),u=n.n(m),d=n(96540),p=n(81057),h=n(6549),f=n(27089),b=n(87395),v=n(1489),A=n(33011),g=n(5556),E=n.n(g),y=n(38102);function C(e,t,n){return t=(0,s.A)(t),(0,i.A)(e,w()?Reflect.construct(t,n||[],(0,s.A)(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var N=function(e){function t(e){var n;return(0,r.A)(this,t),n=C(this,t,[e]),(0,c.A)(n,"fetchData",(0,a.A)(u().mark((function e(){var t,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),n.cancellableFetch=(0,p.withCancel)(p.http.get("/api/communities/featured")),e.prev=2,e.next=5,n.cancellableFetch.promise;case 5:t=e.sent,n.setState({data:t.data.hits,isLoading:!1}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),a=e.t0.message,e.t0.response&&(a=e.t0.response.data.message),n.setState({error:a,isLoading:!1});case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))),n.state={data:void 0,error:void 0,isLoading:!1},n}return(0,o.A)(t,e),(0,l.A)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){this.cancellableFetch&&this.cancellableFetch.cancel()}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.error,a=e.isLoading,r=this.props,l=r.columnNumber,i=r.widescreenColumnWidth,s=r.mobileColumnWidth,o=r.tabletColumnWidth,c=r.computerColumnWidth;return a?d.createElement(h.A,{active:!0,inline:"centered"}):n?d.createElement(f.A,null,d.createElement(b.A,{negative:!0},d.createElement(b.A.Header,null,y.M.t("An error occurred.")),d.createElement("p",null,n))):null!==t&&void 0!==t&&t.hits?d.createElement(v.A,{className:"featured-communities",columns:l,centered:!0},t.hits.map((function(e){return d.createElement(A.A,{key:e.id,community:e,mobileColumnWidth:s,tabletColumnWidth:o,computerColumnWidth:c,widescreenColumnWidth:i})}))):""}}])}(d.Component);N.propTypes={columnNumber:E().string.isRequired,mobileColumnWidth:E().string.isRequired,tabletColumnWidth:E().string.isRequired,computerColumnWidth:E().string.isRequired,widescreenColumnWidth:E().string.isRequired}},33011:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(23029),r=n(92901),l=n(56822),i=n(53954),s=n(85501),o=n(96540),c=n(1489),m=n(2685),u=n(27041),d=n(5556),p=n.n(d),h=n(81057),f=n(16767),b=n.n(f);function v(e,t,n){return t=(0,i.A)(t),(0,l.A)(e,A()?Reflect.construct(t,n||[],(0,i.A)(e).constructor):t.apply(e,n))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var g=function(e){function t(){return(0,a.A)(this,t),v(this,t,arguments)}return(0,s.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.computerColumnWidth,n=e.mobileColumnWidth,a=e.tabletColumnWidth,r=e.widescreenColumnWidth,l=e.community,i=l.links.self_html.replace("communities","collections"),s=b().generate(l.slug);return o.createElement(c.A.Column,{mobile:n,tablet:a,widescreen:r,computer:t,textAlign:"center"},o.createElement(m.A,{compact:!0,className:"m-auto"},o.createElement("a",{href:i},o.createElement("div",{className:"featured-community"},o.createElement(h.Image,{className:"m-auto",src:l.links.logo,fallbackSrc:s.toDataUri()}),o.createElement(u.A,{as:"h3"},l.metadata.title)))))}}])}(o.Component);g.propTypes={computerColumnWidth:p().number.isRequired,mobileColumnWidth:p().number.isRequired,tabletColumnWidth:p().number.isRequired,widescreenColumnWidth:p().number.isRequired,community:p().object.isRequired}},99375:(e,t,n)=>{var a=n(64467),r=n(86763),l=n(5905),i=n(53196),s=(n(87115),n(92287),n(66111),n(33011),n(41274)),o=n(96540),c=n(5556),m=n.n(c),u=n(70742),d=n(92516),p=n.n(d),h=n(81057),f=n(23848),b=n(28085),v=n(76217),A=n(53017),g=n(16767),E=n.n(g),y=function(e){var t,n,a=e.result,r=e.actions,l=e.extraLabels,i=e.itemClassName,s=e.showPermissionLabel,c=e.detailUrl,m=e.isCommunityDefault,d=a.metadata,g=a.ui,y=a.links,C=a.access,w=a.id,N=null===g||void 0===g||null===(t=g.type)||void 0===t?void 0:t.title_l10n,x=E().generate(a.slug);return o.createElement(f.A,{key:w,className:"community-item tablet computer only display-grid auto-column-grid no-wrap ".concat(i)},o.createElement("div",{className:"flex align-items-center"},o.createElement(h.Image,{wrapped:!0,size:"tiny",src:y.logo,alt:"",className:"community-image rel-mr-2",fallbackSrc:x.toDataUri()}),o.createElement("div",null,o.createElement("div",{className:"flex align-items-center rel-mb-1"},o.createElement("a",{href:(c||y.self_html).replace("communities","collections"),className:"ui small header truncate-lines-2 m-0 mr-5",target:"_blank",rel:"noreferrer","aria-label":"".concat(d.title," (").concat(u.M.t("opens in new tab"),")")},d.title),o.createElement("i",{className:"small icon external primary","aria-hidden":"true"})),d.description&&o.createElement("p",{className:"truncate-lines-1 text size small text-muted mt-5 rel-mb-1"},p()(d.description,{length:50})),o.createElement("div",{className:"rel-mt-1"},("restricted"===a.access.visibility||N||l)&&o.createElement(o.Fragment,null,o.createElement(A.Q,{access:C.visibility}),o.createElement(A.k,{type:N}),l),m&&o.createElement(b.A,{color:"purple",size:"tiny"},o.createElement(v.A,{name:"paint brush"}),u.M.t("Branding"))))),o.createElement("div",{className:"flex align-items-center justify-end"},s&&o.createElement("span",{className:"rel-mr-1"},(null===g||void 0===g||null===(n=g.permissions)||void 0===n?void 0:n.can_include_directly)&&o.createElement(h.InvenioPopup,{popupId:"direct-publish-info-popup",size:"small",trigger:o.createElement(v.A,{name:"paper plane outline neutral",size:"large"}),ariaLabel:u.M.t("Submission information"),content:u.M.t("Submission to this community does not require review, and will be published immediately.")})),r))};y.propTypes={result:m().object.isRequired,actions:m().node,extraLabels:m().node,itemClassName:m().string,showPermissionLabel:m().bool,detailUrl:m().string,isCommunityDefault:m().bool.isRequired},y.defaultProps={actions:void 0,extraLabels:void 0,itemClassName:"",showPermissionLabel:!1,detailUrl:void 0};var C=function(e){var t,n,a=e.result,r=e.actions,l=e.extraLabels,i=e.itemClassName,s=e.showPermissionLabel,c=e.detailUrl,m=e.isCommunityDefault,d=null===(t=a.ui)||void 0===t||null===(t=t.type)||void 0===t?void 0:t.title_l10n,f=a.metadata,g=a.ui,y=a.links,C=a.access,w=a.id,N=E().generate(a.slug);return o.createElement("div",{key:w,className:"community-item mobile only ".concat(i)},o.createElement("div",{className:"display-grid auto-column-grid no-wrap"},o.createElement("div",{className:"flex align-items-center"},o.createElement(h.Image,{wrapped:!0,size:"mini",src:y.logo,alt:"",className:"community-image rel-mr-1",fallbackSrc:N.toDataUri()}),o.createElement("div",{className:"flex align-items-center rel-mb-1"},o.createElement("a",{href:c||y.self_html.replace("communities","collections"),className:"ui small header truncate-lines-2 m-0 mr-5",target:"_blank",rel:"noreferrer","aria-label":"".concat(f.title," (").concat(u.M.t("opens in new tab"),")")},f.title),o.createElement("i",{className:"small icon external primary","aria-hidden":"true"}))),o.createElement("div",{className:"flex align-items-center justify-end"},s&&o.createElement("span",{className:"rel-mr-1"},(null===g||void 0===g||null===(n=g.permissions)||void 0===n?void 0:n.can_include_directly)&&o.createElement(h.InvenioPopup,{popupId:"direct-publish-info-popup",size:"small",trigger:o.createElement(v.A,{name:"paper plane outline neutral",size:"large"}),ariaLabel:u.M.t("Submission information"),content:u.M.t("Submission to this community does not require review, and will be published immediately.")})),r)),o.createElement("div",{className:"full-width"},f.description&&o.createElement("p",{className:"truncate-lines-1 text size small text-muted mt-5 rel-mb-1"},p()(f.description,{length:50})),o.createElement("div",{className:"rel-mt-1"},("restricted"===a.access.visibility||d||l)&&o.createElement(o.Fragment,null,o.createElement(A.Q,{access:C.visibility}),o.createElement(A.k,{type:d}),l),m&&o.createElement(b.A,{color:"purple",size:"tiny"},o.createElement(v.A,{name:"paint brush"}),u.M.t("Branding")))))};function w(e){var t=e.result,n=e.actions,a=e.extraLabels,r=e.itemClassName,l=e.showPermissionLabel,i=e.detailUrl,s=e.isCommunityDefault;return o.createElement(o.Fragment,null,o.createElement(y,{result:t,actions:n,extraLabels:a,itemClassName:r,showPermissionLabel:l,detailUrl:i,isCommunityDefault:s}),o.createElement(C,{result:t,actions:n,extraLabels:a,itemClassName:r,showPermissionLabel:l,detailUrl:i,isCommunityDefault:s}))}C.propTypes={result:m().object.isRequired,extraLabels:m().node,itemClassName:m().string,showPermissionLabel:m().bool,actions:m().node,detailUrl:m().string,isCommunityDefault:m().bool.isRequired},C.defaultProps={actions:void 0,extraLabels:void 0,itemClassName:"",showPermissionLabel:!1,detailUrl:void 0},w.propTypes={result:m().object.isRequired,actions:m().node,extraLabels:m().node,itemClassName:m().string,showPermissionLabel:m().bool,detailUrl:m().string,isCommunityDefault:m().bool.isRequired},w.defaultProps={actions:void 0,extraLabels:void 0,itemClassName:"",showPermissionLabel:!1,detailUrl:void 0};var N=n(30612);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L="InvenioCommunities.Search",P=(0,i.parametrize)(l.rn,{help:!1}),D=(0,i.parametrize)(N._I,{appName:L}),I=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},"".concat(L,".BucketAggregation.element"),l.Ox),"".concat(L,".BucketAggregationValues.element"),l.O6),"".concat(L,".SearchApp.facets"),P),"".concat(L,".ResultsList.item"),s.z),"".concat(L,".ResultsGrid.item"),N.AV),"".concat(L,".SearchApp.layout"),D),"".concat(L,".SearchBar.element"),N.z3),"".concat(L,".SearchApp.results"),N.iU),R=i.overrideStore.getAll();(0,r.U)(k(k({},I),R),!0,"invenio-search-config",!0)}},e=>{e.O(0,[402,1057,7655,5373,6267,9777,5941,7501,4218,8010,73,6767,8102,742,6528,3532,1751,226,5580,5167],(()=>{return t=99375,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=invenio-communities-search-custom.6313c5be1f936638e03e.js.map