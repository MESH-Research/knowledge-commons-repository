"use strict";(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[6367],{27919:(e,t,n)=>{n.d(t,{F:()=>f,U:()=>v});var r=n(23029),o=n(92901),a=n(56822),l=n(53954),c=n(85501),i=n(28626),s=n(96540),u=n(5556),d=n.n(u);function m(e,t,n){return t=(0,l.A)(t),(0,a.A)(e,p()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}var f=s.createContext({api:void 0}),v=function(e){function t(e){var n;(0,r.A)(this,t),n=m(this,t,[e]);var o=e.community;return n.apiClient=new i.D(o),n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props.children;return s.createElement(f.Provider,{value:{api:this.apiClient}},e)}}])}(s.Component);v.propTypes={community:d().object.isRequired,children:d().node.isRequired}},28626:(e,t,n)=>{n.d(t,{D:()=>A});var r=n(10467),o=n(23029),a=n(92901),l=n(64467),c=n(54756),i=n.n(c),s=n(12944),u=n(81057),d=n(64483);function m(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function p(e,t){return e.get(f(e,t))}function f(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var v=new WeakMap,h=new WeakMap,A=function(){return(0,a.A)((function e(t){var n,a,c,A=this,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.V;(0,o.A)(this,e),m(this,v,void 0),(0,l.A)(this,"getMembers",(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.http.get(A.endpoint);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),(0,l.A)(this,"removeMemberBase",function(){var e=(0,r.A)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.http.delete(A.endpoint,{data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.A)(this,"removeMember",function(){var e=(0,r.A)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.type,r=t.id,o={members:[{type:n,id:r}]},e.abrupt("return",A.removeMemberBase(o));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.A)(this,"bulkRemoveMembers",function(){var e=(0,r.A)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,d.Ws)(t),e.abrupt("return",A.removeMemberBase({members:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m(this,h,function(){var e=(0,r.A)(i().mark((function e(t){var n,r,o,a,l=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(l.length>1&&void 0!==l[1]?l[1]:{}).refresh,r=void 0!==n&&n,o=new URL(A.endpoint),(a=o.searchParams).delete("refresh"),r&&a.set("refresh",r),o.search=a.toString(),e.next=8,u.http.put(o.toString(),t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.A)(this,"updateRole",function(){var e=(0,r.A)(i().mark((function e(t,n){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,d.Ws)([t]),o={members:r,role:n},e.next=4,p(h,A).call(A,o);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,l.A)(this,"updateVisibility",function(){var e=(0,r.A)(i().mark((function e(t,n){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,d.Ws)([t]),o={members:r,visible:n},e.next=4,p(h,A).call(A,o);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,l.A)(this,"bulkUpdateRoles",(function(e,t){var n={members:(0,d.Ws)(e),role:t};return p(h,A).call(A,n,{refresh:!0})})),(0,l.A)(this,"bulkUpdateVisibilities",(function(e,t){var n={members:(0,d.Ws)(e),visible:t};return p(h,A).call(A,n,{refresh:!0})})),n=v,a=this,c=new b(t),n.set(f(n,a),c)}),[{key:"endpoint",get:function(){return p(v,this).membersUrl}}])}()},15094:(e,t,n)=>{n.d(t,{t:()=>c});var r=n(58168),o=n(96540),a=n(92257),l=n(38102),c=(0,n(98871).Q2)((function(e){var t=e.placeholder,n=e.queryString,c=e.onInputChange,i=e.updateQueryState,s=e.uiProps,u=t||l.M.t("Search in members ...");return o.createElement(a.A,(0,r.A)({action:{icon:"search",onClick:function(){i({queryString:n})},className:"search",title:l.M.t("Search")},fluid:!0,placeholder:u,onChange:function(e,t){var n=t.value;c(n)},value:n,onKeyPress:function(e){"Enter"===e.key&&i({queryString:n})}},s))}))},45373:(e,t,n)=>{n.d(t,{A:()=>g,_:()=>C});var r=n(10467),o=n(23029),a=n(92901),l=n(56822),c=n(53954),i=n(85501),s=n(64467),u=n(54756),d=n.n(u),m=n(38102),p=n(96540),f=n(53196),v=n(48423),h=n(3487),A=n(29889),b=n(16311);function y(e,t,n){return t=(0,c.A)(t),(0,l.A)(e,M()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}var C={leave:1,remove:2},E=function(e){function t(e){var n;return(0,o.A)(this,t),n=y(this,t,[e]),(0,s.A)(n,"onActionHandler",(0,r.A)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.context.modalAction,n.setState({loading:!0}),e.prev=2,e.next=5,t();case 5:n.onCloseHandler(),window.location.reload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.setState({error:e.t0,loading:!1});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))),(0,s.A)(n,"onCloseHandler",(function(){var e=n.context.closeModal;n.setState({error:"",loading:!1},(function(){return e()}))})),n.state={error:"",loading:!1},n.contentMap=(0,s.A)((0,s.A)({},C.leave,{headerText:m.M.t("Leave community"),bodyText:m.M.t("You are about to leave this community."),buttonText:m.M.t("Leave"),buttonIcon:"log out"}),C.remove,{headerText:m.M.t("Remove user"),bodyText:m.M.t("You are about to remove this user from this community."),buttonText:m.M.t("Remove"),buttonIcon:"user delete"}),n}return(0,i.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,n=e.error,r=this.context,o=r.modalOpen,a=r.modalMode,l=this.contentMap[a];return p.createElement(f.default,{id:"InvenioCommunities.RemoveMemberModal.layout",modalOpen:o,modalMode:a,modalAction:this.onActionHandler,closeModal:this.onCloseHandler,contentMap:this.contentMap},p.createElement(v.A,{open:o,role:"dialog","aria-label":m.M.t("Remove user")},p.createElement(v.A.Header,null,null===l||void 0===l?void 0:l.headerText),p.createElement(v.A.Content,null,null===l||void 0===l?void 0:l.bodyText," ",p.createElement("br",null),p.createElement("b",null,m.M.t("This action cannot be undone.")),n&&p.createElement(A.K,{error:n})),p.createElement(v.A.Actions,null,p.createElement(h.A,{content:m.M.t("Cancel"),loading:t,onClick:this.onCloseHandler,floated:"left",icon:"cancel",labelPosition:"left"}),p.createElement(h.A,{negative:!0,content:null===l||void 0===l?void 0:l.buttonText,loading:t,onClick:this.onActionHandler,icon:null===l||void 0===l?void 0:l.buttonIcon,labelPosition:"left"}))))}}])}(p.Component);(0,s.A)(E,"contextType",b.V);const g=f.default.component("RemoveMemberModal",E)},67844:(e,t,n)=>{n.d(t,{X:()=>r});var r=n(96540).createContext({bulkActionContext:{},addToSelected:function(){},allSelected:!1,setAllSelected:function(){},selectedCount:0})},16311:(e,t,n)=>{n.d(t,{V:()=>o,i:()=>v});var r=n(96540),o=r.createContext({closeModal:function(){},openModal:function(){},modalMode:null,modalAction:null,modalOpen:!1}),a=n(23029),l=n(92901),c=n(56822),i=n(53954),s=n(85501),u=n(64467),d=n(5556),m=n.n(d);function p(e,t,n){return t=(0,i.A)(t),(0,c.A)(e,f()?Reflect.construct(t,n||[],(0,i.A)(e).constructor):t.apply(e,n))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}var v=function(e){function t(e){var n;return(0,a.A)(this,t),n=p(this,t,[e]),(0,u.A)(n,"openModal",(function(e){var t=e.modalAction,r=e.modalMode;n.setState({modalOpen:!0,modalAction:t,modalMode:r})})),(0,u.A)(n,"closeModal",(function(){n.setState({modalOpen:!1})})),n.state={modalMode:null,modalAction:null,modalOpen:!1},n}return(0,s.A)(t,e),(0,l.A)(t,[{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.modalMode,a=t.modalAction,l=t.modalOpen;return r.createElement(o.Provider,{value:{closeModal:this.closeModal,openModal:this.openModal,modalMode:n,modalAction:a,modalOpen:l}},e)}}])}(r.Component);v.propTypes={children:m().node.isRequired}},62660:(e,t,n)=>{n.d(t,{E:()=>m});var r=n(96540),o=n(1489),a=n(98871),l=n(38102),c=n(16311),i=n(45373),s=n(5556),u=n.n(s),d=n(52822),m=function(e){var t=e.paginationOptions,n=e.currentResultsState.data.total;return n&&r.createElement(o.A,null,r.createElement(o.A.Row,null,r.createElement(o.A.Column,{width:16},r.createElement(o.A,null,r.createElement(o.A.Row,null,r.createElement(o.A.Column,null,r.createElement(c.i,null,r.createElement(a.dy,null),r.createElement(i.A,null))))))),r.createElement(o.A.Row,{verticalAlign:"middle"},r.createElement(o.A.Column,{width:4},r.createElement(a.y_,{label:function(){return r.createElement(r.Fragment,null,n," ",l.M.t("result(s) found"))}})),r.createElement(o.A.Column,{width:8,textAlign:"center"},r.createElement(a.dK,{options:{size:"mini",showFirst:!1,showLast:!1}})),r.createElement(o.A.Column,{textAlign:"right",width:4},r.createElement(a.RZ,{values:t.resultsPerPage,label:function(e){return r.createElement(d.x,{key:"communitiesMembersResult",count:e},e," results per page")}}))))};m.propTypes={paginationOptions:u().object.isRequired,currentResultsState:u().object.isRequired}},12152:(e,t,n)=>{n.d(t,{L:()=>c});var r=n(96540),o=n(83794),a=n(5556),l=n.n(a);function c(e){var t=e.result;return r.createElement(o.A,{fluid:!0,href:"/members/".concat(t.id)},r.createElement(o.A.Content,null,r.createElement(o.A.Header,null,t.member.name),r.createElement(o.A.Description,null,r.createElement("div",{className:"truncate-lines-1"},t.member.description))))}c.propTypes={result:l().object.isRequired}},14673:(e,t,n)=>{n.d(t,{S:()=>o});var r=n(38102),o=[{name:"public",visible:!0,title:r.M.t("Public"),description:r.M.t("Your community membership is visible to everyone.")},{name:"hidden",visible:!1,title:r.M.t("Hidden"),description:r.M.t("Your community membership is only visible to other members of the community.")}]},71431:(e,t,n)=>{n.d(t,{f:()=>I});var r=n(23029),o=n(92901),a=n(56822),l=n(53954),c=n(85501),i=n(64467),s=n(38102),u=n(55808),d=n.n(u),m=n(91272),p=n(5556),f=n.n(p),v=n(96540),h=n(81057),A=n(53959),b=n(1489),y=n(23848),M=n(28085),C=n(3487),E=n(27919),g=n(67844),k=n(50363),R=n(80631),x=n.n(R);function S(e,t,n){return t=(0,l.A)(t),(0,a.A)(e,w()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var O=function(e){function t(e){var n;return(0,r.A)(this,t),n=S(this,t,[e]),(0,i.A)(n,"isChecked",(function(e,t){var r=n.props.rowId;return!(!x()(e,"".concat(r))&&!t)&&e[r].selected})),(0,i.A)(n,"subscribeToContext",(function(){var e=n.props,t=e.rowId,r=e.data,o=n.context,a=o.allSelected,l=o.bulkActionContext;x()(l,"".concat(t))||(l[t]={selected:a,data:r})})),(0,i.A)(n,"handleOnChange",(function(){var e=n.context.addToSelected,t=n.props,r=t.rowId,o=t.data,a=n.state.isChecked;n.setState({isChecked:!a}),e(r,o)})),n.state={isChecked:!1},n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"componentDidMount",value:function(){this.subscribeToContext();var e=this.context,t=e.bulkActionContext,n=e.allSelected;this.setState({isChecked:this.isChecked(t,n)})}},{key:"render",value:function(){var e=this.context,t=e.bulkActionContext,n=e.allSelected;return v.createElement(k.A,{className:"mt-auto mb-auto ",checked:this.isChecked(t,n)||n,onChange:this.handleOnChange,"aria-label":s.M.t("Select member")})}}])}(v.Component);(0,i.A)(O,"contextType",g.X),O.propTypes={rowId:f().string.isRequired,data:f().object.isRequired};var T=n(20640),_=n(16311),j=n(45373);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t=(0,l.A)(t),(0,a.A)(e,V()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V=function(){return!!e})()}var I=function(e){function t(e){var n;(0,r.A)(this,t),n=q(this,t,[e]),(0,i.A)(n,"updateMemberRole",(function(e,t){var r=n.state.result;n.setState({result:B(B({},r),{role:t})})})),(0,i.A)(n,"updateMemberVisibility",(function(e,t){var r=n.state.result,o=!!t,a=r.is_current_user,l=o||a,c=B(B({},r.permissions),{},{can_update_visible:l});n.setState({result:B(B({},r),{},{visible:t,permissions:c})})})),(0,i.A)(n,"openLeaveOrRemoveModal",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.result,o=n.context.api,a=r.member;e({modalMode:t?j._.remove:j._.leave,modalAction:function(){return o.removeMember(a)}})}));var o=e.result;return n.state={result:o},n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e,t=this,n=this.props.config,r=this.state.result,o=this.context.api,a=(e=r.created,m.DateTime.fromISO(e).setLocale(s.M.language).toRelative()),l=r.visible?s.M.t("Public"):s.M.t("Hidden");return v.createElement(A.A.Row,null,v.createElement(A.A.Cell,null,v.createElement(b.A,{textAlign:"left",verticalAlign:"middle"},v.createElement(b.A.Column,null,v.createElement(y.A,{className:r.is_current_user?"flex align-no-checkbox":"flex",key:r.id},!r.is_current_user&&v.createElement(O,{rowId:r.id,data:r}),v.createElement(h.Image,{src:r.member.avatar,avatar:!0,className:r.is_current_user?"":"rel-ml-1"}),v.createElement(y.A.Content,{className:"ml-10"},v.createElement(y.A.Header,{className:"flex align-items-center ".concat(r.member.description?"":"mt-5")},v.createElement("b",{className:"mr-10"},r.member.name),"group"===r.member.type&&v.createElement(M.A,{size:"tiny",className:"mr-10"},s.M.t("Group")),r.is_current_user&&v.createElement(M.A,{size:"tiny",className:"primary"},s.M.t("You"))),r.member.description&&v.createElement(y.A.Meta,null,v.createElement("div",{className:"truncate-lines-1"},r.member.description))))))),v.createElement(A.A.Cell,{"aria-label":s.M.t("Member since")+" "+a,"data-label":s.M.t("Member since")},a),v.createElement(A.A.Cell,{"aria-label":s.M.t("Visibility")+" "+l,"data-label":s.M.t("Visibility")},r.permissions.can_update_visible?v.createElement(T.o,{visibilityTypes:n.visibility,successCallback:this.updateMemberVisibility,action:o.updateVisibility,currentValue:r.visible,resource:r,label:s.M.t("Visibility")+" "+l}):l),v.createElement(A.A.Cell,{"data-label":s.M.t("Role")},r.permissions.can_update_role?v.createElement(T._,{roles:n.rolesCanUpdate,successCallback:this.updateMemberRole,action:o.updateRole,currentValue:r.role,resource:r,label:s.M.t("Role")+" "+r.role}):d()(r.role)),v.createElement(_.V.Consumer,null,(function(e){var n=e.openModal;return v.createElement(A.A.Cell,{"data-label":s.M.t("Actions")},v.createElement("div",null,r.permissions.can_leave&&v.createElement(C.A,{negative:!0,size:"tiny",labelPosition:"left",icon:"log out",fluid:!0,className:"fluid-computer-only",compact:!0,content:s.M.t("Leave..."),onClick:function(){return t.openLeaveOrRemoveModal(n,!1)}}),r.permissions.can_delete&&v.createElement(C.A,{size:"tiny",labelPosition:"left",icon:"user delete",fluid:!0,className:"fluid-computer-only",compact:!0,content:s.M.t("Remove..."),onClick:function(){return t.openLeaveOrRemoveModal(n,!0)}})))})))}}])}(v.Component);(0,i.A)(I,"contextType",E.F),I.propTypes={result:f().object.isRequired,config:f().object.isRequired}},1798:(e,t,n)=>{n.d(t,{K:()=>k});var r=n(23029),o=n(92901),a=n(56822),l=n(53954),c=n(85501),i=n(27919),s=n(80296),u=n(64467),d=n(67844),m=n(96540),p=n(53196),f=n(80631),v=n.n(f),h=n(5556),A=n.n(h);function b(e,t,n){return t=(0,l.A)(t),(0,a.A)(e,y()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var M=function(e){function t(e){var n;return(0,r.A)(this,t),n=b(this,t,[e]),(0,u.A)(n,"addToSelected",(function(e,t){var r=n.state.selectedCount;if(v()(n.selected,"".concat(e))?n.selected[e].selected=!n.selected[e].selected:(n.selected[e].selected=!0,n.selected[e].data=t),n.selected[e].selected){var o=r+1;n.setSelectedCount(o),Object.keys(n.selected).length===o&&n.setAllSelected(!0)}else n.setAllSelected(!1),n.setSelectedCount(r-1)})),(0,u.A)(n,"setSelectedCount",(function(e){n.setState({selectedCount:e})})),(0,u.A)(n,"setAllSelected",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.setState({allSelected:e}),t){for(var r=0,o=Object.entries(n.selected);r<o.length;r++){var a=(0,s.A)(o[r],1)[0];n.selected[a].selected=e}e?n.setSelectedCount(Object.keys(n.selected).length):n.setSelectedCount(0)}})),n.selected={},n.state={allSelected:!1,selectedCount:0},n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.allSelected,r=t.selectedCount;return m.createElement(p.default,{id:"InvenioCommunities.SearchResultsBulkActionsManager.layout"},m.createElement(d.X.Provider,{value:{bulkActionContext:this.selected,addToSelected:this.addToSelected,setAllSelected:this.setAllSelected,allSelected:n,selectedCount:r}},e))}}])}(m.Component);M.contextType=d.X,M.propTypes={children:A().node.isRequired};const C=p.default.component("SearchResultsBulkActionsManager",M);function E(e,t,n){return t=(0,l.A)(t),(0,a.A)(e,g()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}var k=function(e){function t(){return(0,r.A)(this,t),E(this,t,arguments)}return(0,c.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.community;return m.createElement(C,null,m.createElement(i.U,{community:n},t))}}])}(m.Component);k.propTypes={community:A().object.isRequired,children:A().node.isRequired}}}]);
//# sourceMappingURL=6367.d5d7f9892fe18e34b9e3.js.map