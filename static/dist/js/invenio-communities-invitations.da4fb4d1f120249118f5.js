"use strict";(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[1446],{30085:(e,t,n)=>{var r=n(64467),a=n(86763),l=n(53196),i=n(5905),o=n(25315),c=n(23029),s=n(92901),u=n(56822),m=n(53954),p=n(85501),d=n(38102),y=n(91272),E=n(5556),f=n.n(E),v=n(96540),A=n(81057),b=n(53959),g=n(1489),h=n(23848),C=n(27089),R=n(20640),O=n(89263);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t=(0,m.A)(t),(0,u.A)(e,w()?Reflect.construct(t,n||[],(0,m.A)(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var I=function(e){function t(e){var n;(0,c.A)(this,t),n=S(this,t,[e]),(0,r.A)(n,"updateInvitation",(function(e,t){var r=n.state.invitation;n.setState({invitation:j(j({},r),{role:t})})}));var a=n.props.result;return n.state={invitation:a},n}return(0,p.A)(t,e),(0,s.A)(t,[{key:"render",value:function(){var e,t=this.props,n=t.config.rolesCanInvite,r=t.community,a=this.state,l=a.invitation,i=l.member,o=l.request,c=a.invitation,s=this.context.api,u=n[i.type],m=(e=o.expires_at,y.DateTime.fromISO(e).setLocale(d.M.language).toRelative());return v.createElement(b.A.Row,{className:"community-member-item"},v.createElement(b.A.Cell,null,v.createElement(g.A,{textAlign:"left",verticalAlign:"middle"},v.createElement(g.A.Column,null,v.createElement(h.A,{className:"flex align-items-center",key:c.id},v.createElement(A.Image,{src:i.avatar,avatar:!0,circular:!0,className:"mr-10"}),v.createElement(h.A.Content,null,v.createElement(h.A.Header,{size:"small",as:"b"},v.createElement("a",{href:"/communities/".concat(r.slug,"/requests/").concat(o.id)},i.name)),i.description&&v.createElement(h.A.Meta,null,v.createElement("div",{className:"truncate-lines-1"},i.description))))))),v.createElement(b.A.Cell,{"data-label":d.M.t("Status")},v.createElement(O.A,{status:o.status})),v.createElement(b.A.Cell,{"aria-label":d.M.t("Expires")+" "+m,"data-label":d.M.t("Expires")},m),v.createElement(b.A.Cell,{"data-label":d.M.t("Role")},v.createElement(R._,{roles:u,successCallback:this.updateInvitation,action:s.updateRole,disabled:!c.permissions.can_update_role,currentValue:c.role,resource:c,label:d.M.t("Role")+" "+c.role})),v.createElement(b.A.Cell,null,v.createElement(C.A,{fluid:!0,textAlign:"right"})))}}])}(v.Component);(0,r.A)(I,"contextType",o.m),I.propTypes={result:f().object.isRequired,config:f().object.isRequired,community:f().object.isRequired},I.defaultProps={};var P=n(98871),N=n(52822),x=function(e){var t=e.paginationOptions;return e.currentResultsState.data.total&&v.createElement(g.A,null,v.createElement(g.A.Row,null,v.createElement(g.A.Column,{width:16},v.createElement(P.dy,null))),v.createElement(g.A.Row,{verticalAlign:"middle"},v.createElement(g.A.Column,{width:8,textAlign:"right"},v.createElement(P.dK,{options:{size:"mini",showFirst:!1,showLast:!1}})),v.createElement(g.A.Column,{textAlign:"right",width:8},v.createElement(P.RZ,{values:t.resultsPerPage,label:function(e){return v.createElement(N.x,{key:"communitiesInvitationsResult",count:e},e," results per page")}}))))};x.propTypes={paginationOptions:f().object.isRequired,currentResultsState:f().object.isRequired};var k=n(28803),M=function(e){var t=e.results,n=e.rolesCanInvite,r=e.community,a=e.communityGroupsEnabled;return v.createElement(b.A,null,v.createElement(b.A.Header,null,v.createElement(b.A.Row,null,v.createElement(b.A.HeaderCell,{width:6},d.M.t("Name")),v.createElement(b.A.HeaderCell,{width:3},d.M.t("Status")),v.createElement(b.A.HeaderCell,{width:3},d.M.t("Expires")),v.createElement(b.A.HeaderCell,{width:3},d.M.t("Role")),v.createElement(b.A.HeaderCell,{width:1,textAlign:"right"},v.createElement(o.J,{community:r},v.createElement(k.Z,{rolesCanInvite:n,groupsEnabled:a,community:r,triggerButtonSize:"tiny"}))))),v.createElement(b.A.Body,null,t))};M.propTypes={results:f().array.isRequired,rolesCanInvite:f().object.isRequired,community:f().object.isRequired,communityGroupsEnabled:f().bool.isRequired};var B=n(58168),G=n(92257),D=function(e){var t=e.onBtnSearchClick,n=e.onInputChange,r=e.onKeyPress,a=e.queryString,l=e.uiProps;return v.createElement(G.A,(0,B.A)({className:"invitation-searchbar",action:{icon:"search",onClick:t,className:"search",title:d.M.t("Search")},fluid:!0,placeholder:d.M.t("Search in invitations..."),onChange:function(e,t){var r=t.value;n(r)},value:a,onKeyPress:r},l))};D.propTypes={onBtnSearchClick:f().func.isRequired,onInputChange:f().func.isRequired,onKeyPress:f().func.isRequired,queryString:f().string.isRequired,uiProps:f().object},D.defaultProps={uiProps:null};var J=n(43092),z=n(61234),F=n(10739),T=n(83211);function H(e,t,n){return t=(0,m.A)(t),(0,u.A)(e,_()?Reflect.construct(t,n||[],(0,m.A)(e).constructor):t.apply(e,n))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}var K=function(e){function t(){return(0,c.A)(this,t),H(this,t,arguments)}return(0,p.A)(t,e),(0,s.A)(t,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.roles,r=e.rolesCanInvite,a=e.community,l=e.communityGroupsEnabled,c=e.appName,s=new z.C(n).getInvitationFilters();return v.createElement(v.Fragment,null,v.createElement("div",{className:"auto-column-grid"},v.createElement("div",{className:"flex column-mobile"},v.createElement("div",{className:"mobile only rel-mb-1 flex align-items-center justify-space-between"},v.createElement(J.qh,{keepFiltersOnUpdate:!0}),v.createElement("div",null,v.createElement(o.J,{community:a},v.createElement(k.Z,{rolesCanInvite:r,groupsEnabled:l,community:a})))),v.createElement("div",{className:"tablet computer only only rel-mr-2"},v.createElement(J.qh,{keepFiltersOnUpdate:!0})),v.createElement(P.IW,{fluid:!0})),v.createElement("div",{className:"flex align-items-center column-mobile"},v.createElement("div",{className:"tablet only mr-5"},v.createElement(o.J,{community:a},v.createElement(k.Z,{rolesCanInvite:r,groupsEnabled:l,community:a}))),v.createElement("div",{className:"full-width flex align-items-center justify-end column-mobile"},v.createElement(T.i,{customFilters:s}),v.createElement(P.FU,{values:t.sortOptions})))),v.createElement("div",{className:"rel-mb-1"},v.createElement(F.k,{ignoreFilters:["is_open"]})),v.createElement(i.s9,{layoutOptions:t.layoutOptions,appName:c}))}}])}(v.Component);K.propTypes={config:f().object.isRequired,roles:f().array.isRequired,rolesCanInvite:f().object.isRequired,community:f().object.isRequired,communityGroupsEnabled:f().bool.isRequired,appName:f().string},K.defaultProps={appName:""};var Z=n(2685),L=n(27041),U=n(76217),Q=n(3487);function V(e,t,n){return t=(0,m.A)(t),(0,u.A)(e,W()?Reflect.construct(t,n||[],(0,m.A)(e).constructor):t.apply(e,n))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}var X=function(e){function t(){return(0,c.A)(this,t),V(this,t,arguments)}return(0,p.A)(t,e),(0,s.A)(t,[{key:"render",value:function(){var e=this.props,t=e.resetQuery,n=e.extraContent,r=e.queryString,a=e.community,l=e.communityGroupsEnabled,i=e.rolesCanInvite;return v.createElement(Z.A.Group,null,v.createElement(Z.A,{as:g.A,className:"computer only"},v.createElement(g.A.Column,{width:"13"}),v.createElement(g.A.Column,{width:"3"},v.createElement(o.J,{community:a},v.createElement(k.Z,{rolesCanInvite:i,groupsEnabled:l,community:a})))),v.createElement(Z.A,{placeholder:!0,textAlign:"center"},v.createElement(L.A,{icon:!0},v.createElement(U.A,{name:"search"}),d.M.t("No matching members found.")),r&&v.createElement("p",null,v.createElement("em",null,d.M.t("Current search"),' "',r,'"')),v.createElement(Q.A,{primary:!0,onClick:function(){return t()}},d.M.t("Clear query")),n))}}])}(v.Component);X.propTypes={resetQuery:f().func.isRequired,queryString:f().string.isRequired,rolesCanInvite:f().object.isRequired,community:f().object.isRequired,communityGroupsEnabled:f().bool.isRequired,extraContent:f().node},X.defaultProps={extraContent:null};var Y,$=(0,P.Q2)(X),ee=n(28962);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=document.getElementById("community-invitations-search-root").dataset,ae=JSON.parse(re.community),le=JSON.parse(re.communitiesAllRoles),ie=JSON.parse(re.communitiesRolesCanInvite),oe=JSON.parse(re.permissions),ce="InvenioCommunities.InvitationsSearch",se=JSON.parse(re.communityGroupsEnabled),ue=(0,l.parametrize)(I,{config:{rolesCanInvite:ie},community:ae}),me=(0,l.parametrize)(K,{roles:le,rolesCanInvite:ie,community:ae,permissions:oe,communityGroupsEnabled:se,appName:ce}),pe=(0,l.parametrize)(o.J,{community:ae}),de=(0,l.parametrize)(M,{rolesCanInvite:ie,community:ae,communityGroupsEnabled:se}),ye=(0,l.parametrize)($,{community:ae,communityGroupsEnabled:se,rolesCanInvite:ie}),Ee=(Y={},(0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)(Y,"".concat(ce,".EmptyResults.element"),ye),"".concat(ce,".ResultsList.item"),ue),"".concat(ce,".SearchApp.layout"),me),"".concat(ce,".SearchBar.element"),D),"".concat(ce,".SearchApp.results"),x),"".concat(ce,".ResultsList.container"),de),"".concat(ce,".Sort.element"),i.ee),"RequestStatus.layout.submitted",ee.pD),"RequestStatus.layout.deleted",ee.KS),"RequestStatus.layout.accepted",ee.zm),(0,r.A)((0,r.A)((0,r.A)(Y,"RequestStatus.layout.declined",ee.BX),"RequestStatus.layout.cancelled",ee.lk),"RequestStatus.layout.expired",ee.w9)),fe=l.overrideStore.getAll();(0,a.U)(ne(ne({},Ee),fe),!0,"invenio-search-config",!0,pe)}},e=>{e.O(0,[402,1057,7655,5373,6267,9777,5941,7501,4218,8010,2373,5588,8102,742,6528,3532,1751,226,5580,9945,1357,3092,8962,4453,8803],(()=>{return t=30085,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=invenio-communities-invitations.da4fb4d1f120249118f5.js.map