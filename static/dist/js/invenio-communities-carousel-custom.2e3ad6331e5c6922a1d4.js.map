{"version":3,"file":"js/invenio-communities-carousel-custom.2e3ad6331e5c6922a1d4.js","mappings":"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","sources":["webpack://invenio-assets/./js/collections/community/communitiesCarousel/CarouselItem.js","webpack://invenio-assets/./js/collections/community/communitiesCarousel/CommunitiesCarousel.js","webpack://invenio-assets/./js/collections/community/communitiesCarousel/index.js"],"sourcesContent":["/*\n * This file is part of Invenio.\n * Copyright (C) 2016-2022 CERN.\n *\n * Invenio is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { i18next } from \"@translations/invenio_communities/i18next\";\nimport _truncate from \"lodash/truncate\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { Image } from \"react-invenio-forms\";\nimport Overridable from \"react-overridable\";\nimport { Button, Grid, Header, Item } from \"semantic-ui-react\";\nimport GeoPattern from \"geopattern\";\n\nclass CarouselItem extends Component {\n  render() {\n    const { community, defaultLogo, className, showUploadBtn } = this.props;\n    const self_link = community.links.self_html.replace(\"communities\", \"collections\");\n\n    const pattern = GeoPattern.generate(community.slug);\n\n    return (\n      <Overridable\n        id=\"InvenioCommunities.CarouselItem.layout\"\n        community={community}\n        defaultLogo={defaultLogo}\n        className={className}\n      >\n        <Item\n          className={`carousel flex align-items-center ${className}`}\n          key={community.id}\n        >\n          <Image size=\"small\" src={community.links.logo} fallbackSrc={pattern.toDataUri()} />\n          <Item.Content>\n            <Item.Header as={Grid} stackable className=\"rel-pb-1\">\n              <Grid.Column computer=\"10\" tablet=\"16\" className=\"pl-0 pb-0\">\n                <Header as=\"a\" size=\"medium\" href={self_link}>\n                  {community.metadata.title}\n                </Header>\n              </Grid.Column>\n              <Grid.Column computer=\"6\" tablet=\"16\" className=\"buttons pl-0 pb-0\">\n                <Button\n                  size=\"mini\"\n                  href={self_link}\n                  content={i18next.t(\"Browse\")}\n                  className=\"browse-btn\"\n                />\n                {showUploadBtn && (\n                  <Button\n                    size=\"mini\"\n                    // icon=\"upload\"\n                    // labelPosition=\"left\"\n                    positive\n                    href={`/uploads/new?community=${community.slug}`}\n                    content={i18next.t(\"Contribute\")}\n                    className=\"contribute-btn\"\n                  />\n                )}\n              </Grid.Column>\n            </Item.Header>\n            <Item.Description\n              content={_truncate(community.metadata.description, { length: 300 })}\n            />\n          </Item.Content>\n        </Item>\n      </Overridable>\n    );\n  }\n}\n\nCarouselItem.propTypes = {\n  community: PropTypes.object.isRequired,\n  defaultLogo: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  showUploadBtn: PropTypes.bool,\n};\n\nCarouselItem.defaultProps = {\n  className: \"\",\n  showUploadBtn: true,\n};\n\nexport default Overridable.component(\"InvenioCommunities.CarouselItem\", CarouselItem);\n","/*\n * This file is part of Invenio.\n * Copyright (C) 2016-2022 CERN.\n *\n * Invenio is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { i18next } from \"@translations/invenio_communities/i18next\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { http, withCancel } from \"react-invenio-forms\";\nimport Overridable from \"react-overridable\";\nimport {\n  Container,\n  Grid,\n  Header,\n  Icon,\n  Item,\n  Placeholder,\n  Transition,\n} from \"semantic-ui-react\";\nimport CarouselItem from \"./CarouselItem\";\n\nclass CommunitiesCarousel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: { hits: [] },\n      activeIndex: 0,\n      animationDirection: \"left\",\n      carouselTimer: null,\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    this.cancellableFetch && this.cancellableFetch.cancel();\n    this.stopCarousel();\n  }\n\n  getDataIndex = (index) => {\n    const { itemsPerPage } = this.props;\n    const {\n      data: { hits },\n    } = this.state;\n    const i = index * parseInt(itemsPerPage);\n    if (i > hits.length - 1) return 0;\n    if (i < 0) return hits.length - 1;\n    return i;\n  };\n\n  runCarousel = async (newIndex) => {\n    const { activeIndex } = this.state;\n    let animationDirection = newIndex < activeIndex ? \"right\" : \"left\";\n    await this.setState({ animationDirection });\n    this.setState({ activeIndex: this.getDataIndex(newIndex) });\n  };\n\n  setCarouselTimer = () => {\n    const {\n      data: { hits: length },\n      activeIndex,\n    } = this.state;\n    const { intervalDelay } = this.props;\n    this.setState({\n      carouselTimer: setInterval(() => {\n        length && this.runCarousel(activeIndex + 1);\n      }, intervalDelay),\n    });\n  };\n\n  // Pause carousel when user focuses elements in the container\n  stopCarousel = () => {\n    const { carouselTimer } = this.state;\n    clearInterval(carouselTimer);\n  };\n  startCarousel = () => {\n    this.setCarouselTimer();\n  };\n\n  fetchData = async () => {\n    const { fetchUrl } = this.props;\n    this.cancellableFetch = withCancel(http.get(fetchUrl));\n    try {\n      const response = await this.cancellableFetch.promise;\n      this.setState({ data: response.data.hits });\n      this.setCarouselTimer();\n      this.setState({ isLoading: false });\n    } catch (error) {\n      console.error(error);\n      this.setState({ isLoading: false });\n    }\n  };\n\n  renderPlaceholder = () => {\n    const { title } = this.props;\n    return (\n      <Container fluid className=\"rel-pt-2 rel-pb-2 ml-0-mobile mr-0-mobile\">\n        <Grid container className=\"carousel-header-container\">\n          <Grid.Column width=\"2\" />\n          <Grid.Column width=\"12\">\n          <Header as=\"h2\" className=\"rel-mb-1\">\n            {title}\n          </Header>\n          </Grid.Column>\n          <Grid.Column width=\"2\" />\n        </Grid>\n        <Grid container className=\"carousel-items-container\">\n          <Grid.Column width=\"2\" />\n          <Grid.Column width=\"12\">\n            <Item.Group>\n              <Item>\n                <Item.Image>\n                  <Placeholder>\n                    <Placeholder.Image square />\n                  </Placeholder>\n                </Item.Image>\n\n                <Item.Content>\n                  <Item.Header className=\"mt-5 rel-mb-2\">\n                    <Placeholder>\n                      <Placeholder.Header>\n                        <Placeholder.Line />\n                      </Placeholder.Header>\n                    </Placeholder>\n                  </Item.Header>\n\n                  <Item.Description>\n                    <Placeholder>\n                      <Placeholder.Paragraph>\n                        <Placeholder.Line />\n                        <Placeholder.Line />\n                        <Placeholder.Line />\n                      </Placeholder.Paragraph>\n                    </Placeholder>\n                  </Item.Description>\n                </Item.Content>\n              </Item>\n            </Item.Group>\n          </Grid.Column>\n          <Grid.Column width=\"2\" />\n        </Grid>\n      </Container>\n    );\n  };\n\n  carouselSlides = () => {\n    const { data, activeIndex } = this.state;\n    const { defaultLogo, itemsPerPage, showUploadBtn } = this.props;\n\n    const sliceEnd = parseInt(activeIndex) + parseInt(itemsPerPage);\n\n    const carouselSlides = data.hits\n      ?.slice(activeIndex, sliceEnd)\n      .map((community) => (\n        <CarouselItem\n          community={community}\n          defaultLogo={defaultLogo}\n          key={community.id}\n          showUploadBtn={showUploadBtn}\n        />\n      ));\n\n    return carouselSlides;\n  };\n\n  render() {\n    const { data, animationDirection, activeIndex, isLoading } = this.state;\n    const { title, animationSpeed, itemsPerPage } = this.props;\n\n    return (\n      <Overridable\n        id=\"InvenioCommunities.CommunitiesCarousel.layout\"\n        data={data}\n        animationDirection={animationDirection}\n        activeIndex={activeIndex}\n        title={title}\n        animationSpeed={animationSpeed}\n        carouselSlides={this.carouselSlides()}\n        stopCarousel={this.stopCarousel}\n        startCarousel={this.startCarousel}\n        runCarousel={this.runCarousel}\n        itemsPerPage={itemsPerPage}\n      >\n        <>\n          {isLoading && this.renderPlaceholder()}\n\n          {!isLoading && !_isEmpty(data.hits) && (\n            <Container\n              fluid\n              className=\"carousel rel-pt-2 rel-pb-2 ml-0-mobile mr-0-mobile\"\n            >\n              <Grid container className=\"rel-mb-0\">\n                <Grid.Column width=\"2\" />\n                <Grid.Column width=\"12\">\n                <Header as=\"h2\">{title}</Header>\n                </Grid.Column>\n                <Grid.Column width=\"2\" />\n              </Grid>\n\n              <Grid container onFocus={this.stopCarousel} onBlur={this.startCarousel}>\n                <Grid.Column\n                  width=\"2\"\n                  className=\"pr-0\"\n                  verticalAlign=\"middle\"\n                  textAlign=\"left\"\n                >\n                  <Icon\n                    className=\"carousel-arrow\"\n                    inverted\n                    role=\"button\"\n                    name=\"angle left\"\n                    size=\"huge\"\n                    aria-label={i18next.t(\"Previous slide\")}\n                    onClick={() => this.runCarousel(activeIndex - 1)}\n                    onKeyDown={(event) =>\n                      event.key === \"Enter\" && this.runCarousel(activeIndex - 1)\n                    }\n                    tabIndex=\"0\"\n                  />\n                </Grid.Column>\n                <Grid.Column width=\"12\">\n                  <Transition.Group\n                    as={Item.Group}\n                    className=\"flex align-items-center justify-center\"\n                    duration={animationSpeed}\n                    animation={`carousel-slide ${animationDirection}`}\n                    directional\n                  >\n                    {this.carouselSlides()}\n                  </Transition.Group>\n                </Grid.Column>\n\n                <Grid.Column\n                  width=\"2\"\n                  className=\"pl-0\"\n                  verticalAlign=\"middle\"\n                  textAlign=\"right\"\n                >\n                  <Icon\n                    className=\"carousel-arrow\"\n                    inverted\n                    role=\"button\"\n                    name=\"angle right\"\n                    size=\"huge\"\n                    aria-label={i18next.t(\"Next slide\")}\n                    onClick={() => this.runCarousel(activeIndex + 1)}\n                    onKeyDown={(event) =>\n                      event.key === \"Enter\" && this.runCarousel(activeIndex + 1)\n                    }\n                    tabIndex=\"0\"\n                  />\n                </Grid.Column>\n              </Grid>\n            </Container>\n          )}\n        </>\n      </Overridable>\n    );\n  }\n}\n\nCommunitiesCarousel.propTypes = {\n  title: PropTypes.string.isRequired,\n  fetchUrl: PropTypes.string.isRequired,\n  intervalDelay: PropTypes.number.isRequired,\n  animationSpeed: PropTypes.number.isRequired,\n  defaultLogo: PropTypes.string.isRequired,\n  itemsPerPage: PropTypes.string.isRequired,\n  showUploadBtn: PropTypes.bool,\n};\n\nCommunitiesCarousel.defaultProps = {\n  showUploadBtn: true,\n};\n\nexport default Overridable.component(\n  \"InvenioCommunities.CommunitiesCarousel\",\n  CommunitiesCarousel\n);\n","/*\n * This file is part of Invenio.\n * Copyright (C) 2016-2024 CERN.\n * Copyright (C) 2024      KTH Royal Institute of Technology.\n *\n * Invenio is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { OverridableContext, overrideStore } from \"react-overridable\";\nimport CommunitiesCarousel from \"./CommunitiesCarousel\";\n\nconst communitiesCarouselContainer = document.getElementById(\"communities-carousel\");\nconst title = communitiesCarouselContainer.dataset.title;\nconst fetchUrl = communitiesCarouselContainer.dataset.fetchUrl;\nconst intervalDelay = parseInt(communitiesCarouselContainer.dataset.intervalDelay);\nconst animationSpeed = parseInt(communitiesCarouselContainer.dataset.animationSpeed);\nconst defaultLogo = communitiesCarouselContainer.dataset.defaultLogo;\nconst itemsPerPage = communitiesCarouselContainer.dataset.itemsPerPage;\nconst showUploadBtn = JSON.parse(communitiesCarouselContainer.dataset.showUploadBtn);\n\nconst overriddenComponents = overrideStore.getAll();\n\nReactDOM.render(\n  <OverridableContext.Provider value={overriddenComponents}>\n    <CommunitiesCarousel\n      title={title}\n      fetchUrl={fetchUrl}\n      intervalDelay={intervalDelay}\n      animationSpeed={animationSpeed}\n      defaultLogo={defaultLogo}\n      itemsPerPage={itemsPerPage}\n      showUploadBtn={showUploadBtn}\n    />\n  </OverridableContext.Provider>,\n  communitiesCarouselContainer\n);\n"],"names":["CarouselItem","_Component","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","value","_this$props","this","props","community","defaultLogo","className","showUploadBtn","self_link","links","self_html","replace","pattern","GeoPattern","slug","React","Overridable","id","Item","concat","Image","size","src","logo","fallbackSrc","toDataUri","Content","Header","as","Grid","stackable","Column","computer","tablet","href","metadata","title","Button","content","i18next","t","positive","Description","_truncate","description","length","Component","propTypes","PropTypes","isRequired","defaultProps","component","CommunitiesCarousel","_this","_defineProperty","index","itemsPerPage","hits","state","data","i","parseInt","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","newIndex","activeIndex","animationDirection","_context","prev","next","setState","getDataIndex","stop","_x","apply","_this$state","intervalDelay","carouselTimer","setInterval","runCarousel","clearInterval","setCarouselTimer","_callee2","fetchUrl","response","_context2","cancellableFetch","withCancel","http","get","promise","sent","isLoading","t0","console","error","Container","fluid","container","width","Group","Placeholder","square","Line","Paragraph","_data$hits","_this$state2","sliceEnd","slice","map","fetchData","cancel","stopCarousel","_this2","_this$state3","_this$props2","animationSpeed","carouselSlides","startCarousel","renderPlaceholder","_isEmpty","onFocus","onBlur","verticalAlign","textAlign","Icon","inverted","role","name","onClick","onKeyDown","event","tabIndex","Transition","duration","animation","directional","communitiesCarouselContainer","document","getElementById","dataset","JSON","parse","overriddenComponents","overrideStore","getAll","ReactDOM","OverridableContext","Provider"],"sourceRoot":""}