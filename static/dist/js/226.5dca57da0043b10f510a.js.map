{"version":3,"file":"js/226.5dca57da0043b10f510a.js","mappings":"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","sources":["webpack://invenio-assets/./js/invenio_modular_deposit_form/field_components/SectionWrapper.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/FieldsContent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/componentsMap.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/FormPage.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/RDMDepositForm.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/field_components/CustomFieldInjector.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/field_components/FieldComponentWrapper.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/field_components/compound_field_components.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/SizesField.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/field_components/field_components.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/index.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/CommunityField.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/CommunitySelectionModal/CommunityContext.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/CommunitySelectionModal/CommunityListItem.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/CommunitySelectionModal/CommunitySelectionSearch.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/CommunitySelectionModal/CommunitySelectionModal.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/DatesField.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/PIDField.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/PublishButton/SubmitButton.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/PublishButton/SubmitReviewModal.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/ResourceTypeSelectorField.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/SelectField.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/TextArea.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form/replacement_components/TextField.js","webpack://invenio-assets/./js/invenio_modular_deposit_form/utils.js","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/ChapterLabelComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/EditionComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/KeywordsComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/componentsMap.js","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/AdminMetadataComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/AIComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/CommonsLegacyInfoComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/ContentWarningComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/CourseTitleComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/DegreeComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/DisciplineComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/EditionSectionComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/InstitutionDepartmentComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/MediaComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/MeetingOrganizationComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/ProjectTitleComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/PublicationURLComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/SeriesComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/SponsoringInstitutionComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/SubjectsKeywordsComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/components/VolumeComponent.jsx","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/validatorsForIds.js","webpack://invenio-assets/./js/invenio_modular_deposit_form_extras/validator.js","webpack://invenio-assets/./templates/custom_fields/ lazy ^\\.\\/.*\\.jsx$ namespace object"],"sourcesContent":["import React from \"react\";\nimport { Form, Icon, Segment } from \"semantic-ui-react\";\n\nconst SectionWrapper = ({\n  children,\n  icon,\n  sectionName,\n  label,\n  show_heading = false,\n}) => {\n  return (\n    <Segment\n      id={`InvenioAppRdm.Deposit.${sectionName}.container`}\n      as=\"fieldset\"\n      className={`invenio-fieldset ${sectionName}`}\n    >\n      {show_heading && (\n        <legend className=\"field-label-class invenio-field-label\">\n          {!!icon && <Icon name={icon} />} {label}\n        </legend>\n      )}\n      {children.length > 1 &&\n      !React.Children.toArray(children).some(\n        (child) => child.props.component === \"FormRow\"\n      ) ? (\n        <Form.Group>{children}</Form.Group>\n      ) : (\n        children\n      )}\n    </Segment>\n  );\n};\n\nexport { SectionWrapper };\n","import React from \"react\";\nimport { Form } from \"semantic-ui-react\";\nimport { SectionWrapper } from \"./field_components/SectionWrapper\";\n\nconst FormRow = ({ subsections, classnames, ...props }) => {\n  console.log(\"FormRow props\", props);\n  console.log(\"FormRow subsections\", subsections);\n  return (\n    <Form.Group className={classnames ? classnames : null}>\n      {subsections.map(({ section, component, ...innerProps }, index) => {\n        const MyField = props.fieldComponents[component][0];\n        return (\n          <MyField\n            key={index}\n            {...{\n              section,\n              component,\n              index,\n              ...props,\n              ...innerProps,\n            }}\n          />\n        );\n      })}\n    </Form.Group>\n  );\n};\n\nconst FieldsContent = ({\n  section,\n  component,\n  wrapped,\n  index,\n  commonFieldProps,\n  ...props\n}) => {\n  const MyField = commonFieldProps.fieldComponents[component][0];\n  return !!wrapped ? (\n    <SectionWrapper\n      sectionName={section}\n      icon={props.icon}\n      label={props.label}\n      show_heading={props.show_heading}\n    >\n      <MyField key={index} {...commonFieldProps} {...props} />\n    </SectionWrapper>\n  ) : (\n    <MyField key={index} {...commonFieldProps} {...props} />\n  );\n};\n\nexport { FieldsContent, FormRow };\n","import { AccessRightField } from \"@js/invenio_rdm_records\";\nimport {\n  AbstractComponent,\n  AccessRightsComponent,\n  AdditionalDatesComponent,\n  AdditionalDescriptionComponent,\n  AdditionalTitlesComponent,\n  AlternateIdentifiersComponent,\n  BookTitleComponent,\n  CodeRepositoryComponent,\n  CodeDevelopmentStatusComponent,\n  CodeOperatingSystemComponent,\n  CodeProgrammingLanguageComponent,\n  CodeRuntimePlatformComponent,\n  CommunitiesComponent,\n  ContributorsComponent,\n  CreatorsComponent,\n  DateComponent,\n  DeleteComponent,\n  DoiComponent,\n  FilesUploadComponent,\n  FundingComponent,\n  ISBNComponent,\n  JournalVolumeComponent,\n  JournalIssueComponent,\n  JournalISSNComponent,\n  JournalTitleComponent,\n  LanguagesComponent,\n  LicensesComponent,\n  MeetingAcronymComponent,\n  MeetingDatesComponent,\n  MeetingPlaceComponent,\n  MeetingSessionComponent,\n  MeetingSessionPartComponent,\n  MeetingTitleComponent,\n  MeetingURLComponent,\n  MetadataOnlyComponent,\n  PublisherComponent,\n  PublicationLocationComponent,\n  ReferencesComponent,\n  RelatedWorksComponent,\n  ResourceTypeComponent,\n  SizesComponent,\n  SectionPagesComponent,\n  SubjectsComponent,\n  SubmissionComponent,\n  SubtitleComponent,\n  TitleComponent,\n  TotalPagesComponent,\n  VersionComponent,\n} from \"./field_components/field_components\";\nimport {\n  CombinedDatesComponent,\n  OrganizationDetailsComponent,\n  PublicationDetailsComponent,\n  SubmitActionsComponent,\n  ThesisDetailsComponent,\n  TypeTitleComponent,\n} from \"./field_components/compound_field_components\";\nimport { FormRow } from \"./FieldsContent\";\n\nconst fieldComponents = {\n  AbstractComponent: [AbstractComponent, [\"metadata.description\"]],\n  AccessComponent: [AccessRightField, [\"access\"]],\n  AccessRightsComponent: [AccessRightsComponent, [\"access\"]],\n  AdditionalDatesComponent: [AdditionalDatesComponent, [\"metadata.dates\"]],\n  AdditionalDescriptionComponent: [\n    AdditionalDescriptionComponent,\n    [\"metadata.additional_descriptions\"],\n  ],\n  AdditionalTitlesComponent: [\n    AdditionalTitlesComponent,\n    [\"metadata.additional_titles\"],\n  ],\n  AlternateIdentifiersComponent: [\n    AlternateIdentifiersComponent,\n    [\"metadata.identifiers\"],\n  ],\n  BookTitleComponent: [\n    BookTitleComponent,\n    [\"custom_fields.imprint:imprint.title\"],\n  ],\n  CommunitiesComponent: [CommunitiesComponent, []],\n  CodeDevelopmentStatusComponent: [\n    CodeDevelopmentStatusComponent,\n    [\"custom_fields.code:developmentStatus\"],\n  ],\n  CodeRepositoryComponent: [\n    CodeRepositoryComponent,\n    [\"custom_fields.code:codeRepository\"],\n  ],\n  CodeProgrammingLanguageComponent: [\n    CodeProgrammingLanguageComponent,\n    [\"custom_fields.code:programmingLanguage\"],\n  ],\n  CodeOperatingSystemComponent: [\n    CodeOperatingSystemComponent,\n    [\"custom_fields.code:operatingSystem\"],\n  ],\n  CodeRuntimePlatformComponent: [\n    CodeRuntimePlatformComponent,\n    [\"custom_fields.code:runtimePlatform\"],\n  ],\n  ContributorsComponent: [ContributorsComponent, [\"metadata.contributors\"]],\n  CreatorsComponent: [CreatorsComponent, [\"metadata.creators\"]],\n  DateComponent: [DateComponent, [\"metadata.publication_date\"]],\n  DoiComponent: [DoiComponent, [\"pids.doi\"]],\n  FundingComponent: [FundingComponent, [\"metadata.funding\"]],\n  ISBNComponent: [ISBNComponent, [\"custom_fields.imprint:imprint.isbn\"]],\n  JournalISSNComponent: [\n    JournalISSNComponent,\n    [\"custom_fields.journal:journal.issn\"],\n  ],\n  JournalIssueComponent: [\n    JournalIssueComponent,\n    [\"custom_fields.journal:journal.issue\"],\n  ],\n  JournalTitleComponent: [\n    JournalTitleComponent,\n    [\"custom_fields.journal:journal.title\"],\n  ],\n  JournalVolumeComponent: [\n    JournalVolumeComponent,\n    [\"custom_fields.journal:journal.volume\"],\n  ],\n  FilesUploadComponent: [FilesUploadComponent, [\"files\"]],\n  LanguagesComponent: [LanguagesComponent, [\"metadata.languages\"]],\n  LicensesComponent: [LicensesComponent, [\"metadata.rights\"]],\n  MetadataOnlyComponent: [MetadataOnlyComponent, [\"access.status\"]],\n  MeetingAcronymComponent: [\n    MeetingAcronymComponent,\n    [\"custom_fields.meeting:meeting.acronym\"],\n  ],\n  MeetingDatesComponent: [\n    MeetingDatesComponent,\n    [\"custom_fields.meeting:meeting.dates\"],\n  ],\n  MeetingPlaceComponent: [\n    MeetingPlaceComponent,\n    [\"custom_fields.meeting:meeting.place\"],\n  ],\n  MeetingSessionComponent: [\n    MeetingSessionComponent,\n    [\"custom_fields.meeting:meeting.session\"],\n  ],\n  MeetingSessionPartComponent: [\n    MeetingSessionPartComponent,\n    [\"custom_fields.meeting:meeting.session_part\"],\n  ],\n  MeetingTitleComponent: [\n    MeetingTitleComponent,\n    [\"custom_fields.meeting:meeting.title\"],\n  ],\n  MeetingURLComponent: [\n    MeetingURLComponent,\n    [\"custom_fields.meeting:meeting.url\"],\n  ],\n  PublisherComponent: [PublisherComponent, [\"metadata.publisher\"]],\n  PublicationLocationComponent: [\n    PublicationLocationComponent,\n    [\"custom_fields.imprint:imprint.place\"],\n  ],\n  RelatedWorksComponent: [\n    RelatedWorksComponent,\n    [\"metadata.related_identifiers\"],\n  ],\n  ResourceTypeComponent: [ResourceTypeComponent, [\"metadata.resource_type\"]],\n  SectionPagesComponent: [\n    SectionPagesComponent,\n    [\"custom_fields.journal:journal.pages\"],\n  ],\n  SizesComponent: [SizesComponent, [\"metadata.sizes\"]],\n  SubjectsComponent: [SubjectsComponent, [\"metadata.subjects\"]],\n  SubtitleComponent: [SubtitleComponent, [\"metadata.additional_titles\"]],\n  TitleComponent: [TitleComponent, [\"metadata.title\"]],\n  TotalPagesComponent: [\n    TotalPagesComponent,\n    [\"custom_fields.imprint:imprint.pages\"],\n  ],\n  VersionComponent: [VersionComponent, [\"metadata.version\"]],\n  // below are composite field components\n  CombinedDatesComponent: [\n    CombinedDatesComponent,\n    [\"metadata.publication_date\", \"metadata.dates\"],\n  ],\n  DeleteComponent: [DeleteComponent, []],\n  FormRow: [FormRow, []],\n  ISBNComponent: [ISBNComponent, [\"custom_fields.imprint:imprint.isbn\"]],\n  SectionPagesComponent: [\n    SectionPagesComponent,\n    [\"custom_fields.journal:journal.pages\"],\n  ],\n  OrganizationDetailsComponent: [\n    OrganizationDetailsComponent,\n    [\"custom_fields.imprint:imprint.place\"],\n  ],\n  PublicationDetailsComponent: [\n    PublicationDetailsComponent,\n    [\n      \"custom_fields.imprint:imprint.isbn\",\n      \"metadata.version\",\n      \"metadata.publisher\",\n      \"custom_fields.imprint:imprint.place\",\n    ],\n  ],\n  SubmissionComponent: [SubmissionComponent, []],\n  SubmitActionsComponent: [SubmitActionsComponent, [\"access\"]],\n  ThesisDetailsComponent: [\n    ThesisDetailsComponent,\n    [\"custom_fields.thesis:university\"],\n  ],\n  TypeTitleComponent: [\n    TypeTitleComponent,\n    [\"metadata.title\", \"metadata.resource_type\"],\n  ],\n};\n\nconst extras = require(`@js/invenio_modular_deposit_form_extras/componentsMap.js`);\nif (extras) {\n  Object.assign(fieldComponents, extras.componentsMap);\n}\n\nexport { fieldComponents };\n","import React, { useContext, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useFormikContext } from \"formik\";\nimport { i18next } from \"@translations/invenio_app_rdm/i18next\";\nimport { Button, Icon, Modal } from \"semantic-ui-react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { FormValuesContext } from \"./RDMDepositForm\";\nimport { SectionWrapper } from \"./field_components/SectionWrapper\";\nimport { FieldsContent } from \"./FieldsContent\";\nimport { initial } from \"lodash\";\nimport { areDeeplyEqual } from \"./utils\";\n\nfunction useIsInViewport(ref) {\n  const [isIntersecting, setIsIntersecting] = useState(false);\n\n  const observer = useMemo(\n    () =>\n      new IntersectionObserver(([entry]) =>\n        setIsIntersecting(entry.isIntersecting)\n      ),\n    []\n  );\n\n  useEffect(() => {\n    observer.observe(ref.current);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [ref, observer]);\n\n  return isIntersecting;\n}\n\nconst RecoveryModal = ({\n  confirmModalRef,\n  focusFirstElement,\n  handleStorageData,\n  isDraft,\n  isVersionDraft,\n  setRecoveryAsked,\n}) => {\n  const [open, setOpen] = useState(true);\n  const firstButtonRef = useRef(null);\n  useEffect(() => {\n    window.setTimeout(() => {\n      firstButtonRef.current.focus();\n    }, 20);\n  }, []);\n\n  return (\n    <Modal\n      onClose={() => setOpen(false)}\n      onOpen={() => setOpen(true)}\n      open={open}\n    >\n      <Modal.Header>\n        <Icon name=\"redo\" /> {i18next.t(\"Recover unsaved information?\")}\n      </Modal.Header>\n      <Modal.Content>\n        <Modal.Description>\n          <p>\n            {i18next.t(\n              \"This form was closed with unsaved information. Do you want to recover it and continue with the same work?\"\n            )}\n          </p>\n        </Modal.Description>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button\n          // color=\"black\"\n          content={\n            isDraft\n              ? i18next.t(\"No, start a new work\")\n              : i18next.t(\"No, start from the saved version\")\n          }\n          onClick={() => {\n            setOpen(false);\n            handleStorageData(false);\n            focusFirstElement();\n            setRecoveryAsked(true);\n          }}\n          ref={firstButtonRef}\n        />\n        <Button\n          content={\n            isDraft\n              ? i18next.t(\"Yes, recover the unsaved draft\")\n              : i18next.t(\"Yes, recover the unsaved changes\")\n          }\n          labelPosition=\"right\"\n          icon=\"checkmark\"\n          onClick={() => {\n            setOpen(false);\n            handleStorageData(true);\n            focusFirstElement();\n            setRecoveryAsked(true);\n          }}\n          positive\n          ref={confirmModalRef}\n        />\n      </Modal.Actions>\n    </Modal>\n  );\n};\n\nconst FormPage = ({\n  commonFieldProps,\n  currentFormPage,\n  focusFirstElement,\n  id,\n  pageNums,\n  recoveryAsked,\n  setRecoveryAsked,\n  storageDataPresent,\n  setStorageDataPresent,\n  subsections,\n  handleSettingFieldTouched,\n}) => {\n  const {\n    errors,\n    initialErrors,\n    initialTouched,\n    initialValues,\n    isValid,\n    setFieldValue,\n    setFieldTouched,\n    setTouched,\n    setValues,\n    touched,\n    validateField,\n    validateForm,\n    values,\n    ...otherProps\n  } = useFormikContext();\n  const {\n    currentValues,\n    handleValuesChange,\n    currentErrors,\n    currentTouched,\n    handleErrorsChange,\n    handleFormPageChange,\n  } = useContext(FormValuesContext);\n  // console.log(\"FormPage formik errors\", errors);\n  // console.log(\"FormPage formik touched\", touched);\n  // console.log(\"FormPage formik values\", values);\n  const currentPageIndex = pageNums.indexOf(currentFormPage);\n  const nextPageIndex = currentPageIndex + 1;\n  const previousPageIndex = currentPageIndex - 1;\n  const nextPage =\n    nextPageIndex < pageNums.length ? pageNums[nextPageIndex] : null;\n  const previousPage =\n    previousPageIndex >= 0 ? pageNums[previousPageIndex] : null;\n  const pageTargetRef = useRef(null);\n  const confirmModalRef = useRef(null);\n  // FIXME: sticky footer deactivated\n  const pageTargetInViewport = useIsInViewport(pageTargetRef);\n  const [recoveredStorageValues, setRecoveredStorageValues] = useState(null);\n\n  //pass values up from Formik context to main form context\n  useEffect(() => {\n    handleValuesChange(values);\n    if (!!recoveryAsked && !areDeeplyEqual(initialValues, values, [\"ui\"])) {\n      window.localStorage.setItem(\n        `rdmDepositFormValues.${commonFieldProps.currentUserprofile.id}.${values.id}`,\n        JSON.stringify(values)\n      );\n    }\n  }, [values]);\n\n  //pass errors up from Formik context to main form context on initial render\n  useEffect(() => {\n    if (currentErrors !== errors) {\n      handleErrorsChange(\n        errors,\n        touched,\n        initialErrors,\n        initialTouched,\n        isValid\n      );\n    }\n  }, []);\n\n  // on first load, check if there is data in local storage\n  useEffect(() => {\n    const user = commonFieldProps.currentUserprofile.id;\n    const storageValuesKey = `rdmDepositFormValues.${user}.${initialValues?.id}`;\n    const storageValues = window.localStorage.getItem(storageValuesKey);\n\n    const storageValuesObj = JSON.parse(storageValues);\n    if (\n      !recoveryAsked &&\n      !!storageValuesObj &&\n      !areDeeplyEqual(storageValuesObj, values, [\"ui\"])\n    ) {\n      setRecoveredStorageValues(storageValuesObj);\n      setStorageDataPresent(true);\n    } else {\n      setRecoveryAsked(true);\n    }\n  }, []);\n\n  const handleStorageData = (recover) => {\n    if (recover) {\n      async function setinitialvalues() {\n        await setValues(recoveredStorageValues, false);\n      }\n      setinitialvalues();\n      setRecoveredStorageValues(null);\n    }\n    window.localStorage.removeItem(\n      `rdmDepositFormValues.${commonFieldProps.currentUserprofile.id}.${values.id}`\n    );\n  };\n\n  //pass setFieldTouched up from Formik context to main form context\n  useEffect(() => {\n    handleSettingFieldTouched(setFieldTouched);\n  }, []);\n\n  //pass initialErrors up from Formik context to main form context\n  useEffect(() => {\n    if (initialErrors) {\n      handleErrorsChange(\n        errors,\n        touched,\n        initialErrors,\n        initialTouched,\n        isValid\n      );\n    }\n  }, []);\n\n  //pass errors up from Formik context to main form context when they change\n  useEffect(() => {\n    console.log(\"errors or touched changed errors\", errors);\n    console.log(\"errors or touched changed touched\", touched);\n    if (currentErrors !== errors || currentTouched !== touched) {\n      handleErrorsChange(\n        errors,\n        touched,\n        initialErrors,\n        initialTouched,\n        isValid\n      );\n    }\n  }, [errors, touched]);\n\n  const handleButtonClick = (event, { value }) => {\n    handleFormPageChange(event, { value });\n  };\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <div className=\"formPageWrapper\" id={id}>\n        {subsections.map(\n          (\n            {\n              section,\n              component,\n              wrapped,\n              subsections: innerSections,\n              ...props\n            },\n            index\n          ) => {\n            return component === \"SectionWrapper\" ? (\n              <SectionWrapper sectionName={section} key={section} {...props}>\n                {innerSections.map(({ component, ...innerProps }, index) => (\n                  <FieldsContent\n                    key={index}\n                    {...{\n                      section,\n                      component,\n                      wrapped,\n                      index,\n                      commonFieldProps,\n                      ...innerProps,\n                    }}\n                  />\n                ))}\n              </SectionWrapper>\n            ) : (\n              <FieldsContent\n                {...{\n                  section,\n                  component,\n                  wrapped,\n                  index,\n                  commonFieldProps,\n                  ...props,\n                }}\n              />\n            );\n          }\n        )}\n\n        <div id=\"sticky-footer-observation-target\" ref={pageTargetRef}></div>\n        <div\n          className={`ui container ${\n            // \"sticky-footer-static\"\n            // FIXME: sticky footer deactivated\n            pageTargetInViewport\n              ? \"sticky-footer-static\"\n              : \"sticky-footer-fixed\"\n          }`}\n        >\n          {!!previousPage && (\n            <Button\n              type=\"button\"\n              onClick={handleButtonClick}\n              value={previousPage}\n              icon\n              labelPosition=\"left\"\n            >\n              <Icon name=\"left arrow\" />\n              Back\n            </Button>\n          )}\n\n          {!!nextPage && (\n            <Button\n              primary\n              type=\"button\"\n              onClick={handleButtonClick}\n              value={nextPage}\n              icon\n              labelPosition=\"right\"\n            >\n              <Icon name=\"right arrow\" />\n              Continue\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {!recoveryAsked && storageDataPresent && (\n        <RecoveryModal\n          isDraft={values.status === \"draft\"}\n          isVersionDraft={values.status === \"new_version_draft\"}\n          confirmModalRef={confirmModalRef}\n          focusFirstElement={focusFirstElement}\n          handleStorageData={handleStorageData}\n          setRecoveryAsked={setRecoveryAsked}\n        />\n      )}\n    </DndProvider>\n  );\n};\n\nexport { FieldsContent, FormPage };\n","// Part of the Knowledge Commons Repository\n// Copyright (C) 2023 MESH Research\n//\n// based on portions of InvenioRDM\n// Copyright (C) 2020-2022 CERN.\n// Copyright (C) 2020-2022 Northwestern University.\n// Copyright (C) 2021-2022 Graz University of Technology.\n// Copyright (C) 2022-2023 KTH Royal Institute of Technology.\n//\n// The Knowledge Commons Repository and Invenio App RDM are both free software;\n// you can redistribute them and/or modify them\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React, {\n  createContext,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport _get from \"lodash/get\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport { i18next } from \"@translations/invenio_app_rdm/i18next\";\nimport { DepositFormApp, FormFeedback } from \"@js/invenio_rdm_records\";\nimport {\n  Button,\n  Confirm,\n  Container,\n  Icon,\n  Grid,\n  Modal,\n  Step,\n  Transition,\n} from \"semantic-ui-react\";\nimport PropTypes, { object } from \"prop-types\";\nimport Overridable from \"react-overridable\";\nimport {\n  flattenKeysDotJoined,\n  flattenWrappers,\n  getTouchedParent,\n} from \"./utils\";\nimport { fieldComponents } from \"./componentsMap\";\nimport { FormPage } from \"./FormPage\";\nimport { initial, set } from \"lodash\";\n\nconst validator = require(`@js/invenio_modular_deposit_form_extras/validator.js`);\nconst validationSchema = validator?.validationSchema\n  ? validator?.validationSchema\n  : null;\nconst validate = validator?.validate ? validator?.validate : null;\n\n// React Context to track the current form values.\n// Will contain the Formik values object passed up from a\n// form field.\nconst FormValuesContext = createContext();\n\nexport const RDMDepositForm = ({\n  commonFields,\n  config,\n  currentUserprofile,\n  defaultFieldValues,\n  defaultResourceType,\n  descriptionModifications,\n  extraRequiredFields,\n  files,\n  fieldsByType,\n  helpTextModifications,\n  iconModifications,\n  labelModifications,\n  record,\n  permissions,\n  pidsConfigOverrides,\n  placeholderModifications,\n  preselectedCommunity,\n  priorityFieldValues,\n}) => {\n  const formPages = commonFields[0].subsections;\n  const formPageSlugs = formPages.map(({ section }) => section);\n  const [currentFormPage, setCurrentFormPage] = useState(formPages[0].section);\n  const [nextFormPage, setNextFormPage] = useState(null);\n  const [confirmingPageChange, setConfirmingPageChange] = useState(false);\n  const [currentValues, setCurrentValues] = useState({});\n  const [currentErrors, setCurrentErrors] = useState({});\n  const [currentInitialErrors, setCurrentInitialErrors] = useState({});\n  const [pagesWithErrors, setPagesWithErrors] = useState({});\n  const [pagesWithTouchedErrors, setPagesWithTouchedErrors] = useState({});\n  const [currentTouched, setCurrentTouched] = useState({});\n  const [currentResourceType, setCurrentResourceType] =\n    useState(defaultResourceType);\n  const [currentTypeFields, setCurrentTypeFields] = useState(\n    fieldsByType[defaultResourceType]\n  );\n  const [fieldTouchHandler, setFieldTouchHandler] = useState();\n  const currentFieldMods = {\n    labelMods: labelModifications[currentResourceType],\n    iconMods: iconModifications[currentResourceType],\n    helpTextMods: helpTextModifications[currentResourceType],\n    placeholderMods: placeholderModifications[currentResourceType],\n    descriptionMods: descriptionModifications[currentResourceType],\n    defaultFieldValues: defaultFieldValues[currentResourceType],\n    priorityFieldValues: priorityFieldValues[currentResourceType],\n    extraRequiredFields: extraRequiredFields[currentResourceType],\n  };\n  const customFieldsUI = config.custom_fields.ui;\n  const [formPageFields, setFormPageFields] = useState({});\n  console.log(\"RDMDepositForm values\", currentValues);\n  const [recoveryAsked, setRecoveryAsked] = useState(false);\n  const [storageDataPresent, setStorageDataPresent] = useState(false);\n  const confirmModalRef = useRef();\n\n  // fix sticky footer overlapping content when navigating by keyboard\n  // combined with css scroll-margin-bottom\n  useEffect(() => {\n    function handleFocus(event) {\n      event.target.scrollIntoView({ block: \"center\", behavior: \"smooth\" });\n    }\n\n    const inputs = document.querySelectorAll(\n      \"#rdm-deposit-form input, #rdm-deposit-form button, #rdm-deposit-form select\"\n    );\n    inputs.forEach((input) => {\n      input.addEventListener(\"focus\", handleFocus);\n    });\n    const textareas = document.querySelectorAll(\"#rdm-deposit-form textarea\");\n    textareas.forEach((textarea) => {\n      textarea.addEventListener(\"focus\", handleFocus);\n    });\n    return () => {\n      inputs.forEach((input) => {\n        input.removeEventListener(\"focus\", handleFocus);\n      });\n      textareas.forEach((textarea) => {\n        textarea.removeEventListener(\"focus\", handleFocus);\n      });\n    };\n  }, [currentFormPage]);\n\n  const setFormPageInHistory = (value) => {\n    if (value === undefined) {\n      value = currentFormPage;\n    }\n    let urlParams = new URLSearchParams(window.location.search);\n    if (!urlParams.has(\"depositFormPage\")) {\n      urlParams.append(\"depositFormPage\", value);\n    } else if (!urlParams.depositFormPage !== value) {\n      urlParams.set(\"depositFormPage\", value);\n    }\n    const currentBaseURL = window.location.origin;\n    const currentPath = window.location.pathname;\n    const currentParams = urlParams.toString();\n    const newCurrentURL = `${currentBaseURL}${currentPath}?${currentParams}`;\n    window.history.pushState(\"fake-route\", document.title, newCurrentURL);\n  };\n\n  const handleFormPageParam = () => {\n    const urlParams = new URLSearchParams(window.location.search);\n    let urlFormPage = urlParams.get(\"depositFormPage\");\n    if (!!urlFormPage && formPageSlugs.includes(urlFormPage)) {\n      setCurrentFormPage(urlFormPage);\n    } else {\n      urlFormPage = \"1\";\n    }\n    return urlFormPage;\n  };\n\n  const updateFormErrorState = (errors, touched, initialErrors) => {\n    const errorFields = flattenKeysDotJoined(errors);\n    const touchedFields = flattenKeysDotJoined(touched);\n    const initialErrorFields = flattenKeysDotJoined(initialErrors);\n    let errorPages = {};\n    let touchedErrorPages = {};\n    // for each page...\n\n    for (const p of formPages) {\n      // add page to error pages if the two lists overlap\n      const pageErrorFields = formPageFields[p.section]?.filter((item) =>\n        errorFields.includes(item)\n      );\n      const pageTouchedErrorFields = pageErrorFields?.filter(\n        (item) =>\n          touchedFields.includes(item) || getTouchedParent(currentTouched, item)\n      );\n      const pageInitialErrorFields = formPageFields[p.section]?.filter((item) =>\n        initialErrorFields.includes(item)\n      );\n      if (pageErrorFields?.length > 0) {\n        errorPages[p.section] = pageErrorFields;\n      }\n      if (pageTouchedErrorFields?.length > 0) {\n        touchedErrorPages[p.section] = pageTouchedErrorFields;\n      } else if (\n        pageInitialErrorFields?.length > 0 &&\n        pageErrorFields?.length > 0\n      ) {\n        touchedErrorPages[p.section] = pageInitialErrorFields;\n      }\n    }\n    setPagesWithErrors(errorPages);\n    setPagesWithTouchedErrors(touchedErrorPages);\n    // TODO: don't need to navigate back now because errors handled client-side?\n    // errorPages.length && setCurrentFormPage(errorPages[0].section);\n  };\n\n  useEffect(() => {\n    const startingParam = handleFormPageParam();\n    // Add a fake history event so that the back button does nothing if pressed once\n    setFormPageInHistory(startingParam);\n    window.addEventListener(\"popstate\", handleFormPageParam);\n\n    return () => {\n      window.removeEventListener(\"popstate\", handleFormPageParam);\n      // If we left without using the back button, aka by using a button on the page, we need to clear out that fake history event\n      if (window.history.state === \"fake-route\") {\n        window.history.back();\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    updateFormErrorState(currentErrors, currentTouched, currentInitialErrors);\n  }, [currentErrors, currentTouched, currentInitialErrors]);\n\n  // TODO: Make ALL vocabulary be generated by backend.\n  // Currently, some vocabulary is generated by backend and some is\n  // generated by frontend here. Iteration is faster and abstractions can be\n  // discovered by generating vocabulary here. Once happy with vocabularies,\n  // then we can generate it in the backend.\n  const vocabularies = {\n    metadata: {\n      ...config.vocabularies,\n\n      creators: {\n        ...config.vocabularies.creators,\n        type: [\n          { text: \"Person\", value: \"personal\" },\n          { text: \"Organization\", value: \"organizational\" },\n        ],\n      },\n\n      contributors: {\n        ...config.vocabularies.contributors,\n        type: [\n          { text: \"Person\", value: \"personal\" },\n          { text: \"Organization\", value: \"organizational\" },\n        ],\n      },\n      identifiers: {\n        ...config.vocabularies.identifiers,\n      },\n    },\n  };\n\n  // check if files are present\n  let noFiles = false;\n  if (\n    !Array.isArray(files.entries) ||\n    (!files.entries.length && record.is_published)\n  ) {\n    noFiles = true;\n  }\n\n  const focusFirstElement = () => {\n    setTimeout(() => {\n      // FIXME: workaround since file uploader has inaccessible first input\n      const targetIndex = currentFormPage === \"page-6\" ? 1 : 0;\n      const idString = `InvenioAppRdm\\\\.Deposit\\\\.FormPage\\\\.${currentFormPage}`;\n      const newInputs = document.querySelectorAll(\n        `#${idString} button, #${idString} input, #${idString} .selection.dropdown input`\n      );\n      const newFirstInput = newInputs[targetIndex];\n      newFirstInput?.focus();\n      console.log(\"scrolling: focusing on\", newFirstInput);\n    }, 100);\n  };\n\n  useLayoutEffect(() => {\n    focusFirstElement();\n  }, [currentFormPage]);\n\n  const handlePageChangeCancel = () => {\n    setConfirmingPageChange(false);\n    focusFirstElement();\n  };\n\n  const handlePageChangeConfirm = () => {\n    setConfirmingPageChange(false);\n    handleFormPageChange(null, {\n      value: nextFormPage,\n    });\n  };\n\n  const handleFormPageChange = (event, { value }) => {\n    for (const field of formPageFields[currentFormPage]) {\n      fieldTouchHandler(field);\n      // let str = `*[id*=${field}]`\n      //   .split(\".\")\n      //   .join(\"\\\\.\")\n      //   .replace(\":\", \"\\\\:\")\n      //   .replace(\"_\", \"\\\\_\");\n      // document.querySelectorAll(str).forEach((e) => {\n      //   e.focus();\n      //   e.blur();\n      // });\n    }\n    if (pagesWithErrors[currentFormPage]?.length > 0 && !confirmingPageChange) {\n      setConfirmingPageChange(true);\n      setTimeout(() => {\n        confirmModalRef.current.focus();\n      }, 20);\n      setNextFormPage(value);\n    } else {\n      setCurrentFormPage(value);\n      setFormPageInHistory(value);\n    }\n  };\n\n  // update formPageFields when currentResourceType changes\n  useEffect(() => {\n    let newTypeFields = {};\n    for (const p of formPages) {\n      // collect form widget slugs\n      let adjustedTypeFields = currentTypeFields;\n      if (\n        adjustedTypeFields &&\n        adjustedTypeFields[p.section] &&\n        adjustedTypeFields[p.section][0].same_as\n      ) {\n        const newType = currentTypeFields[p.section][0].same_as;\n        adjustedTypeFields = fieldsByType[newType];\n        setCurrentTypeFields(adjustedTypeFields);\n      }\n      const pageFields =\n        !!adjustedTypeFields && !!adjustedTypeFields[p.section]\n          ? flattenWrappers({ subsections: adjustedTypeFields[p.section] })\n          : flattenWrappers(p);\n      // get form field label for each slug\n      const pageMetaFields = pageFields.reduce((accum, { component }) => {\n        accum = accum.concat(fieldComponents[component][1]);\n        return accum;\n      }, []);\n      newTypeFields[p.section] = pageMetaFields;\n    }\n    setFormPageFields(newTypeFields);\n  }, [currentResourceType]);\n\n  const handleValuesChange = (values) => {\n    setCurrentValues(values);\n    setCurrentResourceType(values.metadata.resource_type);\n    setCurrentTypeFields(fieldsByType[values.metadata.resource_type]);\n  };\n\n  // receive error values up from Formik context to main form context\n  // collect form field labels for current errors, and set pages with errors\n  const handleErrorsChange = (errors, touched, initialErrors) => {\n    console.log(\"handleErrorsChange errors\", errors);\n    console.log(\"handleErrorsChange touched\", touched);\n    console.log(\"handleErrorsChange fields\", currentTypeFields);\n    if (errors != {}) {\n      setCurrentErrors(errors);\n      setCurrentTouched(touched);\n    }\n    if (initialErrors != {}) {\n      setCurrentInitialErrors(initialErrors);\n    }\n  };\n\n  if (!!pidsConfigOverrides?.doi) {\n    Object.assign(\n      config.pids.filter((pid) => pid.scheme === \"doi\")[0],\n      pidsConfigOverrides.doi\n    );\n  }\n\n  // pass setFieldTouched up from Formik context to main form context\n  const handleSettingFieldTouched = (setTouchedFunction) => {\n    setFieldTouchHandler(() => setTouchedFunction);\n  };\n\n  const commonFieldProps = {\n    config: config,\n    currentUserprofile: currentUserprofile,\n    fieldComponents: fieldComponents,\n    noFiles: noFiles,\n    record: record,\n    vocabularies: vocabularies,\n    permissions: permissions,\n    customFieldsUI: customFieldsUI,\n    currentResourceType: currentResourceType,\n    ...currentFieldMods,\n  };\n\n  return (\n    <FormValuesContext.Provider\n      value={{\n        currentValues,\n        handleValuesChange,\n        currentErrors,\n        currentTouched,\n        handleErrorsChange,\n        handleFormPageChange,\n      }}\n    >\n      <DepositFormApp\n        config={config}\n        record={record}\n        preselectedCommunity={preselectedCommunity}\n        files={files}\n        permissions={permissions}\n        validate={validate}\n        validationSchema={validationSchema}\n      >\n        <Overridable\n          id=\"InvenioAppRdm.Deposit.FormFeedback.container\"\n          labels={config.custom_fields.error_labels}\n          fieldPath=\"message\"\n        >\n          <FormFeedback\n            fieldPath=\"message\"\n            labels={config.custom_fields.error_labels}\n          />\n        </Overridable>\n\n        <Container text id=\"rdm-deposit-form\" className=\"rel-mt-1\">\n          <Grid className=\"mt-25\">\n            <Grid.Column mobile={16} tablet={16} computer={16}>\n              <h2>\n                {i18next.t(`${record.id !== null ? \"Updating \" : \"New \"}\n                ${record.status === \"draft\" ? \"Draft \" : \"Published \"}Deposit`)}\n              </h2>\n              <Step.Group\n                widths={formPages.length}\n                className=\"upload-form-pager\"\n                fluid={true}\n                size={\"small\"}\n              >\n                {formPages.map(({ section, label }, index) => (\n                  <Step\n                    key={index}\n                    as={Button}\n                    active={currentFormPage === section}\n                    link\n                    onClick={handleFormPageChange}\n                    value={section}\n                    formNoValidate\n                    className={`ui button upload-form-stepper-step ${section}\n                     ${!!pagesWithTouchedErrors[section] ? \"has-error\" : \"\"}`}\n                    type=\"button\"\n                  >\n                    <Step.Content>\n                      <Step.Title>{i18next.t(label)}</Step.Title>\n                    </Step.Content>\n                  </Step>\n                ))}\n              </Step.Group>\n\n              <Transition.Group\n                animation=\"fade\"\n                duration={{ show: 1000, hide: 20 }}\n              >\n                {formPages.map(({ section, subsections }, index) => {\n                  let actualSubsections = subsections;\n                  if (!!currentTypeFields && !!currentTypeFields[section]) {\n                    actualSubsections = currentTypeFields[section];\n                    if (!!actualSubsections[0].same_as) {\n                      actualSubsections =\n                        fieldsByType[actualSubsections[0].same_as][section];\n                    }\n                  }\n                  return (\n                    currentFormPage === section && (\n                      <div key={index}>\n                        <FormPage\n                          currentFormPage={section}\n                          currentUserprofile={currentUserprofile}\n                          commonFieldProps={commonFieldProps}\n                          focusFirstElement={focusFirstElement}\n                          id={`InvenioAppRdm.Deposit.FormPage.${section}`}\n                          pageFields={formPageFields[section]}\n                          pageNums={formPages.map(({ section }) => section)}\n                          recoveryAsked={recoveryAsked}\n                          setRecoveryAsked={setRecoveryAsked}\n                          storageDataPresent={storageDataPresent}\n                          setStorageDataPresent={setStorageDataPresent}\n                          subsections={actualSubsections}\n                          handleSettingFieldTouched={handleSettingFieldTouched}\n                        />\n                      </div>\n                    )\n                  );\n                })}\n              </Transition.Group>\n\n              <Confirm\n                icon=\"question circle outline\"\n                id=\"confirm-page-change\"\n                className=\"confirm-page-change\"\n                open={confirmingPageChange}\n                header={i18next.t(\"Hmmm...\")}\n                content={\n                  <Modal.Content image>\n                    <Icon name=\"question circle outline\" size=\"huge\" />\n                    <Modal.Description>\n                      {i18next.t(\n                        \"There are problems with the information you've entered. Do you want to fix them before moving on?\"\n                      )}\n                    </Modal.Description>\n                  </Modal.Content>\n                }\n                confirmButton={\n                  <button className=\"ui button\">\n                    {i18next.t(\"Continue anyway\")}\n                  </button>\n                }\n                cancelButton={\n                  <button className=\"ui button positive\" ref={confirmModalRef}>\n                    {i18next.t(\"Fix the problems\")}\n                  </button>\n                }\n                onCancel={handlePageChangeCancel}\n                onConfirm={handlePageChangeConfirm}\n              />\n            </Grid.Column>\n          </Grid>\n        </Container>\n      </DepositFormApp>\n    </FormValuesContext.Provider>\n  );\n};\n\nRDMDepositForm.propTypes = {\n  config: PropTypes.object.isRequired,\n  record: PropTypes.object.isRequired,\n  preselectedCommunity: PropTypes.object,\n  files: PropTypes.object,\n  permissions: PropTypes.object,\n};\n\nRDMDepositForm.defaultProps = {\n  preselectedCommunity: undefined,\n  permissions: null,\n  files: null,\n};\n\nexport { FormValuesContext };\n","import React, { useEffect, useState } from \"react\";\nimport _get from \"lodash/get\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport { i18next } from \"@translations/invenio_app_rdm/i18next\";\nimport { CustomFields, loadWidgetsFromConfig } from \"react-invenio-forms\";\n// import PropTypes from \"prop-types\";\nimport Overridable from \"react-overridable\";\nimport { FieldComponentWrapper } from \"./FieldComponentWrapper\";\n\n/**\n * A React component to insert UI for a single custom fields section\n *\n * @param {string} sectionName  The label for the form section containing the\n *                              custom field(s) to be injected. Taken from the\n *                              custom field ui declaration for the field.\n * @param {string} idString  The string identifier to be used in building\n *                           the id for this field's container\n * @param {object} customFieldsUI  The whole custom fields ui declaration\n *                                 taken from the form's config\n */\nconst CustomFieldInjector = ({\n  sectionName,\n  fieldName,\n  idString,\n  customFieldsUI,\n  ...restArgs\n}) => {\n  const [MyWidget, setMyWidget] = useState();\n  const chosenSetConfig = new Array(\n    customFieldsUI.find((item) => item.section === sectionName)\n  );\n  const chosenFieldConfig = chosenSetConfig[0].fields.find(\n    (item) => item.field === fieldName\n  );\n  console.log(\"chosenFieldConfig\", chosenFieldConfig);\n  chosenFieldConfig.props = { ...chosenFieldConfig.props, ...restArgs };\n  const templateLoaders = [\n    (widget) => import(`@templates/custom_fields/${widget}.js`),\n    (widget) => import(`@templates/custom_fields/${widget}.jsx`),\n    () => import(`@js/invenio_rdm_records/src/deposit/customFields`),\n    () => import(`@js/invenio_modular_deposit_form`),\n    () => import(`react-invenio-forms`),\n  ];\n  const fieldPathPrefix = \"custom_fields\";\n  useEffect(() => {\n    loadWidgetsFromConfig({\n      templateLoaders: templateLoaders,\n      fieldPathPrefix: fieldPathPrefix,\n      fields: new Array(chosenFieldConfig),\n    }).then((x) => setMyWidget(x[0]));\n  }, []);\n\n  return (\n    <FieldComponentWrapper\n      componentName={idString}\n      fieldPath={fieldPathPrefix + \".\" + fieldName}\n      customFieldsUI={chosenSetConfig}\n      {...chosenFieldConfig.props}\n    >\n      {MyWidget}\n      {/* FIXME: Do we have to load widget dynamically like this? */}\n      {/* <CustomFields\n        config={chosenSetConfig}\n        templateLoaders={templateLoaders}\n        fieldPathPrefix=\"custom_fields\"\n      /> */}\n    </FieldComponentWrapper>\n  );\n};\n\nconst CustomFieldSectionInjector = ({\n  sectionName,\n  idString,\n  customFieldsUI,\n}) => {\n  const chosenSetConfig = new Array(\n    customFieldsUI.find((item) => item.section === sectionName)\n  );\n  const templateLoaders = [\n    (widget) => import(`@templates/custom_fields/${widget}.js`),\n    (widget) => import(`@js/invenio_rdm_records/src/deposit/customFields`),\n    (widget) => import(`react-invenio-forms`),\n  ];\n\n  return (\n    <Overridable\n      id={`InvenioAppRdm.Deposit.${idString}.container`}\n      customFieldsUI={chosenSetConfig}\n    >\n      <CustomFields\n        config={chosenSetConfig}\n        templateLoaders={templateLoaders}\n        fieldPathPrefix=\"custom_fields\"\n      />\n    </Overridable>\n  );\n};\n\nexport { CustomFieldInjector, CustomFieldSectionInjector };\n","import React from \"react\";\nimport Overridable from \"react-overridable\";\nimport { pickBy } from \"lodash\";\n\nconst FieldComponentWrapper = ({\n  children,\n  componentName,\n  fieldPath,\n  icon,\n  iconMods,\n  label,\n  labelMods,\n  defaultFieldValues,\n  description,\n  descriptionMods,\n  extraRequiredFields,\n  helpText,\n  helpTextMods,\n  placeholder,\n  placeholderMods,\n  priorityFieldValues,\n  required,\n  ...extraProps\n}) => {\n  const moddedIcon =\n    iconMods && iconMods.hasOwnProperty(fieldPath) ? iconMods[fieldPath] : icon;\n  const moddedLabel =\n    labelMods && labelMods.hasOwnProperty(fieldPath)\n      ? labelMods[fieldPath]\n      : label;\n  const moddedDescription =\n    descriptionMods && descriptionMods.hasOwnProperty(fieldPath)\n      ? descriptionMods[fieldPath]\n      : description;\n  const moddedPlaceholder =\n    placeholderMods && placeholderMods.hasOwnProperty(fieldPath)\n      ? placeholderMods[fieldPath]\n      : placeholder;\n  const moddedHelpText =\n    helpTextMods && helpTextMods.hasOwnProperty(fieldPath)\n      ? helpTextMods[fieldPath]\n      : helpText;\n  const moddedRequired =\n    extraRequiredFields && extraRequiredFields.hasOwnProperty(fieldPath)\n      ? extraRequiredFields[fieldPath]\n      : required;\n  const defaultFieldValue =\n    defaultFieldValues && defaultFieldValues.hasOwnProperty[fieldPath]\n      ? defaultFieldValues[fieldPath]\n      : null;\n  const priorityFieldValueSet =\n    priorityFieldValues && priorityFieldValues.hasOwnProperty(fieldPath)\n      ? priorityFieldValues[fieldPath]\n      : null;\n  // Remove undefined values from extraProps\n  const cleanedExtraProps = pickBy(extraProps, (v) => v !== undefined);\n  return (\n    <>\n      <Overridable\n        id={`InvenioAppRdm.Deposit.${componentName}.container`}\n        fieldPath={fieldPath}\n      >\n        {children &&\n          React.cloneElement(\n            children,\n            {\n              defaultFieldValue: defaultFieldValue,\n              description: \"\",\n              fieldPath: fieldPath,\n              helptext: moddedHelpText ? moddedHelpText : moddedDescription,\n              label: moddedLabel,\n              labelIcon: moddedIcon,\n              placeholder: moddedPlaceholder,\n              priorityFieldValues: priorityFieldValueSet,\n              required: moddedRequired,\n              ...cleanedExtraProps,\n            },\n            null\n          )}\n      </Overridable>\n      {(moddedHelpText || moddedDescription) && (\n        <label id={`${fieldPath}.helptext`} className=\"helptext\">\n          {moddedHelpText || moddedDescription}\n        </label>\n      )}\n    </>\n  );\n};\n\nexport { FieldComponentWrapper };\n","// Part of the Knowledge Commons Repository\n// Copyright (C) 2023 MESH Research\n//\n// based on portions of InvenioRDM\n// Copyright (C) 2020-2022 CERN.\n// Copyright (C) 2020-2022 Northwestern University.\n// Copyright (C) 2021-2022 Graz University of Technology.\n// Copyright (C) 2022-2023 KTH Royal Institute of Technology.\n//\n// The Knowledge Commons Repository and Invenio App RDM are both free software;\n// you can redistribute them and/or modify them\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React from \"react\";\nimport _get from \"lodash/get\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport { i18next } from \"@translations/invenio_app_rdm/i18next\";\nimport {\n  AccessRightField,\n  DescriptionsField,\n  CreatibutorsField,\n  DeleteButton,\n  DepositFormApp,\n  DepositStatusBox,\n  FileUploader,\n  FormFeedback,\n  IdentifiersField,\n  LanguagesField,\n  LicenseField,\n  PublicationDateField,\n  PublishButton,\n  PublisherField,\n  ReferencesField,\n  RelatedWorksField,\n  SubjectsField,\n  TitlesField,\n  VersionField,\n  CommunityHeader,\n} from \"@js/invenio_rdm_records\";\nimport { Form, Grid } from \"semantic-ui-react\";\nimport Overridable from \"react-overridable\";\nimport {\n  AccessRightsComponent,\n  AdditionalDatesComponent,\n  BookTitleComponent,\n  DateComponent,\n  SectionPagesComponent,\n  JournalTitleComponent,\n  JournalISSNComponent,\n  MeetingDatesComponent,\n  MeetingPlaceComponent,\n  MeetingTitleComponent,\n  PublisherComponent,\n  PublicationLocationComponent,\n  ResourceTypeComponent,\n  SubmissionComponent,\n  TitleComponent,\n  TotalPagesComponent,\n  VersionComponent,\n  UniversityComponent,\n} from \"./field_components\";\nimport { CustomFieldInjector } from \"./CustomFieldInjector\";\n\nconst CombinedDatesComponent = ({ vocabularies }) => {\n  return (\n    <>\n      <DateComponent />\n      <AdditionalDatesComponent vocabularies={vocabularies} />\n    </>\n  );\n};\n\nconst MeetingDetailsComponent = ({ customFieldsUI }) => {\n  return (\n    <>\n      <MeetingTitleComponent customFieldsUI={customFieldsUI} />\n      <MeetingDatesComponent customFieldsUI={customFieldsUI} />\n      <MeetingPlaceComponent customFieldsUI={customFieldsUI} />\n    </>\n  );\n};\n\nconst OrganizationDetailsComponent = ({ customFieldsUI }) => {\n  return (\n    <>\n      <PublicationLocationComponent customFieldsUI={customFieldsUI} />\n    </>\n  );\n};\n\nconst PublicationDetailsComponent = ({ customFieldsUI }) => {\n  return (\n    <>\n      <Form.Group widths=\"equal\">\n        <CustomFieldInjector\n          sectionName=\"Book / Report / Chapter\"\n          fieldName=\"imprint:imprint.isbn\"\n          idString=\"ImprintISBNField\"\n          description=\"e.g. 0-06-251587-X\"\n          placeholder=\"\"\n          customFieldsUI={customFieldsUI}\n        />\n        <VersionComponent description=\"\" />\n      </Form.Group>\n      <Form.Group widths=\"equal\">\n        <PublisherComponent />\n        <PublicationLocationComponent customFieldsUI={customFieldsUI} />\n      </Form.Group>\n    </>\n  );\n};\n\nconst SubmitActionsComponent = ({ permissions, record }) => {\n  return (\n    <Grid className=\"submit-actions\">\n      <Grid.Row>\n        <Grid.Column width=\"16\">\n          <AccessRightsComponent permissions={permissions} />\n        </Grid.Column>\n      </Grid.Row>\n      <Grid.Row className=\"submit-buttons-row\">\n        <SubmissionComponent record={record} permissions={permissions} />\n      </Grid.Row>\n    </Grid>\n  );\n};\n\nconst ThesisDetailsComponent = ({ customFieldsUI, labelMods }) => {\n  return (\n    <>\n      <UniversityComponent\n        customFieldsUI={customFieldsUI}\n        labelMods={labelMods}\n      />\n    </>\n  );\n};\n\nconst TypeTitleComponent = ({ vocabularies, record, labelMods }) => {\n  return (\n    <>\n      <TitleComponent\n        vocabularies={vocabularies}\n        record={record}\n        labelMods={labelMods}\n      />\n      <ResourceTypeComponent\n        vocabularies={vocabularies}\n        labelMods={labelMods}\n      />\n    </>\n  );\n};\n\nexport {\n  CombinedDatesComponent,\n  MeetingDetailsComponent,\n  OrganizationDetailsComponent,\n  PublicationDetailsComponent,\n  SubmitActionsComponent,\n  ThesisDetailsComponent,\n  TypeTitleComponent,\n};\n","// This file is part of Invenio-RDM-Records\n// Copyright (C) 2020-2023 CERN.\n// Copyright (C) 2020-2022 Northwestern University.\n//\n// Invenio-RDM-Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { i18next } from \"@translations/invenio_app_rdm/i18next\";\nimport { MultiInput } from \"react-invenio-forms\";\n\nconst SizesField = ({\n  fieldPath = \"metadata.sizes\",\n  additionLabel,\n  label = i18next.t(\"Sizes\"),\n  description,\n  placeholder = i18next.t(\"e.g., 32 x 24 cm or 1.5 GB (press 'enter' to add)\"),\n  icon = \"crop\",\n  classnames,\n  required,\n  ...extraProps\n}) => {\n  console.log(\"Sizes extraProps\", extraProps);\n  return (\n    <>\n      <MultiInput\n        fieldPath={`${fieldPath}`}\n        {...{\n          additionLabel,\n          label,\n          description,\n          placeholder,\n          icon,\n          classnames,\n          required,\n        }}\n        {...extraProps}\n      />\n      {description && <label className=\"helptext mb-0\">{description}</label>}\n    </>\n  );\n};\n\nSizesField.propTypes = {\n  fieldPath: PropTypes.string.isRequired,\n  icon: PropTypes.string,\n  label: PropTypes.string,\n};\n\nexport { SizesField };\n","// Part of the Knowledge Commons Repository\n// Copyright (C) 2023 MESH Research\n//\n// based on portions of InvenioRDM\n// Copyright (C) 2020-2022 CERN.\n// Copyright (C) 2020-2022 Northwestern University.\n// Copyright (C) 2021-2022 Graz University of Technology.\n// Copyright (C) 2022-2023 KTH Royal Institute of Technology.\n//\n// The Knowledge Commons Repository and Invenio App RDM are both free software;\n// you can redistribute them and/or modify them\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React, { Fragment, useContext, useState } from \"react\";\nimport _get from \"lodash/get\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport { i18next } from \"@translations/invenio_app_rdm/i18next\";\nimport { useFormikContext } from \"formik\";\nimport { useStore } from \"react-redux\";\nimport { AccordionField } from \"react-invenio-forms\";\nimport {\n  AccessRightField,\n  DescriptionsField,\n  CommunityHeader,\n  CreatibutorsField,\n  DeleteButton,\n  DepositFormApp,\n  DepositStatusBox,\n  FileUploader,\n  FormFeedback,\n  IdentifiersField,\n  PreviewButton,\n  LanguagesField,\n  LicenseField,\n  PublicationDateField,\n  PublishButton,\n  PublisherField,\n  ReferencesField,\n  RelatedWorksField,\n  SubjectsField,\n  TitlesField,\n  VersionField,\n  SaveButton,\n} from \"@js/invenio_rdm_records\";\nimport { FundingField } from \"@js/invenio_vocabularies\";\nimport { Grid, Message } from \"semantic-ui-react\";\n// import PropTypes from \"prop-types\";\nimport Overridable from \"react-overridable\";\nimport { DatesField } from \"../replacement_components/DatesField\";\nimport { CommunityField } from \"../replacement_components/CommunityField\";\nimport { PIDField } from \"../replacement_components/PIDField\";\nimport ResourceTypeSelectorField from \"../replacement_components/ResourceTypeSelectorField\";\nimport { SizesField } from \"../replacement_components/SizesField\";\nimport { SubmitButtonModal } from \"../replacement_components/PublishButton/SubmitButton\";\nimport { moveToArrayStart } from \"../utils\";\nimport { CustomFieldInjector } from \"./CustomFieldInjector\";\nimport { FieldComponentWrapper } from \"./FieldComponentWrapper\";\nimport { FormValuesContext } from \"../RDMDepositForm\";\n\nconst AbstractComponent = ({ record, vocabularies, ...extraProps }) => {\n  return (\n    // <Overridable\n    //   id=\"InvenioAppRdm.Deposit.DescriptionsField.container\"\n    //   record={record}\n    //   vocabularies={vocabularies}\n    //   fieldPath=\"metadata.description\"\n    // >\n    <FieldComponentWrapper\n      componentName=\"DescriptionsField\"\n      fieldPath=\"metadata.description\"\n      {...extraProps}\n    >\n      <DescriptionsField\n        fieldPath=\"metadata.description\"\n        options={vocabularies.metadata.descriptions}\n        recordUI={_get(record, \"ui\", null)}\n        label={extraProps.label || \"Description\"}\n        editorConfig={{\n          removePlugins: [\n            \"Image\",\n            \"ImageCaption\",\n            \"ImageStyle\",\n            \"ImageToolbar\",\n            \"ImageUpload\",\n            \"MediaEmbed\",\n            \"Table\",\n            \"TableToolbar\",\n            \"TableProperties\",\n            \"TableCellProperties\",\n          ],\n        }}\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst AccessRightsComponent = ({ permissions, ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"AccessRightField\"\n      fieldPath=\"access\"\n      {...extraProps}\n      icon={extraProps.icon || \"shield\"}\n      label={extraProps.label || i18next.t(\"Public access\")}\n    >\n      <AccessRightField\n        fieldPath=\"access\"\n        showMetadataAccess={permissions?.can_manage_record_access}\n        fluid\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst AdditionalDatesComponent = ({ vocabularies, ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"DateField\"\n      fieldPath=\"metadata.dates\"\n      {...extraProps}\n    >\n      <DatesField\n        fieldPath=\"metadata.dates\"\n        options={vocabularies.metadata.dates}\n        showEmptyValue={false}\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst AdditionalDescriptionComponent = ({\n  record,\n  vocabularies,\n  ...extraProps\n}) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"DescriptionsField\"\n      fieldPath=\"metadata.description\"\n      {...extraProps}\n    >\n      <DescriptionsField\n        options={vocabularies.metadata.descriptions}\n        recordUI={_get(record, \"ui\", null)}\n        editorConfig={{\n          removePlugins: [\n            \"Image\",\n            \"ImageCaption\",\n            \"ImageStyle\",\n            \"ImageToolbar\",\n            \"ImageUpload\",\n            \"MediaEmbed\",\n            \"Table\",\n            \"TableToolbar\",\n            \"TableProperties\",\n            \"TableCellProperties\",\n          ],\n        }}\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst AdditionalTitlesComponent = () => {\n  return <></>;\n};\n\nconst AlternateIdentifiersComponent = ({ vocabularies, ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"IdentifiersField\"\n      fieldPath=\"metadata.identifiers\"\n      label={i18next.t(\"URLs and Other Identifiers\")}\n      icon={\"barcode\"}\n      {...extraProps}\n    >\n      <IdentifiersField\n        schemeOptions={vocabularies.metadata.identifiers.scheme}\n        showEmptyValue={false}\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst BookTitleComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Book / Report / Chapter\"\n      fieldName=\"imprint:imprint.title\"\n      idString=\"ImprintTitleField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      label={\"Book title\"}\n      icon={\"book\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst CodeDevelopmentStatusComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Software\"\n      fieldName=\"code:developmentStatus\"\n      idString=\"CodeDevelopmentStatusField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst CodeOperatingSystemComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Software\"\n      fieldName=\"code:operatingSystem\"\n      idString=\"CodeOperatingSystemField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst CodeProgrammingLanguageComponent = ({\n  customFieldsUI,\n  ...extraProps\n}) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Software\"\n      fieldName=\"code:programmingLanguage\"\n      idString=\"CodeProgrammingLanguageField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst CodeRepositoryComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Software\"\n      fieldName=\"code:codeRepository\"\n      idString=\"CodeRepositoryField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst CodeRuntimePlatformComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Software\"\n      fieldName=\"code:runtimePlatform\"\n      idString=\"CodeRuntimePlatformField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst CommonsDomainComponent = ({ customFieldsUI }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Commons admin info\"\n      fieldName=\"kcr:commons_domain\"\n      idString=\"CommonsDomainField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst CommunitiesComponent = () => {\n  {\n    /* <Overridable id=\"InvenioAppRdm.Deposit.CommunityHeader.container\">\n    <CommunityHeader imagePlaceholderLink=\"/static/images/square-placeholder.png\" />\n  </Overridable> */\n  }\n  return (\n    <CommunityField imagePlaceholderLink=\"/static/images/square-placeholder.png\" />\n  );\n};\n\nconst ContributorsComponent = ({ config, vocabularies, ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"ContibutorsField\"\n      fieldPath=\"metadata.contributors\"\n      label={i18next.t(\"Contributors\")}\n      labelIcon=\"user plus\"\n      {...extraProps}\n    >\n      <CreatibutorsField\n        addButtonLabel={i18next.t(\"Add contributor\")}\n        roleOptions={vocabularies.metadata.contributors.role}\n        schema=\"contributors\"\n        autocompleteNames={config.autocomplete_names}\n        modal={{\n          addLabel: \"Add contributor\",\n          editLabel: \"Edit contributor\",\n        }}\n        id=\"InvenioAppRdm.Deposit.ContributorsField.card\"\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst CreatorsComponent = ({\n  config,\n  vocabularies,\n  currentUserProfile,\n  ...extraProps\n}) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"CreatorsField\"\n      fieldPath=\"metadata.creators\"\n      label={i18next.t(\"Creators\")}\n      icon=\"user\"\n      description=\"\"\n      {...extraProps}\n    >\n      <CreatibutorsField\n        roleOptions={vocabularies.metadata.creators.role}\n        schema=\"creators\"\n        autocompleteNames={config.autocomplete_names}\n        required\n        config={config}\n        addButtonLabel={i18next.t(\"Add creator\")}\n        currentUserprofile={currentUserProfile}\n        modal={{\n          addLabel: i18next.t(\"Add creator\"),\n          editLabel: i18next.t(\"Edit creator\"),\n        }}\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst DateComponent = ({ ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"PublicationDateField\"\n      fieldPath=\"metadata.publication_date\"\n      {...extraProps}\n    >\n      <PublicationDateField required fieldPath=\"metadata.publication_date\" />\n    </FieldComponentWrapper>\n  );\n};\n\nconst DeleteComponent = ({ permissions, record, ...extraProps }) => {\n  return (\n    <>\n      {permissions?.can_delete_draft ? (\n        <FieldComponentWrapper\n          componentName=\"CardDeleteButton\"\n          fieldPath={\"\"}\n          {...extraProps}\n        >\n          <DeleteButton fluid />\n        </FieldComponentWrapper>\n      ) : null}\n    </>\n  );\n};\n\nconst DoiComponent = ({ config, record, ...extraProps }) => {\n  return (\n    // FIXME: PIDField doesn't play nicely with FieldComponentWrapper\n    // <FieldComponentWrapper componentName=\"PIDField\" {...extraProps}>\n    <Fragment>\n      {config.pids.map((pid) => (\n        <Fragment key={pid.scheme}>\n          <PIDField\n            btnLabelDiscardPID={pid.btn_label_discard_pid}\n            btnLabelGetPID={pid.btn_label_get_pid}\n            canBeManaged={pid.can_be_managed}\n            canBeUnmanaged={pid.can_be_unmanaged}\n            fieldPath={`pids.${pid.scheme}`}\n            fieldLabel={pid.field_label}\n            isEditingPublishedRecord={\n              record.is_published === true // is_published is `null` at first upload\n            }\n            managedHelpText={pid.managed_help_text}\n            pidLabel={pid.pid_label}\n            pidPlaceholder={pid.pid_placeholder}\n            pidType={pid.scheme}\n            unmanagedHelpText={pid.unmanaged_help_text}\n            required\n            {...extraProps}\n          />\n        </Fragment>\n      ))}\n    </Fragment>\n    // </FieldComponentWrapper>\n  );\n};\n\nconst FilesUploadComponent = ({\n  config,\n  noFiles,\n  record,\n  permissions,\n  ...extraProps\n}) => {\n  return (\n    <>\n      {/* <Overridable\n      id=\"InvenioAppRdm.Deposit.AccordionFieldFiles.container\"\n      record={record}\n      config={config}\n      noFiles={noFiles}\n    >*/}\n      <FieldComponentWrapper\n        componentName=\"FileUploader\"\n        fieldPath=\"files\"\n        {...extraProps}\n      >\n        <FileUploader\n          noFiles={noFiles}\n          isDraftRecord={!record.is_published}\n          quota={config.quota}\n          decimalSizeDisplay={config.decimal_size_display}\n          showMetadataOnlyToggle={false} //{permissions?.can_manage_files}\n        />\n      </FieldComponentWrapper>\n      {/*</Overridable> */}\n    </>\n  );\n};\n\nconst FundingComponent = ({ ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"FundingField\"\n      fieldPath=\"metadata.funding\"\n      {...extraProps}\n    >\n      <FundingField\n        searchConfig={{\n          searchApi: {\n            axios: {\n              headers: {\n                Accept: \"application/vnd.inveniordm.v1+json\",\n              },\n              url: \"/api/awards\",\n              withCredentials: false,\n            },\n          },\n          initialQueryState: {\n            sortBy: \"bestmatch\",\n            sortOrder: \"asc\",\n            layout: \"list\",\n            page: 1,\n            size: 5,\n          },\n        }}\n        label=\"Funding\"\n        labelIcon=\"money bill alternate outline\"\n        deserializeAward={(award) => {\n          return {\n            title: award.title_l10n,\n            number: award.number,\n            funder: award.funder ?? \"\",\n            id: award.id,\n            ...(award.identifiers && {\n              identifiers: award.identifiers,\n            }),\n            ...(award.acronym && { acronym: award.acronym }),\n          };\n        }}\n        deserializeFunder={(funder) => {\n          return {\n            id: funder.id,\n            name: funder.name,\n            ...(funder.title_l10n && { title: funder.title_l10n }),\n            ...(funder.pid && { pid: funder.pid }),\n            ...(funder.country && { country: funder.country }),\n            ...(funder.identifiers && {\n              identifiers: funder.identifiers,\n            }),\n          };\n        }}\n        computeFundingContents={(funding) => {\n          let headerContent,\n            descriptionContent,\n            awardOrFunder = \"\";\n\n          if (funding.funder) {\n            const funderName =\n              funding.funder?.name ??\n              funding.funder?.title ??\n              funding.funder?.id ??\n              \"\";\n            awardOrFunder = \"funder\";\n            headerContent = funderName;\n            descriptionContent = \"\";\n\n            // there cannot be an award without a funder\n            if (funding.award) {\n              awardOrFunder = \"award\";\n              descriptionContent = funderName;\n              headerContent = funding.award.title;\n            }\n          }\n\n          return { headerContent, descriptionContent, awardOrFunder };\n        }}\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst ISBNComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Book / Report / Chapter\"\n      fieldName=\"imprint:imprint.isbn\"\n      idString=\"ImprintISBNField\"\n      customFieldsUI={customFieldsUI}\n      icon=\"barcode\"\n      placeholder=\"e.g. 0-06-251587-X\"\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst JournalTitleComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Journal\"\n      fieldName=\"journal:journal.title\"\n      idString=\"JournalTitleField\"\n      label=\"Journal title\"\n      icon=\"\"\n      description=\"\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nconst JournalISSNComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Journal\"\n      fieldName=\"journal:journal.issn\"\n      idString=\"JournalISSNField\"\n      label=\"ISSN\"\n      icon=\"barcode\"\n      description=\"\"\n      placeholder=\"e.g. 1234-5678\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nconst JournalVolumeComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Journal\"\n      fieldName=\"journal:journal.volume\"\n      idString=\"JournalVolumeField\"\n      label={i18next.t(\"Volume\")}\n      description=\"\"\n      icon=\"zip\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nconst JournalIssueComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Journal\"\n      fieldName=\"journal:journal.issue\"\n      idString=\"JournalIssueField\"\n      label={i18next.t(\"Issue\")}\n      description=\"\"\n      icon=\"book\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nconst LanguagesComponent = ({ record, ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"LanguagesField\"\n      fieldPath=\"metadata.languages\"\n      {...extraProps}\n    >\n      <LanguagesField\n        fieldPath=\"metadata.languages\"\n        initialOptions={_get(record, \"ui.languages\", []).filter(\n          (lang) => lang !== null\n        )} // needed because dumped empty record from backend gives [null]\n        placeholder={i18next.t(\n          'Type to search for a language (press \"enter\" to select)'\n        )}\n        description={i18next.t(\n          'Search for the language(s) of the resource (e.g., \"eng\", \"fra\", \"Swahili\"). Press enter to select each language.'\n        )}\n        serializeSuggestions={(suggestions) =>\n          suggestions.map((item) => ({\n            text: item.title_l10n,\n            value: item.id,\n            key: item.id,\n          }))\n        }\n        aria-describedby=\"metadata.languages.helptext\"\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst LicensesComponent = ({ ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"LicenseField\"\n      fieldPath=\"metadata.rights\"\n      {...extraProps}\n    >\n      <LicenseField\n        searchConfig={{\n          searchApi: {\n            axios: {\n              headers: {\n                Accept: \"application/vnd.inveniordm.v1+json\",\n              },\n              url: \"/api/vocabularies/licenses\",\n              withCredentials: false,\n            },\n          },\n          initialQueryState: {\n            filters: [[\"tags\", \"recommended\"]],\n          },\n        }}\n        serializeLicenses={(result) => ({\n          title: result.title_l10n,\n          description: result.description_l10n,\n          id: result.id,\n          link: result.props.url,\n        })}\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst MetadataOnlyComponent = () => {\n  return <></>;\n};\n\nconst MeetingAcronymComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Conference\"\n      fieldName=\"meeting:meeting.acronym\"\n      idString=\"MeetingAcronymField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst MeetingDatesComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Conference\"\n      fieldName=\"meeting:meeting.dates\"\n      idString=\"MeetingDatesField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst MeetingPlaceComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Conference\"\n      fieldName=\"meeting:meeting.place\"\n      idString=\"MeetingPlaceField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst MeetingSessionComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Conference\"\n      fieldName=\"meeting:meeting.session\"\n      idString=\"MeetingSessionField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst MeetingSessionPartComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Conference\"\n      fieldName=\"meeting:meeting.session_part\"\n      idString=\"MeetingSessionPartField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst MeetingTitleComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Conference\"\n      fieldName=\"meeting:meeting.title\"\n      idString=\"MeetingTitleField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst MeetingURLComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Conference\"\n      fieldName=\"meeting:meeting.url\"\n      idString=\"MeetingURLField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst SectionPagesComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Journal\"\n      fieldName=\"journal:journal.pages\"\n      idString=\"JournalPagesField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      label=\"Section pages\"\n      icon=\"file outline\"\n      placeholder=\"e.g. 123-145\"\n      {...extraProps}\n    />\n  );\n};\n\nconst PublisherComponent = ({ ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"PublisherField\"\n      fieldPath=\"metadata.publisher\"\n      description=\"\"\n      helpText=\"\"\n      placeholder={\"\"}\n      {...extraProps}\n    >\n      <PublisherField fieldPath=\"metadata.publisher\" required />\n    </FieldComponentWrapper>\n  );\n};\n\nconst PublicationLocationComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Book / Report / Chapter\"\n      fieldName=\"imprint:imprint.place\"\n      idString=\"ImprintPlaceField\"\n      customFieldsUI={customFieldsUI}\n      label={\"Place of Publication\"}\n      icon={\"map marker alternate\"}\n      description={\"\"}\n      placeholder={\"e.g. Lagos, Nigeria\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst ReferencesComponent = ({ vocabularies, ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"ReferencesField\"\n      fieldPath={\"metadata.references\"}\n      vocabularies={vocabularies}\n      {...extraProps}\n    >\n      <ReferencesField showEmptyValue />\n    </FieldComponentWrapper>\n  );\n};\n\nconst RelatedWorksComponent = ({ vocabularies, ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"RelatedWorksField\"\n      fieldPath={\"metadata.related_identifiers\"}\n      {...extraProps}\n    >\n      <RelatedWorksField\n        fieldPath=\"metadata.related_identifiers\"\n        options={vocabularies.metadata.identifiers}\n        showEmptyValue={false}\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst ResourceTypeComponent = ({ vocabularies, ...extraProps }) => {\n  {\n    /* <Overridable\n        id=\"InvenioAppRdm.Deposit.ResourceTypeField.container\"\n        vocabularies={vocabularies}\n        fieldPath=\"metadata.resource_type\"\n      >\n        <ResourceTypeField\n          options={vocabularies.metadata.resource_type}\n          fieldPath=\"metadata.resource_type\"\n          required\n        />\n      </Overridable> */\n  }\n  const fieldPath = \"metadata.resource_type\";\n  return (\n    <FieldComponentWrapper\n      componentName=\"ResourceTypeSelectorField\"\n      fieldPath={fieldPath}\n      {...extraProps}\n    >\n      <ResourceTypeSelectorField\n        fieldPath={fieldPath}\n        options={vocabularies.metadata.resource_type}\n        required\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst SizesComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"SizeField\"\n      fieldPath=\"metadata.sizes\"\n      icon={\"crop\"}\n      label={i18next.t(\"Dimensions\")}\n      {...extraProps}\n    >\n      <SizesField fieldPath=\"metadata.sizes\" label=\"Size\" />\n    </FieldComponentWrapper>\n  );\n};\n\nconst SubjectsComponent = ({ record, vocabularies, ...extraProps }) => {\n  let myLimitToOptions = [...vocabularies.metadata.subjects.limit_to];\n  myLimitToOptions.reverse();\n  myLimitToOptions = moveToArrayStart(\n    myLimitToOptions,\n    [\"FOS\", \"FAST-topical\", \"all\"],\n    \"value\"\n  );\n  return (\n    <FieldComponentWrapper\n      componentName=\"SubjectsField\"\n      fieldPath=\"metadata.subjects\"\n      placeholder={i18next.t(\n        \"Search for a subject by name (press 'enter' to select)\"\n      )}\n      label=\"Subjects\"\n      description={i18next.t(\n        \"These standardized subject headings help people to find your materials!\"\n      )}\n      {...extraProps}\n    >\n      <SubjectsField\n        initialOptions={_get(record, \"ui.subjects\", null)}\n        limitToOptions={myLimitToOptions}\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst SubmissionComponent = ({ record, permissions, currentUserprofile }) => {\n  const { errors, values, setFieldValue } = useFormikContext();\n  const { handleFormPageChange } = useContext(FormValuesContext);\n  const [confirmedNoFiles, setConfirmedNoFiles] = useState(undefined);\n  const store = useStore();\n\n  const hasFiles = Object.keys(store.getState().files.entries).length > 0;\n  const filesEnabled = !!values.files.enabled;\n  const missingFiles = filesEnabled && !hasFiles;\n\n  const filterEmptyIdentifiers = async () => {\n    if (values.metadata.identifiers.length) {\n      let filteredIdentifiers = values.metadata.identifiers.reduce(\n        (newList, item) => {\n          if (item.identifier !== \"\" && item.scheme !== \"\") newList.push(item);\n          return newList;\n        },\n        []\n      );\n      setFieldValue(\"metadata.identifiers\", filteredIdentifiers);\n    }\n    return values.metadata.identifiers;\n  };\n\n  const fixEmptyPublisher = async () => {\n    if (values.metadata.publisher === \"\" || !values.metadata.publisher) {\n      setFieldValue(\"metadata.publisher\", \"unknown\");\n    }\n    return values.metadata.publisher;\n  };\n\n  const handleConfirmNoFiles = async () => {\n    if (!hasFiles) {\n      setConfirmedNoFiles(true);\n      await setFieldValue(\"files.enabled\", false);\n    }\n  };\n\n  const handleConfirmNeedsFiles = () => {\n    setConfirmedNoFiles(false);\n    handleFormPageChange(null, { value: \"page-5\" });\n  };\n\n  const sanitizeDataForSaving = async () => {\n    // FIXME: This is a cludge to fix invalid data before saving\n    // where we don't want to force users to fix it\n    await filterEmptyIdentifiers();\n    await fixEmptyPublisher();\n    if (hasFiles && !filesEnabled) {\n      await setFieldValue(\"files.enabled\", true);\n    }\n  };\n\n  return (\n    <Overridable id=\"InvenioAppRdm.Deposit.CardDepositStatusBox.container\">\n      <Grid relaxed className=\"save-submit-buttons\">\n        {errors && !_isEmpty(errors) && (\n          <Grid.Row>\n            <Grid.Column computer=\"8\" tablet=\"6\">\n              <Message\n                visible\n                negative\n                icon=\"warning sign\"\n                header={i18next.t(\n                  \"There are problems with your submission. Please fix the highlighted sections.\"\n                )}\n              />\n            </Grid.Column>\n          </Grid.Row>\n        )}\n        <Grid.Row>\n          <Grid.Column computer=\"8\" tablet=\"6\">\n            <SubmitButtonModal\n              fluid\n              actionName=\"saveDraft\"\n              aria-describedby=\"save-button-description\"\n              currentUserProfile={currentUserprofile}\n              handleConfirmNeedsFiles={handleConfirmNeedsFiles}\n              handleConfirmNoFiles={handleConfirmNoFiles}\n              sanitizeDataForSaving={sanitizeDataForSaving}\n              missingFiles={missingFiles}\n              disabled={errors && !_isEmpty(errors)}\n            />\n          </Grid.Column>\n          <Grid.Column\n            tablet=\"10\"\n            computer=\"8\"\n            id=\"save-button-description\"\n            className=\"helptext\"\n          >\n            <p>\n              <b>Draft deposits</b> can be edited\n              {permissions?.can_delete_draft && \", deleted,\"} and the files can\n              be added or changed.\n            </p>\n          </Grid.Column>\n        </Grid.Row>\n\n        <Grid.Row>\n          <Grid.Column computer={8} tablet={6}>\n            <SubmitButtonModal\n              fluid\n              actionName=\"preview\"\n              aria-describedby=\"preview-button-description\"\n              currentUserProfile={currentUserprofile}\n              handleConfirmNeedsFiles={handleConfirmNeedsFiles}\n              handleConfirmNoFiles={handleConfirmNoFiles}\n              sanitizeDataForSaving={sanitizeDataForSaving}\n              missingFiles={missingFiles}\n              disabled={errors && !_isEmpty(errors)}\n            />\n          </Grid.Column>\n          <Grid.Column\n            tablet=\"10\"\n            computer=\"8\"\n            id=\"preview-button-description\"\n            className=\"helptext\"\n          ></Grid.Column>\n        </Grid.Row>\n\n        <Grid.Row>\n          <Grid.Column computer={8} tablet={6} className=\"\">\n            <SubmitButtonModal\n              fluid\n              actionName=\"publish\"\n              currentUserProfile={currentUserprofile}\n              handleConfirmNeedsFiles={handleConfirmNeedsFiles}\n              handleConfirmNoFiles={handleConfirmNoFiles}\n              sanitizeDataForSaving={sanitizeDataForSaving}\n              missingFiles={missingFiles}\n              aria-describedby=\"publish-button-description\"\n              size=\"massive\"\n              id=\"deposit-form-publish-button\"\n              positive\n              disabled={errors && !_isEmpty(errors)}\n            />\n          </Grid.Column>\n          <Grid.Column\n            tablet=\"10\"\n            computer=\"8\"\n            id=\"publish-button-description\"\n            className=\"helptext\"\n          >\n            <p>\n              <b>Published deposits</b> can still be edited, but you will no\n              longer be able to{\" \"}\n              {permissions?.can_delete_draft && \"delete the deposit or \"}change\n              the attached files. To add or change files for a published deposit\n              you must create a new version of the record.\n            </p>\n          </Grid.Column>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Column computer={8} tablet={6}>\n            <DeleteComponent\n              permissions={permissions}\n              record={record}\n              aria-describedby=\"delete-button-description\"\n              icon=\"trash alternate outline\"\n            />\n          </Grid.Column>\n          <Grid.Column\n            tablet=\"10\"\n            computer=\"8\"\n            id=\"delete-button-description\"\n            className=\"helptext\"\n          >\n            <p>\n              Deposits can only be <b>deleted while they are drafts</b>. Once\n              you publish your deposit, you can only restrict access and/or\n              create a new version.\n            </p>\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </Overridable>\n  );\n};\n\nconst SubmitterEmailComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Commons admin info\"\n      fieldName=\"kcr:submitter_email\"\n      idString=\"SubmitterEmailField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nconst SubmitterUsernameComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Commons admin info\"\n      fieldName=\"kcr:submitter_username\"\n      idString=\"SubmitterUsernameField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\nconst SubtitleComponent = () => {\n  return <></>;\n};\n\nconst TitleComponent = ({ vocabularies, record, ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"TitlesField\"\n      fieldPath=\"metadata.title\"\n      required\n      label={extraProps.label}\n      {...extraProps}\n    >\n      <TitlesField\n        fieldPath=\"metadata.title\"\n        options={vocabularies.metadata.titles}\n        recordUI={record.ui}\n      />\n    </FieldComponentWrapper>\n  );\n};\n\nconst TotalPagesComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Book / Report / Chapter\"\n      fieldName=\"imprint:imprint.pages\"\n      idString=\"ImprintPagesField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      label={i18next.t(\"Total book pages\")}\n      icon=\"file outline\"\n      {...extraProps}\n    />\n  );\n};\n\nconst UniversityComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"KCR Book information\"\n      fieldName=\"thesis:university\"\n      idString=\"ThesisUniversity\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nconst VersionComponent = ({ ...extraProps }) => {\n  return (\n    <FieldComponentWrapper\n      componentName=\"VersionField\"\n      fieldPath=\"metadata.version\"\n      helpText=\"\"\n      {...extraProps}\n    >\n      <VersionField />\n    </FieldComponentWrapper>\n  );\n};\n\nexport {\n  AbstractComponent,\n  AccessRightsComponent,\n  AdditionalDatesComponent,\n  AdditionalDescriptionComponent,\n  AdditionalTitlesComponent,\n  AlternateIdentifiersComponent,\n  BookTitleComponent,\n  CodeDevelopmentStatusComponent,\n  CodeOperatingSystemComponent,\n  CodeProgrammingLanguageComponent,\n  CodeRepositoryComponent,\n  CodeRuntimePlatformComponent,\n  CommonsDomainComponent,\n  CommunitiesComponent,\n  ContributorsComponent,\n  CreatorsComponent,\n  DateComponent,\n  DeleteComponent,\n  DoiComponent,\n  FilesUploadComponent,\n  FundingComponent,\n  ISBNComponent,\n  JournalISSNComponent,\n  JournalIssueComponent,\n  JournalTitleComponent,\n  JournalVolumeComponent,\n  LanguagesComponent,\n  LicensesComponent,\n  MetadataOnlyComponent,\n  MeetingAcronymComponent,\n  MeetingDatesComponent,\n  MeetingPlaceComponent,\n  MeetingSessionComponent,\n  MeetingSessionPartComponent,\n  MeetingTitleComponent,\n  MeetingURLComponent,\n  PublisherComponent,\n  PublicationLocationComponent,\n  ReferencesComponent,\n  RelatedWorksComponent,\n  ResourceTypeComponent,\n  SectionPagesComponent,\n  SizesComponent,\n  SubjectsComponent,\n  SubmissionComponent,\n  SubmitterEmailComponent,\n  SubmitterUsernameComponent,\n  SubtitleComponent,\n  TitleComponent,\n  TotalPagesComponent,\n  UniversityComponent,\n  VersionComponent,\n};\n","// This file is part of InvenioRDM\n// Copyright (C) 2020-2022 CERN.\n// Copyright (C) 2020-2022 Northwestern University.\n//\n// Invenio App RDM is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { getInputFromDOM } from \"@js/invenio_rdm_records/\";\nimport { RDMDepositForm } from \"./RDMDepositForm\";\nimport { OverridableContext, overrideStore } from \"react-overridable\";\n\nconst overriddenComponents = overrideStore.getAll();\nconst formDiv = document.getElementById(\"deposit-form\");\nconst dataSet = formDiv.dataset;\n\nReactDOM.render(\n  <OverridableContext.Provider value={overriddenComponents}>\n    <RDMDepositForm\n      commonFields={JSON.parse(dataSet.commonFields)}\n      config={getInputFromDOM(\"deposits-config\")}\n      currentUserprofile={JSON.parse(dataSet.currentUserprofile)}\n      defaultFieldValues={JSON.parse(dataSet.defaultFieldValues)}\n      defaultResourceType={JSON.parse(dataSet.defaultResourceType)}\n      descriptionModifications={JSON.parse(dataSet.descriptionModifications)}\n      extraRequiredFields={JSON.parse(dataSet.extraRequiredFields)}\n      fieldsByType={JSON.parse(dataSet.fieldsByType)}\n      files={getInputFromDOM(\"deposits-record-files\")}\n      helpTextModifications={JSON.parse(dataSet.helpTextModifications)}\n      iconModifications={JSON.parse(dataSet.iconModifications)}\n      labelModifications={JSON.parse(dataSet.labelModifications)}\n      permissions={getInputFromDOM(\"deposits-record-permissions\")}\n      pidsConfigOverrides={JSON.parse(dataSet.pidsConfigOverrides)}\n      placeholderModifications={JSON.parse(dataSet.placeholderModifications)}\n      preselectedCommunity={getInputFromDOM(\"deposits-draft-community\")}\n      priorityFieldValues={JSON.parse(dataSet.priorityFieldValues)}\n      record={getInputFromDOM(\"deposits-record\")}\n    />\n  </OverridableContext.Provider>,\n  formDiv\n);\n\nexport * from \"./RDMDepositForm\";\nexport * from \"./utils\";\nexport * from \"./field_components\";\nexport * from \"./replacement_components\";\n","// This file is part of Invenio-RDM-Records\n// Copyright (C) 2020-2023 CERN.\n// Copyright (C) 2020-2022 Northwestern University.\n// Copyright (C) 2021-2022 Graz University of Technology.\n//\n// Invenio-RDM-Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { i18next } from \"@translations/invenio_rdm_records/i18next\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport { Image } from \"react-invenio-forms\";\nimport { connect } from \"react-redux\";\nimport { Button, Icon, Form, Grid, Header } from \"semantic-ui-react\";\n// import { changeSelectedCommunity } from \"../../state/actions\";\n// import { CommunitySelectionModal } from \"@js/invenio_rdm_records\";\nimport { CommunitySelectionModal } from \"./CommunitySelectionModal/CommunitySelectionModal\";\n\nexport const changeSelectedCommunity = (community) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"SET_COMMUNITY\",\n      payload: { community },\n    });\n    window.setTimeout(() => {\n      document.querySelectorAll(`.community-field-button`)[0].focus();\n    }, 50);\n  };\n};\n\nconst CommunityFieldComponent = ({\n  community = undefined,\n  changeSelectedCommunity,\n  imagePlaceholderLink,\n  showCommunitySelectionButton,\n  disableCommunitySelectionButton,\n}) => {\n  const [modalOpen, setModalOpen] = useState();\n\n  const focusAddButtonHandler = () => {\n    document.querySelectorAll(`.community-field-button`)[0].focus();\n  };\n\n  return (\n    <>\n      <Form.Field>\n        <label\n          htmlFor=\"community-selector\"\n          className=\"field-label-class invenio-field-label\"\n        >\n          <Icon name=\"users\" />\n          Community submission\n        </label>\n      </Form.Field>\n      <Form.Group>\n        {community && (\n          <Form.Field width={12}>\n            <Grid fluid>\n              <Grid.Column width={3}>\n                <Image\n                  size=\"tiny\"\n                  className=\"community-header-logo\"\n                  src={community.links?.logo || imagePlaceholderLink} // logo is undefined when new draft and no selection\n                  fallbackSrc={imagePlaceholderLink}\n                />\n              </Grid.Column>\n              <Grid.Column width={13}>\n                <Header size=\"small\">{community.metadata.title}</Header>\n              </Grid.Column>\n            </Grid>\n          </Form.Field>\n        )}\n        <Form.Field width={community ? 4 : 6} className=\"right-btn-column\">\n          {showCommunitySelectionButton && (\n            <CommunitySelectionModal\n              onCommunityChange={(community) => {\n                changeSelectedCommunity(community);\n                focusAddButtonHandler();\n                setModalOpen(false);\n              }}\n              onModalChange={(value) => {\n                value === false && focusAddButtonHandler();\n                setModalOpen(value);\n              }}\n              modalOpen={modalOpen}\n              chosenCommunity={community}\n              displaySelected\n              trigger={\n                <Button\n                  className=\"community-field-button add-button\"\n                  disabled={disableCommunitySelectionButton}\n                  onClick={() => setModalOpen(true)}\n                  name=\"setting\"\n                  // icon\n                  id=\"community-selector\"\n                  type=\"button\"\n                  floated={!community ? \"left\" : \"\"}\n                >\n                  {/* <Icon name={!community ? \"add\" : \"undo\"} /> */}\n                  {community\n                    ? i18next.t(\"Change\")\n                    : i18next.t(\"Select a community\")}\n                </Button>\n              }\n              focusAddButtonHandler={focusAddButtonHandler}\n            />\n          )}\n          {community && (\n            // <Button\n            //   mini\n            //   className=\"community-field-button\"\n            //   onClick={() => changeSelectedCommunity(null)}\n            //   content={i18next.t(\"Remove\")}\n            //   icon=\"close\"\n            //   disabled={disableCommunitySelectionButton}\n            // />\n            <Button\n              aria-label={i18next.t(\"Remove item\")}\n              className=\"close-btn\"\n              icon\n              onClick={() => changeSelectedCommunity(null)}\n              disabled={!showCommunitySelectionButton}\n            >\n              <Icon name=\"close\" />\n            </Button>\n          )}\n        </Form.Field>\n        {!community && (\n          <Form.Field width={11} className=\"communities-helptext-wrapper\">\n            <label htmlFor=\"community-selector\" className=\"helptext\">\n              {i18next.t(\n                \"Select a community where you want this deposit to be published.\"\n              )}\n            </label>\n          </Form.Field>\n        )}\n      </Form.Group>\n    </>\n  );\n};\n\nCommunityFieldComponent.propTypes = {\n  imagePlaceholderLink: PropTypes.string.isRequired,\n  community: PropTypes.object,\n  disableCommunitySelectionButton: PropTypes.bool.isRequired,\n  showCommunitySelectionButton: PropTypes.bool.isRequired,\n  showCommunityHeader: PropTypes.bool.isRequired,\n  changeSelectedCommunity: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  community: state.deposit.editorState.selectedCommunity,\n  disableCommunitySelectionButton:\n    state.deposit.editorState.ui.disableCommunitySelectionButton,\n  showCommunitySelectionButton:\n    state.deposit.editorState.ui.showCommunitySelectionButton,\n  showCommunityHeader: state.deposit.editorState.ui.showCommunityHeader,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  changeSelectedCommunity: (community) =>\n    dispatch(changeSelectedCommunity(community)),\n});\n\nexport const CommunityField = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(CommunityFieldComponent);\n","// This file is part of Invenio-RDM-Records\n// Copyright (C) 2020-2023 CERN.\n// Copyright (C) 2020-2022 Northwestern University.\n//\n// Invenio-RDM-Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React from \"react\";\n\nexport const CommunityContext = React.createContext({});\n","// This file is part of Invenio-RDM-Records\n// Copyright (C) 2020-2023 CERN.\n//\n// Invenio-RDM-Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { i18next } from \"@translations/invenio_rdm_records/i18next\";\nimport _capitalize from \"lodash/capitalize\";\nimport PropTypes from \"prop-types\";\nimport React, { useContext } from \"react\";\nimport { Button, Icon, Label } from \"semantic-ui-react\";\nimport { CommunityCompactItem } from \"@js/invenio_communities/community\";\nimport { CommunityContext } from \"./CommunityContext\";\n\nexport const CommunityListItem = ({ result }) => {\n  const {\n    setLocalCommunity,\n    getChosenCommunity,\n    userCommunitiesMemberships,\n    displaySelected,\n  } = useContext(CommunityContext);\n\n  const { metadata } = result;\n  const itemSelected = getChosenCommunity()?.id === result.id;\n  const userMembership = userCommunitiesMemberships[result[\"id\"]];\n\n  const actions = (\n    <Button\n      content={\n        displaySelected && itemSelected ? i18next.t(\"Selected\") : i18next.t(\"Select\")\n      }\n      size=\"small\"\n      positive={displaySelected && itemSelected}\n      onClick={() => setLocalCommunity(result)}\n      aria-label={i18next.t(\"Select {{title}}\", { title: metadata.title })}\n    />\n  );\n\n  const extraLabels = userMembership && (\n    <Label size=\"small\" horizontal color=\"teal\">\n      <Icon name=\"key\" />\n      {_capitalize(userMembership)}\n    </Label>\n  );\n\n  return (\n    <CommunityCompactItem\n      result={result}\n      actions={actions}\n      extraLabels={extraLabels}\n      showPermissionLabel\n    />\n  );\n};\n\nCommunityListItem.propTypes = {\n  result: PropTypes.object.isRequired,\n};\n","// This file is part of Invenio-RDM-Records\n// Copyright (C) 2020-2023 CERN.\n// Copyright (C) 2020-2022 Northwestern University.\n//\n// Invenio-RDM-Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { i18next } from \"@translations/invenio_rdm_records/i18next\";\nimport React, { Component } from \"react\";\nimport { OverridableContext } from \"react-overridable\";\nimport {\n  EmptyResults,\n  Error,\n  InvenioSearchApi,\n  Pagination,\n  ReactSearchKit,\n  ResultsList,\n  ResultsLoader,\n  SearchBar,\n} from \"react-searchkit\";\nimport { Container, Grid, Menu, Modal, Segment } from \"semantic-ui-react\";\nimport { CommunityListItem } from \"./CommunityListItem\";\nimport PropTypes from \"prop-types\";\n\nexport class CommunitySelectionSearch extends Component {\n  constructor(props) {\n    super(props);\n    const {\n      apiConfigs: { allCommunities },\n    } = this.props;\n\n    const defaultConfig = allCommunities;\n\n    this.state = {\n      selectedConfig: defaultConfig,\n    };\n  }\n\n  render() {\n    const {\n      selectedConfig: {\n        searchApi: selectedsearchApi,\n        appId: selectedAppId,\n        initialQueryState: selectedInitialQueryState,\n        toggleText,\n      },\n    } = this.state;\n    const {\n      apiConfigs: { allCommunities, myCommunities },\n    } = this.props;\n    const searchApi = new InvenioSearchApi(selectedsearchApi);\n    const overriddenComponents = {\n      [`${selectedAppId}.ResultsList.item`]: CommunityListItem,\n    };\n    return (\n      <OverridableContext.Provider value={overriddenComponents}>\n        <ReactSearchKit\n          appName={selectedAppId}\n          urlHandlerApi={{ enabled: false }}\n          searchApi={searchApi}\n          key={selectedAppId}\n          initialQueryState={selectedInitialQueryState}\n        >\n          <Grid>\n            <Grid.Row verticalAlign=\"middle\">\n              <Grid.Column width={8} textAlign=\"left\" floated=\"left\">\n                <Menu role=\"tablist\" compact>\n                  <Menu.Item\n                    as=\"button\"\n                    role=\"tab\"\n                    id=\"all-communities-tab\"\n                    aria-selected={selectedAppId === allCommunities.appId}\n                    aria-controls={allCommunities.appId}\n                    name=\"All\"\n                    active={selectedAppId === allCommunities.appId}\n                    onClick={() =>\n                      this.setState({\n                        selectedConfig: allCommunities,\n                      })\n                    }\n                  >\n                    {i18next.t(\"All\")}\n                  </Menu.Item>\n                  <Menu.Item\n                    as=\"button\"\n                    role=\"tab\"\n                    id=\"my-communities-tab\"\n                    aria-selected={selectedAppId === myCommunities.appId}\n                    aria-controls={myCommunities.appId}\n                    name=\"My communities\"\n                    active={selectedAppId === myCommunities.appId}\n                    onClick={() =>\n                      this.setState({\n                        selectedConfig: myCommunities,\n                      })\n                    }\n                  >\n                    {i18next.t(\"My communities\")}\n                  </Menu.Item>\n                </Menu>\n              </Grid.Column>\n              <Grid.Column width={8} floated=\"right\" verticalAlign=\"middle\">\n                <SearchBar\n                  placeholder={toggleText}\n                  autofocus\n                  actionProps={{\n                    \"icon\": \"search\",\n                    \"content\": null,\n                    \"className\": \"search\",\n                    \"aria-label\": i18next.t(\"Search\"),\n                  }}\n                />\n              </Grid.Column>\n            </Grid.Row>\n\n            <Grid.Row verticalAlign=\"middle\">\n              <Grid.Column>\n                <ResultsLoader>\n                  <Segment className=\"community-list-container p-0\">\n                    <Modal.Content\n                      role=\"tabpanel\"\n                      id={selectedAppId}\n                      scrolling\n                      className=\"community-list-results\"\n                    >\n                      <EmptyResults />\n                      <Error />\n                      <ResultsList />\n                    </Modal.Content>\n                  </Segment>\n                  <Container textAlign=\"center\">\n                    <Pagination />\n                  </Container>\n                </ResultsLoader>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </ReactSearchKit>\n      </OverridableContext.Provider>\n    );\n  }\n}\n\nCommunitySelectionSearch.propTypes = {\n  apiConfigs: PropTypes.shape({\n    allCommunities: PropTypes.shape({\n      appId: PropTypes.string.isRequired,\n      initialQueryState: PropTypes.object.isRequired,\n      searchApi: PropTypes.object.isRequired,\n    }),\n    myCommunities: PropTypes.shape({\n      appId: PropTypes.string.isRequired,\n      initialQueryState: PropTypes.object.isRequired,\n      searchApi: PropTypes.object.isRequired,\n    }),\n  }),\n};\n\nCommunitySelectionSearch.defaultProps = {\n  apiConfigs: {\n    allCommunities: {\n      initialQueryState: { size: 5, page: 1 },\n      searchApi: {\n        axios: {\n          url: \"/api/communities\",\n          headers: { Accept: \"application/vnd.inveniordm.v1+json\" },\n        },\n      },\n      appId: \"ReactInvenioDeposit.CommunitySelectionSearch.AllCommunities\",\n      toggleText: \"Search in all communities\",\n    },\n    myCommunities: {\n      initialQueryState: { size: 5, page: 1 },\n      searchApi: {\n        axios: {\n          url: \"/api/user/communities\",\n          headers: { Accept: \"application/vnd.inveniordm.v1+json\" },\n        },\n      },\n      appId: \"ReactInvenioDeposit.CommunitySelectionSearch.MyCommunities\",\n      toggleText: \"Search in my communities\",\n    },\n  },\n};\n","// This file is part of Invenio-RDM-Records\n// Copyright (C) 2020-2023 CERN.\n//\n// Invenio-RDM-Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { i18next } from \"@translations/invenio_rdm_records/i18next\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Header, Modal, Button } from \"semantic-ui-react\";\nimport { CommunityContext } from \"./CommunityContext\";\nimport { CommunitySelectionSearch } from \"./CommunitySelectionSearch\";\nimport _isEmpty from \"lodash/isEmpty\";\n\nexport class CommunitySelectionModalComponent extends Component {\n  constructor(props) {\n    super(props);\n    const {\n      chosenCommunity,\n      onCommunityChange,\n      userCommunitiesMemberships,\n      displaySelected,\n      focusAddButtonHandler\n    } = props;\n\n    this.state = {\n      localChosenCommunity: chosenCommunity,\n    };\n\n    this.contextValue = {\n      setLocalCommunity: (community) => {\n        onCommunityChange(community);\n        this.setState({\n          localChosenCommunity: community,\n        });\n      },\n      // NOTE: We disable the eslint check as the actual destructing leads to a problem\n      // related to the updated state value. To avoid this, we need to access the\n      // `this.state` variable directly in the definition of the function so that any\n      // consumption of it, will return always the latest updated value.\n      // eslint-disable-next-line react/destructuring-assignment\n      getChosenCommunity: () => this.state.localChosenCommunity,\n      userCommunitiesMemberships,\n      displaySelected,\n    };\n  }\n\n  modalTrigger = () => {\n    const { trigger, modalOpen } = this.props;\n    if (!_isEmpty(trigger)) {\n      return React.cloneElement(trigger, {\n        \"aria-haspopup\": \"dialog\",\n        \"aria-expanded\": modalOpen,\n      });\n    }\n  };\n\n  render() {\n    const {\n      chosenCommunity,\n      extraContentComponents,\n      modalHeader,\n      onModalChange,\n      modalOpen,\n      apiConfigs,\n      handleClose,\n    } = this.props;\n\n    return (\n      <CommunityContext.Provider value={this.contextValue}>\n        <Modal\n          role=\"dialog\"\n          aria-labelledby=\"community-modal-header\"\n          id=\"community-selection-modal\"\n          className=\"m-0\"\n          closeIcon\n          closeOnDimmerClick={false}\n          open={modalOpen}\n          onClose={() => {\n            onModalChange && onModalChange(false);\n          }}\n          onOpen={() => {\n            this.setState({\n              localChosenCommunity: chosenCommunity,\n            });\n            onModalChange && onModalChange(true);\n          }}\n          trigger={this.modalTrigger()}\n        >\n          <Modal.Header>\n            <Header as=\"h2\" id=\"community-modal-header\">\n              {modalHeader}\n            </Header>\n          </Modal.Header>\n\n          <Modal.Content>\n            <CommunitySelectionSearch apiConfigs={apiConfigs} />\n            {extraContentComponents}\n          </Modal.Content>\n\n          <Modal.Actions>\n            <Button onClick={() => onModalChange(false)}>{i18next.t(\"Close\")}</Button>\n          </Modal.Actions>\n        </Modal>\n      </CommunityContext.Provider>\n    );\n  }\n}\n\nCommunitySelectionModalComponent.propTypes = {\n  chosenCommunity: PropTypes.object,\n  onCommunityChange: PropTypes.func.isRequired,\n  trigger: PropTypes.object,\n  userCommunitiesMemberships: PropTypes.object.isRequired,\n  extraContentComponents: PropTypes.node,\n  modalHeader: PropTypes.string,\n  onModalChange: PropTypes.func,\n  displaySelected: PropTypes.bool,\n  modalOpen: PropTypes.bool,\n  apiConfigs: PropTypes.object,\n  handleClose: PropTypes.func.isRequired,\n};\n\nCommunitySelectionModalComponent.defaultProps = {\n  chosenCommunity: undefined,\n  extraContentComponents: undefined,\n  modalHeader: i18next.t(\"Select a community\"),\n  onModalChange: undefined,\n  displaySelected: false,\n  modalOpen: false,\n  trigger: undefined,\n  apiConfigs: undefined,\n};\n\nconst mapStateToProps = (state) => ({\n  userCommunitiesMemberships: state.deposit.config.user_communities_memberships,\n});\n\nexport const CommunitySelectionModal = connect(\n  mapStateToProps,\n  null\n)(CommunitySelectionModalComponent);\n","// This file is part of Invenio-RDM-Records\n// Copyright (C) 2020-2023 CERN.\n// Copyright (C) 2020-2022 Northwestern University.\n// Copyright (C) 2021 Graz University of Technology.\n//\n// Invenio-RDM-Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ArrayField, GroupField, SelectField, TextField } from \"react-invenio-forms\";\nimport { Button, Form, Icon } from \"semantic-ui-react\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport _matches from \"lodash/matches\";\nimport _filter from \"lodash/filter\";\nimport _isEqual from \"lodash/isEqual\";\nimport _has from \"lodash/has\";\n// import { emptyDate } from \"./initialValues\";\nimport { i18next } from \"@translations/invenio_rdm_records/i18next\";\nimport { sortOptions } from \"@js/invenio_rdm_records\";\nimport { FieldArray, useFormikContext } from \"formik\";\n\nexport const emptyDate = {\n  date: \"\",\n  description: \"\",\n  type: \"\",\n};\n\n\n/** Top-level Dates Component */\n/**\n * Returns the required option if the current value passed does match it\n * @param  {Object} currentValue The current value\n * @param  {Array} arrayOfValues The array of values for the field\n * @return {Object} The required option if any\n */\nconst DatesField = ({ requiredOptions=[],\n                      fieldPath,\n                      options,\n                      label=i18next.t(\"Dates\"),\n                      addButtonLabel=i18next.t(\"Add another date\"),\n                      labelIcon=\"calendar\",\n                      placeholderDate=i18next.t(\"YYYY-MM-DD or YYYY-MM-DD/YYYY-MM-DD\"),\n                      required=false,\n                      showEmptyValue=false  } ) => {\n  const { values } = useFormikContext();\n  const [datesLength, setDatesLength] = useState(-1);\n  const [haveChangedNumber, setHaveChangedNumber] = useState(false);\n\n  const getRequiredOption = (currentValue, arrayOfValues) => {\n    for (const requiredOption of requiredOptions) {\n      // If more values matched we do take the first value\n      const matchingValue = _filter(arrayOfValues, _matches(requiredOption))[0];\n      if (_isEqual(matchingValue, currentValue)) {\n        return requiredOption;\n      }\n    }\n    return null;\n  };\n\n  useEffect(() => {\n    if ( !!haveChangedNumber ) {\n      if ( datesLength < 0 ) {\n        document.getElementById(`${fieldPath}.add-button`)?.focus();\n      } else {\n        document.getElementById(`${fieldPath}.${datesLength}.date`)?.focus();\n      }\n    }\n  }, [datesLength]);\n\n  const handleAddNew = (arrayHelpers, newItem) => {\n    setHaveChangedNumber(true);\n    arrayHelpers.push(newItem);\n    setDatesLength(datesLength + 1);\n  }\n\n  const handleRemove = (arrayHelpers, index) => {\n    setHaveChangedNumber(true);\n    arrayHelpers.remove(index);\n    setDatesLength(datesLength - 1);\n  }\n\n  return (\n    <FieldArray\n      name={fieldPath}\n      // helpText={i18next.t(\n      //   \"Format: DATE or DATE/DATE where DATE is YYYY or YYYY-MM or YYYY-MM-DD.\"\n      // )}\n      // label={\"\"}\n      // labelIcon={\"\"}\n      required={required}\n      requiredOptions={requiredOptions}\n      showEmptyValue={showEmptyValue}\n      render={arrayHelpers => (\n      <>\n        { values.metadata.dates.map((value, index) => {\n        const fieldPathPrefix = `${fieldPath}.${index}`;\n        const requiredOption = getRequiredOption(value, values.metadata.dates);\n        const hasRequiredDateValue = _has(requiredOption, \"date\");\n        const hasRequiredTypeValue = _has(requiredOption, \"type\");\n        const hasRequiredDescriptionValue = _has(requiredOption, \"description\");\n        return (\n          <Form.Group key={index} optimized>\n            <TextField\n              fieldPath={`${fieldPathPrefix}.date`}\n              id={`${fieldPathPrefix}.date`}\n              label={index===0 ? i18next.t(\"Date\") : \"\"}\n              placeholder={placeholderDate}\n              disabled={hasRequiredDateValue}\n              required\n              width={5}\n            />\n            <SelectField\n              fieldPath={`${fieldPathPrefix}.type`}\n              id={`${fieldPathPrefix}.type`}\n              label={index===0 ? i18next.t(\"Type\") : \"\"}\n              options={sortOptions(options.type)}\n              disabled={hasRequiredTypeValue}\n              required\n              width={5}\n              optimized\n            />\n            <TextField\n              fieldPath={`${fieldPathPrefix}.description`}\n              id={`${fieldPathPrefix}.description`}\n              label={index===0 ? i18next.t(\"Description\") : \"\"}\n              disabled={hasRequiredDescriptionValue}\n              width={5}\n            />\n            <Form.Field>\n              <Button\n                aria-label={i18next.t(\"Remove item\")}\n                className=\"close-btn\"\n                disabled={!_isEmpty(requiredOption)}\n                icon\n                onClick={() => handleRemove(arrayHelpers, index)}\n                type=\"button\"\n              >\n                <Icon name=\"close\" />\n              </Button>\n            </Form.Field>\n          </Form.Group>\n          )})}\n            <Button\n                type=\"button\"\n                onClick={() => handleAddNew(arrayHelpers, emptyDate)}\n                icon\n                className=\"align-self-end add-btn\"\n                labelPosition=\"left\"\n                id={`${fieldPath}.add-button`}\n            >\n                <Icon name=\"add\" />\n                {addButtonLabel}\n            </Button>\n        </>\n      )}\n    />\n  )\n}\n\nDatesField.propTypes = {\n  fieldPath: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  labelIcon: PropTypes.string,\n  options: PropTypes.shape({\n    type: PropTypes.arrayOf(\n      PropTypes.shape({\n        text: PropTypes.string,\n        value: PropTypes.string,\n      })\n    ),\n  }).isRequired,\n  required: PropTypes.bool,\n  placeholderDate: PropTypes.string,\n  requiredOptions: PropTypes.array,\n  showEmptyValue: PropTypes.bool,\n};\n\nexport { DatesField };","// This file is part of Invenio-RDM-Records\n// Copyright (C) 2020-2023 CERN.\n// Copyright (C) 2020-2022 Northwestern University.\n//\n// Invenio-RDM-Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { i18next } from \"@translations/invenio_rdm_records/i18next\";\nimport { FastField, Field, getIn } from \"formik\";\nimport _debounce from \"lodash/debounce\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { FieldLabel } from \"react-invenio-forms\";\nimport { connect } from \"react-redux\";\nimport { Form, Popup, Radio } from \"semantic-ui-react\";\n// import {\n//   DepositFormSubmitActions,\n//   DepositFormSubmitContext,\n// } from \"@js/invenio_rdm_records\";\n// } from \"../../api/DepositFormSubmitContext\";\n// import { DISCARD_PID_STARTED, RESERVE_PID_STARTED\n// } from \"../../state/types\";\n\nconst DepositFormSubmitActions = {\n  SAVE: \"SAVE\",\n  PUBLISH: \"PUBLISH\",\n  PUBLISH_WITHOUT_COMMUNITY: \"PUBLISH_WITHOUT_COMMUNITY\",\n  PREVIEW: \"PREVIEW\",\n  DELETE: \"DELETE\",\n  RESERVE_PID: \"RESERVE_PID\",\n  DISCARD_PID: \"DISCARD_PID\",\n  SUBMIT_REVIEW: \"SUBMIT_REVIEW\",\n};\n\nconst DepositFormSubmitContext = React.createContext({\n  setSubmitContext: undefined,\n});\n\nconst PROVIDER_EXTERNAL = \"external\";\nconst UPDATE_PID_DEBOUNCE_MS = 200;\nconst DISCARD_PID_STARTED = \"DISCARD_PID_STARTED\";\nconst RESERVE_PID_STARTED = \"RESERVE_PID_STARTED\";\n\nconst getFieldErrors = (form, fieldPath) => {\n  return (\n    getIn(form.errors, fieldPath, null) ||\n    getIn(form.initialErrors, fieldPath, null)\n  );\n};\n\n/**\n * Button component to reserve a PID.\n */\nclass ReservePIDBtn extends Component {\n  render() {\n    const { disabled, handleReservePID, label, loading } = this.props;\n    return (\n      <Field>\n        {({ form: formik }) => (\n          <Form.Button\n            className=\"positive\"\n            size=\"mini\"\n            loading={loading}\n            disabled={disabled || loading}\n            onClick={(e) => handleReservePID(e, formik)}\n            content={label}\n          />\n        )}\n      </Field>\n    );\n  }\n}\n\nReservePIDBtn.propTypes = {\n  disabled: PropTypes.bool,\n  handleReservePID: PropTypes.func.isRequired,\n  label: PropTypes.string.isRequired,\n  loading: PropTypes.bool,\n};\n\nReservePIDBtn.defaultProps = {\n  disabled: false,\n  loading: false,\n};\n\n/**\n * Button component to unreserve a PID.\n */\nclass UnreservePIDBtn extends Component {\n  render() {\n    const { disabled, handleDiscardPID, label, loading } = this.props;\n    return (\n      <Popup\n        content={label}\n        trigger={\n          <Field>\n            {({ form: formik }) => (\n              <Form.Button\n                disabled={disabled || loading}\n                loading={loading}\n                icon=\"close\"\n                onClick={(e) => handleDiscardPID(e, formik)}\n                size=\"mini\"\n              />\n            )}\n          </Field>\n        }\n      />\n    );\n  }\n}\n\nUnreservePIDBtn.propTypes = {\n  disabled: PropTypes.bool,\n  handleDiscardPID: PropTypes.func.isRequired,\n  label: PropTypes.string.isRequired,\n  loading: PropTypes.bool,\n};\n\nUnreservePIDBtn.defaultProps = {\n  disabled: false,\n  loading: false,\n};\n\n/**\n * Manage radio buttons choices between managed\n * and unmanaged PID.\n */\nclass ManagedUnmanagedSwitch extends Component {\n  handleChange = (e, { value }) => {\n    const { onManagedUnmanagedChange } = this.props;\n    const isManagedSelected = value === \"managed\";\n    onManagedUnmanagedChange(isManagedSelected);\n  };\n\n  render() {\n    const { disabled, isManagedSelected, fieldPath, pidLabel } = this.props;\n\n    return (\n      <Form.Group inline>\n        <Form.Field>\n          <FieldLabel\n            htmlFor={fieldPath}\n            icon={\"\"}\n            label={i18next.t(\"Do you have a {{pidLabel}} for this work?\", {\n              pidLabel: pidLabel,\n            })}\n          />\n        </Form.Field>\n        <Form.Field width={2}>\n          <Radio\n            label={i18next.t(\"Yes\")}\n            name=\"radioGroup\"\n            value=\"unmanaged\"\n            disabled={disabled}\n            checked={!isManagedSelected}\n            onChange={this.handleChange}\n          />\n        </Form.Field>\n        <Form.Field width={2}>\n          <Radio\n            label={i18next.t(\"No\")}\n            name=\"radioGroup\"\n            value=\"managed\"\n            disabled={disabled}\n            checked={isManagedSelected}\n            onChange={this.handleChange}\n          />\n        </Form.Field>\n      </Form.Group>\n    );\n  }\n}\n\nManagedUnmanagedSwitch.propTypes = {\n  disabled: PropTypes.bool,\n  isManagedSelected: PropTypes.bool.isRequired,\n  onManagedUnmanagedChange: PropTypes.func.isRequired,\n  pidLabel: PropTypes.string,\n};\n\nManagedUnmanagedSwitch.defaultProps = {\n  disabled: false,\n  pidLabel: undefined,\n};\n\n/**\n * Render identifier field and reserve/unreserve\n * button components for managed PID.\n */\nclass ManagedIdentifierComponent extends Component {\n  static contextType = DepositFormSubmitContext;\n\n  handleReservePID = (event, formik) => {\n    const { pidType } = this.props;\n    const { setSubmitContext } = this.context;\n    setSubmitContext(DepositFormSubmitActions.RESERVE_PID, {\n      pidType: pidType,\n    });\n    formik.handleSubmit(event);\n  };\n\n  handleDiscardPID = (event, formik) => {\n    const { pidType } = this.props;\n    const { setSubmitContext } = this.context;\n    setSubmitContext(DepositFormSubmitActions.DISCARD_PID, {\n      pidType: pidType,\n    });\n    formik.handleSubmit(event);\n  };\n\n  render() {\n    const {\n      actionState,\n      actionStateExtra,\n      btnLabelDiscardPID,\n      btnLabelGetPID,\n      disabled,\n      helpText,\n      identifier,\n      pidPlaceholder,\n      pidType,\n      isEditingPublishedRecord,\n      form,\n    } = this.props;\n    const hasIdentifier = identifier !== \"\";\n\n    const ReserveBtn = (\n      <ReservePIDBtn\n        disabled={disabled || hasIdentifier}\n        label={btnLabelGetPID}\n        loading={\n          actionState === RESERVE_PID_STARTED &&\n          actionStateExtra.pidType === pidType\n        }\n        handleReservePID={this.handleReservePID}\n      />\n    );\n\n    const UnreserveBtn = (\n      <UnreservePIDBtn\n        disabled={disabled}\n        label={btnLabelDiscardPID}\n        handleDiscardPID={this.handleDiscardPID}\n        loading={\n          actionState === DISCARD_PID_STARTED &&\n          actionStateExtra.pidType === pidType\n        }\n        pidType={pidType}\n      />\n    );\n\n    const provider = form.values.pids.doi?.provider;\n\n    return (\n      <>\n        {\n          hasIdentifier ? (\n            <Form.Group inline>\n              <Form.Field>\n                <label>{`https://doi.org/${identifier}`}</label>\n              </Form.Field>\n            </Form.Group>\n          ) : null\n          // NOTE: This is a placeholder for the PID field. It is disabled\n          // <Form.Field width={4}>\n          //   <Form.Input disabled value=\"\" placeholder={pidPlaceholder} width={16} />\n          // </Form.Field>\n        }\n\n        {/* ALERT: This is the widget to reserve a DOI before registration. It is disabled. */}\n        {/* {!isEditingPublishedRecord &&\n          <Form.Field>{identifier ? UnreserveBtn : ReserveBtn}</Form.Field>\n        }\n        {isEditingPublishedRecord ?\n        <label className=\"helptext\">A unique identifier for this deposit registered with {provider!==\"external\" ?\n          provider.charAt(0).toUpperCase() + provider.slice(1)\n          : \"an external provider\"}</label>\n        :\n        helpText && <label className=\"helptext\">{helpText}</label>\n        } */}\n      </>\n    );\n  }\n}\n\nManagedIdentifierComponent.propTypes = {\n  btnLabelGetPID: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  identifier: PropTypes.string.isRequired,\n  btnLabelDiscardPID: PropTypes.string.isRequired,\n  pidPlaceholder: PropTypes.string.isRequired,\n  pidType: PropTypes.string.isRequired,\n  /* from Redux */\n  actionState: PropTypes.string,\n  actionStateExtra: PropTypes.object,\n};\n\nManagedIdentifierComponent.defaultProps = {\n  disabled: false,\n  helpText: null,\n  /* from Redux */\n  actionState: \"\",\n  actionStateExtra: {},\n};\n\nconst mapStateToProps = (state) => ({\n  actionState: state.deposit.actionState,\n  actionStateExtra: state.deposit.actionStateExtra,\n});\n\nconst ManagedIdentifierCmp = connect(\n  mapStateToProps,\n  null\n)(ManagedIdentifierComponent);\n\n/**\n * Render identifier field to allow user to input\n * the unmanaged PID.\n */\nclass UnmanagedIdentifierCmp extends Component {\n  constructor(props) {\n    super(props);\n\n    const { identifier } = props;\n\n    this.state = {\n      localIdentifier: identifier,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    // called after the form field is updated and therefore re-rendered.\n    const { identifier } = this.props;\n    if (identifier !== prevProps.identifier) {\n      this.handleIdentifierUpdate(identifier);\n    }\n  }\n\n  handleIdentifierUpdate = (newIdentifier) => {\n    this.setState({ localIdentifier: newIdentifier });\n  };\n\n  onChange = (value) => {\n    const { onIdentifierChanged } = this.props;\n    this.setState({ localIdentifier: value }, () => onIdentifierChanged(value));\n  };\n\n  render() {\n    const { localIdentifier } = this.state;\n    const { form, fieldPath, helpText, pidPlaceholder } = this.props;\n    const fieldError = getFieldErrors(form, fieldPath);\n    return (\n      <>\n        {/* // <Form.Group> */}\n        <Form.Field error={fieldError}>\n          <Form.Input\n            onChange={(e, { value }) => this.onChange(value)}\n            value={localIdentifier}\n            placeholder={pidPlaceholder}\n            error={fieldError}\n            aria-describedby={`${fieldPath}.help-text`}\n          />\n        </Form.Field>\n        <Form.Field>\n          {helpText && (\n            <label id={`${fieldPath}.help-text`} className=\"helptext\">\n              {helpText}\n            </label>\n          )}\n        </Form.Field>\n        {/* // </Form.Group> */}\n      </>\n    );\n  }\n}\n\nUnmanagedIdentifierCmp.propTypes = {\n  form: PropTypes.object.isRequired,\n  fieldPath: PropTypes.string.isRequired,\n  helpText: PropTypes.string,\n  identifier: PropTypes.string.isRequired,\n  onIdentifierChanged: PropTypes.func.isRequired,\n  pidPlaceholder: PropTypes.string.isRequired,\n};\n\nUnmanagedIdentifierCmp.defaultProps = {\n  helpText: null,\n};\n\n/**\n * Render managed or unamanged PID fields and update\n * Formik form on input changed.\n * The field value has the following format:\n * { 'doi': { identifier: '<value>', provider: '<value>', client: '<value>' } }\n */\nclass CustomPIDField extends Component {\n  constructor(props) {\n    super(props);\n\n    const { canBeManaged, canBeUnmanaged } = this.props;\n    this.canBeManagedAndUnmanaged = canBeManaged && canBeUnmanaged;\n\n    this.state = {\n      isManagedSelected: undefined,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.form.values.pids?.doi?.identifier == \"\") {\n      this.props.form.setFieldValue(\"pids\", {});\n    }\n  }\n\n  onExternalIdentifierChanged = (identifier) => {\n    const { form, fieldPath } = this.props;\n    let pid = {\n      identifier: identifier,\n      provider: PROVIDER_EXTERNAL,\n    };\n\n    if (identifier !== \"\") {\n      this.setState({ isManagedSelected: false });\n      this.debounced && this.debounced.cancel();\n      this.debounced = _debounce(() => {\n        form.setFieldValue(fieldPath, pid);\n      }, UPDATE_PID_DEBOUNCE_MS);\n      this.debounced();\n    } else {\n      this.setState({ isManagedSelected: true });\n      this.debounced && this.debounced.cancel();\n      this.debounced = _debounce(() => {\n        form.setFieldValue(\"pids\", {});\n      }, UPDATE_PID_DEBOUNCE_MS);\n      this.debounced();\n    }\n  };\n\n  render() {\n    const { isManagedSelected } = this.state;\n    const {\n      btnLabelDiscardPID,\n      btnLabelGetPID,\n      canBeManaged,\n      canBeUnmanaged,\n      form,\n      fieldPath,\n      fieldLabel,\n      icon,\n      isEditingPublishedRecord,\n      managedHelpText,\n      pidLabel,\n      pidIcon,\n      pidPlaceholder,\n      required,\n      unmanagedHelpText,\n      pidType,\n      field,\n    } = this.props;\n\n    const value = field.value || {};\n    const currentIdentifier = value.identifier || \"\";\n    const currentProvider = value.provider || \"\";\n\n    let managedIdentifier = \"\",\n      unmanagedIdentifier = \"\";\n    if (currentIdentifier !== \"\") {\n      const isProviderExternal = currentProvider === PROVIDER_EXTERNAL;\n      managedIdentifier = !isProviderExternal ? currentIdentifier : \"\";\n      unmanagedIdentifier = isProviderExternal ? currentIdentifier : \"\";\n    }\n    console.log(\"managedIdentifier\", managedIdentifier);\n\n    const hasManagedIdentifier = managedIdentifier !== \"\";\n\n    const _isManagedSelected =\n      isManagedSelected === undefined\n        ? hasManagedIdentifier || currentProvider === \"\" // i.e pids: {}\n        : isManagedSelected;\n\n    const fieldError = getFieldErrors(form, fieldPath);\n    return (\n      <>\n        <Form.Field required={false} error={fieldError}>\n          <FieldLabel\n            htmlFor={fieldPath}\n            icon={icon || pidIcon}\n            label={fieldLabel}\n          />\n        </Form.Field>\n\n        {this.canBeManagedAndUnmanaged && managedIdentifier === \"\" && (\n          <ManagedUnmanagedSwitch\n            disabled={isEditingPublishedRecord || hasManagedIdentifier}\n            isManagedSelected={_isManagedSelected}\n            onManagedUnmanagedChange={(userSelectedManaged) => {\n              if (userSelectedManaged) {\n                form.setFieldValue(\"pids\", {});\n              } else {\n                this.onExternalIdentifierChanged(\"\");\n              }\n              this.setState({\n                isManagedSelected: userSelectedManaged,\n              });\n            }}\n            pidLabel={pidLabel}\n          />\n        )}\n\n        {canBeManaged && _isManagedSelected && (\n          <ManagedIdentifierCmp\n            disabled={isEditingPublishedRecord}\n            btnLabelDiscardPID={btnLabelDiscardPID}\n            btnLabelGetPID={btnLabelGetPID}\n            form={form}\n            identifier={managedIdentifier}\n            helpText={managedHelpText}\n            pidPlaceholder={pidPlaceholder}\n            pidType={pidType}\n            pidLabel={pidLabel}\n            isEditingPublishedRecord={isEditingPublishedRecord}\n          />\n        )}\n\n        {canBeUnmanaged && !_isManagedSelected && (\n          <UnmanagedIdentifierCmp\n            identifier={unmanagedIdentifier}\n            onIdentifierChanged={(identifier) => {\n              this.onExternalIdentifierChanged(identifier);\n            }}\n            form={form}\n            fieldPath={fieldPath}\n            pidPlaceholder={pidPlaceholder}\n            helpText={unmanagedHelpText}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nCustomPIDField.propTypes = {\n  field: PropTypes.object,\n  form: PropTypes.object.isRequired,\n  btnLabelDiscardPID: PropTypes.string.isRequired,\n  btnLabelGetPID: PropTypes.string.isRequired,\n  canBeManaged: PropTypes.bool.isRequired,\n  canBeUnmanaged: PropTypes.bool.isRequired,\n  fieldPath: PropTypes.string.isRequired,\n  fieldLabel: PropTypes.string.isRequired,\n  isEditingPublishedRecord: PropTypes.bool.isRequired,\n  managedHelpText: PropTypes.string,\n  pidIcon: PropTypes.string.isRequired,\n  pidLabel: PropTypes.string.isRequired,\n  pidPlaceholder: PropTypes.string.isRequired,\n  pidType: PropTypes.string.isRequired,\n  required: PropTypes.bool.isRequired,\n  unmanagedHelpText: PropTypes.string,\n};\n\nCustomPIDField.defaultProps = {\n  managedHelpText: null,\n  unmanagedHelpText: null,\n  field: undefined,\n};\n\n/**\n * Render the PIDField using a custom Formik component\n */\nexport class PIDField extends Component {\n  constructor(props) {\n    super(props);\n\n    this.validatePropValues();\n  }\n\n  validatePropValues = () => {\n    const { canBeManaged, canBeUnmanaged, fieldPath } = this.props;\n\n    if (!canBeManaged && !canBeUnmanaged) {\n      throw Error(`${fieldPath} must be managed, unmanaged or both.`);\n    }\n  };\n\n  render() {\n    const { fieldPath } = this.props;\n\n    return (\n      <FastField name={fieldPath} component={CustomPIDField} {...this.props} />\n    );\n  }\n}\n\nPIDField.propTypes = {\n  btnLabelDiscardPID: PropTypes.string,\n  btnLabelGetPID: PropTypes.string,\n  canBeManaged: PropTypes.bool,\n  canBeUnmanaged: PropTypes.bool,\n  fieldPath: PropTypes.string.isRequired,\n  fieldLabel: PropTypes.string.isRequired,\n  isEditingPublishedRecord: PropTypes.bool.isRequired,\n  managedHelpText: PropTypes.string,\n  pidIcon: PropTypes.string,\n  pidLabel: PropTypes.string.isRequired,\n  pidPlaceholder: PropTypes.string,\n  pidType: PropTypes.string.isRequired,\n  required: PropTypes.bool,\n  unmanagedHelpText: PropTypes.string,\n};\n\nPIDField.defaultProps = {\n  btnLabelDiscardPID: \"Discard\",\n  btnLabelGetPID: \"Reserve\",\n  canBeManaged: true,\n  canBeUnmanaged: true,\n  managedHelpText: null,\n  pidIcon: \"barcode\",\n  pidPlaceholder: \"\",\n  required: false,\n  unmanagedHelpText: null,\n};\n","import { i18next } from \"@translations/invenio_rdm_records/i18next\";\nimport React, { useState, useContext, useEffect } from \"react\";\n// import { Trans } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport { useFormikContext } from \"formik\";\nimport {\n  DepositFormSubmitActions,\n  DepositFormSubmitContext,\n} from \"@js/invenio_rdm_records\";\n// import { DepositStatus } from \"../../state/reducers/deposit\";\nimport { Button, Header, Icon, Message, Modal } from \"semantic-ui-react\";\nimport _omit from \"lodash/omit\";\nimport PropTypes from \"prop-types\";\nimport { SubmitReviewModal } from \"./SubmitReviewModal\";\nimport { first } from \"lodash\";\n\nconst DRAFT_PREVIEW_STARTED = \"DRAFT_PREVIEW_STARTED\";\nconst DRAFT_SAVE_STARTED = \"DRAFT_SAVE_STARTED\";\nconst DRAFT_PUBLISH_STARTED = \"DRAFT_PUBLISH_STARTED\";\nconst DRAFT_SUBMIT_REVIEW_STARTED = \"DRAFT_SUBMIT_REVIEW_STARTED\";\n\nclass DepositStatus {\n  static DRAFT = \"draft\";\n  static NEW_VERSION_DRAFT = \"new_version_draft\";\n  static DRAFT_WITH_REVIEW = \"draft_with_review\";\n  static IN_REVIEW = \"in_review\";\n  static DECLINED = \"declined\";\n  static EXPIRED = \"expired\";\n  static PUBLISHED = \"published\";\n\n  static allowsReviewDeletionStates = [\n    DepositStatus.DRAFT_WITH_REVIEW,\n    DepositStatus.DECLINED,\n    DepositStatus.EXPIRED,\n  ];\n\n  static allowsReviewUpdateStates = [\n    DepositStatus.DRAFT_WITH_REVIEW,\n    DepositStatus.DECLINED,\n    DepositStatus.EXPIRED,\n    DepositStatus.DRAFT,\n  ];\n\n  static disallowsSubmitForReviewStates = [\n    DepositStatus.PUBLISHED,\n    DepositStatus.IN_REVIEW,\n    DepositStatus.NEW_VERSION_DRAFT,\n  ];\n}\n\nconst SubmitButtonComponent = ({\n  actionName,\n  actionState = undefined,\n  actionStateExtra,\n  currentUserProfile,\n  record,\n  publishWithoutCommunity,\n  numberOfFiles = undefined,\n  publishModalExtraContent = undefined,\n  handleConfirmNoFiles,\n  handleConfirmNeedsFiles,\n  sanitizeDataForSaving,\n  missingFiles,\n  community = undefined,\n  changeSelectedCommunityFn,\n  showChangeCommunityButton,\n  showDirectPublishButton,\n  showSubmitForReviewButton,\n  disableSubmitForReviewButton = undefined,\n  isRecordSubmittedForReview,\n  ...ui\n}) => {\n  const { values, errors, handleSubmit, initialValues, isSubmitting } =\n    useFormikContext();\n  const { setSubmitContext } = useContext(DepositFormSubmitContext);\n  const [noFilesOpen, setNoFilesOpen] = useState(false);\n  const [publishConfirmOpen, setPublishConfirmOpen] = useState(false);\n  const uiProps = _omit(ui, [\"dispatch\"]);\n\n  const firstButtonRefNoFiles = React.useRef(null);\n  const firstButtonRefPublish = React.useRef(null);\n  useEffect(() => {\n    window.setTimeout(() => {\n      if (noFilesOpen) {\n      } else if (publishConfirmOpen && !showSubmitForReviewButton) {\n        firstButtonRefPublish.current.focus();\n      }\n    }, 20);\n  }, []);\n\n  const handleNoFilesOpen = () => {\n    setNoFilesOpen(true);\n    window.setTimeout(() => {\n      firstButtonRefNoFiles.current.focus();\n    }, 20);\n  };\n\n  const handlePublishConfirmOpen = () => {\n    setPublishConfirmOpen(true);\n    window.setTimeout(() => {\n      firstButtonRefPublish.current.focus();\n    }, 20);\n  };\n\n  const handleNoFilesCancel = () => {\n    if (missingFiles) {\n      handleConfirmNeedsFiles();\n    }\n    setNoFilesOpen(false);\n  };\n\n  const handlePublishConfirmCancel = () => {\n    setPublishConfirmOpen(false);\n    setNoFilesOpen(false);\n  };\n\n  const actions = {\n    preview: {\n      name: \"preview\",\n      buttonLabel: i18next.t(\"Preview\"),\n      actionText: i18next.t(\"preview this deposit\"),\n      icon: \"eye\",\n      action: [DepositFormSubmitActions.PREVIEW],\n      newActionState: DRAFT_PREVIEW_STARTED,\n    },\n    saveDraft: {\n      name: \"save\",\n      buttonLabel: i18next.t(\"Save draft\"),\n      actionText: i18next.t(\"save this draft\"),\n      icon: \"save\",\n      action: [DepositFormSubmitActions.SAVE],\n      newActionState: DRAFT_SAVE_STARTED,\n    },\n    publish: {\n      name: \"publish\",\n      buttonLabel: i18next.t(\"Publish\"),\n      actionText: i18next.t(\"publish this deposit\"),\n      icon: \"upload\",\n      action: [\n        publishWithoutCommunity\n          ? DepositFormSubmitActions.PUBLISH_WITHOUT_COMMUNITY\n          : DepositFormSubmitActions.PUBLISH,\n      ],\n      newActionState: DRAFT_PUBLISH_STARTED,\n    },\n    submitForReview: {\n      name: \"SubmitReview\",\n      buttonLabel: isRecordSubmittedForReview\n        ? i18next.t(\"Submitted for review\")\n        : i18next.t(\"Submit for review\"),\n      actionText: i18next.t(\"submit this deposit for community review\"),\n      icon: \"upload\",\n      action: [\n        DepositFormSubmitActions.SUBMIT_REVIEW,\n        {\n          reviewComment: actionStateExtra.reviewComment,\n          directPublish: showDirectPublishButton,\n        },\n      ],\n      newActionState: DRAFT_SUBMIT_REVIEW_STARTED,\n    },\n    directPublish: {\n      name: \"SubmitReview\",\n      buttonLabel: i18next.t(\"Publish to community\"),\n      actionText: i18next.t(\"publish this deposit\"),\n      icon: \"upload\",\n      action: [\n        DepositFormSubmitActions.SUBMIT_REVIEW,\n        {\n          reviewComment: actionStateExtra.reviewComment,\n          directPublish: showDirectPublishButton,\n        },\n      ],\n      newActionState: DRAFT_SUBMIT_REVIEW_STARTED,\n    },\n  };\n\n  let currentActionName = actionName;\n  if (actionName === \"publish\" && showSubmitForReviewButton) {\n    currentActionName = !showDirectPublishButton\n      ? \"submitForReview\"\n      : \"directPublish\";\n  }\n\n  const { name, buttonLabel, actionText, icon, action, newActionState } =\n    actions[currentActionName];\n\n  const handleSaveOrSubmit = (event) => {\n    sanitizeDataForSaving()\n      .then(handleConfirmNoFiles())\n      .then(() => {\n        const storageValuesKey = `rdmDepositFormValues.${currentUserProfile.id}.${initialValues?.id}`;\n        window.localStorage.removeItem(storageValuesKey);\n      })\n      .then(() => {\n        setSubmitContext(...action);\n        handleSubmit(event);\n        setNoFilesOpen(false);\n        setPublishConfirmOpen(false);\n      });\n  };\n\n  // const handlePublishOrSubmit = (event) => {\n  //   sanitizeDataForSaving().then(handleConfirmNoFiles()).then(() => {\n  //     setSubmitContext(...action);\n  //     handleSubmit(event);\n  //     setNoFilesOpen(false);\n  //     setPublishConfirmOpen(false);\n  //   });\n  // };\n\n  // const handleSubmitReview = () => {\n  //   setSubmitContext(...action);\n  //   handleSubmit();\n  //   setPublishConfirmOpen(false);\n  // }\n\n  const handlePositiveNoFiles = (event) => {\n    if (actionName === \"publish\") {\n      setNoFilesOpen(false);\n      handlePublishConfirmOpen();\n    } else {\n      handleSaveOrSubmit(event);\n    }\n  };\n\n  return (\n    <>\n      <Button\n        name={name}\n        disabled={\n          isSubmitting ||\n          (actionName === \"publish\" && disableSubmitForReviewButton)\n        }\n        onClick={missingFiles ? handleNoFilesOpen : handlePositiveNoFiles}\n        loading={isSubmitting && actionState === newActionState}\n        icon={icon}\n        labelPosition=\"left\"\n        content={buttonLabel}\n        type={missingFiles || showSubmitForReviewButton ? \"button\" : \"submit\"}\n        // positive={showDirectPublishButton}\n        // primary={!showDirectPublishButton}\n        {...uiProps}\n      />\n\n      {/* Modal to confirm submission with no files */}\n      <Modal\n        closeIcon\n        open={noFilesOpen}\n        onClose={() => setNoFilesOpen(false)}\n        onOpen={() => setNoFilesOpen(true)}\n      >\n        <Header icon=\"archive\" content=\"No files included\" />\n        <Modal.Content>\n          <p>\n            {i18next.t(\n              \"Are you sure you want to {{actionText}} without any uploaded files?\",\n              { actionText: actionText }\n            )}\n          </p>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button\n            negative\n            onClick={handleNoFilesCancel}\n            ref={firstButtonRefNoFiles}\n          >\n            <Icon name=\"remove\" /> No, let me add files\n          </Button>\n          <Button positive onClick={handlePositiveNoFiles}>\n            <Icon name=\"checkmark\" /> Yes, continue without files\n          </Button>\n        </Modal.Actions>\n      </Modal>\n\n      {/* Modal to confirm publishing */}\n      <Modal\n        open={publishConfirmOpen && !showSubmitForReviewButton}\n        size=\"small\"\n        closeIcon\n        closeOnDimmerClick={false}\n        onClose={() => setPublishConfirmOpen(false)}\n        onOpen={() => setPublishConfirmOpen(true)}\n      >\n        <Modal.Header>\n          {i18next.t(\"Are you sure you want to {{actionText}}?\", {\n            actionText: actionText,\n          })}\n        </Modal.Header>\n        {/* the modal text should only ever come from backend configuration */}\n        <Modal.Content>\n          <Message visible warning icon>\n            <p>\n              <Icon name=\"warning sign\" />{\" \"}\n              {i18next.t(\n                \"Once the deposit is published you cannot change or add attached files! (You can still update the published record's other information.)\"\n              )}\n            </p>\n          </Message>\n          {publishModalExtraContent && (\n            <div\n              dangerouslySetInnerHTML={{ __html: publishModalExtraContent }}\n            />\n          )}\n        </Modal.Content>\n        <Modal.Actions>\n          <Button\n            onClick={handlePublishConfirmCancel}\n            floated=\"left\"\n            negative\n            ref={firstButtonRefPublish}\n          >\n            <Icon name=\"remove\" /> {i18next.t(\"Cancel\")}\n          </Button>\n          <Button\n            onClick={handleSaveOrSubmit}\n            positive\n            icon=\"upload\"\n            content={buttonLabel}\n          />\n        </Modal.Actions>\n      </Modal>\n\n      {/* modal to confirm submitting to community */}\n      {showSubmitForReviewButton && (\n        <SubmitReviewModal\n          config={config}\n          isConfirmModalOpen={publishConfirmOpen && showSubmitForReviewButton}\n          initialReviewComment={actionStateExtra.reviewComment}\n          onSubmit={handleSaveOrSubmit}\n          community={community}\n          onClose={handlePublishConfirmCancel}\n          publishModalExtraContent={publishModalExtraContent}\n          directPublish={showDirectPublishButton}\n        />\n      )}\n    </>\n  );\n};\n\nSubmitButtonComponent.propTypes = {\n  actionState: PropTypes.string,\n  actionStateExtra: PropTypes.object,\n  publishWithoutCommunity: PropTypes.bool,\n  numberOfFiles: PropTypes.number.isRequired,\n  publishModalExtraContent: PropTypes.string,\n  changeSelectedCommunityFn: PropTypes.func.isRequired,\n  showChangeCommunityButton: PropTypes.bool.isRequired,\n  showDirectPublishButton: PropTypes.bool.isRequired,\n  showSubmitForReviewButton: PropTypes.bool.isRequired,\n  disableSubmitForReviewButton: PropTypes.bool,\n  isRecordSubmittedForReview: PropTypes.bool.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  actionState: state.deposit.actionState,\n  actionStateExtra: state.deposit.actionStateExtra,\n  record: state.deposit.record,\n  numberOfFiles: Object.values(state.files.entries).length,\n  publishModalExtraContent: state.deposit.config.publish_modal_extra,\n  community: state.deposit.editorState.selectedCommunity,\n  showDirectPublishButton: state.deposit.editorState.ui.showDirectPublishButton,\n  showChangeCommunityButton:\n    state.deposit.editorState.ui.showChangeCommunityButton,\n  showSubmitForReviewButton:\n    state.deposit.editorState.ui.showSubmitForReviewButton,\n  disableSubmitForReviewButton:\n    state.deposit.editorState.ui.disableSubmitForReviewButton,\n  isRecordSubmittedForReview:\n    state.deposit.record.status === DepositStatus.IN_REVIEW,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  changeSelectedCommunityFn: (community) =>\n    dispatch(changeSelectedCommunity(community)),\n});\n\nexport const SubmitButtonModal = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SubmitButtonComponent);\n","// This file is part of Invenio-RDM-Records\n// Copyright (C) 2020-2023 CERN.\n//\n// Invenio-RDM-Records is free software; you can redistribute it and/or modify it\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport { i18next } from \"@translations/invenio_rdm_records/i18next\";\nimport { Formik } from \"formik\";\nimport _get from \"lodash/get\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { Trans } from \"react-i18next\";\nimport {\n  ErrorLabel,\n  RadioField,\n  TextAreaField,\n  ErrorMessage,\n} from \"react-invenio-forms\";\nimport { Button, Checkbox, Form, Icon, Message, Modal } from \"semantic-ui-react\";\nimport * as Yup from \"yup\";\n\nexport class SubmitReviewModal extends Component {\n  componentDidMount() {\n    // A11y: Focus the first input field in the form\n    const firstFormFieldWrap = document.getElementById(\"accept-access-checkbox\");\n    const checkboxElem = firstFormFieldWrap?.querySelector(\"input\");\n    checkboxElem?.focus();\n  }\n\n  ConfirmSubmitReviewSchema = Yup.object({\n    acceptAccessToRecord: Yup.bool().oneOf([true], i18next.t(\"You must accept this.\")),\n    acceptAfterPublishRecord: Yup.bool().oneOf(\n      [true],\n      i18next.t(\"You must accept this.\")\n    ),\n    reviewComment: Yup.string(),\n  });\n\n  render() {\n    const {\n      initialReviewComment,\n      isConfirmModalOpen,\n      community,\n      onClose,\n      onSubmit,\n      publishModalExtraContent,\n      directPublish,\n      errors,\n      loading,\n    } = this.props;\n    const communityTitle = community.metadata.title;\n\n    let headerTitle, msgWarningTitle, msgWarningText1, submitBtnLbl;\n    if (directPublish) {\n      headerTitle = i18next.t(\"Publish to community\");\n      msgWarningTitle = i18next.t(\n        \"Before publishing to the community, please read and check the following:\"\n      );\n      msgWarningText1 = i18next.t(\n        \"Your upload will be <bold>immediately published</bold> in '{{communityTitle}}'. You will no longer be able to change the files in the upload! However, you will still be able to update the record's metadata later.\",\n        { communityTitle }\n      );\n      submitBtnLbl = i18next.t(\"Publish record to community\");\n    } else {\n      headerTitle = i18next.t(\"Submit for review\");\n      msgWarningTitle = i18next.t(\n        \"Before requesting review, please read and check the following:\"\n      );\n      msgWarningText1 = i18next.t(\n        \"If your upload is accepted by the community curators, it will be <bold>immediately published</bold>. Before that, you will still be able to modify metadata and files of this upload.\"\n      );\n      submitBtnLbl = i18next.t(\"Submit record for review\");\n    }\n\n    return (\n      <Formik\n        initialValues={{\n          acceptAccessToRecord: false,\n          acceptAfterPublishRecord: false,\n          reviewComment: initialReviewComment || \"\",\n        }}\n        onSubmit={onSubmit}\n        validationSchema={this.ConfirmSubmitReviewSchema}\n        validateOnChange={false}\n        validateOnBlur={false}\n      >\n        {({ values, handleSubmit }) => {\n          return (\n            <Modal\n              open={isConfirmModalOpen}\n              onClose={onClose}\n              size=\"small\"\n              closeIcon\n              closeOnDimmerClick={false}\n            >\n              <Modal.Header>{headerTitle}</Modal.Header>\n              <Modal.Content>\n                {errors && <ErrorMessage errors={errors} />}\n                <Message visible warning>\n                  <p>\n                    <Icon name=\"warning sign\" />\n                    {msgWarningTitle}\n                  </p>\n                </Message>\n                <Form>\n                  <Form.Field id=\"accept-access-checkbox\">\n                    <RadioField\n                      control={Checkbox}\n                      fieldPath=\"acceptAccessToRecord\"\n                      label={\n                        <Trans\n                          defaults={i18next.t(\n                            \"The '{{communityTitle}}' curators will have access to <bold>view</bold> and <bold>edit</bold> your upload's metadata and files.\",\n                            { communityTitle }\n                          )}\n                          values={{\n                            communityTitle,\n                          }}\n                          components={{ bold: <b /> }}\n                          shouldUnescape\n                        />\n                      }\n                      checked={_get(values, \"acceptAccessToRecord\") === true}\n                      onChange={({ data, formikProps }) => {\n                        formikProps.form.setFieldValue(\n                          \"acceptAccessToRecord\",\n                          data.checked\n                        );\n                      }}\n                      optimized\n                    />\n                    <ErrorLabel\n                      role=\"alert\"\n                      fieldPath=\"acceptAccessToRecord\"\n                      className=\"mt-0 mb-5\"\n                    />\n                  </Form.Field>\n                  <Form.Field>\n                    <RadioField\n                      control={Checkbox}\n                      fieldPath=\"acceptAfterPublishRecord\"\n                      label={\n                        <Trans\n                          defaults={msgWarningText1}\n                          values={{\n                            communityTitle: communityTitle,\n                          }}\n                          components={{ bold: <b /> }}\n                        />\n                      }\n                      checked={_get(values, \"acceptAfterPublishRecord\") === true}\n                      onChange={({ data, formikProps }) => {\n                        formikProps.form.setFieldValue(\n                          \"acceptAfterPublishRecord\",\n                          data.checked\n                        );\n                      }}\n                      optimized\n                    />\n                    <ErrorLabel\n                      role=\"alert\"\n                      fieldPath=\"acceptAfterPublishRecord\"\n                      className=\"mt-0 mb-5\"\n                    />\n                  </Form.Field>\n\n                  {!directPublish && (\n                    <TextAreaField\n                      fieldPath=\"reviewComment\"\n                      label={i18next.t(\"Message to curators (optional)\")}\n                    />\n                  )}\n\n                  {publishModalExtraContent && (\n                    <div\n                      dangerouslySetInnerHTML={{ __html: publishModalExtraContent }}\n                    />\n                  )}\n                </Form>\n              </Modal.Content>\n              <Modal.Actions>\n                <Button\n                  onClick={onClose}\n                  floated=\"left\"\n                  loading={loading}\n                  disabled={loading}\n                >\n                  <Icon name='remove' /> {i18next.t(\"Cancel\")}\n                </Button>\n                <Button\n                  name=\"submitReview\"\n                  onClick={(event) => {\n                    handleSubmit(event);\n                  }}\n                  loading={loading}\n                  disabled={loading}\n                  positive={directPublish}\n                  primary={!directPublish}\n                >\n                  <Icon name='checkmark' /> {submitBtnLbl}\n                </Button>\n              </Modal.Actions>\n            </Modal>\n          );\n        }}\n      </Formik>\n    );\n  }\n}\n\nSubmitReviewModal.propTypes = {\n  isConfirmModalOpen: PropTypes.bool.isRequired,\n  community: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  initialReviewComment: PropTypes.string,\n  publishModalExtraContent: PropTypes.string,\n  directPublish: PropTypes.bool,\n  errors: PropTypes.node, // TODO FIXME: Use a common error cmp to display errros.\n  loading: PropTypes.bool,\n};\n\nSubmitReviewModal.defaultProps = {\n  initialReviewComment: \"\",\n  publishModalExtraContent: undefined,\n  directPublish: false,\n  errors: undefined,\n  loading: false,\n};\n","// This file is part of the Knowledge Commons Repository\n// a customized deployment of InvenioRDM\n// Copyright (C) 2023 MESH Research.\n// InvenioRDM Copyright (C) 2023 CERN.\n//\n// Invenio App RDM and the Knowledge Commons Repository are free software;\n// you can redistribute them and/or modify them\n// under the terms of the MIT License; see LICENSE file for more details.\n\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _get from \"lodash/get\";\nimport { Form } from \"semantic-ui-react\";\nimport { FieldLabel, SelectField } from \"react-invenio-forms\";\nimport { i18next } from \"@translations/invenio_rdm_records/i18next\";\nimport { Field, useFormikContext } from \"formik\";\nimport { Icon, Label } from \"semantic-ui-react\";\nimport { set } from \"lodash\";\n\nconst ResourceTypeSelectorField = ({\n  fieldPath,\n  label = i18next.t(\"Resource type\"),\n  labelIcon = \"tag\",\n  options,\n  labelclassname = \"field-label-class\",\n  required = false,\n  ...restProps\n}) => {\n  const { values, errors, setFieldValue, initialValues } = useFormikContext();\n  const [otherToggleActive, setOtherToggleActive] = useState(false);\n\n  const buttonTypes = [\n    {\n      id: \"textDocument-journalArticle\",\n      label: \"Journal Article\",\n      icon: \"file text\",\n    },\n    { id: \"textDocument-review\", label: \"Review\", icon: \"thumbs up\" },\n    { id: \"textDocument-book\", label: \"Book\", icon: \"book\" },\n    { id: \"textDocument-bookSection\", label: \"Book Section\", icon: \"book\" },\n    {\n      id: \"instructionalResource-syllabus\",\n      label: \"Syllabus\",\n      icon: \"graduation\",\n    },\n  ];\n\n  useEffect(() => {\n    if (\n      values.metadata.resource_type &&\n      !buttonTypes.map((b) => b.id).includes(values.metadata.resource_type)\n    ) {\n      setOtherToggleActive(true);\n      // FIXME: this is a hack to get the formik validation not to complain\n      setFieldValue(\"metadata.resource_type\", values.metadata.resource_type);\n    }\n  }, [values.metadata.resource_type]);\n\n  /**\n   * Generate label value\n   *\n   * @param {object} option - back-end option\n   * @returns {string} label\n   */\n  const _label = (option) => {\n    return (\n      option.type_name +\n      (option.subtype_name ? \" / \" + option.subtype_name : \"\")\n    );\n  };\n\n  /**\n   * Convert back-end options to front-end options.\n   *\n   * @param {array} propsOptions - back-end options\n   * @returns {array} front-end options\n   */\n  const createOptions = (propsOptions) => {\n    return propsOptions\n      .map((o) => ({ ...o, label: _label(o) }))\n      .sort((o1, o2) => o1.label.localeCompare(o2.label))\n      .map((o) => {\n        return {\n          value: o.id,\n          icon: o.icon,\n          text: o.label,\n        };\n      });\n  };\n  const frontEndOptions = createOptions(options);\n\n  const handleItemClick = (event) => {\n    setFieldValue(\n      \"metadata.resource_type\",\n      event.target.closest(\"button\").name\n    );\n    setOtherToggleActive(false);\n  };\n\n  const handleOtherToggleClick = () => {\n    setFieldValue(\"metadata.resource_type\", frontEndOptions[0].value);\n    setOtherToggleActive(true);\n\n    setTimeout(() => {\n      document\n        .querySelectorAll(\n          \"#InvenioAppRdm\\\\.Deposit\\\\.resource_type\\\\.container .invenio-select-field input\"\n        )[0]\n        .focus();\n    }, 200);\n  };\n\n  return (\n    <Field id={fieldPath} name={fieldPath}>\n      {({\n        field, // { name, value, onChange, onBlur }\n        form: { touched, errors, setFieldValue }, // also values, setXXXX, handleXXXX, dirty, isValid, status, etc.\n        meta,\n      }) => (\n        <Form.Field\n          required={!!required}\n          error={!!meta.error && !!meta.touched}\n        >\n          <FieldLabel htmlFor={fieldPath} icon={labelIcon} label={label} />\n          <div className=\"ui compact fluid icon labeled six item menu\">\n            {buttonTypes.map((buttonType, index) => (\n              <button\n                key={index}\n                id={buttonType.id}\n                name={buttonType.id}\n                onClick={handleItemClick}\n                className={`ui button item ${\n                  values.metadata.resource_type === buttonType.id\n                    ? \"active\"\n                    : \"\"\n                }`}\n                formNoValidate\n                type=\"button\"\n              >\n                <Icon name={buttonType.icon} />\n                {buttonType.label}\n              </button>\n            ))}\n            <button\n              id={\"otherToggle\"}\n              name={\"otherToggle\"}\n              onClick={handleOtherToggleClick}\n              className={`ui button item ${\n                otherToggleActive === true ? \"active\" : \"\"\n              }`}\n              formNoValidate\n              type=\"button\"\n            >\n              <Icon name=\"asterisk\" />\n              Other...\n            </button>\n          </div>\n          {!!otherToggleActive && (\n            <SelectField\n              fieldPath={fieldPath}\n              label={\"\"}\n              optimized\n              options={frontEndOptions}\n              selectOnBlur={true}\n              selectOnNavigation={true}\n              search={true}\n              placeholder={\"choose another resource type...\"}\n              {...restProps}\n            />\n          )}\n          {meta.error && meta.touched && (\n            <Label pointing className=\"prompt error\">\n              {meta.error}\n            </Label>\n          )}\n        </Form.Field>\n      )}\n    </Field>\n  );\n};\n\nResourceTypeSelectorField.propTypes = {\n  fieldPath: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  labelIcon: PropTypes.string,\n  labelclassname: PropTypes.string,\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      icon: PropTypes.string,\n      type_name: PropTypes.string,\n      subtype_name: PropTypes.string,\n      id: PropTypes.string,\n    })\n  ).isRequired,\n  required: PropTypes.bool,\n};\n\nexport default ResourceTypeSelectorField;\n","import React from \"react\";\nimport { FastField, Field, useFormikContext } from \"formik\";\nimport _isEmpty from \"lodash/isEmpty\";\n\nimport { Dropdown, Form } from \"semantic-ui-react\";\nimport { FieldLabel } from \"react-invenio-forms\";\nimport { set } from \"lodash\";\n\nconst SelectField = ({\n  defaultValue = \"\",\n  error = undefined,\n  errorDirection = \"above\",\n  fieldPath,\n  label = \"\",\n  labelIcon = undefined,\n  onAddItem = undefined,\n  onChange = undefined,\n  optimized = false,\n  options,\n  multiple = false,\n  required = false,\n  selectOnBlur = false,\n  width = undefined,\n  ...otherProps\n}) => {\n  const FormikField = optimized ? FastField : Field;\n  const { setFieldValue } = useFormikContext();\n\n  const displayError = (meta) => {\n    let error = meta.error;\n    if (!Array.isArray(meta.value)) {\n      if (\n        !_isEmpty(options) &&\n        !options.find(function (o) {\n          return o.value === meta.value;\n        }) &&\n        !_isEmpty(meta.value)\n      ) {\n        error = 'The current value \"'.concat(\n          meta.value,\n          '\" is invalid, please select another value.'\n        );\n      }\n    }\n    return error\n      ? {\n          content: error,\n          pointing: errorDirection,\n        }\n      : null;\n  };\n\n  const handleChange = (e, { value }) => {\n    setFieldValue(fieldPath, value);\n  };\n\n  return (\n    <FormikField id={fieldPath} name={fieldPath} as=\"select\" {...otherProps}>\n      {({\n        field, // { name, value, onChange, onBlur }\n        form: { touched, errors }, // also values, setXXXX, handleXXXX, dirty, isValid, status, initialValues, initialErrors, etc.\n        meta,\n      }) => {\n        return (\n          <Form.Field\n            error={meta.error && meta.touched ? true : undefined}\n            width={width}\n          >\n            <FieldLabel htmlFor={fieldPath} icon={labelIcon} label={label} />\n            <Dropdown\n              className=\"invenio-select-field\"\n              error={meta.error && meta.touched ? true : undefined}\n              fluid={true}\n              id={fieldPath}\n              multiple={multiple}\n              name={fieldPath}\n              options={options}\n              selection={true}\n              selectOnBlur={selectOnBlur}\n              {...field}\n              {...otherProps}\n              onChange={handleChange}\n              onAddItem={onAddItem}\n              value={field.value || defaultValue}\n            />\n            {meta.error && meta.touched && (\n              <div\n                className={`ui pointing above ${errorDirection} prompt label `}\n                role=\"alert\"\n                aria-atomic=\"true\"\n              >\n                {meta.error}\n              </div>\n            )}\n          </Form.Field>\n        );\n      }}\n    </FormikField>\n  );\n};\n\nexport { SelectField };\n","import React from \"react\";\nimport { Field, FastField, getIn } from \"formik\";\nimport { Form } from \"semantic-ui-react\";\nimport { ErrorLabel, FieldLabel } from \"react-invenio-forms\";\nimport { getTouchedParent } from \"../utils\";\n\nconst TextArea = ({\n  classnames,\n  error,\n  fieldPath,\n  fluid = true,\n  helpText = \"\",\n  label,\n  onBlur,\n  optimized = false,\n  required = false,\n  rows = 3,\n  showLabel = true,\n  width,\n  ...extraProps\n}) => {\n  // FIXME: This is a hack to remove the extra props that are not used by the\n  // semantic-ui Form.Input component. We should probably remove these earlier\n  // FIXME: Implement the extraRequiredFields and defaultFieldValues props\n  const {\n    customFieldsUI,\n    currentResourceType,\n    currentUserprofile,\n    descriptionMods,\n    defaultFieldValue,\n    extraRequiredFields,\n    fieldComponents,\n    helpTextMods,\n    icon,\n    iconMods,\n    inputIcon,\n    labelIcon,\n    labelMods,\n    noFiles,\n    placeholderMods,\n    priorityFieldValues,\n    ...filteredProps\n  } = extraProps;\n\n  const FormikField = optimized ? FastField : Field;\n\n  return (\n    <FormikField\n      id={fieldPath}\n      key={fieldPath}\n      name={fieldPath}\n      fieldPath={fieldPath}\n      optimized={optimized}\n    >\n      {({\n        field, // { name, value, onChange, onBlur }\n        form: { touched, errors, values }, // also values, setXXXX, handleXXXX, dirty, isValid, status, etc.\n        meta,\n      }) => {\n        const touchedAncestor = getTouchedParent(touched, fieldPath);\n        console.log(\"TextArea\", fieldPath, meta, touchedAncestor);\n\n        return (\n          <Form.Field\n            required={!!required}\n            error={\n              (!!meta.error && (!!meta.touched || touchedAncestor)) || !!error\n            }\n            // (!!meta.touched && !!meta.errors) ||\n            // (!meta.touched && meta.initialError)\n            className={`invenio-text-area-field ${classnames}`}\n            width={width}\n          >\n            {showLabel && (\n              <FieldLabel\n                htmlFor={fieldPath}\n                icon={labelIcon || icon}\n                label={label}\n              />\n            )}\n            <Form.TextArea\n              id={fieldPath}\n              name={fieldPath}\n              rows={rows}\n              {...(helpText\n                ? { \"aria-describedby\": `${fieldPath}.helptext` }\n                : {})}\n              {...field}\n              {...(onBlur && {\n                onBlur: (e) => {\n                  onBlur(e);\n                  field.onBlur(e);\n                },\n              })}\n              {...filteredProps}\n            />\n            {((!!meta.error && (!!meta.touched || touchedAncestor)) ||\n              !!error) && <ErrorLabel fieldPath={fieldPath} />}\n            {helpText && <label className=\"helptext\">{description}</label>}\n          </Form.Field>\n        );\n      }}\n    </FormikField>\n  );\n};\n\nexport { TextArea };\n","import React from \"react\";\nimport { FastField, Field } from \"formik\";\nimport { Form } from \"semantic-ui-react\";\nimport { FieldLabel } from \"react-invenio-forms\";\nimport { i18next } from \"@translations/invenio_rdm_records/i18next\";\nimport { getTouchedParent } from \"../utils\";\n\nconst TextField = ({\n  fieldPath,\n  label,\n  labelIcon: label_icon,\n  inputIcon: input_icon = true,\n  required,\n  disabled,\n  error,\n  helpText,\n  optimized,\n  classnames,\n  showLabel = true,\n  fluid = \"true\",\n  onBlur,\n  width,\n  ...extraProps\n}) => {\n  const FormikField = optimized ? FastField : Field;\n  // FIXME: This is a hack to remove the extra props that are not used by the\n  // semantic-ui Form.Input component. We should probably remove these earlier\n  // FIXME: Implement the extraRequiredFields and defaultFieldValues props\n  const {\n    customFieldsUI,\n    currentResourceType,\n    currentUserprofile,\n    descriptionMods,\n    defaultFieldValue,\n    extraRequiredFields,\n    fieldComponents,\n    helpTextMods,\n    icon,\n    iconMods,\n    inputIcon,\n    labelIcon,\n    labelMods,\n    noFiles,\n    placeholderMods,\n    priorityFieldValues,\n    ...filteredProps\n  } = extraProps;\n  return (\n    <FormikField id={fieldPath} name={fieldPath}>\n      {({\n        field, // { name, value, onChange, onBlur }\n        form: { touched, errors }, // also values, setXXXX, handleXXXX, dirty, isValid, status, etc.\n        meta,\n      }) => {\n        const touchedAncestor = getTouchedParent(touched, fieldPath);\n\n        return (\n          <Form.Field\n            required={!!required}\n            error={\n              (!!meta.error && (!!meta.touched || touchedAncestor)) ||\n              !!error ||\n              (!meta.touched && meta.initialError)\n            }\n            // (!!meta.touched && !!meta.errors) ||\n            // (!meta.touched && meta.initialError)\n            className={`invenio-text-input-field ${classnames}`}\n            fluid={fluid}\n            width={width}\n          >\n            {showLabel && (\n              <FieldLabel htmlFor={fieldPath} icon={label_icon} label={label} />\n            )}\n            <Form.Input\n              error={\n                (meta.error && (meta.touched || touchedAncestor)) ||\n                (!meta.touched && meta.initialError)\n                  ? meta.error\n                  : undefined\n              }\n              disabled={disabled}\n              fluid={fluid}\n              icon={input_icon ? label_icon : undefined}\n              id={fieldPath}\n              name={fieldPath}\n              aria-describedby={`${fieldPath}.helptext`}\n              {...field}\n              {...(onBlur && {\n                onBlur: (e) => {\n                  onBlur(e);\n                  field.onBlur(e);\n                },\n              })}\n              {...filteredProps}\n            />\n            {helpText && (\n              <div className=\"helptext\" id={`${fieldPath}.helptext`}>\n                {i18next.t(helpText)}\n              </div>\n            )}\n          </Form.Field>\n        );\n      }}\n    </FormikField>\n  );\n};\n\nexport { TextField };\n","import { func } from \"prop-types\";\nimport { getIn } from \"formik\";\n\n/**\n * Scroll page to top\n */\nfunction scrollTop() {\n  window.scrollTo({\n    top: 0,\n    left: 0,\n    behavior: \"smooth\",\n  });\n}\n\nfunction moveToArrayStart(startingArray, moveTargets, keyLabel) {\n  let newArray = [...startingArray];\n  for (const target of moveTargets) {\n    const index = newArray.findIndex((item) => item[keyLabel] === target);\n    newArray.unshift(...newArray.splice(index, 1));\n  }\n  return newArray;\n}\n\nfunction pushToArrayEnd(startingArray, targetValue, keyLabel) {\n  let newArray = [...startingArray];\n  newArray.push(\n    ...newArray.splice(\n      newArray.findIndex((item) => item[keyLabel] === targetValue),\n      1\n    )\n  );\n  return newArray;\n}\n\nfunction flattenKeysDotJoined(val) {\n  const keysArray = Object.keys(val);\n  let newArray = [];\n  for (let i = 0; i < keysArray.length; i++) {\n    const myValue = val[keysArray[i]];\n    if (\n      typeof myValue === \"object\" &&\n      !Array.isArray(myValue) &&\n      myValue !== null\n    ) {\n      const childKeys = flattenKeysDotJoined(val[keysArray[i]]).map(\n        (k) => `${keysArray[i]}.${k}`\n      );\n      newArray = newArray.concat(childKeys);\n    } else {\n      newArray.push(keysArray[i]);\n    }\n  }\n  return newArray;\n}\n\nfunction flattenWrappers(page) {\n  let flattened = [];\n  if (page.subsections) {\n    for (const sub of page.subsections) {\n      if (sub.subsections) {\n        flattened = flattened.concat(flattenWrappers(sub));\n      } else {\n        flattened.push(sub);\n      }\n    }\n  } else {\n    flattened.push(page);\n  }\n  return flattened;\n}\n\nfunction getTouchedParent(touched, fieldPath) {\n  const fieldParts = fieldPath.split(\".\");\n  let touchedAncestor = false;\n\n  for (let i = fieldParts.length; i > 1; i--) {\n    let currentPath = fieldParts.slice(0, i).join(\".\");\n    if (getIn(touched, currentPath) === true) {\n      touchedAncestor = true;\n      break;\n    }\n  }\n  return touchedAncestor;\n}\n\n// Compares two objects deeply, ignoring the keys passed in the ignoreKeys array\n// Returns true if the objects are deeply equal, false otherwise\n// If ignoreKeys is not passed, it compares the objects deeply without ignoring any keys\n//\n// param obj1: first object to compare\n// param obj2: second object to compare\n// param ignoreKeys: array of keys to ignore when comparing the objects\n// returns: true if the objects are deeply equal, false otherwise\nfunction areDeeplyEqual(obj1, obj2, ignoreKeys) {\n  if (ignoreKeys) {\n    obj1 = excludeObjectKeys(obj1, ignoreKeys);\n    obj2 = excludeObjectKeys(obj2, ignoreKeys);\n  }\n  if (obj1 === obj2) return true;\n\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\n    if (obj1.length !== obj2.length) return false;\n\n    return obj1.every((elem, index) => {\n      return areDeeplyEqual(elem, obj2[index]);\n    });\n  }\n\n  if (\n    typeof obj1 === \"object\" &&\n    typeof obj2 === \"object\" &&\n    obj1 !== null &&\n    obj2 !== null\n  ) {\n    if (Array.isArray(obj1) || Array.isArray(obj2)) return false;\n\n    const keys1 = Object.keys(obj1);\n    const keys2 = Object.keys(obj2);\n\n    if (\n      keys1.length !== keys2.length ||\n      !keys1.every((key) => keys2.includes(key))\n    )\n      return false;\n\n    for (let key in obj1) {\n      console.log(obj1[key], obj2[key]);\n      let isEqual = areDeeplyEqual(obj1[key], obj2[key]);\n      if (!isEqual) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction excludeObjectKeys(obj, keys) {\n  const newObj = {};\n  for (const key in obj) {\n    if (!keys.includes(key)) {\n      newObj[key] = obj[key];\n    }\n  }\n  return newObj;\n}\n\nexport {\n  areDeeplyEqual,\n  excludeObjectKeys,\n  getTouchedParent,\n  scrollTop,\n  moveToArrayStart,\n  pushToArrayEnd,\n  flattenKeysDotJoined,\n  flattenWrappers,\n};\n","import React from \"react\";\nimport { i18next } from \"@translations/invenio_app_rdm/i18next\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst ChapterLabelComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"KCR Book information\"\n      fieldName=\"kcr:chapter_label\"\n      idString=\"ChapterLabelField\"\n      customFieldsUI={customFieldsUI}\n      label={i18next.t(\"Chapter number/label\")}\n      description={\"\"}\n      icon=\"tag\"\n      {...extraProps}\n    />\n  );\n};\n\nexport { ChapterLabelComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst EditionComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"KCR Book information\"\n      fieldName=\"kcr:edition\"\n      idString=\"EditionField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      label={\"Edition or Version\"}\n      icon={\"code branch\"}\n      placeholder={\"e.g., 2nd revised\"}\n      {...extraProps}\n    />\n  );\n};\n\nexport { EditionComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst KeywordsComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Tags\"\n      label=\"User-defined Keywords\"\n      fieldName=\"kcr:user_defined_tags\"\n      idString=\"KCRKeywordsField\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nexport { KeywordsComponent };\n","import { AdminMetadataComponent } from \"./components/AdminMetadataComponent\";\nimport { AIComponent } from \"./components/AIComponent\";\nimport { ChapterLabelComponent } from \"./components/ChapterLabelComponent\";\nimport { CommonsLegacyInfoComponent } from \"./components/CommonsLegacyInfoComponent\";\nimport { ContentWarningComponent } from \"./components/ContentWarningComponent\";\nimport { CourseTitleComponent } from \"./components/CourseTitleComponent\";\nimport { DegreeComponent } from \"./components/DegreeComponent\";\nimport { DisciplineComponent } from \"./components/DisciplineComponent\";\nimport { EditionComponent } from \"./components/EditionComponent\";\nimport { EditionSectionComponent } from \"./components/EditionSectionComponent\";\nimport { InstitutionDepartmentComponent } from \"./components/InstitutionDepartmentComponent\";\nimport { KeywordsComponent } from \"./components/KeywordsComponent\";\nimport { MediaComponent } from \"./components/MediaComponent\";\nimport { MeetingOrganizationComponent } from \"./components/MeetingOrganizationComponent\";\nimport { ProjectTitleComponent } from \"./components/ProjectTitleComponent\";\nimport { PublicationURLComponent } from \"./components/PublicationURLComponent\";\nimport { SeriesComponent } from \"./components/SeriesComponent\";\nimport { SponsoringInstitutionComponent } from \"./components/SponsoringInstitutionComponent\";\nimport { SubjectsKeywordsComponent } from \"./components/SubjectsKeywordsComponent\";\nimport { VolumeComponent } from \"./components/VolumeComponent\";\n\nconst componentsMap = {\n  AdminMetadataComponent: [\n    AdminMetadataComponent,\n    [\"kcr:commons_domain\", \"kcr:submitter_email\", \"kcr:submitter_username\"],\n  ],\n  AIComponent: [AIComponent, [\"custom_fields.kcr:ai_usage\"]],\n  ChapterLabelComponent: [\n    ChapterLabelComponent,\n    [\"custom_fields.kcr:chapter_label\"],\n  ],\n  CommonsLegacyInfoComponent: [\n    CommonsLegacyInfoComponent,\n    [\n      \"hclegacy:groups_for_deposit\",\n      \"hclegacy:collection\",\n      \"hclegacy:committee_deposit\",\n      \"hclegacy:file_location\",\n      \"hclegacy:file_pid\",\n      \"hclegacy:groups_for_deposit\",\n      \"hclegacy:previously_published\",\n      \"hclegacy:publication_type\",\n      \"hclegacy:record_change_date\",\n      \"hclegacy:record_creation_date\",\n      \"hclegacy:record_identifier\",\n      \"hclegacy:society\",\n      \"hclegacy:submitter_org_memberships\",\n      \"hclegacy:submitter_affiliation\",\n      \"hclegacy:submitter_id\",\n    ],\n  ],\n  ContentWarningComponent: [\n    ContentWarningComponent,\n    [\"custom_fields.kcr:content_warning\"],\n  ],\n  CourseTitleComponent: [\n    CourseTitleComponent,\n    [\"custom_fields.kcr:course_title\"],\n  ],\n  DegreeComponent: [DegreeComponent, [\"custom_fields.kcr:degree\"]],\n  DisciplineComponent: [DisciplineComponent, [\"custom_fields.kcr:discipline\"]],\n  EditionComponent: [EditionComponent, [\"custom_fields.kcr:edition\"]],\n  EditionSectionComponent: [\n    EditionSectionComponent,\n    [\"custom_fields.kcr:edition\", \"custom_fields.kcr:chapter_label\"],\n  ],\n  InstitutionDepartmentComponent: [\n    InstitutionDepartmentComponent,\n    [\"custom_fields.kcr:institution_department\"],\n  ],\n  KeywordsComponent: [\n    KeywordsComponent,\n    [\"custom_fields.kcr:user_defined_tags\"],\n  ],\n  MediaComponent: [MediaComponent, [\"custom_fields.kcr:media\"]],\n  MeetingOrganizationComponent: [\n    MeetingOrganizationComponent,\n    [\"custom_fields.kcr:meeting_organization\"],\n  ],\n  ProjectTitleComponent: [\n    ProjectTitleComponent,\n    [\"custom_fields.kcr:project_title\"],\n  ],\n  PublicationURLComponent: [\n    PublicationURLComponent,\n    [\"custom_fields.kcr:publication_url\"],\n  ],\n  SeriesComponent: [SeriesComponent, [\"custom_fields.kcr:book_series\"]],\n  SponsoringInstitutionComponent: [\n    SponsoringInstitutionComponent,\n    [\"custom_fields.kcr:sponsoring_institution\"],\n  ],\n  SubjectsKeywordsComponent: [\n    SubjectsKeywordsComponent,\n    [\"metadata.subjects\", \"custom_fields.kcr:user_defined_tags\"],\n  ],\n  VolumeComponent: [VolumeComponent, [\"custom_fields.kcr:volumes\"]],\n};\n\nexport { componentsMap };\n","import React from \"react\";\nimport { Segment } from \"semantic-ui-react\";\nimport { CustomFieldSectionInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst AdminMetadataComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldSectionInjector\n      sectionName=\"Commons admin info\"\n      idString=\"AdminMetadataFields\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nexport { AdminMetadataComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst AIComponent = ({ customFieldsUI, ...extraProps }) => {\n  // const sectionConfig = customFieldsUI.find(item => item.section === \"AI Usage\");\n  // const fieldConfig = sectionConfig.find(item => item.field === \"ai_used\");\n  return (\n    <CustomFieldInjector\n      sectionName=\"AI Usage\"\n      fieldName=\"kcr:ai_usage\"\n      idString=\"AIUsageField\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nexport { AIComponent };\n","import React from \"react\";\nimport { Segment } from \"semantic-ui-react\";\nimport { CustomFieldSectionInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst CommonsLegacyInfoComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldSectionInjector\n      sectionName=\"Commons legacy info\"\n      idString=\"HCLegacyFields\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nexport { CommonsLegacyInfoComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst ContentWarningComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      fieldName=\"kcr:content_warning\"\n      sectionName=\"Content warning\"\n      idString=\"ContentWarning\"\n      customFieldsUI={customFieldsUI}\n      editorConfig={{\n        removePlugins: [\n          \"Image\",\n          \"ImageCaption\",\n          \"ImageStyle\",\n          \"ImageToolbar\",\n          \"ImageUpload\",\n          \"MediaEmbed\",\n          \"Table\",\n          \"TableToolbar\",\n          \"TableProperties\",\n          \"TableCellProperties\",\n        ],\n      }}\n      {...extraProps}\n    />\n  );\n};\n\nexport { ContentWarningComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst CourseTitleComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Course\"\n      fieldName=\"kcr:course_title\"\n      idString=\"CourseTitleField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nexport { CourseTitleComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst DegreeComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"KCR thesis information\"\n      fieldName=\"kcr:degree\"\n      idString=\"DegreeField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nexport { DegreeComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst DisciplineComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"KCR thesis information\"\n      fieldName=\"kcr:discipline\"\n      idString=\"DisciplineField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nexport { DisciplineComponent };\n","import React from \"react\";\nimport { Segment } from \"semantic-ui-react\";\nimport { EditionComponent } from \"./EditionComponent\";\nimport { ChapterLabelComponent } from \"./ChapterLabelComponent\";\n\nconst EditionSectionComponent = ({ customFieldsUI, labelMods }) => {\n  return (\n    <>\n      <EditionComponent customFieldsUI={customFieldsUI} labelMods={labelMods} />\n      <ChapterLabelComponent\n        customFieldsUI={customFieldsUI}\n        labelMods={labelMods}\n      />\n    </>\n  );\n};\n\nexport { EditionSectionComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst InstitutionDepartmentComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"KCR thesis information\"\n      fieldName=\"kcr:institution_department\"\n      idString=\"InstitutionDepartmentField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      icon={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nexport { InstitutionDepartmentComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst MediaComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Media\"\n      label=\"Media and materials\"\n      fieldName=\"kcr:media\"\n      idString=\"KCRMediaField\"\n      customFieldsUI={customFieldsUI}\n      icon={\"paint brush\"}\n      placeholder={\n        \"e.g., oil on canvas (press 'enter' to add each medium/material)\"\n      }\n      helpText={\"\"}\n      description={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nexport { MediaComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst MeetingOrganizationComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"KCR Conference information\"\n      fieldName=\"kcr:meeting_organization\"\n      idString=\"MeetingOrganizationField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      icon={\"group\"}\n      {...extraProps}\n    />\n  );\n};\n\nexport { MeetingOrganizationComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst ProjectTitleComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Project\"\n      fieldName=\"kcr:project_title\"\n      idString=\"ProjectTitleField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      label={\"Project title\"}\n      icon={\"briefcase\"}\n      placeholder={\"\"}\n      {...extraProps}\n    />\n  );\n};\n\nexport { ProjectTitleComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst PublicationURLComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"KCR journal information\"\n      fieldName=\"kcr:publication_url\"\n      idString=\"PublicationURLField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      icon={\"linkify\"}\n      {...extraProps}\n    />\n  );\n};\n\nexport { PublicationURLComponent };\n","import React from \"react\";\nimport { Segment } from \"semantic-ui-react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst SeriesComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"Series\"\n      fieldName=\"kcr:book_series\"\n      idString=\"KcrBookSeries\"\n      icon=\"list\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nexport { SeriesComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst SponsoringInstitutionComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"KCR Book information\"\n      fieldName=\"kcr:sponsoring_institution\"\n      idString=\"SponsoringInstitutionField\"\n      customFieldsUI={customFieldsUI}\n      description={\"\"}\n      icon={\"group\"}\n      {...extraProps}\n    />\n  );\n};\n\nexport { SponsoringInstitutionComponent };\n","import React from \"react\";\nimport { Segment } from \"semantic-ui-react\";\nimport { SubjectsComponent } from \"@js/invenio_modular_deposit_form/field_components/field_components\";\nimport { KeywordsComponent } from \"./KeywordsComponent\";\n\nconst SubjectsKeywordsComponent = ({\n  record,\n  vocabularies,\n  customFieldsUI,\n}) => {\n  return (\n    <>\n      <SubjectsComponent\n        record={record}\n        vocabularies={vocabularies}\n        description=\"\"\n      />\n      <KeywordsComponent customFieldsUI={customFieldsUI} />\n    </>\n  );\n};\n\nexport { SubjectsKeywordsComponent };\n","import React from \"react\";\nimport { CustomFieldInjector } from \"@js/invenio_modular_deposit_form/field_components/CustomFieldInjector\";\n\nconst VolumeComponent = ({ customFieldsUI, ...extraProps }) => {\n  return (\n    <CustomFieldInjector\n      sectionName=\"KCR Book information\"\n      fieldName=\"kcr:volumes\"\n      idString=\"KcrVolumes\"\n      customFieldsUI={customFieldsUI}\n      {...extraProps}\n    />\n  );\n};\n\nexport { VolumeComponent };\n","const rorValidator = function (val) {\n  // Test if argument is a ROR ID.\n  const rorRegexp = new RegExp(\n    \"(?:https?://)?(?:ror\\\\.org/)?(0\\\\w{6}\\\\d{2})$\",\n    \"i\"\n  );\n  // See https://ror.org/facts/#core-components.\n  return rorRegexp.test(val);\n};\n\nexport { rorValidator };\n","import {\n  addMethod,\n  array as yupArray,\n  boolean as yupBoolean,\n  object as yupObject,\n  string as yupString,\n  date as yupDate,\n} from \"yup\";\n\nimport { rorValidator } from \"./validatorsForIds\";\n\naddMethod(yupString, \"ror\", function () {\n  return this.test(\"test-name\", rorValidator);\n});\n\naddMethod(yupString, \"gnd\", function () {\n  return this.test(\"test-name\", function (val) {\n    // Test if argument is a GND ID.\n    const gndResolverUrl = \"http://d-nb.info/gnd/\";\n\n    const gndRegexp = new RegExp(\n      \"(gnd:|GND:)?(\" +\n        \"(1|10)\\\\d{7}[0-9X]|\" +\n        \"[47]\\\\d{6}-\\\\d|\" +\n        \"[1-9]\\\\d{0,7}-[0-9X]|\" +\n        \"3\\\\d{7}[0-9X]\" +\n        \")\"\n    );\n    // See https://www.wikidata.org/wiki/Property:P227.\n\n    if (val.startsWith(gndResolverUrl)) {\n      val = val.slice(gndResolverUrl.length);\n    }\n\n    return gndRegexp.test(val);\n  });\n});\n\nconst isIsni = (val) => {\n  // Test if argument is an International Standard Name Identifier.\n  const convertXTo10 = (x) => {\n    // Convert char to int with X being converted to 10.\n    return x !== \"X\" ? parseInt(x, 10) : 10;\n  };\n\n  val = val.replace(/-/g, \"\").replace(/ /g, \"\").toUpperCase();\n  if (val.length !== 16) {\n    return false;\n  }\n  try {\n    let r = 0;\n    for (let x of val.slice(0, -1)) {\n      r = (r + parseInt(x, 10)) * 2;\n    }\n    const ck = (12 - (r % 11)) % 11;\n    return ck === convertXTo10(val.slice(-1));\n  } catch (error) {\n    return false;\n  }\n};\n\nconst orcidUrls = [\"http://orcid.org/\", \"https://orcid.org/\"];\nconst orcidIsniRanges = [\n  (15_000_000, 35_000_000),\n  (900_000_000_000, 900_100_000_000),\n];\n// Valid ORCiD ISNI block ranges.\n\n// See\n//     https://support.orcid.org/hc/en-us/articles/360006897674-Structure-of-the-ORCID-Identifier\n\naddMethod(yupString, \"orcid\", function () {\n  return this.test(\"test-name\", function (val) {\n    // Test if argument is an ORCID ID.\n    // See http://support.orcid.org/knowledgebase/\n    // articles/116780-structure-of-the-orcid-identifier\n\n    for (let orcidUrl of orcidUrls) {\n      if (val.startsWith(orcidUrl)) {\n        val = val.slice(orcidUrl.length);\n        break;\n      }\n    }\n\n    val = val.replace(/-/g, \"\").replace(/ /g, \"\");\n    if (isIsni(val)) {\n      val = parseInt(val.slice(0, -1), 10); // Remove check digit and convert to int.\n      return orcidIsniRanges.some(\n        ([start, end]) => start <= val && val <= end\n      );\n    }\n    return false;\n  });\n});\n\naddMethod(yupString, \"isni\", function () {\n  return this.test(\"test-name\", function (val) {\n    // Test if argument is an International Standard Name Identifier.\n    return isIsni(val);\n  });\n});\n\naddMethod(yupString, \"dateInSequence\", function () {\n  return this.test(\"test-name\", function (value) {\n    const { path, createError } = this;\n    let outOfSequence = false;\n\n    if (!!value) {\n      const dateParts = value.split(\"/\");\n      if (dateParts?.length > 1) {\n        const aDate = new Date(dateParts[0]);\n        const bDate = new Date(dateParts[1]);\n        if (aDate > bDate) {\n          outOfSequence = true;\n        }\n      }\n    }\n    return (\n      outOfSequence === false ||\n      createError({ message: \"End date must be after start date\" })\n    );\n  });\n});\n\nconst validationSchema = yupObject().shape({\n  access: yupObject().shape({}),\n  custom_fields: yupObject().shape({\n    \"kcr:ai_usage\": yupObject().shape({\n      ai_used: yupBoolean(),\n      ai_description: yupString().when(\"ai_used\", {\n        is: true,\n        then: yupString().required(\n          \"Please describe the role AI played in this work\"\n        ),\n      }),\n    }),\n  }),\n  metadata: yupObject()\n    .shape({\n      creators: yupArray()\n        .of(\n          yupObject().shape({\n            affiliations: yupArray().of(\n              yupObject().shape({\n                name: yupString()\n                  .matches(/(?!\\s).+/, \"Affiliation cannot be blank\")\n                  .required(\"An affiliation is required\"),\n              })\n            ),\n            person_or_org: yupObject().shape({\n              type: yupString().required(\"A type is required\"),\n              family_name: yupString()\n                .matches(/(?!\\s).+/, \"Family name cannot be blank\")\n                .required(\"A family name is required\"),\n              given_name: yupString().matches(/(?!\\s).+/, {\n                disallowEmptyString: true,\n                message: \"Given name cannot be spaces only\",\n              }),\n              identifiers: yupArray().of(\n                yupObject().shape({\n                  scheme: yupString().required(\n                    \"A scheme is required for each identifier\"\n                  ),\n                  identifier: yupString()\n                    .when(\"scheme\", {\n                      is: \"url\",\n                      then: yupString()\n                        .url(\"Must be a valid URL (e.g. https://example.com)\")\n                        .required(\"You must provide a URL or remove this row\"),\n                    })\n                    .when(\"scheme\", {\n                      is: \"orcid\",\n                      then: yupString()\n                        .orcid(\n                          \"Must be a valid ORCID id (e.g., 0000-0001-2345-6789)\"\n                        )\n                        .required(\n                          \"You must provide an ORCID id or remove this row\"\n                        ),\n                    })\n                    .when(\"scheme\", {\n                      is: \"isni\",\n                      then: yupString()\n                        .isni(\n                          \"Must be a valid ISNI id (e.g., 0000-0001-2345-6789)\"\n                        )\n                        .required(\n                          \"You must provide an ISNI id or remove this row\"\n                        ),\n                    })\n                    .when(\"scheme\", {\n                      is: \"gnd\",\n                      then: yupString()\n                        .gnd(\"Must be a valid GND id (e.g., gnd:118627813)\")\n                        .required(\n                          \"You must provide a GND id or remove this row\"\n                        ),\n                    })\n                    .when(\"scheme\", {\n                      is: \"ror\",\n                      then: yupString()\n                        .ror(\"Must be a valid ROR id (e.g., 03rjyp183)\")\n                        .required(\n                          \"You must provide a GND id or remove this row\"\n                        ),\n                    })\n                    .matches(/(?!\\s).+/, {\n                      disallowEmptyString: true,\n                      message: \"Identifier cannot be blank\",\n                    })\n                    .required(\"A value is required for each identifier\"),\n                })\n              ),\n            }),\n            role: yupString().required(\n              \"A role is required for each contributor\"\n            ),\n          })\n        )\n        .min(1, \"At least one contributor must be listed\")\n        .required(\"At least one contributor must be listed\"),\n      identifiers: yupArray().of(\n        yupObject().shape({\n          scheme: yupString().required(\n            \"An scheme is required for each identifier\"\n          ),\n          identifier: yupString()\n            .when(\"scheme\", {\n              is: \"url\",\n              then: yupString()\n                .url(\"Must be a valid URL (e.g. https://example.com)\")\n                .required(\"You must provide a URL or remove this item\"),\n            })\n            .matches(/(?!\\s).+/, {\n              disallowEmptyString: true,\n              message: \"Identifier cannot be blank\",\n            })\n            .required(\"You must provide an identifier or remove this row\"),\n        })\n      ),\n      publisher: yupString(),\n      // .matches(/(?!\\s).+/, \"Publisher cannot be blank\")\n      // .required(\"A publisher is required. Enter 'none' if not applicable\"),\n      publication_date: yupString()\n        .dateInSequence()\n        .required(\"A publication date is required\"),\n      title: yupString()\n        .matches(/(?!\\s).+/, \"Title cannot be blank\")\n        .min(3, \"Title must be at least 3 characters\")\n        .required(\"A title is required\"),\n      resource_type: yupString().required(\"A resource type is required\"),\n      additional_descriptions: yupArray().of(\n        yupObject().shape({\n          description: yupString()\n            .matches(/(?!\\s).+/, \"Description cannot be blank\")\n            .required(\"Provide a description or remove this item\"),\n          type: yupString().required(\n            \"A type is required for each additional description\"\n          ),\n          lang: yupString(),\n        })\n      ),\n    })\n    .required(\"Some metadata is required\"),\n});\n\n// const validator = (values) => {\n//   const errors = {};\n//   if (!values.metadata.resource_type) {\n//     errors.metadata = { resource_type: \"Required\", ...errors.metadata };\n//   }\n//   if (!values.metadata.title || values.metadata.title === \"\") {\n//     errors.metadata = { title: \"Required\", ...errors.metadata };\n//   }\n//   return errors;\n// };\n\nexport { validationSchema };\n","var map = {\n\t\"./EditionField.jsx\": [\n\t\t66680,\n\t\t6680\n\t],\n\t\"./JournalISSNField.jsx\": [\n\t\t28500,\n\t\t8500\n\t],\n\t\"./JournalPagesField.jsx\": [\n\t\t49470,\n\t\t7089\n\t],\n\t\"./JournalTitleField.jsx\": [\n\t\t66703,\n\t\t6703\n\t],\n\t\"./JournalVolumeField.jsx\": [\n\t\t99947,\n\t\t9947\n\t],\n\t\"./SponsoringInstitutionField.jsx\": [\n\t\t5498,\n\t\t5498\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 914;\nmodule.exports = webpackAsyncContext;"],"names":["SectionWrapper","_ref","children","icon","sectionName","label","_ref$show_heading","show_heading","React","Segment","id","concat","as","className","Icon","name","length","toArray","some","child","props","component","Form","Group","FieldsContent","_ref3","section","wrapped","index","commonFieldProps","_objectWithoutProperties","_excluded3","MyField","fieldComponents","_extends","key","_defineProperty","AbstractComponent","AccessComponent","AccessRightField","AccessRightsComponent","AdditionalDatesComponent","AdditionalDescriptionComponent","AdditionalTitlesComponent","AlternateIdentifiersComponent","BookTitleComponent","CommunitiesComponent","CodeDevelopmentStatusComponent","CodeRepositoryComponent","CodeProgrammingLanguageComponent","CodeOperatingSystemComponent","CodeRuntimePlatformComponent","ContributorsComponent","CreatorsComponent","DateComponent","DoiComponent","FundingComponent","ISBNComponent","JournalISSNComponent","JournalIssueComponent","JournalTitleComponent","JournalVolumeComponent","FilesUploadComponent","LanguagesComponent","LicensesComponent","MetadataOnlyComponent","MeetingAcronymComponent","MeetingDatesComponent","MeetingPlaceComponent","MeetingSessionComponent","MeetingSessionPartComponent","MeetingTitleComponent","MeetingURLComponent","PublisherComponent","PublicationLocationComponent","RelatedWorksComponent","ResourceTypeComponent","SectionPagesComponent","SizesComponent","SubjectsComponent","SubtitleComponent","TitleComponent","TotalPagesComponent","VersionComponent","CombinedDatesComponent","DeleteComponent","FormRow","subsections","classnames","_excluded","console","log","map","_ref2","innerProps","_excluded2","_objectSpread","OrganizationDetailsComponent","PublicationDetailsComponent","SubmissionComponent","SubmitActionsComponent","ThesisDetailsComponent","TypeTitleComponent","extras","require","Object","assign","componentsMap","RecoveryModal","confirmModalRef","focusFirstElement","handleStorageData","isDraft","setRecoveryAsked","isVersionDraft","_useState3","useState","_useState4","_slicedToArray","open","setOpen","firstButtonRef","useRef","useEffect","window","setTimeout","current","focus","Modal","onClose","onOpen","Header","i18next","t","Content","Description","Actions","Button","content","onClick","ref","labelPosition","positive","FormPage","_ref4","currentFormPage","pageNums","recoveryAsked","storageDataPresent","setStorageDataPresent","handleSettingFieldTouched","_useFormikContext","useFormikContext","errors","initialErrors","initialTouched","initialValues","isValid","setFieldTouched","setFieldValue","setValues","setTouched","touched","values","validateField","validateForm","_useContext","useContext","FormValuesContext","handleValuesChange","currentValues","currentErrors","currentTouched","handleErrorsChange","handleFormPageChange","currentPageIndex","indexOf","nextPageIndex","previousPageIndex","nextPage","previousPage","pageTargetRef","pageTargetInViewport","_useState","_useState2","isIntersecting","setIsIntersecting","observer","useMemo","IntersectionObserver","entry","observe","disconnect","useIsInViewport","_useState5","_useState6","recoveredStorageValues","setRecoveredStorageValues","areDeeplyEqual","localStorage","setItem","currentUserprofile","JSON","stringify","user","storageValuesKey","storageValues","getItem","storageValuesObj","parse","handleButtonClick","event","_ref6","value","DndProvider","backend","HTML5Backend","_ref7","innerSections","_ref8","type","primary","status","recover","setinitialvalues","_ref5","_asyncToGenerator","_regeneratorRuntime","_callee","_context","prev","next","stop","apply","arguments","removeItem","validator","validationSchema","validate","createContext","RDMDepositForm","commonFields","config","defaultFieldValues","defaultResourceType","descriptionModifications","extraRequiredFields","files","fieldsByType","helpTextModifications","iconModifications","labelModifications","record","permissions","pidsConfigOverrides","placeholderModifications","preselectedCommunity","priorityFieldValues","formPages","formPageSlugs","setCurrentFormPage","nextFormPage","setNextFormPage","confirmingPageChange","setConfirmingPageChange","_useState7","_useState8","setCurrentValues","_useState9","_useState10","setCurrentErrors","_useState11","_useState12","currentInitialErrors","setCurrentInitialErrors","_useState13","_useState14","pagesWithErrors","setPagesWithErrors","_useState15","_useState16","pagesWithTouchedErrors","setPagesWithTouchedErrors","_useState17","_useState18","setCurrentTouched","_useState19","_useState20","currentResourceType","setCurrentResourceType","_useState21","_useState22","currentTypeFields","setCurrentTypeFields","_useState23","_useState24","fieldTouchHandler","setFieldTouchHandler","currentFieldMods","labelMods","iconMods","helpTextMods","placeholderMods","descriptionMods","customFieldsUI","custom_fields","ui","_useState25","_useState26","formPageFields","setFormPageFields","_useState27","_useState28","_useState29","_useState30","handleFocus","target","scrollIntoView","block","behavior","inputs","document","querySelectorAll","forEach","input","addEventListener","textareas","textarea","removeEventListener","setFormPageInHistory","undefined","urlParams","URLSearchParams","location","search","has","depositFormPage","set","append","currentBaseURL","origin","currentPath","pathname","currentParams","toString","newCurrentURL","history","pushState","title","handleFormPageParam","urlFormPage","get","includes","startingParam","state","back","_step","errorFields","flattenKeysDotJoined","touchedFields","initialErrorFields","errorPages","touchedErrorPages","_iterator","_createForOfIteratorHelper","s","n","done","_formPageFields$p$sec","_formPageFields$p$sec2","p","pageErrorFields","filter","item","pageTouchedErrorFields","getTouchedParent","pageInitialErrorFields","err","e","f","updateFormErrorState","vocabularies","metadata","creators","text","contributors","identifiers","noFiles","Array","isArray","entries","is_published","targetIndex","idString","newFirstInput","useLayoutEffect","_pagesWithErrors$curr","_step2","_iterator2","field","_step3","newTypeFields","_iterator3","adjustedTypeFields","same_as","newType","pageMetaFields","flattenWrappers","reduce","accum","doi","pids","pid","scheme","setTouchedFunction","Provider","resource_type","DepositFormApp","Overridable","labels","error_labels","fieldPath","FormFeedback","Container","Grid","Column","mobile","tablet","computer","Step","widths","fluid","size","active","link","formNoValidate","Title","Transition","animation","duration","show","hide","actualSubsections","pageFields","Confirm","header","image","confirmButton","cancelButton","onCancel","onConfirm","propTypes","PropTypes","isRequired","defaultProps","CustomFieldInjector","fieldName","restArgs","MyWidget","setMyWidget","chosenSetConfig","find","chosenFieldConfig","fields","templateLoaders","widget","fieldPathPrefix","loadWidgetsFromConfig","then","x","FieldComponentWrapper","componentName","CustomFieldSectionInjector","CustomFields","description","helpText","placeholder","required","extraProps","moddedIcon","hasOwnProperty","moddedLabel","moddedDescription","moddedPlaceholder","moddedHelpText","moddedRequired","defaultFieldValue","priorityFieldValueSet","cleanedExtraProps","pickBy","v","helptext","labelIcon","MeetingDetailsComponent","Row","width","UniversityComponent","SizesField","_ref$fieldPath","additionLabel","_ref$label","_ref$placeholder","_ref$icon","MultiInput","DescriptionsField","options","descriptions","recordUI","_get","editorConfig","removePlugins","showMetadataAccess","can_manage_record_access","DatesField","dates","showEmptyValue","_excluded4","_excluded5","IdentifiersField","schemeOptions","_excluded6","_excluded7","_excluded8","_ref9","_excluded9","_ref10","_excluded10","_ref11","_excluded11","CommonsDomainComponent","_ref12","CommunityField","imagePlaceholderLink","_ref13","_excluded12","CreatibutorsField","addButtonLabel","roleOptions","role","schema","autocompleteNames","autocomplete_names","modal","addLabel","editLabel","_ref14","currentUserProfile","_excluded13","_ref15","_objectDestructuringEmpty","PublicationDateField","_ref16","_excluded14","can_delete_draft","DeleteButton","_ref17","_excluded15","Fragment","PIDField","btnLabelDiscardPID","btn_label_discard_pid","btnLabelGetPID","btn_label_get_pid","canBeManaged","can_be_managed","canBeUnmanaged","can_be_unmanaged","fieldLabel","field_label","isEditingPublishedRecord","managedHelpText","managed_help_text","pidLabel","pid_label","pidPlaceholder","pid_placeholder","pidType","unmanagedHelpText","unmanaged_help_text","_ref18","_excluded16","FileUploader","isDraftRecord","quota","decimalSizeDisplay","decimal_size_display","showMetadataOnlyToggle","_ref19","FundingField","searchConfig","searchApi","axios","headers","Accept","url","withCredentials","initialQueryState","sortBy","sortOrder","layout","page","deserializeAward","award","_award$funder","title_l10n","number","funder","acronym","deserializeFunder","country","computeFundingContents","funding","headerContent","descriptionContent","awardOrFunder","_ref20","_ref21","_funding$funder$name","_funding$funder","_funding$funder2","_funding$funder3","funderName","_ref22","_excluded17","_ref23","_excluded18","_ref24","_excluded19","_ref25","_excluded20","_ref26","_excluded21","_ref27","_excluded22","LanguagesField","initialOptions","lang","serializeSuggestions","suggestions","_ref28","LicenseField","filters","serializeLicenses","result","description_l10n","_ref29","_excluded23","_ref30","_excluded24","_ref31","_excluded25","_ref32","_excluded26","_ref33","_excluded27","_ref34","_excluded28","_ref35","_excluded29","_ref36","_excluded30","_ref37","PublisherField","_ref38","_excluded31","ReferencesComponent","_ref39","_excluded32","ReferencesField","_ref40","_excluded33","RelatedWorksField","_ref41","_excluded34","ResourceTypeSelectorField","_ref42","_excluded35","_ref43","_excluded36","myLimitToOptions","_toConsumableArray","subjects","limit_to","reverse","moveToArrayStart","SubjectsField","limitToOptions","_ref44","setConfirmedNoFiles","store","useStore","hasFiles","keys","getState","filesEnabled","enabled","missingFiles","filterEmptyIdentifiers","_ref45","filteredIdentifiers","newList","identifier","push","abrupt","fixEmptyPublisher","_ref46","_callee2","_context2","publisher","handleConfirmNoFiles","_ref47","_callee3","_context3","handleConfirmNeedsFiles","sanitizeDataForSaving","_ref48","_callee4","_context4","relaxed","_isEmpty","Message","visible","negative","SubmitButtonModal","actionName","disabled","SubmitterEmailComponent","_ref49","_excluded37","SubmitterUsernameComponent","_ref50","_excluded38","_ref51","_excluded39","TitlesField","titles","_ref52","_excluded40","_ref53","_excluded41","_ref54","VersionField","overriddenComponents","overrideStore","getAll","formDiv","getElementById","dataSet","dataset","ReactDOM","OverridableContext","getInputFromDOM","changeSelectedCommunity","community","dispatch","payload","_x","CommunityFieldComponent","_community$links","_ref2$community","showCommunitySelectionButton","disableCommunitySelectionButton","modalOpen","setModalOpen","focusAddButtonHandler","Field","htmlFor","Image","src","links","logo","fallbackSrc","CommunitySelectionModal","onCommunityChange","onModalChange","chosenCommunity","displaySelected","trigger","floated","showCommunityHeader","connect","deposit","editorState","selectedCommunity","CommunityContext","CommunityListItem","_getChosenCommunity","setLocalCommunity","getChosenCommunity","userCommunitiesMemberships","itemSelected","userMembership","actions","extraLabels","Label","horizontal","color","_capitalize","CommunityCompactItem","showPermissionLabel","CommunitySelectionSearch","_Component","_this","_classCallCheck","defaultConfig","_callSuper","apiConfigs","allCommunities","selectedConfig","_inherits","_createClass","_this2","_this$state$selectedC","this","selectedsearchApi","selectedAppId","appId","selectedInitialQueryState","toggleText","_this$props$apiConfig","myCommunities","InvenioSearchApi","ReactSearchKit","appName","urlHandlerApi","verticalAlign","textAlign","Menu","compact","Item","setState","SearchBar","autofocus","actionProps","ResultsLoader","scrolling","EmptyResults","Error","ResultsList","Pagination","Component","CommunitySelectionModalComponent","_this$props","localChosenCommunity","contextValue","_this$props2","extraContentComponents","modalHeader","handleClose","closeIcon","closeOnDimmerClick","modalTrigger","user_communities_memberships","emptyDate","date","_ref$requiredOptions","requiredOptions","_ref$addButtonLabel","_ref$placeholderDate","placeholderDate","_ref$required","_ref$showEmptyValue","datesLength","setDatesLength","haveChangedNumber","setHaveChangedNumber","_document$getElementB","_document$getElementB2","FieldArray","render","arrayHelpers","requiredOption","currentValue","arrayOfValues","matchingValue","_filter","_matches","_isEqual","getRequiredOption","hasRequiredDateValue","_has","hasRequiredTypeValue","hasRequiredDescriptionValue","optimized","TextField","SelectField","sortOptions","remove","handleRemove","newItem","handleAddNew","DepositFormSubmitActions","DepositFormSubmitContext","setSubmitContext","PROVIDER_EXTERNAL","getFieldErrors","form","getIn","ReservePIDBtn","handleReservePID","loading","formik","UnreservePIDBtn","_Component2","handleDiscardPID","Popup","ManagedUnmanagedSwitch","_Component3","_len","args","_key","onManagedUnmanagedChange","_this$props3","isManagedSelected","inline","FieldLabel","Radio","checked","onChange","handleChange","ManagedIdentifierComponent","_Component4","_len2","_key2","context","handleSubmit","_form$values$pids$doi","_this$props4","actionState","actionStateExtra","hasIdentifier","provider","ManagedIdentifierCmp","UnmanagedIdentifierCmp","_Component5","_this3","newIdentifier","localIdentifier","onIdentifierChanged","prevProps","handleIdentifierUpdate","_this4","_this$props5","fieldError","error","Input","CustomPIDField","_Component6","_this5","_this5$props","debounced","cancel","_debounce","_this5$props2","canBeManagedAndUnmanaged","_this$props$form$valu","_this6","_this$props6","pidIcon","currentIdentifier","currentProvider","managedIdentifier","unmanagedIdentifier","isProviderExternal","hasManagedIdentifier","_isManagedSelected","userSelectedManaged","onExternalIdentifierChanged","_Component7","_this7","_this7$props","validatePropValues","FastField","DRAFT_SUBMIT_REVIEW_STARTED","DepositStatus","_DepositStatus","DRAFT_WITH_REVIEW","DECLINED","EXPIRED","DRAFT","PUBLISHED","IN_REVIEW","NEW_VERSION_DRAFT","SubmitButtonComponent","_ref$actionState","publishWithoutCommunity","_ref$publishModalExtr","numberOfFiles","publishModalExtraContent","_ref$community","showDirectPublishButton","changeSelectedCommunityFn","showChangeCommunityButton","showSubmitForReviewButton","_ref$disableSubmitFor","disableSubmitForReviewButton","isRecordSubmittedForReview","isSubmitting","noFilesOpen","setNoFilesOpen","publishConfirmOpen","setPublishConfirmOpen","uiProps","_omit","firstButtonRefNoFiles","firstButtonRefPublish","handlePublishConfirmCancel","preview","buttonLabel","actionText","action","PREVIEW","newActionState","saveDraft","SAVE","publish","PUBLISH_WITHOUT_COMMUNITY","PUBLISH","submitForReview","SUBMIT_REVIEW","reviewComment","directPublish","currentActionName","_actions$currentActio","handleSaveOrSubmit","handlePositiveNoFiles","warning","dangerouslySetInnerHTML","__html","SubmitReviewModal","isConfirmModalOpen","initialReviewComment","onSubmit","publish_modal_extra","Yup","acceptAccessToRecord","oneOf","acceptAfterPublishRecord","firstFormFieldWrap","checkboxElem","querySelector","headerTitle","msgWarningTitle","msgWarningText1","submitBtnLbl","communityTitle","Formik","ConfirmSubmitReviewSchema","validateOnChange","validateOnBlur","ErrorMessage","RadioField","control","Checkbox","Trans","defaults","components","bold","shouldUnescape","data","formikProps","ErrorLabel","TextAreaField","_ref$labelIcon","labelclassname","restProps","otherToggleActive","setOtherToggleActive","buttonTypes","b","frontEndOptions","o","option","type_name","subtype_name","sort","o1","o2","localeCompare","handleItemClick","closest","handleOtherToggleClick","_ref2$form","meta","buttonType","selectOnBlur","selectOnNavigation","pointing","_ref$defaultValue","defaultValue","_ref$errorDirection","errorDirection","_ref$onAddItem","onAddItem","_ref$optimized","_ref$multiple","multiple","_ref$selectOnBlur","_ref$width","otherProps","FormikField","_ref3$form","Dropdown","selection","TextArea","_ref$helpText","onBlur","_ref$rows","rows","_ref$showLabel","showLabel","inputIcon","filteredProps","touchedAncestor","label_icon","_ref$inputIcon","input_icon","_ref$fluid","initialError","scrollTop","scrollTo","top","left","startingArray","moveTargets","keyLabel","newArray","_loop","findIndex","unshift","splice","pushToArrayEnd","targetValue","val","keysArray","_loop2","i","myValue","_typeof","childKeys","k","flattened","sub","fieldParts","split","slice","join","obj1","obj2","ignoreKeys","excludeObjectKeys","every","elem","keys1","keys2","obj","newObj","ChapterLabelComponent","EditionComponent","KeywordsComponent","AdminMetadataComponent","AIComponent","CommonsLegacyInfoComponent","ContentWarningComponent","CourseTitleComponent","DegreeComponent","DisciplineComponent","EditionSectionComponent","InstitutionDepartmentComponent","MediaComponent","MeetingOrganizationComponent","ProjectTitleComponent","PublicationURLComponent","SeriesComponent","SponsoringInstitutionComponent","SubjectsKeywordsComponent","VolumeComponent","rorValidator","RegExp","test","addMethod","yupString","gndResolverUrl","gndRegexp","startsWith","isIsni","replace","toUpperCase","r","parseInt","convertXTo10","orcidUrls","orcidIsniRanges","_i","_orcidUrls","orcidUrl","start","end","path","createError","outOfSequence","dateParts","Date","message","yupObject","shape","access","ai_used","yupBoolean","ai_description","when","is","yupArray","of","affiliations","matches","person_or_org","family_name","given_name","disallowEmptyString","orcid","isni","gnd","ror","min","publication_date","dateInSequence","additional_descriptions","webpackAsyncContext","req","__webpack_require__","Promise","resolve","code","ids","module","exports"],"sourceRoot":""}