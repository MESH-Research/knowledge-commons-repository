"use strict";(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[1901],{25048:(e,t,n)=>{var r=n(64467),a=n(74812),c=n(86763),l=n(23029),i=n(92901),o=n(56822),s=n(53954),u=n(85501),p=n(5905),d=n(5556),m=n.n(d),f=n(96540),y=n(43092),b=n(98871);function v(e,t,n){return t=(0,s.A)(t),(0,o.A)(e,A()?Reflect.construct(t,n||[],(0,s.A)(e).constructor):t.apply(e,n))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var h=function(e){function t(){return(0,l.A)(this,t),v(this,t,arguments)}return(0,u.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.appName;return f.createElement(f.Fragment,null,f.createElement("div",{className:"auto-column-grid"},f.createElement("div",{className:"flex column-mobile"},f.createElement("div",{className:"mobile only rel-mb-1 flex align-items-center justify-space-between"},f.createElement(y.qh,{keepFiltersOnUpdate:!0})),f.createElement("div",{className:"tablet only computer only rel-mr-2"},f.createElement(y.qh,{keepFiltersOnUpdate:!0})),f.createElement("div",{className:"full-width"},f.createElement(b.IW,{fluid:!0}))),f.createElement("div",{className:"flex align-items-center column-mobile"},f.createElement("div",{className:"full-width flex align-items-center justify-end column-mobile"},f.createElement(b.FU,{values:t.sortOptions})))),f.createElement("div",{className:"rel-mb-1"}),f.createElement(p.s9,{layoutOptions:t.layoutOptions,appName:n}))}}])}(f.Component);h.propTypes={config:m().object.isRequired,appName:m().string},h.defaultProps={appName:""};var E=n(80296),g=n(10467),k=n(54756),O=n.n(k),w=n(3487),R=n(76217),j=n(81057),C=n(70742);function N(e,t,n){return t=(0,s.A)(t),(0,o.A)(e,U()?Reflect.construct(t,n||[],(0,s.A)(e).constructor):t.apply(e,n))}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}var q=function(e){function t(e){var n;return(0,l.A)(this,t),n=N(this,t,[e]),(0,r.A)(n,"handleActionClick",function(){var e=(0,g.A)(O().mark((function e(t,r,c){var l,i,o,s,u,p,d,m;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({loading:!0}),l=n.props,i=l.resource,o=l.user,s=l.successCallback,u=n.context.addNotification,p=o.profile.full_name||o.profile.email||o.profile.username,d=i.links.actions,m=d[r],e.prev=6,!m){e.next=12;break}return n.cancellableAction=(0,j.withCancel)(a.Yf.resourceAction(m,{})),e.next=11,n.cancellableAction.promise;case 11:"accept"===r?u({title:C.M.t("Success"),content:C.M.t("User {{name}} was approved.",{name:p}),type:"success"}):"decline"===r&&u({title:C.M.t("Success"),content:C.M.t("User {{name}} is blocked.",{name:p}),type:"success"});case 12:n.setState({loading:!1}),s(),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(6),u({title:C.M.t("Error"),content:e.t0.toString(),type:"error"}),console.error(e.t0),n.setState({loading:!1});case 21:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t,n,r){return e.apply(this,arguments)}}()),n.state={loading:!1},n}return(0,u.A)(t,e),(0,i.A)(t,[{key:"componentWillUnmount",value:function(){this.cancellableAction&&this.cancellableAction.cancel()}},{key:"render",value:function(){var e=this,t=this.props.actions,n=this.state.loading;return f.createElement(w.A.Group,{className:"margined",basic:!0,compact:!0,widths:2},Object.entries(t).map((function(t){var r=(0,E.A)(t,2),a=r[0],c=r[1],l="accept"===a?"check":"ban";return f.createElement(w.A,{key:a,onClick:function(t){return e.handleActionClick(t,a,c)},disabled:n,loading:n,icon:!0,labelPosition:"left"},f.createElement(R.A,{name:l}),c.text)})))}}])}(f.Component);(0,r.A)(q,"contextType",a.V2),q.propTypes={user:m().object.isRequired,actions:m().object.isRequired,resource:m().object.isRequired,successCallback:m().func.isRequired},q.defaultProps={};var P=n(60834),S=n(53959),x=n(28021);function D(e,t,n){return t=(0,s.A)(t),(0,o.A)(e,M()?Reflect.construct(t,n||[],(0,s.A)(e).constructor):t.apply(e,n))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}var I=function(e){function t(){var e;(0,l.A)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=D(this,t,[].concat(a)),(0,r.A)(e,"refreshAfterAction",(function(){var t=e.props;(0,t.updateQueryState)(t.currentQueryState)})),e}return(0,u.A)(t,e),(0,i.A)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.result,r=e.idKeyPath,c=e.listUIEndpoint,l=e.resourceHasActions,i=e.resourceName,o=e.displayEdit,s=e.displayDelete,u=e.actions,p=n.expanded.topic,d=p.email.split("@");return f.createElement(S.A.Row,null,f.createElement(S.A.Cell,{key:"user-column-".concat(n.id),"data-label":C.M.t("User"),className:"word-break-all"},f.createElement(j.UserListItemCompact,{user:p,id:n.id,linkToDetailView:x.Q.detailsView(c,n,r)})),f.createElement(S.A.Cell,{key:"user-email-".concat(n.id),"data-label":C.M.t("Email"),collapsing:!0,className:"word-break-all"},d[0]),f.createElement(S.A.Cell,{collapsing:!0,key:"user-email-domain-".concat(n.id),"data-label":C.M.t("Email domain"),className:"word-break-all"},"@",d[1]),f.createElement(S.A.Cell,{"data-label":C.M.t("Actions")},f.createElement("a",{href:encodeURI("/administration/records?q=parent.access.owned_by.user:".concat(p.id))},f.createElement(R.A,{name:"paperclip"}),"Records")),f.createElement(S.A.Cell,{"data-label":C.M.t("Status")},f.createElement(a.Dp,{value:"submitted"===n.status,icon:"hourglass",color:"yellow"}),f.createElement(a.Dp,{value:"declined"===n.status,icon:"ban",color:"red"}),f.createElement(a.Dp,{value:"accepted"===n.status,icon:"check",color:"green"})),f.createElement(S.A.Cell,{collapsing:!0,textAlign:"right"},l&&n.is_open&&f.createElement(q,{title:t,user:p,resourceName:i,editUrl:x.Q.editView(c,n,r),displayEdit:o,displayDelete:s,actions:u,resource:n,idKeyPath:r,successCallback:this.refreshAfterAction,listUIEndpoint:c}),!n.is_open&&f.createElement(P.z,{user:p,successCallback:this.refreshAfterAction})))}}])}(f.Component);I.propTypes={title:m().string.isRequired,resourceName:m().string.isRequired,result:m().object.isRequired,displayDelete:m().bool,displayEdit:m().bool,actions:m().object,updateQueryState:m().func.isRequired,currentQueryState:m().object.isRequired,idKeyPath:m().string.isRequired,listUIEndpoint:m().string.isRequired,resourceHasActions:m().bool},I.defaultProps={displayDelete:!0,displayEdit:!0,actions:{},resourceHasActions:!1};var B=(0,b.Q2)(I);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=document.getElementById("invenio-search-config"),F=_(_({},(0,a.YR)(T)),{},{"InvenioAdministration.SearchResultItem.layout":B,"SearchApp.layout":h});(0,c.U)(F,!0,"invenio-search-config",!1,a.ev)},86763:(e,t,n)=>{n.d(t,{U:()=>r.U});n(88802);var r=n(71790)}},e=>{e.O(0,[402,1057,7655,5373,6267,9777,5941,7501,4218,8010,2373,8102,742,6528,3532,1751,226,5580,4903,2913,9945,4826,4812,1357,834,3092],(()=>{return t=25048,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=invenio-users-moderation-administration.61a3b6e632e3a9c7e6af.js.map