(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[2502],{73468:(e,t,a)=>{"use strict";var r=a(96540),n=a(40961),i=a(58156),s=a.n(i),o=a(53196),l=a(58168),c=a(10467),p=a(23029),u=a(92901),d=a(56822),h=a(53954),m=a(85501),f=a(64467),v=a(54756),A=a.n(v),b=a(5556),y=a.n(b),g=a(11990),C=a(3487),w=a(93682),E=a(59399);function k(e,t,a){return t=(0,h.A)(t),(0,d.A)(e,O()?Reflect.construct(t,a||[],(0,h.A)(e).constructor):t.apply(e,a))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}var S=function(e){function t(){return(0,p.A)(this,t),k(this,t,arguments)}return(0,m.A)(t,e),(0,u.A)(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.onCopy,n=e.hoverState;return r.createElement(E.CopyToClipboard,{text:t,onCopy:function(){a(t)}},r.createElement(C.A,{floated:"right",basic:!0,icon:"copy","aria-label":g.M.t("Copy to clipboard"),onMouseEnter:n,onMouseLeave:n}))}}])}(r.Component);S.propTypes={text:y().string.isRequired,onCopy:y().func.isRequired,hoverState:y().func},S.defaultProps={hoverState:null};var T=function(e){function t(e){var a;return(0,p.A)(this,t),a=k(this,t,[e]),(0,f.A)(a,"onCopy",(function(){a.setState((function(){return{confirmationPopupIsOpen:!0,confirmationPopupMsg:g.M.t("Copied!")}})),a.delayClosePopup()})),(0,f.A)(a,"delayClosePopup",(function(){var e=setTimeout((function(){a.setState(a.INITIAL_STATE)}),1500);a.setState({stateReset:e})})),(0,f.A)(a,"hoverStateHandler",(function(e){e.persist(),"mouseenter"===e.type&&a.setState({hoverPopupIsOpen:!0}),"mouseleave"===e.type&&a.setState({hoverPopupIsOpen:!1})})),a.INITIAL_STATE={confirmationPopupIsOpen:!1,confirmationPopupMsg:"",hoverPopupIsOpen:!1,stateReset:null},a.state=a.INITIAL_STATE,a}return(0,m.A)(t,e),(0,u.A)(t,[{key:"componentWillUnmount",value:function(){var e=this.state.stateReset;e&&clearTimeout(e)}},{key:"render",value:function(){var e=this.props,t=e.text,a=e.popUpPosition,n=this.state,i=n.confirmationPopupMsg,s=n.confirmationPopupIsOpen,o=n.hoverPopupIsOpen;return t&&r.createElement(w.A,{role:"alert",open:o||s,content:i||g.M.t("Copy to clipboard"),inverted:!!i,position:a,size:"mini",trigger:r.createElement(S,{text:t,onCopy:this.onCopy,hoverState:this.hoverStateHandler})})}}])}(r.Component);T.propTypes={popUpPosition:y().string,text:y().string},T.defaultProps={popUpPosition:"right center",text:""};var x=a(1489),I=a(27041),L=a(34667),P=a(53959),M=a(74812),N=a(81057),D=a(62193),F=a.n(D),R=a(2543);function _(e,t,a){return t=(0,h.A)(t),(0,d.A)(e,J()?Reflect.construct(t,a||[],(0,h.A)(e).constructor):t.apply(e,a))}function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}var B={oai_dc:"OAI Dublin Core",datacite:"DataCite",oai_datacite:"OAI DataCite",oai_marcxml:"OAI MARCXML",oai_dcat:"OAI DCAT-AP"},U=function(e){function t(e){var a;(0,p.A)(this,t),a=_(this,t,[e]),(0,f.A)(a,"fetchFormats",(0,c.A)(A().mark((function e(){var t,r,n,i,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,N.withCancel)(N.http.get("/api/oaipmh/formats")),e.prev=1,e.next=4,t.promise;case 4:n=e.sent,i=null===(r=n.data)||void 0===r||null===(r=r.hits)||void 0===r?void 0:r.hits,F()(i)||(s=i.map((function(e){var t;return{key:e.id,value:e.id,text:null!==(t=B[e.id])&&void 0!==t?t:a.formatKeyToName(e.id)}})),a.setState({formats:s})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),a.setState({error:{header:g.M.t("Fetch error"),content:g.M.t("Error fetching OAI set formats."),id:e.t0.code}});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))),(0,f.A)(a,"replaceLinkPrefix",(function(e,t){var r=a.getPrefixFromLink(e);return r?e.replace(r,t):e})),(0,f.A)(a,"getPrefixFromLink",(function(e){if(F()(e))return null;return new URLSearchParams(e).get("metadataPrefix")||null})),(0,f.A)(a,"formatKeyToName",(function(e){var t=e.replace("_"," ");return(0,R.capitalize)(t)})),(0,f.A)(a,"prefixOnChange",(function(e,t){var r=t.value,n=a.state,i=n.formats,s=n.links;if(i.some((function(e){return e.key===r}))){var o={};Object.keys(s).map((function(e){var t=s[e];o[e]=a.replaceLinkPrefix(t,r)})),a.setState({links:o,currentFormat:r})}})),(0,f.A)(a,"resetErrorState",(function(){a.setState({error:void 0})}));var r=e.data.links,n=a.getPrefixFromLink(r["oai-listrecords"]);return a.state={links:r||[],formats:[],currentFormat:null!==n&&void 0!==n?n:"oai_dc",error:void 0},a}return(0,m.A)(t,e),(0,u.A)(t,[{key:"componentDidMount",value:function(){this.fetchFormats()}},{key:"render",value:function(){var e=this.state,t=e.links,a=e.formats,n=e.error,i=e.currentFormat,s=t["oai-listrecords"],o=t["oai-listidentifiers"];return r.createElement(r.Fragment,null,r.createElement(x.A,null,r.createElement(x.A.Row,null),r.createElement(x.A.Row,null,r.createElement(x.A.Column,{width:3},r.createElement(I.A,{as:"h2"},g.M.t("Links"))),r.createElement(x.A.Column,{width:13,textAlign:"right"},r.createElement("span",{className:"mr-10"},g.M.t("Format")),r.createElement(L.A,{options:a,floating:!0,selection:!0,defaultValue:i,selectOnNavigation:!1,onChange:this.prefixOnChange})))),r.createElement(P.A,{unstackable:!0},r.createElement(P.A.Body,null,r.createElement(P.A.Row,{key:"list-records"},r.createElement(P.A.Cell,{width:3},r.createElement("b",null,g.M.t("List records"))),r.createElement(P.A.Cell,{width:10,textAlign:"left"},r.createElement("a",{href:s,target:"_blank",title:g.M.t("Opens in new tab"),rel:"noreferrer"},s)),r.createElement(P.A.Cell,{width:3,textAlign:"right"},r.createElement(T,{text:s}))),r.createElement(P.A.Row,{key:"list-identifiers"},r.createElement(P.A.Cell,{width:3},r.createElement("b",null,g.M.t("List identifiers"))),r.createElement(P.A.Cell,{width:10,textAlign:"left"},r.createElement("a",{href:o,target:"_blank",title:g.M.t("Opens in new tab"),rel:"noreferrer"},o)),r.createElement(P.A.Cell,{width:3,textAlign:"right"},r.createElement(T,{text:o}))))),!F()(n)&&r.createElement(M.Kw,(0,l.A)({},n,{removeNotification:this.resetErrorState})))}}])}(r.Component);U.propTypes={data:y().object.isRequired};const K=U;var z=document.getElementById("invenio-details-config"),j=z.dataset.title,q=JSON.parse(z.dataset.fields),H=JSON.parse(z.dataset.pid),V=JSON.parse(z.dataset.resourceName),W=JSON.parse(z.dataset.displayEdit),X=JSON.parse(z.dataset.displayDelete),G=JSON.parse(z.dataset.actions),Q=s()(z.dataset,"apiEndpoint"),Y=JSON.parse(s()(z.dataset,"pidPath","pid")),Z=z.dataset.listEndpoint,$=JSON.parse(z.dataset.resourceSchema),ee=JSON.parse(z.dataset.uiConfig),te=function(e){return null===e||void 0===e?void 0:e.system_created},ae={"InvenioAdministration.EditAction":(0,o.parametrize)(M.ff,{disable:te,disabledMessage:g.M.t("This set is not editable as it was created by the system.")}),"InvenioAdministration.DeleteAction":(0,o.parametrize)(M.ep,{disable:te,disabledMessage:g.M.t("This set is not deletable as it was created by the system.")})};z&&n.render(r.createElement(o.OverridableContext.Provider,{value:ae},r.createElement(M.r4,{title:j,actions:G,apiEndpoint:Q,columns:q,displayEdit:W,displayDelete:X,pid:H,idKeyPath:Y,resourceName:V,listUIEndpoint:Z,resourceSchema:$,uiSchema:ee},r.createElement(K,null))),z)},11990:(e,t,a)=>{"use strict";a.d(t,{M:()=>p});var r=a(47127),n=a(17508);const i=JSON.parse('{"Copy to clipboard":"Copy to clipboard","Copied!":"Copied!","This set is not editable as it was created by the system.":"This set is not editable as it was created by the system.","This set is not deletable as it was created by the system.":"This set is not deletable as it was created by the system.","Links":"Links","Format":"Format","List records":"List records","Opens in new tab":"Opens in new tab","List identifiers":"List identifiers","Before deleting, make sure to alert all harvesters that this set will no longer be available.":"Before deleting, make sure to alert all harvesters that this set will no longer be available.","I have alerted all harvesters that this set will no longer be available.":"I have alerted all harvesters that this set will no longer be available.","Cancel":"Cancel","Delete":"Delete","Delete {{title}}":"Delete {{title}}","This will delete the set \'{{title}}\'.":"This will delete the set \'{{title}}\'."}'),s=JSON.parse('{"Copy to clipboard":"","Copied!":"","This set is not editable as it was created by the system.":"","This set is not deletable as it was created by the system.":"","Links":"","Format":"","List records":"","Opens in new tab":"","List identifiers":"","Before deleting, make sure to alert all harvesters that this set will no longer be available.":"","I have alerted all harvesters that this set will no longer be available.":"","Cancel":"","Delete":"","Delete {{title}}":"Delete {{title}}","This will delete the set \'{{title}}\'.":"This will delete the set \'{{title}}\'."}');var o={el:{translation:JSON.parse('{"Copy to clipboard":"","Copied!":"","This set is not editable as it was created by the system.":"","This set is not deletable as it was created by the system.":"","Links":"","Format":"","List records":"","Opens in new tab":"","List identifiers":"","Before deleting, make sure to alert all harvesters that this set will no longer be available.":"","I have alerted all harvesters that this set will no longer be available.":"","Cancel":"","Delete":"","Delete {{title}}":"Delete {{title}}","This will delete the set \'{{title}}\'.":"This will delete the set \'{{title}}\'."}')},en:{translation:i},de:{translation:s}},l=a(65414),c={fallbackLng:"en",returnEmptyString:!1,debug:!1,resources:o,keySeparator:!1,nsSeparator:!1,detection:{order:["htmlTag"],caches:[]},react:{transKeepBasicHtmlNodesFor:[]}},p=r.A.createInstance();p.use(n.A).use(l.r9).init(c)},12507:(e,t,a)=>{var r=a(28754),n=a(49698),i=a(63912),s=a(13222);e.exports=function(e){return function(t){t=s(t);var a=n(t)?i(t):void 0,o=a?a[0]:t.charAt(0),l=a?r(a,1).join(""):t.slice(1);return o[e]()+l}}},92411:(e,t,a)=>{var r=a(13222),n=a(55808);e.exports=function(e){return n(r(e).toLowerCase())}},73916:(e,t,a)=>{var r=a(43360),n=a(30641),i=a(15389);e.exports=function(e,t){var a={};return t=i(t,3),n(e,(function(e,n,i){r(a,n,t(e,n,i))})),a}},63560:(e,t,a)=>{var r=a(73170);e.exports=function(e,t,a){return null==e?e:r(e,t,a)}},55808:(e,t,a)=>{var r=a(12507)("toUpperCase");e.exports=r}},e=>{e.O(0,[402,1057,7655,5373,6267,9777,7501,9809,6528,4903,2913,4826,4812],(()=>{return t=73468,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=invenio-oai-pmh-details.7dffc6f0e424a519d37f.js.map